{
  final int[] orderdEntries=new int[size()];
  for (int i=0; i < orderdEntries.length; i++) {
    orderdEntries[i]=i;
  }
  new SorterTemplate(){
    @Override protected void swap(    int i,    int j){
      final int o=orderdEntries[i];
      orderdEntries[i]=orderdEntries[j];
      orderdEntries[j]=o;
    }
    @Override protected int compare(    int i,    int j){
      final int ord1=orderdEntries[i], ord2=orderdEntries[j];
      return comp.compare(get(scratch1,ord1),get(scratch2,ord2));
    }
    @Override protected void setPivot(    int i){
      final int ord=orderdEntries[i];
      get(pivot,ord);
    }
    @Override protected int comparePivot(    int j){
      final int ord=orderdEntries[j];
      return comp.compare(pivot,get(scratch2,ord));
    }
    private final BytesRef pivot=new BytesRef(), scratch1=new BytesRef(), scratch2=new BytesRef();
  }
.quickSort(0,size() - 1);
  return orderdEntries;
}
