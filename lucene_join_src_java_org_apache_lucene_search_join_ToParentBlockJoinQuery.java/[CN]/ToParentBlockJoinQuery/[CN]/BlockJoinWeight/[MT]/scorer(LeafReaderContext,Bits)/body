{
  final Scorer childScorer=childWeight.scorer(readerContext,readerContext.reader().getLiveDocs());
  if (childScorer == null) {
    return null;
  }
  final int firstChildDoc=childScorer.nextDoc();
  if (firstChildDoc == DocIdSetIterator.NO_MORE_DOCS) {
    return null;
  }
  final DocIdSet parents=parentsFilter.getDocIdSet(readerContext,null);
  if (parents == null) {
    return null;
  }
  if (!(parents.bits() instanceof FixedBitSet)) {
    throw new IllegalStateException("parentFilter must return FixedBitSet; got " + parents.bits());
  }
  return new BlockJoinScorer(this,childScorer,(FixedBitSet)parents.bits(),firstChildDoc,scoreMode,acceptDocs);
}
