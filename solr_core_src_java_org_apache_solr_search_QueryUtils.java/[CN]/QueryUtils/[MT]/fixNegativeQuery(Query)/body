{
  float boost=1f;
  if (q instanceof BoostQuery) {
    BoostQuery bq=(BoostQuery)q;
    boost=bq.getBoost();
    q=bq.getQuery();
  }
  BooleanQuery bq=(BooleanQuery)q;
  BooleanQuery.Builder newBqB=new BooleanQuery.Builder();
  newBqB.setDisableCoord(bq.isCoordDisabled());
  newBqB.setMinimumNumberShouldMatch(bq.getMinimumNumberShouldMatch());
  for (  BooleanClause clause : bq) {
    newBqB.add(clause);
  }
  newBqB.add(new MatchAllDocsQuery(),Occur.MUST);
  BooleanQuery newBq=newBqB.build();
  return new BoostQuery(newBq,boost);
}
