{
  this.numDirs=numDirs;
  this.mainWriter=mainWriter;
  addDir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(addDir,new WhitespaceAnalyzer(Version.LUCENE_CURRENT),IndexWriter.MaxFieldLength.LIMITED);
  writer.setMaxBufferedDocs(2);
  for (int i=0; i < NUM_INIT_DOCS; i++) {
    Document doc=createDocument(i,"addindex",4);
    writer.addDocument(doc);
  }
  writer.close();
  readers=new IndexReader[numDirs];
  for (int i=0; i < numDirs; i++)   readers[i]=IndexReader.open(addDir,false);
}
