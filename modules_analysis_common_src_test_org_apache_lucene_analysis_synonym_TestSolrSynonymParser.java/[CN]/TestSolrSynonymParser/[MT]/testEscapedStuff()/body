{
  String testFile="a\\=>a => b\\=>b\n" + "a\\,a => b\\,b";
  SolrSynonymParser parser=new SolrSynonymParser(true,true,new MockAnalyzer(random(),MockTokenizer.KEYWORD,false));
  parser.add(new StringReader(testFile));
  final SynonymMap map=parser.build();
  Analyzer analyzer=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      Tokenizer tokenizer=new MockTokenizer(reader,MockTokenizer.KEYWORD,false);
      return new TokenStreamComponents(tokenizer,new SynonymFilter(tokenizer,map,false));
    }
  }
;
  assertAnalyzesTo(analyzer,"ball",new String[]{"ball"},new int[]{1});
  assertAnalyzesTo(analyzer,"a=>a",new String[]{"b=>b"},new int[]{1});
  assertAnalyzesTo(analyzer,"a,a",new String[]{"b,b"},new int[]{1});
}
