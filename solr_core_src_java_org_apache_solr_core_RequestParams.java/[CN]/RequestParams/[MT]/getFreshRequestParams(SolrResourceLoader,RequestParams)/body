{
  if (loader instanceof ZkSolrResourceLoader) {
    ZkSolrResourceLoader resourceLoader=(ZkSolrResourceLoader)loader;
    try {
      Stat stat=resourceLoader.getZkController().getZkClient().exists(resourceLoader.getConfigSetZkPath() + "/" + RequestParams.RESOURCE,null,true);
      if (stat == null) {
        requestParams=new RequestParams(Collections.EMPTY_MAP,-1);
      }
 else       if (requestParams == null || stat.getVersion() > requestParams.getZnodeVersion()) {
        Object[] o=getMapAndVersion(loader,RequestParams.RESOURCE);
        requestParams=new RequestParams((Map)o[0],(Integer)o[1]);
        log.info("request params refreshed to version {}",requestParams.getZnodeVersion());
      }
    }
 catch (    KeeperException e) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
    }
catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
    }
  }
 else   if (requestParams == null) {
    Object[] o=getMapAndVersion(loader,RequestParams.RESOURCE);
    requestParams=new RequestParams((Map)o[0],(Integer)o[1]);
  }
  return requestParams;
}
