{
  Map deepCopy=Utils.getDeepCopy(data,3);
  Map p=(Map)deepCopy.get(NAME);
  if (p == null)   deepCopy.put(NAME,p=new LinkedHashMap());
  if (values == null) {
    p.remove(name);
  }
 else {
    Map old=(Map)p.get(name);
    long version=0;
    Map meta=null;
    if (old != null) {
      meta=(Map)old.get("");
      if (meta != null) {
        Long oldVersion=(Long)old.get("v");
        if (oldVersion != null)         version=oldVersion.longValue() + 1;
      }
      meta=new LinkedHashMap<>(meta);
    }
 else {
      meta=new LinkedHashMap<>();
    }
    meta.put("v",version);
    values=new LinkedHashMap<>(values);
    values.put("",meta);
    p.put(name,values);
  }
  return new RequestParams(deepCopy,znodeVersion);
}
