{
  File lineFile=new File(System.getProperty("tempDir"),"test.reuters.lines.txt");
  final int NUM_TRY_DOCS=500;
  String algLines1[]={"# ----- properties ","content.source=org.apache.lucene.benchmark.byTask.feeds.ReutersContentSource","content.source.forever=false","line.file.out=" + lineFile.getAbsolutePath().replace('\\','/'),"# ----- alg ","{WriteLineDoc()}:" + NUM_TRY_DOCS};
  Benchmark benchmark=execBenchmark(algLines1);
  BufferedReader r=new BufferedReader(new FileReader(lineFile));
  int numLines=0;
  while (r.readLine() != null)   numLines++;
  r.close();
  assertTrue("did not see the right number of docs; should be > 0 and <= " + NUM_TRY_DOCS + " but was "+ numLines,numLines > 0 && numLines <= NUM_TRY_DOCS);
  String algLines2[]={"# ----- properties ","analyzer=org.apache.lucene.analysis.SimpleAnalyzer","content.source=org.apache.lucene.benchmark.byTask.feeds.LineDocSource","docs.file=" + lineFile.getAbsolutePath().replace('\\','/'),"content.source.forever=false","doc.reuse.fields=false","ram.flush.mb=4","# ----- alg ","ResetSystemErase","CreateIndex","{AddDoc}: *","CloseIndex"};
  benchmark=execBenchmark(algLines2);
  IndexWriter iw=new IndexWriter(benchmark.getRunData().getDirectory(),null,false,IndexWriter.MaxFieldLength.UNLIMITED);
  iw.close();
  IndexReader ir=IndexReader.open(benchmark.getRunData().getDirectory(),true);
  assertEquals(numLines + " lines were created but " + ir.numDocs()+ " docs are in the index",numLines,ir.numDocs());
  ir.close();
  lineFile.delete();
}
