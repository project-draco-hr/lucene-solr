{
  while (true) {
    if (docUpto == docFreq) {
      return doc=NO_MORE_DOCS;
    }
    if (docBufferUpto == BLOCK_SIZE) {
      refillDocs();
    }
    accum+=docDeltaBuffer[docBufferUpto];
    freq=freqBuffer[docBufferUpto];
    posPendingCount+=freq;
    docBufferUpto++;
    docUpto++;
    if (liveDocs == null || liveDocs.get(accum)) {
      doc=accum;
      position=0;
      return doc;
    }
  }
}
