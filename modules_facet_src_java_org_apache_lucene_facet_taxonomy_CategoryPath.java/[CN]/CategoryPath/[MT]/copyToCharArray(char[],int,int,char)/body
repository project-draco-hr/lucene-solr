{
  if (numberOfComponentsToCopy == 0) {
    return 0;
  }
  if (numberOfComponentsToCopy < 0 || numberOfComponentsToCopy > ncomponents) {
    numberOfComponentsToCopy=ncomponents;
  }
  int outputBufferInitialStart=outputBufferStart;
  int sourceStart=0;
  int sourceLength=ends[0];
  for (int component=0; component < numberOfComponentsToCopy; component++) {
    if (component > 0) {
      sourceStart=ends[component - 1];
      sourceLength=ends[component] - sourceStart;
      outputBuffer[outputBufferStart++]=separatorChar;
    }
    System.arraycopy(chars,sourceStart,outputBuffer,outputBufferStart,sourceLength);
    outputBufferStart+=sourceLength;
  }
  return outputBufferStart - outputBufferInitialStart;
}
