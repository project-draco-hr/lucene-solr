{
  final CodecProvider cp=CodecProvider.getDefault();
  savedDefaultCodec=CodecProvider.getDefaultCodec();
  String codec=TEST_CODEC;
  if (codec.equals("random")) {
    codec=pickRandomCodec(seedRnd);
  }
  CodecProvider.setDefaultCodec(codec);
  if (codec.equals("PreFlex")) {
    swapCodec(new PreFlexRWCodec());
  }
  swapCodec(new MockSepCodec());
  swapCodec(new MockFixedIntBlockCodec());
  return codec;
}
