{
  inject=getBoolean(INJECT,true);
  String name=args.get(ENCODER);
  if (name == null) {
    throw new IllegalArgumentException("Missing required parameter: " + ENCODER + " ["+ registry.keySet()+ "]");
  }
  clazz=registry.get(name.toUpperCase(Locale.ROOT));
  if (clazz == null) {
    clazz=resolveEncoder(name,loader);
  }
  String v=args.get(MAX_CODE_LENGTH);
  if (v != null) {
    maxCodeLength=Integer.valueOf(v);
    try {
      setMaxCodeLenMethod=clazz.getMethod("setMaxCodeLen",int.class);
    }
 catch (    Exception e) {
      throw new IllegalArgumentException("Encoder " + name + " / "+ clazz+ " does not support "+ MAX_CODE_LENGTH,e);
    }
  }
  getEncoder();
}
