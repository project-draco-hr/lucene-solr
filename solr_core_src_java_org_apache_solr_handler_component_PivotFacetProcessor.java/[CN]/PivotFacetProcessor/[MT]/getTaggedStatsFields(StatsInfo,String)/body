{
  if (null == statsLocalParam || null == statsInfo) {
    return Collections.emptyList();
  }
  List<StatsField> fields=new ArrayList<>(7);
  List<String> statsAr=StrUtils.splitSmart(statsLocalParam,',');
  if (1 < statsAr.size()) {
    String msg=StatsParams.STATS + " local param of " + FacetParams.FACET_PIVOT+ "may not include tags separated by a comma - please use a common tag on all "+ StatsParams.STATS_FIELD+ " params you wish to compute under this pivot";
    throw new SolrException(ErrorCode.BAD_REQUEST,msg);
  }
  for (  String stat : statsAr) {
    fields.addAll(statsInfo.getStatsFieldsByTag(stat));
  }
  return fields;
}
