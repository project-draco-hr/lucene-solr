{
  List<FieldInfo> shuffled=new ArrayList<>();
  for (  FieldInfo info : infos) {
    shuffled.add(info);
  }
  Collections.shuffle(shuffled,random);
  for (int i=0; i < shuffled.size(); i++) {
    FieldInfo oldInfo=shuffled.get(i);
    FieldInfo newInfo=new FieldInfo(oldInfo.name,i,oldInfo.hasVectors(),oldInfo.omitsNorms(),oldInfo.hasPayloads(),oldInfo.getIndexOptions(),oldInfo.getDocValuesType(),oldInfo.getDocValuesGen(),oldInfo.attributes(),0,0);
    shuffled.set(i,newInfo);
  }
  return new FieldInfos(shuffled.toArray(new FieldInfo[shuffled.size()]));
}
