{
  FacetSearchParams fsp=new FacetSearchParams(getFacetIndexingParams(Integer.MAX_VALUE),new CountFacetRequest(new CategoryPath("root","a"),10));
  FacetsAccumulator fAccumulator=new StandardFacetsAccumulator(fsp,indexReader,taxoReader);
  fAccumulator.setComplementThreshold(withComplement ? FacetsAccumulator.FORCE_COMPLEMENT : FacetsAccumulator.DISABLE_COMPLEMENT);
  List<FacetResult> res=fAccumulator.accumulate(sDocids);
  int i=0;
  for (  FacetResult facetResult : res) {
    if (VERBOSE) {
      System.out.println("Res " + (i++) + ": "+ facetResult);
    }
  }
  assertEquals(withComplement,((StandardFacetsAccumulator)fAccumulator).isUsingComplements);
  return res;
}
