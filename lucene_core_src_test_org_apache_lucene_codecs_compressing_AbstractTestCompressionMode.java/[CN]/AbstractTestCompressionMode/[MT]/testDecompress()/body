{
  final int iterations=atLeast(10);
  for (int i=0; i < iterations; ++i) {
    final byte[] decompressed=randomArray();
    final int off=random().nextBoolean() ? 0 : _TestUtil.nextInt(random(),0,decompressed.length);
    final int len=random().nextBoolean() ? decompressed.length - off : _TestUtil.nextInt(random(),0,decompressed.length - off);
    final byte[] compressed=compress(decompressed,off,len);
    final byte[] restored=decompress(compressed,len);
    assertArrayEquals(Arrays.copyOfRange(decompressed,off,off + len),restored);
  }
}
