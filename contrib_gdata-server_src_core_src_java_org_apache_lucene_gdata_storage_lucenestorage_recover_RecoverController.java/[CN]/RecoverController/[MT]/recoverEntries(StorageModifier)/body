{
  if (!this.recover) {
    LOG.warn("Can't recover entries, Recovercontroller is initialized in write mode");
    return;
  }
  this.lock.lock();
  try {
    this.reader=new RecoverReader();
    File[] files=this.recoverDirectory.listFiles();
    for (int i=0; i < files.length; i++) {
      if (!files[i].isDirectory()) {
        try {
          LOG.info("Recover file -- " + files[i]);
          this.fileReader=new BufferedReader(new FileReader(files[i]));
          List<StorageEntryWrapper> entryList=this.reader.recoverEntries(this.fileReader);
          if (entryList.size() == 0)           continue;
          storeEntries(entryList,modifier);
          this.fileReader.close();
          if (!this.keepRecoverFiles) {
            LOG.info("Recovering file -- " + files[i] + " successful, delete file");
            files[i].delete();
          }
        }
 catch (        StorageException e) {
          LOG.error("Can't store recover entries for file: " + files[i].getName() + " -- keep file "+ e.getMessage(),e);
        }
catch (        IOException e) {
          LOG.error("Can't recover entries for file: " + files[i].getName() + " -- keep file",e);
        }
      }
    }
  }
  finally {
    this.lock.unlock();
  }
}
