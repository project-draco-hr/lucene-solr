{
  String query="(field1:[1 TO *] AND field1:[* TO 2]) AND field2:(z)";
  BooleanQuery q=new BooleanQuery();
  BooleanQuery bq=new BooleanQuery();
  bq.add(TermRangeQuery.newStringRange("field1","1",null,true,true),BooleanClause.Occur.MUST);
  bq.add(TermRangeQuery.newStringRange("field1",null,"2",true,true),BooleanClause.Occur.MUST);
  q.add(bq,BooleanClause.Occur.MUST);
  q.add(new TermQuery(new Term("field2","z")),BooleanClause.Occur.MUST);
  assertEquals(q,getQuery(query,new MockAnalyzer(random())));
}
