{
  this.core=core;
  idField=core.getLatestSchema().getUniqueKeyField();
  idFieldType=idField != null ? idField.getType() : null;
  parseEventListeners();
  PluginInfo ulogPluginInfo=core.getSolrConfig().getPluginInfo(UpdateLog.class.getName());
  if (!core.isReloaded() && !core.getDirectoryFactory().isPersistent()) {
    clearLog(ulogPluginInfo);
  }
  if (updateLog == null && ulogPluginInfo != null && ulogPluginInfo.isEnabled()) {
    ulog=new UpdateLog();
    ulog.init(ulogPluginInfo);
    ulog.init(this,core);
  }
 else {
    ulog=updateLog;
  }
}
