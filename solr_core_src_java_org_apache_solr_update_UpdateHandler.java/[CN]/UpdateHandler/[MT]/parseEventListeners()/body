{
  final Class<SolrEventListener> clazz=SolrEventListener.class;
  final String label="Event Listener";
  for (  PluginInfo info : core.getSolrConfig().getPluginInfos(SolrEventListener.class.getName())) {
    String event=info.attributes.get("event");
    if ("postCommit".equals(event)) {
      SolrEventListener obj=core.createInitInstance(info,clazz,label,null);
      commitCallbacks.add(obj);
      log.info("added SolrEventListener for postCommit: " + obj);
    }
 else     if ("postOptimize".equals(event)) {
      SolrEventListener obj=core.createInitInstance(info,clazz,label,null);
      optimizeCallbacks.add(obj);
      log.info("added SolrEventListener for postOptimize: " + obj);
    }
  }
}
