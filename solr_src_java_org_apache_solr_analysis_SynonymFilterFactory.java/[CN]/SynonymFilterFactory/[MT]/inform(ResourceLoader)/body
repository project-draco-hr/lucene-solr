{
  String synonyms=args.get("synonyms");
  if (synonyms == null)   throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Missing required argument 'synonyms'.");
  boolean ignoreCase=getBoolean("ignoreCase",false);
  boolean expand=getBoolean("expand",true);
  String tf=args.get("tokenizerFactory");
  TokenizerFactory tokFactory=null;
  if (tf != null) {
    tokFactory=loadTokenizerFactory(loader,tf,args);
  }
  List<String> wlist=null;
  try {
    File synonymFile=new File(synonyms);
    if (synonymFile.exists()) {
      wlist=loader.getLines(synonyms);
    }
 else {
      List<String> files=StrUtils.splitFileNames(synonyms);
      wlist=new ArrayList<String>();
      for (      String file : files) {
        List<String> lines=loader.getLines(file.trim());
        wlist.addAll(lines);
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  synMap=new SynonymMap(ignoreCase);
  parseRules(wlist,synMap,"=>",",",expand,tokFactory);
}
