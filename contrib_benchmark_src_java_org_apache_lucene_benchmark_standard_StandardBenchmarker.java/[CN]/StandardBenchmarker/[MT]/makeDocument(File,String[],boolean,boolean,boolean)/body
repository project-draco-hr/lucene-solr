{
  Document doc=new Document();
  if (tags != null) {
    for (int i=0; i < tags.length; i++) {
      doc.add(new Field("tag" + i,tags[i],stored == true ? Field.Store.YES : Field.Store.NO,tokenized == true ? Field.Index.TOKENIZED : Field.Index.UN_TOKENIZED,tfv == true ? Field.TermVector.YES : Field.TermVector.NO));
    }
  }
  doc.add(new Field("file",in.getCanonicalPath(),stored == true ? Field.Store.YES : Field.Store.NO,tokenized == true ? Field.Index.TOKENIZED : Field.Index.UN_TOKENIZED,tfv == true ? Field.TermVector.YES : Field.TermVector.NO));
  BufferedReader reader=new BufferedReader(new FileReader(in));
  String line=null;
  String dateStr=reader.readLine();
  reader.readLine();
  String title=reader.readLine();
  reader.readLine();
  StringBuffer body=new StringBuffer(1024);
  while ((line=reader.readLine()) != null) {
    body.append(line).append(' ');
  }
  Date date=format.parse(dateStr.trim());
  doc.add(new Field("date",DateTools.dateToString(date,DateTools.Resolution.SECOND),Field.Store.YES,Field.Index.UN_TOKENIZED));
  if (title != null) {
    doc.add(new Field("title",title,stored == true ? Field.Store.YES : Field.Store.NO,tokenized == true ? Field.Index.TOKENIZED : Field.Index.UN_TOKENIZED,tfv == true ? Field.TermVector.YES : Field.TermVector.NO));
  }
  if (body.length() > 0) {
    doc.add(new Field("body",body.toString(),stored == true ? Field.Store.YES : Field.Store.NO,tokenized == true ? Field.Index.TOKENIZED : Field.Index.UN_TOKENIZED,tfv == true ? Field.TermVector.YES : Field.TermVector.NO));
  }
  return doc;
}
