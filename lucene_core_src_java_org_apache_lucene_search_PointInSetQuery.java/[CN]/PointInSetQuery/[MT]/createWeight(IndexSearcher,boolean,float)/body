{
  return new ConstantScoreWeight(this,boost){
    @Override public Scorer scorer(    LeafReaderContext context) throws IOException {
      LeafReader reader=context.reader();
      PointValues values=reader.getPointValues(field);
      if (values == null) {
        return null;
      }
      if (values.getNumDimensions() != numDims) {
        throw new IllegalArgumentException("field=\"" + field + "\" was indexed with numDims="+ values.getNumDimensions()+ " but this query has numDims="+ numDims);
      }
      if (values.getBytesPerDimension() != bytesPerDim) {
        throw new IllegalArgumentException("field=\"" + field + "\" was indexed with bytesPerDim="+ values.getBytesPerDimension()+ " but this query has bytesPerDim="+ bytesPerDim);
      }
      DocIdSetBuilder result=new DocIdSetBuilder(reader.maxDoc(),values,field);
      if (numDims == 1) {
        values.intersect(new MergePointVisitor(sortedPackedPoints,result));
      }
 else {
        SinglePointVisitor visitor=new SinglePointVisitor(result);
        TermIterator iterator=sortedPackedPoints.iterator();
        for (BytesRef point=iterator.next(); point != null; point=iterator.next()) {
          visitor.setPoint(point);
          values.intersect(visitor);
        }
      }
      return new ConstantScoreScorer(this,score(),result.build().iterator());
    }
  }
;
}
