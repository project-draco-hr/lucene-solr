{
  StringBuilder buffer=new StringBuilder();
  BytesRefBuilder scratch=new BytesRefBuilder();
  for (  IntsRef context : contexts.keySet()) {
    if (buffer.length() != 0) {
      buffer.append(",");
    }
 else {
      buffer.append("contexts");
      buffer.append(":[");
    }
    buffer.append(Util.toBytesRef(context,scratch).utf8ToString());
    ContextMetaData metaData=contexts.get(context);
    if (metaData.exact == false) {
      buffer.append("*");
    }
    if (metaData.boost != 0) {
      buffer.append("^");
      buffer.append(Float.toString(metaData.boost));
    }
  }
  if (buffer.length() != 0) {
    buffer.append("]");
    buffer.append(",");
  }
  return buffer.toString() + innerQuery.toString(field);
}
