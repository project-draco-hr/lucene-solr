{
  ClusterState state;
  Slice slice;
  boolean ruleRemoved=false;
  while (System.currentTimeMillis() - finishTime < 60000) {
    getCommonCloudSolrClient().getZkStateReader().updateClusterState();
    state=getCommonCloudSolrClient().getZkStateReader().getClusterState();
    slice=state.getSlice(AbstractDistribZkTestBase.DEFAULT_COLLECTION,SHARD2);
    Map<String,RoutingRule> routingRules=slice.getRoutingRules();
    if (routingRules == null || routingRules.isEmpty() || !routingRules.containsKey(splitKey)) {
      ruleRemoved=true;
      break;
    }
    SolrInputDocument doc=new SolrInputDocument();
    doc.addField("id",splitKey + System.currentTimeMillis());
    cloudClient.add(doc);
    Thread.sleep(1000);
  }
  return ruleRemoved;
}
