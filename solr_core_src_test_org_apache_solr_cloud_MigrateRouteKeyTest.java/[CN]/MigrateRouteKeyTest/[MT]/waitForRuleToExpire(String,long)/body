{
  ClusterState state;
  Slice slice;
  boolean ruleRemoved=false;
  long expiryTime=finishTime + TimeUnit.NANOSECONDS.convert(60,TimeUnit.SECONDS);
  while (System.nanoTime() < expiryTime) {
    getCommonCloudSolrClient().getZkStateReader().updateClusterState();
    state=getCommonCloudSolrClient().getZkStateReader().getClusterState();
    slice=state.getSlice(AbstractDistribZkTestBase.DEFAULT_COLLECTION,SHARD2);
    Map<String,RoutingRule> routingRules=slice.getRoutingRules();
    if (routingRules == null || routingRules.isEmpty() || !routingRules.containsKey(splitKey)) {
      ruleRemoved=true;
      break;
    }
    SolrInputDocument doc=new SolrInputDocument();
    doc.addField("id",splitKey + random().nextInt());
    cloudClient.add(doc);
    Thread.sleep(1000);
  }
  return ruleRemoved;
}
