{
  HashMap<String,List<Integer>> collectionInfos=new HashMap<>();
  CloudSolrClient client=null;
  try {
    client=createCloudClient(null);
    Map<String,Object> props=ZkNodeProps.makeMap(REPLICATION_FACTOR,1,MAX_SHARDS_PER_NODE,5,NUM_SLICES,1);
    createCollection(collectionInfos,targetCollection,props,client);
  }
  finally {
    if (client != null)     client.shutdown();
  }
  List<Integer> list=collectionInfos.get(targetCollection);
  checkForCollection(targetCollection,list,null);
  waitForRecoveriesToFinish(targetCollection,false);
}
