{
  int promotedFlags=promoter.flags & this.flags;
  TypePromoter promoted=reset(FLAGS_MAP.get(promotedFlags),valueSize,spare);
  if (promoted == null) {
    return TypePromoter.create(DocValues.Type.BYTES_VAR_STRAIGHT,TypePromoter.VAR_TYPE_VALUE_SIZE);
  }
  if ((promoted.flags & IS_BYTE) != 0 && (promoted.flags & IS_FIXED) == IS_FIXED) {
    if (this.valueSize == promoter.valueSize) {
      return promoted;
    }
    return reset(FLAGS_MAP.get(promoted.flags & PROMOTE_TO_VAR_SIZE_MASK),VAR_TYPE_VALUE_SIZE,spare);
  }
  return promoted;
}
