{
  String field="field" + variant.TRIE_BITS;
  for (int i=0; i < 10; i++) {
    long lower=(long)(rnd.nextDouble() * 10000L * distance);
    long upper=(long)(rnd.nextDouble() * 10000L * distance);
    if (lower > upper) {
      long a=lower;
      lower=upper;
      upper=a;
    }
    TrieRangeQuery tq=new TrieRangeQuery(field,new Long(lower),new Long(upper),variant);
    TopDocs topDocs=searcher.search(tq,null,10000,new Sort(variant.getSortField(field,true)));
    if (topDocs.totalHits == 0)     continue;
    ScoreDoc[] sd=topDocs.scoreDocs;
    assertNotNull(sd);
    long last=variant.trieCodedToLong(searcher.doc(sd[0].doc).get(field));
    for (int j=1; j < sd.length; j++) {
      long act=variant.trieCodedToLong(searcher.doc(sd[j].doc).get(field));
      assertTrue("Docs should be sorted backwards",last > act);
      last=act;
    }
  }
}
