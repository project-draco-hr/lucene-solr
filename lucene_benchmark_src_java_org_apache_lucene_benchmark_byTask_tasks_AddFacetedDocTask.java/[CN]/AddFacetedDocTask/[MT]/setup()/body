{
  super.setup();
  if (facetFields == null) {
    boolean withFacets=getRunData().getConfig().get("with.facets",true);
    if (withFacets) {
      FacetSource facetsSource=getRunData().getFacetSource();
      facetFields=withFacets ? new FacetFields(getRunData().getTaxonomyWriter()) : null;
      facetsSource.getNextFacets(facets);
    }
  }
}
