{
  ServerBaseEntry e=createServerBaseEntry(ENTRYID,FEEDID);
  StorageEntryWrapper wrapper=new StorageEntryWrapper(e,StorageOperation.INSERT);
  this.buffer.addEntry(wrapper);
  assertEquals(1,this.buffer.getSortedEntries(FEEDID).size());
  this.buffer.addEntry(wrapper);
  assertEquals(1,this.buffer.getSortedEntries(FEEDID).size());
  e.setId("someotherID");
  e.setFeedId(FEEDID);
  e.setServiceConfig(new ProvidedServiceStub());
  wrapper=new StorageEntryWrapper(e,StorageOperation.INSERT);
  this.buffer.addEntry(wrapper);
  assertEquals(2,this.buffer.getSortedEntries(FEEDID).size());
  e.setId("someotherID");
  e.setFeedId("someOtherFeed");
  e.setServiceConfig(new ProvidedServiceStub());
  wrapper=new StorageEntryWrapper(e,StorageOperation.UPDATE);
  this.buffer.addEntry(wrapper);
  wrapper=new StorageEntryWrapper(e,StorageOperation.DELETE);
  e.setId("deleted and ingnored");
  e.setFeedId("someOtherFeed");
  e.setServiceConfig(new ProvidedServiceStub());
  this.buffer.addEntry(wrapper);
  assertEquals(2,this.buffer.getSortedEntries(FEEDID).size());
  assertEquals(1,this.buffer.getSortedEntries("someOtherFeed").size());
  assertEquals("Contains 2 different IDs",2,this.buffer.getExculdList().length);
}
