{
  BitSet returnBits=null;
  if (shouldFilters != null) {
    returnBits=((Filter)shouldFilters.get(0)).bits(reader);
    returnBits=(BitSet)returnBits.clone();
    if (shouldFilters.size() > 1) {
      for (int i=1; i < shouldFilters.size(); i++) {
        returnBits.or(((Filter)shouldFilters.get(i)).bits(reader));
      }
    }
  }
  if (notFilters != null) {
    for (int i=0; i < notFilters.size(); i++) {
      BitSet notBits=((Filter)notFilters.get(i)).bits(reader);
      if (returnBits == null) {
        returnBits=(BitSet)notBits.clone();
        returnBits.flip(0,reader.maxDoc());
      }
 else {
        returnBits.andNot(notBits);
      }
    }
  }
  if (mustFilters != null) {
    for (int i=0; i < mustFilters.size(); i++) {
      BitSet mustBits=((Filter)mustFilters.get(i)).bits(reader);
      if (returnBits == null) {
        if (mustFilters.size() == 1) {
          returnBits=mustBits;
        }
 else {
          returnBits=(BitSet)mustBits.clone();
        }
      }
 else {
        returnBits.and(mustBits);
      }
    }
  }
  if (returnBits == null) {
    returnBits=new BitSet(reader.maxDoc());
  }
  return returnBits;
}
