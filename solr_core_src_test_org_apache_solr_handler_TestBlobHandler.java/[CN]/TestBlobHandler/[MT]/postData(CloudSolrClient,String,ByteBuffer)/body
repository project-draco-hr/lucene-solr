{
  HttpPost httpPost=null;
  HttpEntity entity;
  String response=null;
  Replica leader=cloudClient.getZkStateReader().getClusterState().getCollection(".system").getActiveSlices().iterator().next().getLeader();
  try {
    httpPost=new HttpPost(leader.getStr(ZkStateReader.BASE_URL_PROP) + "/.system/blob/test");
    httpPost.setHeader("Content-Type","application/octet-stream");
    httpPost.setEntity(new ByteArrayEntity(bytarr.array(),bytarr.arrayOffset(),bytarr.limit()));
    entity=cloudClient.getLbClient().getHttpClient().execute(httpPost).getEntity();
    try {
      response=EntityUtils.toString(entity,StandardCharsets.UTF_8);
      Map m=(Map)ObjectBuilder.getVal(new JSONParser(new StringReader(response)));
      assertFalse("Error in posting blob " + getAsString(m),m.containsKey("error"));
    }
 catch (    JSONParser.ParseException e) {
      log.error(response);
      fail();
    }
  }
  finally {
    httpPost.releaseConnection();
  }
}
