{
  if (part == null)   return null;
  TokenStream source;
  try {
    source=analyzerIn.tokenStream(field,new StringReader(part));
    source.reset();
  }
 catch (  IOException e) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Unable to initialize TokenStream to analyze multiTerm term: " + part,e);
  }
  TermToBytesRefAttribute termAtt=source.getAttribute(TermToBytesRefAttribute.class);
  BytesRef bytes=termAtt.getBytesRef();
  try {
    if (!source.incrementToken())     throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"analyzer returned no terms for multiTerm term: " + part);
    termAtt.fillBytesRef();
    if (source.incrementToken())     throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"analyzer returned too many terms for multiTerm term: " + part);
  }
 catch (  IOException e) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"error analyzing range part: " + part,e);
  }
  try {
    source.end();
    source.close();
  }
 catch (  IOException e) {
    throw new RuntimeException("Unable to end & close TokenStream after analyzing multiTerm term: " + part,e);
  }
  return BytesRef.deepCopyOf(bytes);
}
