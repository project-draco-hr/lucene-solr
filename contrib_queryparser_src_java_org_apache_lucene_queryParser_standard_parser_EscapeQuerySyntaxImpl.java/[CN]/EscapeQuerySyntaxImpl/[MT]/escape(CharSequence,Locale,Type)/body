{
  if (text == null || text.length() == 0)   return text;
  if (text instanceof UnescapedCharSequence) {
    text=((UnescapedCharSequence)text).toStringEscaped(wildcardChars);
  }
 else {
    text=new UnescapedCharSequence(text).toStringEscaped(wildcardChars);
  }
  if (type == Type.STRING) {
    return escapeQuoted(text,locale);
  }
 else {
    return escapeTerm(text,locale);
  }
}
