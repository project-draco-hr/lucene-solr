{
  if (str == null || str.isEmpty())   throw new IllegalArgumentException("str is null or blank");
  if (str.charAt(0) == '[') {
    if (str.charAt(str.length() - 1) != ']')     throw new ParseException("If starts with [ must end with ]; got " + str,str.length() - 1);
    int middle=str.indexOf(" TO ");
    if (middle < 0)     throw new ParseException("If starts with [ must contain ' TO '; got " + str,-1);
    String leftStr=str.substring(1,middle);
    String rightStr=str.substring(middle + " TO ".length(),str.length() - 1);
    return toRangeShape(parseShapeLV(leftStr),parseShapeLV(rightStr));
  }
 else   if (str.charAt(0) == '{') {
    throw new ParseException("Exclusive ranges not supported; got " + str,0);
  }
 else {
    return parseShapeLV(str);
  }
}
