{
  ArrayList<ContentStream> streams=new ArrayList<ContentStream>();
  Map<String,String[]> params=new HashMap<String,String[]>();
  params.put("q",new String[]{"hello"});
  String[] ct=new String[]{"application/x-www-form-urlencoded","Application/x-www-form-urlencoded","application/x-www-form-urlencoded; charset=utf-8","application/x-www-form-urlencoded;"};
  for (  String contentType : ct) {
    HttpServletRequest request=createMock(HttpServletRequest.class);
    expect(request.getMethod()).andReturn("POST").anyTimes();
    expect(request.getContentType()).andReturn(contentType).anyTimes();
    expect(request.getParameterMap()).andReturn(params).anyTimes();
    replay(request);
    MultipartRequestParser multipart=new MultipartRequestParser(1000000);
    RawRequestParser raw=new RawRequestParser();
    StandardRequestParser standard=new StandardRequestParser(multipart,raw);
    SolrParams p=standard.parseParamsAndFillStreams(request,streams);
    assertEquals("contentType: " + contentType,"hello",p.get("q"));
  }
}
