{
  TermsEnum fieldTermsEnum=fieldTerms.iterator(null);
  Double[] freqVector=null;
  if (docTerms != null) {
    freqVector=new Double[(int)fieldTerms.size()];
    int i=0;
    TermsEnum docTermsEnum=docTerms.iterator(null);
    BytesRef term;
    while ((term=fieldTermsEnum.next()) != null) {
      TermsEnum.SeekStatus seekStatus=docTermsEnum.seekCeil(term);
      if (seekStatus.equals(TermsEnum.SeekStatus.END)) {
        docTermsEnum=docTerms.iterator(null);
      }
      if (seekStatus.equals(TermsEnum.SeekStatus.FOUND)) {
        long termFreqLocal=docTermsEnum.totalTermFreq();
        freqVector[i]=Long.valueOf(termFreqLocal).doubleValue();
      }
 else {
        freqVector[i]=0d;
      }
      i++;
    }
  }
  return freqVector;
}
