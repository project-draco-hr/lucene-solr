{
synchronized (LockTree.this) {
    if (action.lockLevel == LockLevel.NONE)     return FREELOCK;
    if (root.isBusy(action.lockLevel,path))     return null;
    Lock lockObject=LockTree.this.root.lock(action.lockLevel,path);
    if (lockObject == null)     root.markBusy(path,0);
    return lockObject;
  }
}
