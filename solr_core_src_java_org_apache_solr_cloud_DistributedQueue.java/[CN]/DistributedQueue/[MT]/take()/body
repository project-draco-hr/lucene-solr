{
  TimerContext timer=stats.time(dir + "_take");
  try {
    TreeMap<Long,String> orderedChildren=getChildren(Long.MAX_VALUE);
    for (    String headNode : orderedChildren.values()) {
      String path=dir + "/" + headNode;
      try {
        byte[] data=zookeeper.getData(path,null,null,true);
        zookeeper.delete(path,-1,true);
        return data;
      }
 catch (      KeeperException.NoNodeException e) {
      }
    }
    return null;
  }
  finally {
    timer.stop();
  }
}
