{
  TreeMap<Long,String> orderedChildren;
  while (true) {
    try {
      orderedChildren=orderedChildren(null);
    }
 catch (    KeeperException.NoNodeException e) {
      throw new NoSuchElementException();
    }
    if (orderedChildren.size() == 0)     throw new NoSuchElementException();
    for (    String headNode : orderedChildren.values()) {
      String path=dir + "/" + headNode;
      try {
        byte[] data=zookeeper.getData(path,false,null);
        zookeeper.delete(path,-1);
        return data;
      }
 catch (      KeeperException.NoNodeException e) {
      }
    }
  }
}
