{
  TreeMap<Long,String> orderedChildren=new TreeMap<Long,String>();
  List<String> childNames=null;
  try {
    childNames=zookeeper.getChildren(dir,watcher);
  }
 catch (  KeeperException.NoNodeException e) {
    throw e;
  }
  for (  String childName : childNames) {
    try {
      if (!childName.regionMatches(0,prefix,0,prefix.length())) {
        LOG.warn("Found child node with improper name: " + childName);
        continue;
      }
      String suffix=childName.substring(prefix.length());
      Long childId=new Long(suffix);
      orderedChildren.put(childId,childName);
    }
 catch (    NumberFormatException e) {
      LOG.warn("Found child node with improper format : " + childName + " "+ e,e);
    }
  }
  return orderedChildren;
}
