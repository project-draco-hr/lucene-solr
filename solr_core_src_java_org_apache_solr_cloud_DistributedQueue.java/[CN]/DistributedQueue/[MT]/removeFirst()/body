{
  while (true) {
    String firstChild=firstChild(true);
    if (firstChild == null) {
      return null;
    }
    try {
      String path=dir + "/" + firstChild;
      byte[] result=zookeeper.getData(path,null,null,true);
      zookeeper.delete(path,-1,true);
      return result;
    }
 catch (    KeeperException.NoNodeException e) {
      updateLock.lockInterruptibly();
      try {
        knownChildren.remove(firstChild);
      }
  finally {
        updateLock.unlock();
      }
    }
  }
}
