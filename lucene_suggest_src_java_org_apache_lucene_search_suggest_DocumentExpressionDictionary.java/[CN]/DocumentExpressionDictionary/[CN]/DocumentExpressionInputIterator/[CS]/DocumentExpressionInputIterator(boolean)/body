{
  super(hasPayloads);
  List<AtomicReaderContext> leaves=reader.leaves();
  if (leaves.size() > 1) {
    throw new IllegalArgumentException("CompositeReader is not supported");
  }
  weightValues=weightsValueSource.getValues(new HashMap<String,Object>(),leaves.get(0));
}
