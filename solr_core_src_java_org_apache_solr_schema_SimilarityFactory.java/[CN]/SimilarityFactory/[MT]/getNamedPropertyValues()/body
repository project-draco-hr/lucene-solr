{
  String className=getClass().getName();
  if (className.startsWith("org.apache.solr.schema.IndexSchema$")) {
    className=getSimilarity().getClass().getName();
  }
 else {
    className=normalizeSPIname(className);
  }
  SimpleOrderedMap<Object> props=new SimpleOrderedMap<Object>();
  props.add(CLASS_NAME,normalizeSPIname(className));
  if (null != params) {
    Iterator<String> iter=params.getParameterNamesIterator();
    while (iter.hasNext()) {
      String key=iter.next();
      props.add(key,params.get(key));
    }
  }
  return props;
}
