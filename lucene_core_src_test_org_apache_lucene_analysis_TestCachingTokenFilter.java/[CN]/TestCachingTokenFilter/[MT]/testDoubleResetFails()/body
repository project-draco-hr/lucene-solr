{
  Analyzer analyzer=new MockAnalyzer(random());
  final TokenStream input=analyzer.tokenStream("field","abc");
  CachingTokenFilter buffer=new CachingTokenFilter(input);
  buffer.reset();
  try {
    buffer.reset();
    fail("didn't get expected exception");
  }
 catch (  IllegalStateException e) {
    assertEquals("double reset()",e.getMessage());
  }
}
