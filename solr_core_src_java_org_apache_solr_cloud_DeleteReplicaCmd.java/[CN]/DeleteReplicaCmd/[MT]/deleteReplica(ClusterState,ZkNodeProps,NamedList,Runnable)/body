{
  log.debug("deleteReplica() : {}",Utils.toJSONString(message));
  boolean parallel=message.getBool("parallel",false);
  if (message.getStr(COUNT_PROP) != null) {
    deleteReplicaBasedOnCount(clusterState,message,results,onComplete,parallel);
    return;
  }
  ocmh.checkRequired(message,COLLECTION_PROP,SHARD_ID_PROP,REPLICA_PROP);
  String collectionName=message.getStr(COLLECTION_PROP);
  String shard=message.getStr(SHARD_ID_PROP);
  String replicaName=message.getStr(REPLICA_PROP);
  DocCollection coll=clusterState.getCollection(collectionName);
  Slice slice=coll.getSlice(shard);
  if (slice == null) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Invalid shard name : " + shard + " in collection : "+ collectionName);
  }
  deleteCore(slice,collectionName,replicaName,message,shard,results,onComplete,parallel);
}
