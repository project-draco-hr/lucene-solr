{
  StringBuilder b=new StringBuilder("digraph CompiledAutomaton {\n");
  b.append("  rankdir = LR;\n");
  int initial=0;
  for (int i=0; i < automaton.getNumStates(); i++) {
    b.append("  ").append(i);
    if (automaton.isAccept(i))     b.append(" [shape=doublecircle,label=\"\"];\n");
 else     b.append(" [shape=circle,label=\"\"];\n");
    if (i == 0) {
      b.append("  initial [shape=plaintext,label=\"\"];\n");
      b.append("  initial -> ").append(i).append("\n");
    }
    int numTransitions=automaton.initTransition(i,transition);
    for (int j=0; j < numTransitions; j++) {
      b.append("  ").append(i);
      b.append(" -> ");
      b.append(transition.dest);
      b.append(transition.min);
      if (transition.min != transition.max) {
        b.append("-");
        b.append(transition.max);
      }
      automaton.getNextTransition(transition);
    }
  }
  return b.append("}\n").toString();
}
