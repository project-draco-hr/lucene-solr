{
  XPathRecordReader rr=new XPathRecordReader("/anycd");
  rr.addField("descdend","/anycd//boo",true);
  String xml="<anycd>\n" + "  this <boo>top level</boo> is ignored because it is external to the forEach\n" + "  <status>as is <boo>this element</boo></status>\n"+ "  <contenido id=\"10097\" idioma=\"cat\">\n"+ "    This one is <boo>not ignored as it's</boo> inside a forEach\n"+ "    <antetitulo><i> big <boo>antler</boo></i></antetitulo>\n"+ "    <titulo>  My <i>flattened <boo>title</boo></i> </titulo>\n"+ "    <resumen> My summary <i>skip this!</i>  </resumen>\n"+ "    <texto>   <boo>Within the body of</boo>My text</texto>\n"+ "    <p>Access <boo>inner <i>sub clauses</i> as well</boo></p>\n"+ "    </contenido>\n"+ "</anycd>";
  List<Map<String,Object>> l=rr.getAllRecords(new StringReader(xml));
  assertEquals(1,l.size());
  Map<String,Object> m=l.get(0);
  assertEquals("top level",(String)((List)m.get("descdend")).get(0));
  assertEquals("this element",(String)((List)m.get("descdend")).get(1));
  assertEquals("not ignored as it's",(String)((List)m.get("descdend")).get(2));
  assertEquals("antler",(String)((List)m.get("descdend")).get(3));
  assertEquals("title",(String)((List)m.get("descdend")).get(4));
  assertEquals("Within the body of",(String)((List)m.get("descdend")).get(5));
  assertEquals("inner  as well",(String)((List)m.get("descdend")).get(6));
}
