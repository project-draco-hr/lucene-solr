{
  Fields fields=MultiFields.getFields(reader);
  for (  String field : fields) {
    Terms terms=fields.terms(field);
    assertNotNull(terms);
    TermsEnum termsEnum=terms.iterator(null);
    while (termsEnum.next() != null) {
      BytesRef term=termsEnum.term();
      assertTrue(term != null);
      String fieldValue=(String)DocHelper.nameValues.get(field);
      assertTrue(fieldValue.indexOf(term.utf8ToString()) != -1);
    }
  }
  PostingsEnum termDocs=TestUtil.docs(random(),reader,DocHelper.TEXT_FIELD_1_KEY,new BytesRef("field"),MultiFields.getLiveDocs(reader),null,0);
  assertTrue(termDocs.nextDoc() != DocIdSetIterator.NO_MORE_DOCS);
  termDocs=TestUtil.docs(random(),reader,DocHelper.NO_NORMS_KEY,new BytesRef(DocHelper.NO_NORMS_TEXT),MultiFields.getLiveDocs(reader),null,0);
  assertTrue(termDocs.nextDoc() != DocIdSetIterator.NO_MORE_DOCS);
  PostingsEnum positions=MultiFields.getTermPositionsEnum(reader,MultiFields.getLiveDocs(reader),DocHelper.TEXT_FIELD_1_KEY,new BytesRef("field"));
  assertTrue(positions.nextDoc() != DocIdSetIterator.NO_MORE_DOCS);
  assertTrue(positions.docID() == 0);
  assertTrue(positions.nextPosition() >= 0);
}
