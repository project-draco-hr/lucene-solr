{
  if (node instanceof FieldableNode) {
    FieldableNode fieldNode=(FieldableNode)node;
    QueryConfigHandler queryConfig=getQueryConfigHandler();
    if (queryConfig == null) {
      throw new IllegalArgumentException("A config handler is expected by the processor UniqueFieldQueryNodeProcessor!");
    }
    if (!queryConfig.hasAttribute(UniqueFieldAttribute.class)) {
      throw new IllegalArgumentException("UniqueFieldAttribute should be defined in the config handler!");
    }
    CharSequence uniqueField=((UniqueFieldAttribute)queryConfig.getAttribute(UniqueFieldAttribute.class)).getUniqueField();
    fieldNode.setField(uniqueField);
  }
  return node;
}
