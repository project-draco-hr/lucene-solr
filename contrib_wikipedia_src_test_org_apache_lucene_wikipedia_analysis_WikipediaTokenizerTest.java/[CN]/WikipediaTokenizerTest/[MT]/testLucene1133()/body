{
  Set untoks=new HashSet();
  untoks.add(WikipediaTokenizer.CATEGORY);
  untoks.add(WikipediaTokenizer.ITALICS);
  WikipediaTokenizer tf=new WikipediaTokenizer(new StringReader(LINK_PHRASES),WikipediaTokenizer.TOKENS_ONLY,untoks);
  checkLinkPhrases(tf);
  String test="[[Category:a b c d]] [[Category:e f g]] [[link here]] [[link there]] ''italics here'' something ''more italics'' [[Category:h   i   j]]";
  tf=new WikipediaTokenizer(new StringReader(test),WikipediaTokenizer.UNTOKENIZED_ONLY,untoks);
  TermAttribute termAtt=tf.addAttribute(TermAttribute.class);
  PositionIncrementAttribute posIncrAtt=tf.addAttribute(PositionIncrementAttribute.class);
  OffsetAttribute offsetAtt=tf.addAttribute(OffsetAttribute.class);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "a b c d",termAtt.term().equals("a b c d") == true);
  assertTrue(posIncrAtt.getPositionIncrement() + " does not equal: " + 1,posIncrAtt.getPositionIncrement() == 1);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 11,offsetAtt.startOffset() == 11);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 18,offsetAtt.endOffset() == 18);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "e f g",termAtt.term().equals("e f g") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 32,offsetAtt.startOffset() == 32);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 37,offsetAtt.endOffset() == 37);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "link",termAtt.term().equals("link") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 42,offsetAtt.startOffset() == 42);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 46,offsetAtt.endOffset() == 46);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "here",termAtt.term().equals("here") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 47,offsetAtt.startOffset() == 47);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 51,offsetAtt.endOffset() == 51);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "link",termAtt.term().equals("link") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 56,offsetAtt.startOffset() == 56);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 60,offsetAtt.endOffset() == 60);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "there",termAtt.term().equals("there") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 61,offsetAtt.startOffset() == 61);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 66,offsetAtt.endOffset() == 66);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "italics here",termAtt.term().equals("italics here") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 71,offsetAtt.startOffset() == 71);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 83,offsetAtt.endOffset() == 83);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "something",termAtt.term().equals("something") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 86,offsetAtt.startOffset() == 86);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 95,offsetAtt.endOffset() == 95);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "more italics",termAtt.term().equals("more italics") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 98,offsetAtt.startOffset() == 98);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 110,offsetAtt.endOffset() == 110);
  assertTrue(tf.incrementToken());
  assertTrue(termAtt.term() + " is not equal to " + "h   i   j",termAtt.term().equals("h   i   j") == true);
  assertTrue(offsetAtt.startOffset() + " does not equal: " + 124,offsetAtt.startOffset() == 124);
  assertTrue(offsetAtt.endOffset() + " does not equal: " + 133,offsetAtt.endOffset() == 133);
  assertFalse(tf.incrementToken());
}
