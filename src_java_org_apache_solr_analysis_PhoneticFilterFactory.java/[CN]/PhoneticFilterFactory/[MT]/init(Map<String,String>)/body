{
  super.init(args);
  if (args.get("inject") != null) {
    inject=Boolean.getBoolean(args.get(INJECT));
  }
  String name=args.get(ENCODER);
  if (name == null) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Missing required parameter: " + ENCODER + " ["+ registry.keySet()+ "]");
  }
  Class<? extends Encoder> clazz=registry.get(name.toUpperCase());
  if (clazz == null) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unknown encoder: " + name + " ["+ registry.keySet()+ "]");
  }
  try {
    encoder=clazz.newInstance();
    String v=args.get("maxCodeLength");
    if (v != null) {
      Method setter=encoder.getClass().getMethod("setMaxCodeLength",Integer.class);
      setter.invoke(encoder,Integer.parseInt(v));
    }
  }
 catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error initializing: " + name + "/"+ clazz,e);
  }
}
