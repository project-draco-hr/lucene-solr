{
  Object o=map.get(IndexDataSource.NESTED_DATASOURCE);
  if (o == null)   return;
  if (o instanceof IndexDataSource) {
    IndexDataSource ds=(IndexDataSource)o;
    addDataSource(ds);
  }
 else   if (o instanceof List) {
    List nestedDataSource=(List)o;
    for (int i=0, n=nestedDataSource.size(); i < n; i++) {
      IndexDataSource ds=(IndexDataSource)nestedDataSource.get(i);
      addDataSource(ds);
    }
  }
 else   if (o instanceof IndexDataSource[]) {
    IndexDataSource[] nestedDataSource=(IndexDataSource[])o;
    for (int i=0, n=nestedDataSource.length; i < n; i++) {
      IndexDataSource ds=(IndexDataSource)nestedDataSource[i];
      addDataSource(ds);
    }
  }
 else {
    log.warn("Unknown object found as nested datasource:" + o);
  }
}
