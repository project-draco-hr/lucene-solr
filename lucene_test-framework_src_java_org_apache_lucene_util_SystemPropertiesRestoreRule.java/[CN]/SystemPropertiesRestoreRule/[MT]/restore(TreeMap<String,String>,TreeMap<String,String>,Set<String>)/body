{
  after.keySet().removeAll(before.keySet());
  for (  String key : after.keySet()) {
    if (!ignoredKeys.contains(key))     System.clearProperty(key);
  }
  for (  Map.Entry<String,String> e : before.entrySet()) {
    String key=e.getValue();
    if (!ignoredKeys.contains(key)) {
      if (key == null) {
        System.clearProperty(e.getKey());
      }
 else {
        System.setProperty(e.getKey(),key);
      }
    }
  }
}
