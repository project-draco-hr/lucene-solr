{
  final double minLon=GeoUtils.mortonUnhashLon(start);
  final double minLat=GeoUtils.mortonUnhashLat(start);
  final double maxLon=GeoUtils.mortonUnhashLon(end);
  final double maxLat=GeoUtils.mortonUnhashLat(end);
  final short level=(short)(62 - res >>> 1);
  final boolean within=res % GeoPointField.PRECISION_STEP == 0 && cellWithin(minLon,minLat,maxLon,maxLat);
  if (within || (level == DETAIL_LEVEL && cellIntersectsShape(minLon,minLat,maxLon,maxLat))) {
    rangeBounds.add(new Range(start,end,res,level,!within));
  }
 else   if (level < DETAIL_LEVEL && cellIntersectsMBR(minLon,minLat,maxLon,maxLat)) {
    computeRange(start,(short)(res - 1));
  }
}
