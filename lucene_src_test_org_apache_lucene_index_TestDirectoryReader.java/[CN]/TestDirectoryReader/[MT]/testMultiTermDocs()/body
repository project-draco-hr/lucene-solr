{
  RAMDirectory ramDir1=new RAMDirectory();
  addDoc(ramDir1,"test foo",true);
  RAMDirectory ramDir2=new RAMDirectory();
  addDoc(ramDir2,"test blah",true);
  RAMDirectory ramDir3=new RAMDirectory();
  addDoc(ramDir3,"test wow",true);
  IndexReader[] readers1=new IndexReader[]{IndexReader.open(ramDir1,false),IndexReader.open(ramDir3,false)};
  IndexReader[] readers2=new IndexReader[]{IndexReader.open(ramDir1,false),IndexReader.open(ramDir2,false),IndexReader.open(ramDir3,false)};
  MultiReader mr2=new MultiReader(readers1);
  MultiReader mr3=new MultiReader(readers2);
  TermsEnum te2=MultiFields.getTerms(mr2,"body").iterator();
  te2.seek(new BytesRef("wow"));
  DocsEnum td=MultiFields.getTermDocsEnum(mr2,MultiFields.getDeletedDocs(mr2),"body",te2.term());
  TermsEnum te3=MultiFields.getTerms(mr3,"body").iterator();
  te3.seek(new BytesRef("wow"));
  td=te3.docs(MultiFields.getDeletedDocs(mr3),td);
  int ret=0;
  while (td.nextDoc() != td.NO_MORE_DOCS)   ret+=td.docID();
  assertTrue(ret > 0);
}
