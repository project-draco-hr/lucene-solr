{
  MockRAMDirectory ramDir1=newDirectory(random);
  addDoc(random,ramDir1,"test foo",true);
  MockRAMDirectory ramDir2=newDirectory(random);
  addDoc(random,ramDir2,"test blah",true);
  IndexReader[] readers=new IndexReader[]{IndexReader.open(ramDir1,false),IndexReader.open(ramDir2,false)};
  MultiReader mr=new MultiReader(readers);
  assertTrue(mr.isCurrent());
  addDoc(random,ramDir1,"more text",false);
  assertFalse(mr.isCurrent());
  addDoc(random,ramDir2,"even more text",false);
  assertFalse(mr.isCurrent());
  try {
    mr.getVersion();
    fail();
  }
 catch (  UnsupportedOperationException e) {
  }
  mr.close();
  ramDir1.close();
  ramDir2.close();
}
