{
  try {
    Document doc=new Document();
    Field field=newTextField("field","testData",Field.Store.YES);
    doc.add(field);
    IndexWriter writer=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random())));
    iwConstructed.countDown();
    startIndexing.await();
    writer.addDocument(doc);
    writer.shutdown();
  }
 catch (  Throwable e) {
    failed=true;
    failure=e;
    failure.printStackTrace(System.out);
    return;
  }
}
