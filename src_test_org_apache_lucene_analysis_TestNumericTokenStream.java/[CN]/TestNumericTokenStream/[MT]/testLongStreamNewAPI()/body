{
  final NumericTokenStream stream=new NumericTokenStream().setLongValue(lvalue);
  stream.setUseNewAPI(true);
  final TermAttribute termAtt=(TermAttribute)stream.getAttribute(TermAttribute.class);
  final TypeAttribute typeAtt=(TypeAttribute)stream.getAttribute(TypeAttribute.class);
  for (int shift=0; shift < 64; shift+=NumericUtils.PRECISION_STEP_DEFAULT) {
    assertTrue("New token is available",stream.incrementToken());
    assertEquals("Term is correctly encoded",NumericUtils.longToPrefixCoded(lvalue,shift),termAtt.term());
    assertEquals("Type correct",(shift == 0) ? NumericTokenStream.TOKEN_TYPE_FULL_PREC : NumericTokenStream.TOKEN_TYPE_LOWER_PREC,typeAtt.type());
  }
  assertFalse("No more tokens available",stream.incrementToken());
}
