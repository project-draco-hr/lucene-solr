{
  super.init(config,core);
  indexDir=(String)config.get(INDEX_DIR);
  String accuracy=(String)config.get(ACCURACY);
  if (indexDir != null) {
    if (!new File(indexDir).isAbsolute()) {
      indexDir=core.getDataDir() + File.separator + indexDir;
    }
  }
  sourceLocation=(String)config.get(LOCATION);
  field=(String)config.get(FIELD);
  String strDistanceName=(String)config.get(STRING_DISTANCE);
  if (strDistanceName != null) {
    sd=(StringDistance)core.getResourceLoader().newInstance(strDistanceName);
  }
 else {
    sd=new LevensteinDistance();
  }
  try {
    initIndex();
    spellChecker=new SpellChecker(index,sd);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  if (accuracy != null) {
    try {
      this.accuracy=Float.parseFloat(accuracy);
      spellChecker.setAccuracy(this.accuracy);
    }
 catch (    NumberFormatException e) {
      throw new RuntimeException("Unparseable accuracy given for dictionary: " + name,e);
    }
  }
  if (field != null && core.getSchema().getFieldTypeNoEx(field) != null) {
    analyzer=core.getSchema().getFieldType(field).getQueryAnalyzer();
  }
  fieldTypeName=(String)config.get(FIELD_TYPE);
  if (core.getSchema().getFieldTypes().containsKey(fieldTypeName)) {
    FieldType fieldType=core.getSchema().getFieldTypes().get(fieldTypeName);
    analyzer=fieldType.getQueryAnalyzer();
  }
  if (analyzer == null) {
    log.info("Using WhitespaceAnalzyer for dictionary: " + name);
    analyzer=new WhitespaceAnalyzer();
  }
  return name;
}
