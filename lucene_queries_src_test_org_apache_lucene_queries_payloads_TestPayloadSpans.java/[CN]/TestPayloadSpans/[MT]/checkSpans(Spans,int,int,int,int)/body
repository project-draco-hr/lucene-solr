{
  assertTrue("spans is null and it shouldn't be",spans != null);
  VerifyingCollector collector=new VerifyingCollector();
  int seen=0;
  while (spans.nextDoc() != Spans.NO_MORE_DOCS) {
    while (spans.nextStartPosition() != Spans.NO_MORE_POSITIONS) {
      collector.reset();
      spans.collect(collector);
      collector.verify(expectedPayloadLength,expectedFirstByte);
      assertEquals("expectedNumPayloads",expectedNumPayloads,collector.payloads.size());
      seen++;
    }
  }
  assertEquals("expectedNumSpans",expectedNumSpans,seen);
}
