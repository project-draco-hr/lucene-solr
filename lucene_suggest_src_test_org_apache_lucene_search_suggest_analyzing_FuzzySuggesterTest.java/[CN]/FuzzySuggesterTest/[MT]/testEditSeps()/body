{
  Analyzer a=new MockAnalyzer(random());
  FuzzySuggester suggester=new FuzzySuggester(a,a,FuzzySuggester.PRESERVE_SEP,2,-1,2,true,1,3,false);
  List<TermFreqPayload> keys=Arrays.asList(new TermFreqPayload[]{new TermFreqPayload("foo bar",40),new TermFreqPayload("foo bar baz",50),new TermFreqPayload("barbaz",60),new TermFreqPayload("barbazfoo",10)});
  Collections.shuffle(keys,random());
  suggester.build(new TermFreqPayloadArrayIterator(keys));
  assertEquals("[foo bar baz/50, foo bar/40]",suggester.lookup("foobar",false,5).toString());
  assertEquals("[foo bar baz/50]",suggester.lookup("foobarbaz",false,5).toString());
  assertEquals("[barbaz/60, barbazfoo/10]",suggester.lookup("bar baz",false,5).toString());
  assertEquals("[barbazfoo/10]",suggester.lookup("bar baz foo",false,5).toString());
}
