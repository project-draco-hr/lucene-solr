{
  ensureOpen();
  if (pendingDeletes.contains(name)) {
    throw new NoSuchFileException("file \"" + name + "\" is pending delete");
  }
  return Files.size(directory.resolve(name));
}
