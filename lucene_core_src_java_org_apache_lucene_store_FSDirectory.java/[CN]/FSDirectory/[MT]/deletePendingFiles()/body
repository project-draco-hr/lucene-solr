{
  List<String> toDelete=new ArrayList<>(pendingDeletes);
  System.out.println("del pending: " + pendingDeletes);
  Throwable firstException=null;
  for (  String fileName : toDelete) {
    if (fileName.startsWith(IndexFileNames.SEGMENTS)) {
      try {
        if (deleteFile(fileName) == false) {
          System.out.println("  false on " + fileName + "; skipping the rest");
          return;
        }
      }
 catch (      Throwable t) {
        if (firstException == null) {
          firstException=t;
        }
 else {
          firstException.addSuppressed(t);
        }
        System.out.println("  fail on " + fileName + ":");
        t.printStackTrace(System.out);
        throw t;
      }
    }
  }
  for (  String fileName : toDelete) {
    if (fileName.startsWith(IndexFileNames.SEGMENTS) == false) {
      try {
        deleteFile(fileName);
      }
 catch (      Throwable t) {
        if (firstException == null) {
          firstException=t;
        }
 else {
          firstException.addSuppressed(t);
        }
        System.out.println("  fail on " + fileName + ":");
        t.printStackTrace(System.out);
        throw t;
      }
    }
  }
  IOUtils.reThrow(firstException);
}
