{
  WhitespaceTokenizer tokenizer=new WhitespaceTokenizer();
  tokenizer.setReader(new StringReader("BogustermBogusterm\udc16"));
  LowerCaseFilter filter=new LowerCaseFilter(tokenizer);
  assertTokenStreamContents(filter,new String[]{"bogustermbogusterm\udc16"});
  filter.reset();
  String highSurEndingUpper="BogustermBoguster\ud801";
  String highSurEndingLower="bogustermboguster\ud801";
  tokenizer.setReader(new StringReader(highSurEndingUpper));
  assertTokenStreamContents(filter,new String[]{highSurEndingLower});
  assertTrue(filter.hasAttribute(CharTermAttribute.class));
  char[] termBuffer=filter.getAttribute(CharTermAttribute.class).buffer();
  int length=highSurEndingLower.length();
  assertEquals('\ud801',termBuffer[length - 1]);
}
