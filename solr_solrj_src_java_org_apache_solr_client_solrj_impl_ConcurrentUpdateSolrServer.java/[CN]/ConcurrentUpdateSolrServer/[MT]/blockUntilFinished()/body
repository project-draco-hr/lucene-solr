{
  lock=new CountDownLatch(1);
  try {
    for (; ; ) {
      Runner runner;
synchronized (runners) {
        runner=runners.peek();
      }
      if ((runner == null && queue.isEmpty()) || scheduler.isTerminated())       break;
      if (runner != null) {
        runner.runnerLock.lock();
        runner.runnerLock.unlock();
      }
 else       if (!queue.isEmpty()) {
        Runner r=new Runner();
        runners.add(r);
        scheduler.execute(r);
      }
    }
  }
  finally {
    lock.countDown();
    lock=null;
  }
}
