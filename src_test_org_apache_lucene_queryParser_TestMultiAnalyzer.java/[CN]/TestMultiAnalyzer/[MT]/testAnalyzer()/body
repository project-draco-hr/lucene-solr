{
  QueryParser qp=new QueryParser("",new TestAnalyzer());
  assertEquals("foo",qp.parse("foo").toString());
  assertEquals("foo foobar",qp.parse("foo foobar").toString());
  assertEquals("(multi multi2) foo",qp.parse("multi foo").toString());
  assertEquals("foo (multi multi2)",qp.parse("foo multi").toString());
  assertEquals("(multi multi2) (multi multi2)",qp.parse("multi multi").toString());
  assertEquals("+(foo (multi multi2)) +(bar (multi multi2))",qp.parse("+(foo multi) +(bar multi)").toString());
  assertEquals("+(foo (multi multi2)) field:\"bar (multi multi2)\"",qp.parse("+(foo multi) field:\"bar multi\"").toString());
  assertEquals("\"(multi multi2) foo\"",qp.parse("\"multi foo\"").toString());
  assertEquals("\"foo (multi multi2)\"",qp.parse("\"foo multi\"").toString());
  assertEquals("\"foo (multi multi2) foobar (multi multi2)\"",qp.parse("\"foo multi foobar multi\"").toString());
  assertEquals("(field:multi field:multi2) field:foo",qp.parse("field:multi field:foo").toString());
  assertEquals("field:\"(multi multi2) foo\"",qp.parse("field:\"multi foo\"").toString());
  assertEquals("triplemulti multi3 multi2",qp.parse("triplemulti").toString());
  assertEquals("foo (triplemulti multi3 multi2) foobar",qp.parse("foo triplemulti foobar").toString());
  assertEquals("\"(multi multi2) foo\"~10",qp.parse("\"multi foo\"~10").toString());
  assertEquals("\"(multi multi2) foo\"^2.0",qp.parse("\"multi foo\"^2").toString());
  qp.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
  assertEquals("+(multi multi2) +foo",qp.parse("multi foo").toString());
}
