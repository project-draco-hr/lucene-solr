{
  RAMDirectory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new StandardAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  writer.addDocument(makeDocumentWithFields());
  writer.close();
  Searcher searcher=new IndexSearcher(dir);
  Query query=new TermQuery(new Term("keyword","test1"));
  ScoreDoc[] hits=searcher.search(query,null,1000).scoreDocs;
  assertEquals(1,hits.length);
  doAssert(searcher.doc(hits[0].doc),true);
  searcher.close();
}
