{
  super.end();
  AttributeSource.State finalState=captureState();
  for (Iterator it=sinks.iterator(); it.hasNext(); ) {
    final SinkTokenStream sink=(SinkTokenStream)((WeakReference)it.next()).get();
    if (sink != null) {
      sink.setFinalState(finalState);
    }
  }
}
