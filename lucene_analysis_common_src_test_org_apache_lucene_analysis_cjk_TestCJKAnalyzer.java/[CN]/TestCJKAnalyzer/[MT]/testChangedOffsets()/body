{
  final NormalizeCharMap.Builder builder=new NormalizeCharMap.Builder();
  builder.add("a","??????");
  builder.add("b","??????");
  final NormalizeCharMap norm=builder.build();
  Analyzer analyzer=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      Tokenizer tokenizer=new StandardTokenizer(TEST_VERSION_CURRENT,reader);
      return new TokenStreamComponents(tokenizer,new CJKBigramFilter(tokenizer));
    }
    @Override protected Reader initReader(    String fieldName,    Reader reader){
      return new MappingCharFilter(norm,CharReader.get(reader));
    }
  }
;
  assertAnalyzesTo(analyzer,"ab",new String[]{"??????","??????","??????"},new int[]{0,0,1},new int[]{1,1,2});
}
