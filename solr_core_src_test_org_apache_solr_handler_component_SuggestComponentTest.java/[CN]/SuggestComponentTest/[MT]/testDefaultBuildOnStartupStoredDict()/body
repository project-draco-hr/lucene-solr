{
  final String suggester="suggest_doc_default_startup";
  assertEquals(suggester,h.getCore().getSolrConfig().getVal("//searchComponent[@name='suggest']/lst[7]/str[@name='name']",false));
  assertEquals(suggester,h.getCore().getSolrConfig().getVal("//searchComponent[@name='suggest']/lst[7]/str[@name='storeDir']",false));
  assertEquals("false",h.getCore().getSolrConfig().getVal("//searchComponent[@name='suggest']/lst[7]/str[@name='buildOnCommit']",true));
  assertNull(h.getCore().getSolrConfig().getVal("//searchComponent[@name='suggest']/lst[7]/str[@name='buildOnStartup']",false));
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_Q,"example",SuggesterParams.SUGGEST_COUNT,"2"),"//lst[@name='suggest']/lst[@name='" + suggester + "']/lst[@name='example']/int[@name='numFound'][.='0']");
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_BUILD,"true"),"//str[@name='command'][.='build']");
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_Q,"example",SuggesterParams.SUGGEST_COUNT,"2"),"//lst[@name='suggest']/lst[@name='" + suggester + "']/lst[@name='example']/int[@name='numFound'][.='2']");
  reloadCore(random().nextBoolean());
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_Q,"example",SuggesterParams.SUGGEST_COUNT,"2"),"//lst[@name='suggest']/lst[@name='" + suggester + "']/lst[@name='example']/int[@name='numFound'][.='2']");
  assertU(adoc("id","10","cat","example data extra ","price","40","weight","35"));
  assertU((commit()));
  reloadCore(random().nextBoolean());
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_Q,"example",SuggesterParams.SUGGEST_COUNT,"3"),"//lst[@name='suggest']/lst[@name='" + suggester + "']/lst[@name='example']/int[@name='numFound'][.='2']");
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_BUILD,"true"),"//str[@name='command'][.='build']");
  assertQ(req("qt",rh,SuggesterParams.SUGGEST_DICT,suggester,SuggesterParams.SUGGEST_Q,"example",SuggesterParams.SUGGEST_COUNT,"3"),"//lst[@name='suggest']/lst[@name='" + suggester + "']/lst[@name='example']/int[@name='numFound'][.='3']");
}
