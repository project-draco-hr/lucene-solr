{
  if (analyzer == null) {
    throw new UnsupportedOperationException("To use MoreLikeThis without " + "term vectors, you must provide an Analyzer");
  }
  TokenStream ts=analyzer.tokenStream(fieldName,r);
  int tokenCount=0;
  TermAttribute termAtt=ts.addAttribute(TermAttribute.class);
  while (ts.incrementToken()) {
    String word=termAtt.term();
    tokenCount++;
    if (tokenCount > maxNumTokensParsed) {
      break;
    }
    if (isNoiseWord(word)) {
      continue;
    }
    Int cnt=termFreqMap.get(word);
    if (cnt == null) {
      termFreqMap.put(word,new Int());
    }
 else {
      cnt.x++;
    }
  }
}
