{
  Directory d=newDirectory();
  RandomIndexWriter w=new RandomIndexWriter(random(),d);
  Document doc=new Document();
  FloatDocValuesField field=new FloatDocValuesField("field",0.0f);
  doc.add(field);
  for (long l=0; l < 100; l++) {
    field.setFloatValue(l);
    w.addDocument(doc);
  }
  IndexReader r=w.getReader();
  FacetsCollector fc=new FacetsCollector();
  IndexSearcher s=newSearcher(r);
  s.search(new MatchAllDocsQuery(),fc);
  Facets facets=new DoubleRangeFacetCounts("field",new FloatFieldSource("field"),fc,new DoubleRange("less than 10",0.0f,true,10.0f,false),new DoubleRange("less than or equal to 10",0.0f,true,10.0f,true),new DoubleRange("over 90",90.0f,false,100.0f,false),new DoubleRange("90 or above",90.0f,true,100.0f,false),new DoubleRange("over 1000",1000.0f,false,Double.POSITIVE_INFINITY,false));
  assertEquals("value=100 childCount=5\n  less than 10 (10)\n  less than or equal to 10 (11)\n  over 90 (9)\n  90 or above (10)\n  over 1000 (0)\n",facets.getTopChildren(10,"field").toString());
  IOUtils.close(w,r,d);
}
