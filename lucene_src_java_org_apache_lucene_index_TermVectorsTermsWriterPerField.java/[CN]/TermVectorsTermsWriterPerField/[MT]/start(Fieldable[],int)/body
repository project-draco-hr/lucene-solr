{
  doVectors=false;
  doVectorPositions=false;
  doVectorOffsets=false;
  for (int i=0; i < count; i++) {
    Fieldable field=fields[i];
    if (field.isIndexed() && field.isTermVectorStored()) {
      doVectors=true;
      doVectorPositions|=field.isStorePositionWithTermVector();
      doVectorOffsets|=field.isStoreOffsetWithTermVector();
    }
  }
  if (doVectors) {
    termsWriter.hasVectors=true;
    if (termsWriter.tvx != null) {
      if (termsHashPerField.bytesHash.size() != 0) {
        termsHashPerField.reset();
      }
    }
  }
  return doVectors;
}
