{
  if (to instanceof FSDirectory) {
    FSDirectory target=(FSDirectory)to;
    for (    String filename : filenames) {
      target.ensureCanWrite(filename);
      FileChannel input=null;
      FileChannel output=null;
      IOException priorException=null;
      try {
        input=new FileInputStream(new File(directory,filename)).getChannel();
        output=new FileOutputStream(new File(target.directory,filename)).getChannel();
        output.transferFrom(input,0,input.size());
      }
 catch (      IOException ioe) {
        priorException=ioe;
      }
 finally {
        IOUtils.closeSafely(priorException,input,output);
      }
    }
  }
 else   super.copyTo(to,filenames);
}
