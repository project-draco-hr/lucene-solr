{
  MergeSpecification mergeSpec=null;
  if (segmentInfos.size() > 1 || (segmentInfos.size() == 1 && segmentInfos.info(0).hasDeletions())) {
    mergeSpec=new MergeSpecification();
    SegmentInfos segmentInfos2=new SegmentInfos();
    segmentInfos2.addAll(segmentInfos);
    Collections.shuffle(segmentInfos2,random);
    int upto=0;
    while (upto < segmentInfos.size()) {
      int inc=_TestUtil.nextInt(random,1,segmentInfos.size() - upto);
      mergeSpec.add(new OneMerge(segmentInfos2.range(upto,upto + inc)));
      upto+=inc;
    }
  }
  return mergeSpec;
}
