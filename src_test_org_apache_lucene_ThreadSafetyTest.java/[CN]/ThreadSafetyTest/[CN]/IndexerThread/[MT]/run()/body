{
  try {
    boolean useCompoundFiles=false;
    for (int i=0; i < 1024 * ITERATIONS; i++) {
      Document d=new Document();
      int n=RANDOM.nextInt();
      d.add(Field.Keyword("id",Integer.toString(n)));
      d.add(Field.UnStored("contents",intToEnglish(n)));
      System.out.println("Adding " + n);
      useCompoundFiles=Math.random() < 0.5;
      writer.setUseCompoundFile(useCompoundFiles);
      writer.addDocument(d);
      if (i % reopenInterval == 0) {
        writer.close();
        writer=new IndexWriter("index",ANALYZER,false);
      }
    }
    writer.close();
  }
 catch (  Exception e) {
    System.out.println(e.toString());
    e.printStackTrace();
    System.exit(0);
  }
}
