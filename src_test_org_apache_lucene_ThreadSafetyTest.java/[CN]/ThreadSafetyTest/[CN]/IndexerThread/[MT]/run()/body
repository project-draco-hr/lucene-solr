{
  try {
    boolean useCompoundFiles=false;
    for (int i=0; i < 1024 * ITERATIONS; i++) {
      Document d=new Document();
      int n=RANDOM.nextInt();
      d.add(new Field("id",Integer.toString(n),Field.Store.YES,Field.Index.NOT_ANALYZED));
      d.add(new Field("contents",English.intToEnglish(n),Field.Store.NO,Field.Index.ANALYZED));
      System.out.println("Adding " + n);
      useCompoundFiles=Math.random() < 0.5;
      writer.setUseCompoundFile(useCompoundFiles);
      writer.addDocument(d);
      if (i % reopenInterval == 0) {
        writer.close();
        writer=new IndexWriter("index",ANALYZER,false,IndexWriter.MaxFieldLength.LIMITED);
      }
    }
    writer.close();
  }
 catch (  Exception e) {
    System.out.println(e.toString());
    e.printStackTrace();
    System.exit(0);
  }
}
