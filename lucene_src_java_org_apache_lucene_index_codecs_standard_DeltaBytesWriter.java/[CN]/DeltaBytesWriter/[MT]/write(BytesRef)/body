{
  int start=0;
  int upto=text.offset;
  final int length=text.length;
  final byte[] bytes=text.bytes;
  final int limit=length < lastLength ? length : lastLength;
  while (start < limit) {
    if (bytes[upto] != lastBytes[start])     break;
    start++;
    upto++;
  }
  final int suffix=length - start;
  out.writeVInt(start);
  out.writeVInt(suffix);
  out.writeBytes(bytes,upto,suffix);
  if (lastBytes.length < length) {
    lastBytes=ArrayUtil.grow(lastBytes,length);
  }
  System.arraycopy(bytes,upto,lastBytes,start,suffix);
  lastLength=length;
}
