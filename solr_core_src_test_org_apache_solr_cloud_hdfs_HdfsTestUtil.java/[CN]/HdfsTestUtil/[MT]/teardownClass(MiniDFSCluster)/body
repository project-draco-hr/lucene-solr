{
  if (badTlogOutStream != null) {
    IOUtils.closeQuietly(badTlogOutStream);
  }
  if (badTlogOutStreamFs != null) {
    IOUtils.closeQuietly(badTlogOutStreamFs);
  }
  SolrTestCaseJ4.resetFactory();
  System.clearProperty("solr.lock.type");
  System.clearProperty("test.build.data");
  System.clearProperty("test.cache.data");
  System.clearProperty("solr.hdfs.home");
  System.clearProperty("solr.hdfs.blockcache.global");
  if (dfsCluster != null) {
    Timer timer=timers.remove(dfsCluster);
    if (timer != null) {
      timer.cancel();
    }
    try {
      dfsCluster.shutdown();
    }
 catch (    Error e) {
      log.warn("Exception shutting down dfsCluster",e);
    }
  }
  if (savedLocale != null) {
    Locale.setDefault(savedLocale);
  }
}
