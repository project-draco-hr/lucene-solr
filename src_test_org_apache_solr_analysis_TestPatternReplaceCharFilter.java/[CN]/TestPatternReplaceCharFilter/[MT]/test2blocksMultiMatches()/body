{
  final String BLOCK="  aa bb cc --- aa bb aa. bb aa   bb cc";
  CharStream cs=new PatternReplaceCharFilter("(aa)\\s+(bb)","$1##$2",".",CharReader.get(new StringReader(BLOCK)));
  TokenStream ts=new WhitespaceTokenizer(cs);
  assertTokEqualOff(tokens("aa##bb,1,2,7 cc,1,8,10 ---,1,11,14 aa##bb,1,15,20 aa.,1,21,24 bb,1,25,27 aa##bb,1,28,35 cc,1,36,38"),getTokens(ts));
}
