{
  String configDir=h.getCore().getResourceLoader().getConfigDir();
  String filePath=configDir;
  if (configDir != null && !configDir.endsWith(File.separator))   filePath+=File.separator;
  filePath+="dataimport.properties";
  File f=new File(filePath);
  try {
    assumeTrue("No dataimport.properties file",f.exists() || f.createNewFile());
    assumeTrue("dataimport.properties can't be set read only",f.setReadOnly());
    assumeFalse("dataimport.properties is still writable even though " + "marked readonly - test running as superuser?",f.canWrite());
    ignoreException("Properties is not writable");
    @SuppressWarnings("rawtypes") List parentRow=new ArrayList();
    parentRow.add(createMap("id","1"));
    MockDataSource.setIterator(FULLIMPORT_QUERY,parentRow.iterator());
    @SuppressWarnings("rawtypes") List childRow=new ArrayList();
    childRow.add(createMap("desc","hello"));
    MockDataSource.setIterator("select * from y where y.A='1'",childRow.iterator());
    runFullImport(dataConfig_delta);
    assertQ(req("id:1"),"//*[@numFound='0']");
  }
  finally {
    f.setWritable(true);
  }
}
