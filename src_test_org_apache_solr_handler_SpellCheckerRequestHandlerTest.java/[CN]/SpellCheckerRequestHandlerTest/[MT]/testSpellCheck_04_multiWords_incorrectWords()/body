{
  buildSpellCheckIndex();
  lrf=h.getRequestFactory("spellchecker",0,20);
  lrf.args.put("version","2.0");
  lrf.args.put("sp.query.accuracy",".9");
  assertQ("Confirm the index is still valid",req("cat"),"//str[@name='words'][.='cat']","//str[@name='exist'][.='true']");
  lrf.args.put("sp.query.extendedResults","true");
  assertQ("Failed to spell check",req("coat"),"//lst[@name='coat']","//lst[@name='coat']/int[@name='frequency'][.=0]","//lst[@name='coat']/lst[@name='suggestions' and count(lst)=0]");
  lrf.args.put("sp.query.accuracy",".2");
  assertQ("Failed to spell check",req("coat"),"//lst[@name='coat']","//lst[@name='coat']/int[@name='frequency'][.=0]","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='cot']","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='cat']","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='corn']","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='cart']");
  lrf.args.put("sp.query.suggestionCount","2");
  lrf.args.put("sp.query.accuracy",".2");
  assertQ("Failed to spell check",req("coat"),"//lst[@name='coat']","//lst[@name='coat']/int[@name='frequency'][.=0]","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='cot']","//lst[@name='coat']/lst[@name='suggestions']/lst[@name='cat']");
  lrf.args.put("sp.query.suggestionCount","2");
  lrf.args.put("sp.query.accuracy",".2");
  assertQ("Failed to spell check",req("cet cert corp"),"//lst[@name='cet']","//lst[@name='cet']/int[@name='frequency'][.=0]","//lst[@name='cet']/lst[@name='suggestions']/lst[1]","//lst[@name='cet']/lst[@name='suggestions']/lst[2]","//lst[@name='cert']","//lst[@name='cert']/int[@name='frequency'][.=0]","//lst[@name='cert']/lst[@name='suggestions']/lst[1]","//lst[@name='cert']/lst[@name='suggestions']/lst[2]","//lst[@name='corp']","//lst[@name='corp']/int[@name='frequency'][.=0]","//lst[@name='corp']/lst[@name='suggestions']/lst[1]","//lst[@name='corp']/lst[@name='suggestions']/lst[2]");
}
