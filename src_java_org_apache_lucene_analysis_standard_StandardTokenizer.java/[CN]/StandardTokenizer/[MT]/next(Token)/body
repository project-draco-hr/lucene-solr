{
  int posIncr=1;
  while (true) {
    int tokenType=scanner.getNextToken();
    if (tokenType == StandardTokenizerImpl.YYEOF) {
      return null;
    }
    if (scanner.yylength() <= maxTokenLength) {
      result.clear();
      result.setPositionIncrement(posIncr);
      scanner.getText(result);
      final int start=scanner.yychar();
      result.setStartOffset(start);
      result.setEndOffset(start + result.termLength());
      if (tokenType == StandardTokenizerImpl.ACRONYM_DEP) {
        if (replaceInvalidAcronym) {
          result.setType(StandardTokenizerImpl.TOKEN_TYPES[StandardTokenizerImpl.HOST]);
          result.setTermLength(result.termLength() - 1);
        }
 else {
          result.setType(StandardTokenizerImpl.TOKEN_TYPES[StandardTokenizerImpl.ACRONYM]);
        }
      }
 else {
        result.setType(StandardTokenizerImpl.TOKEN_TYPES[tokenType]);
      }
      return result;
    }
 else     posIncr++;
  }
}
