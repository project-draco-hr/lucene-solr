{
  Directory dir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  for (int i=0; i < 11; i++) {
    addDoc(writer,"aaa");
  }
  writer.close();
  IndexReader reader=IndexReader.open(dir,false);
  boolean gotException=false;
  try {
    reader.deleteDocument(11);
  }
 catch (  ArrayIndexOutOfBoundsException e) {
    gotException=true;
  }
  reader.close();
  writer=new IndexWriter(dir,new WhitespaceAnalyzer(),false,IndexWriter.MaxFieldLength.LIMITED);
  for (int i=0; i < 11; i++) {
    addDoc(writer,"aaa");
  }
  writer.optimize();
  writer.close();
  if (!gotException) {
    fail("delete of out-of-bounds doc number failed to hit exception");
  }
  dir.close();
}
