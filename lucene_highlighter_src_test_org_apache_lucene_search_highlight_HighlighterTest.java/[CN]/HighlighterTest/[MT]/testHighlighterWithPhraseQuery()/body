{
  final Analyzer analyzer=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName){
      return new TokenStreamComponents(new NGramTokenizer(4,4));
    }
  }
;
  final String fieldName="substring";
  final List<BytesRef> list=new ArrayList<>();
  list.add(new BytesRef("uchu"));
  final PhraseQuery query=new PhraseQuery(fieldName,list.toArray(new BytesRef[list.size()]));
  final QueryScorer fragmentScorer=new QueryScorer(query,fieldName);
  final SimpleHTMLFormatter formatter=new SimpleHTMLFormatter("<b>","</b>");
  final Highlighter highlighter=new Highlighter(formatter,fragmentScorer);
  highlighter.setTextFragmenter(new SimpleFragmenter(100));
  final String fragment=highlighter.getBestFragment(analyzer,fieldName,"Buchung");
  assertEquals("B<b>uchu</b>ng",fragment);
}
