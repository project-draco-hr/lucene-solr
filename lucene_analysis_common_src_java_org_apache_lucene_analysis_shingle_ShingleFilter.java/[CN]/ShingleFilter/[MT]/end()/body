{
  if (!exhausted) {
    super.end();
  }
 else {
    restoreState(endState);
  }
}
