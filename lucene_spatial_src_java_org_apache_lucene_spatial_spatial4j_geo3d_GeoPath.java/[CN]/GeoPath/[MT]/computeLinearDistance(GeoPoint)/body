{
  double currentDistance=0.0;
  for (  PathSegment segment : segments) {
    double distance=segment.pathLinearDistance(point);
    if (distance != Double.MAX_VALUE)     return currentDistance + distance;
    currentDistance+=segment.fullLinearDistance;
  }
  int segmentIndex=0;
  currentDistance=0.0;
  for (  SegmentEndpoint endpoint : endPoints) {
    double distance=endpoint.pathLinearDistance(point);
    if (distance != Double.MAX_VALUE)     return currentDistance + distance;
    if (segmentIndex < segments.size())     currentDistance+=segments.get(segmentIndex++).fullLinearDistance;
  }
  return Double.MAX_VALUE;
}
