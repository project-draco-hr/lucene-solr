{
synchronized (fullDistanceCache) {
    Double dist=fullDistanceCache.get(distanceStyle);
    if (dist == null) {
      dist=new Double(distanceStyle.computeDistance(start,end.x,end.y,end.z));
      fullDistanceCache.put(distanceStyle,dist);
    }
    return dist.doubleValue();
  }
}
