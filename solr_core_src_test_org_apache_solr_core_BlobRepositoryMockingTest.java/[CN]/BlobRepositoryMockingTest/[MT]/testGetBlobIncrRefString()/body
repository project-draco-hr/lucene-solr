{
  expect(mockContainer.isZooKeeperAware()).andReturn(true);
  expect(mapMock.get("foo!")).andReturn(null);
  expect(mapMock.put(eq("foo!"),anyObject(BlobRepository.BlobContent.class))).andReturn(null);
  EasyMock.replay(mocks);
  BlobRepository.BlobContentRef ref=repository.getBlobIncRef("foo!");
  assertTrue("foo!".equals(blobKey));
  assertTrue(blobFetched);
  assertNotNull(ref.blob);
  assertEquals(blobData,ref.blob.get());
}
