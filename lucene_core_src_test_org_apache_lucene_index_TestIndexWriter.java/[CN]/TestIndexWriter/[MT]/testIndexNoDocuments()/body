{
  MockDirectoryWrapper dir=newDirectory();
  IndexWriter writer=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random())));
  writer.commit();
  writer.close();
  IndexReader reader=IndexReader.open(dir);
  assertEquals(0,reader.maxDoc());
  assertEquals(0,reader.numDocs());
  reader.close();
  writer=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random())).setOpenMode(OpenMode.APPEND));
  writer.commit();
  writer.close();
  reader=IndexReader.open(dir);
  assertEquals(0,reader.maxDoc());
  assertEquals(0,reader.numDocs());
  reader.close();
  dir.close();
}
