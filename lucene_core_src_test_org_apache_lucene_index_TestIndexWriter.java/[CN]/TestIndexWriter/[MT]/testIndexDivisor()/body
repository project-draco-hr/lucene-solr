{
  Directory dir=newDirectory();
  IndexWriterConfig config=new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  config.setTermIndexInterval(2);
  IndexWriter w=new IndexWriter(dir,config);
  StringBuilder s=new StringBuilder();
  for (int i=0; i < 300; i++) {
    s.append(' ').append(i);
  }
  Document d=new Document();
  Field f=newTextField("field",s.toString(),Field.Store.NO);
  d.add(f);
  w.addDocument(d);
  AtomicReader r=getOnlySegmentReader(w.getReader());
  TermsEnum t=r.fields().terms("field").iterator(null);
  int count=0;
  while (t.next() != null) {
    final DocsEnum docs=_TestUtil.docs(random(),t,null,null,0);
    assertEquals(0,docs.nextDoc());
    assertEquals(DocIdSetIterator.NO_MORE_DOCS,docs.nextDoc());
    count++;
  }
  assertEquals(300,count);
  r.close();
  w.close();
  dir.close();
}
