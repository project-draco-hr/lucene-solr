{
  if (commit == null) {
    if (isCurrent()) {
      return null;
    }
  }
 else {
    if (directory != commit.getDirectory()) {
      throw new IOException("the specified commit does not match the specified Directory");
    }
    if (segmentInfos != null && commit.getSegmentsFileName().equals(segmentInfos.getSegmentsFileName())) {
      return null;
    }
  }
  return doOpenFromCommit(commit);
}
