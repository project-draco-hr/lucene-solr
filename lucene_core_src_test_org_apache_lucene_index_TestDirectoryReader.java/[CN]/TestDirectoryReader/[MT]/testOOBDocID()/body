{
  Directory dir=newDirectory();
  IndexWriter writer=new IndexWriter(dir,newIndexWriterConfig(new MockAnalyzer(random())));
  writer.addDocument(new Document());
  DirectoryReader r=writer.getReader();
  writer.close();
  r.document(0);
  try {
    r.document(1);
    fail("did not hit exception");
  }
 catch (  IllegalArgumentException iae) {
  }
  r.close();
  dir.close();
}
