{
  return new SolrEventListener(){
    public void init(    NamedList args){
    }
    /** 
 * This refreshes the latest replicateable index commit and optionally can create Snapshots as well
 */
    public void postCommit(){
      if (getCommit) {
        IndexCommit oldCommitPoint=indexCommitPoint;
        indexCommitPoint=core.getDeletionPolicy().getLatestCommit();
        core.getDeletionPolicy().saveCommitPoint(indexCommitPoint.getVersion());
        if (oldCommitPoint != null) {
          core.getDeletionPolicy().releaseCommmitPoint(oldCommitPoint.getVersion());
        }
      }
      if (snapshoot) {
        try {
          SnapShooter snapShooter=new SnapShooter(core,null);
          snapShooter.createSnapAsync(core.getDeletionPolicy().getLatestCommit().getFileNames(),ReplicationHandler.this);
        }
 catch (        Exception e) {
          LOG.error("Exception while snapshooting",e);
        }
      }
    }
    public void newSearcher(    SolrIndexSearcher newSearcher,    SolrIndexSearcher currentSearcher){
    }
  }
;
}
