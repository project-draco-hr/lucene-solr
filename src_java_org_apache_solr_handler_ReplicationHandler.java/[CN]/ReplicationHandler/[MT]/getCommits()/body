{
  Map<Long,IndexCommit> commits=core.getDeletionPolicy().getCommits();
  List<NamedList> l=new ArrayList<NamedList>();
  for (  IndexCommit c : commits.values()) {
    try {
      NamedList nl=new NamedList();
      nl.add(CMD_INDEX_VERSION,c.getVersion());
      nl.add(GENERATION,c.getGeneration());
      nl.add(CMD_GET_FILE_LIST,c.getFileNames().toString());
      l.add(nl);
    }
 catch (    IOException e) {
      LOG.warn("Exception while reading files for commit " + c,e);
    }
  }
  return l;
}
