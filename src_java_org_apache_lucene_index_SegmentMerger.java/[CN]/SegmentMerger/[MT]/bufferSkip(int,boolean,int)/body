{
  long freqPointer=freqOutput.getFilePointer();
  long proxPointer=proxOutput.getFilePointer();
  if (storePayloads) {
    int delta=doc - lastSkipDoc;
    if (payloadLength == lastSkipPayloadLength) {
      skipBuffer.writeVInt(delta * 2);
    }
 else {
      skipBuffer.writeVInt(delta * 2 + 1);
      skipBuffer.writeVInt(payloadLength);
      lastSkipPayloadLength=payloadLength;
    }
  }
 else {
    skipBuffer.writeVInt(doc - lastSkipDoc);
  }
  skipBuffer.writeVInt((int)(freqPointer - lastSkipFreqPointer));
  skipBuffer.writeVInt((int)(proxPointer - lastSkipProxPointer));
  lastSkipDoc=doc;
  lastSkipFreqPointer=freqPointer;
  lastSkipProxPointer=proxPointer;
}
