{
  LOG.info("init: " + config);
  name=config.get(NAME) != null ? (String)config.get(NAME) : DEFAULT_DICT_NAME;
  sourceLocation=(String)config.get(LOCATION);
  lookupImpl=(String)config.get(LOOKUP_IMPL);
  dictionaryImpl=(String)config.get(DICTIONARY_IMPL);
  String store=(String)config.get(STORE_DIR);
  if (lookupImpl == null) {
    lookupImpl=LookupFactory.DEFAULT_FILE_BASED_DICT;
    LOG.info("No " + LOOKUP_IMPL + " parameter was provided falling back to "+ lookupImpl);
  }
  factory=core.getResourceLoader().newInstance(lookupImpl,LookupFactory.class);
  lookup=factory.create(config,core);
  if (store != null) {
    storeDir=new File(store);
    if (!storeDir.isAbsolute()) {
      storeDir=new File(core.getDataDir() + File.separator + storeDir);
    }
    if (!storeDir.exists()) {
      storeDir.mkdirs();
    }
 else {
      try {
        lookup.load(new FileInputStream(new File(storeDir,factory.storeFileName())));
      }
 catch (      IOException e) {
        LOG.warn("Loading stored lookup data failed, possibly not cached yet");
      }
    }
  }
  if (dictionaryImpl == null) {
    dictionaryImpl=(sourceLocation == null) ? DictionaryFactory.DEFAULT_INDEX_BASED_DICT : DictionaryFactory.DEFAULT_FILE_BASED_DICT;
    LOG.info("No " + DICTIONARY_IMPL + " parameter was provided falling back to "+ dictionaryImpl);
  }
  dictionaryFactory=core.getResourceLoader().newInstance(dictionaryImpl,DictionaryFactory.class);
  dictionaryFactory.setParams(config);
  LOG.info("Dictionary loaded with params: " + config);
  return name;
}
