{
  Directory[] input=new Directory[]{newDirectory(),newDirectory()};
  Directory target=newDirectory();
  for (  Directory dir : input) {
    createDir(dir);
  }
  IndexWriter writer=createWriter(target);
  for (  Directory dir : input) {
    IndexReader r=IndexReader.open(dir);
    writer.addIndexes(r);
    r.close();
  }
  writer.optimize();
  writer.close();
  verifyIndex(target);
  IOUtils.closeSafely(false,target,input[0],input[1]);
}
