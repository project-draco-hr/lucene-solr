{
  int length=0;
  int start=offset;
  while (true) {
    final char c;
    offset++;
    if (bufferIndex >= dataLen) {
      dataLen=input.read(ioBuffer);
      bufferIndex=0;
    }
    ;
    if (dataLen == -1) {
      if (length > 0)       break;
 else       return null;
    }
 else     c=ioBuffer[bufferIndex++];
    if (isTokenChar(c)) {
      if (length == 0)       start=offset - 1;
      buffer[length++]=normalize(c);
      if (length == MAX_WORD_LEN)       break;
    }
 else     if (length > 0)     break;
  }
  return new Token(new String(buffer,0,length),start,start + length);
}
