{
  tagByte=dis.readByte();
  int size=readSize(dis);
  SolrDocument doc=new SolrDocument();
  for (int i=0; i < size; i++) {
    String fieldName;
    Object obj=readVal(dis);
    if (obj instanceof SolrDocument) {
      doc.addChildDocument((SolrDocument)obj);
      continue;
    }
 else {
      fieldName=(String)obj;
    }
    Object fieldVal=readVal(dis);
    doc.setField(fieldName,fieldVal);
  }
  return doc;
}
