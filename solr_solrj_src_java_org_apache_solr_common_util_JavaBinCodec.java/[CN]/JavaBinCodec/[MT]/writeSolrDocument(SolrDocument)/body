{
  List<SolrDocument> children=doc.getChildDocuments();
  int sz=doc.size() + (children == null ? 0 : children.size());
  writeTag(SOLRDOC);
  writeTag(ORDERED_MAP,sz);
  for (  Map.Entry<String,Object> entry : doc) {
    String name=entry.getKey();
    writeExternString(name);
    Object val=entry.getValue();
    writeVal(val);
  }
  if (children != null) {
    for (    SolrDocument child : children) {
      writeSolrDocument(child);
    }
  }
}
