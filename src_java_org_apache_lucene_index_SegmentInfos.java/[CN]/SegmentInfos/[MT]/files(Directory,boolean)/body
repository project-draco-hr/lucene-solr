{
  HashSet files=new HashSet();
  if (includeSegmentsFile) {
    files.add(getCurrentSegmentFileName());
  }
  final int size=size();
  for (int i=0; i < size; i++) {
    final SegmentInfo info=info(i);
    if (info.dir == dir) {
      files.addAll(info(i).files());
    }
  }
  return files;
}
