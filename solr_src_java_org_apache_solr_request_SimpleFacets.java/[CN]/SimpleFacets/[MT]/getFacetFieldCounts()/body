{
  NamedList res=new SimpleOrderedMap();
  String[] facetFs=params.getParams(FacetParams.FACET_FIELD);
  if (null != facetFs) {
    for (    String f : facetFs) {
      try {
        parseParams(FacetParams.FACET_FIELD,f);
        String termList=localParams == null ? null : localParams.get(CommonParams.TERMS);
        if (termList != null) {
          res.add(key,getListedTermCounts(facetValue,termList));
        }
 else {
          res.add(key,getTermCounts(facetValue));
        }
      }
 catch (      Exception e) {
        String msg="Exception during facet.field of " + f;
        SolrException.logOnce(SolrCore.log,msg,e);
        addException(msg,e);
      }
    }
  }
  return res;
}
