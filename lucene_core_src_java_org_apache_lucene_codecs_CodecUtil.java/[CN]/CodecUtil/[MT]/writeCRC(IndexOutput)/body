{
  long value=output.getChecksum();
  if ((value & 0xFFFFFFFF00000000L) != 0) {
    throw new IllegalStateException("Illegal CRC-32 checksum: " + value + " (resource="+ output+ ")");
  }
  output.writeLong(value);
}
