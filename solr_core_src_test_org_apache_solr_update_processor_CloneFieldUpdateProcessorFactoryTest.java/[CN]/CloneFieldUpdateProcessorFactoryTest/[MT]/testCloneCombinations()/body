{
  SolrInputDocument d;
  d=processAdd("clone-max-chars",doc(f("id","1111"),f("field1","text")));
  assertNotNull(d);
  assertEquals("text",d.getFieldValue("field1"));
  assertEquals("tex",d.getFieldValue("toField"));
  d=processAdd("clone-move",doc(f("id","1111"),f("field1","text")));
  assertNotNull(d);
  assertEquals("text",d.getFieldValue("toField"));
  assertFalse(d.containsKey("field1"));
  d=processAdd("clone-replace",doc(f("id","1111"),f("toField","IGNORED"),f("field1","text")));
  assertNotNull(d);
  assertEquals("text",d.getFieldValue("field1"));
  assertEquals("text",d.getFieldValue("toField"));
  d=processAdd("clone-append",doc(f("id","1111"),f("toField","aaa"),f("field1","bbb"),f("field2","ccc")));
  assertNotNull(d);
  assertEquals("bbb",d.getFieldValue("field1"));
  assertEquals("ccc",d.getFieldValue("field2"));
  assertEquals("aaa; bbb; ccc",d.getFieldValue("toField"));
  d=processAdd("clone-first",doc(f("id","1111"),f("field0","aaa"),f("field1","bbb"),f("field2","ccc")));
  assertNotNull(d);
  assertEquals("aaa",d.getFieldValue("toField"));
}
