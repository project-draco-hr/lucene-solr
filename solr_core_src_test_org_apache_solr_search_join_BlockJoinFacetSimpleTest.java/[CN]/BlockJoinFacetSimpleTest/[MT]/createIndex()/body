{
  final String match;
  List<String> docs=Arrays.asList(match=adoc("id","10","type_s","parent","BRAND_s","Nike").replace("</doc>","" + doc("id","11","type_s","child","COLOR_s","Red","SIZE_s","XL") + doc("id","12","type_s","child","COLOR_s","Red","SIZE_s","XL")+ doc("id","13","type_s","child","COLOR_s","Blue","SIZE_s","XL")+ "</doc>"),adoc("id","100","type_s","parent","BRAND_s","Reebok").replace("</doc>","" + doc("id","101","type_s","child","COLOR_s","Red","SIZE_s","M") + doc("id","102","type_s","child","COLOR_s","Blue","SIZE_s","XL")+ doc("id","104","type_s","child","COLOR_s","While","SIZE_s","XL")+ doc("id","105","type_s","child","COLOR_s","Green","SIZE_s","XXXL")+ "</doc>"));
  Collections.shuffle(docs,random());
  for (  String d : docs) {
    assertU(d);
  }
  if (random().nextBoolean()) {
    if (random().nextBoolean()) {
      assertU("let's have two segs",commit());
    }
    assertU("overriding matching doc",match);
  }
  assertU(commit());
  assertQ(req("q","*:*"),"//*[@numFound='" + 9 + "']");
}
