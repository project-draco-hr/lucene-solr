{
  ensureOpen();
  if (core.isPreFlex) {
    final PreFlexFields pre=(PreFlexFields)core.fields;
    SegmentTermPositions stp=new SegmentTermPositions(pre.freqStream,pre.proxStream,pre.tis,core.fieldInfos);
    stp.setSkipDocs(deletedDocs);
    return stp;
  }
 else {
    return new LegacyTermPositions();
  }
}
