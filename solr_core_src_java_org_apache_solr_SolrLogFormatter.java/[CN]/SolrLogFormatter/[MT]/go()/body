{
  final org.slf4j.Logger log=LoggerFactory.getLogger(SolrLogFormatter.class);
  Thread thread1=new Thread(){
    @Override public void run(){
      threadLocal.set("from thread1");
      log.error("[] webapp=/solr path=/select params={hello} wow");
    }
  }
;
  Thread thread2=new Thread(){
    @Override public void run(){
      threadLocal.set("from thread2");
      log.error("InThread2");
    }
  }
;
  thread1.start();
  thread2.start();
  thread1.join();
  thread2.join();
}
