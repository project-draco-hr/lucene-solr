{
  ZkStateReader zkStateReader=cores.getZkController().getZkStateReader();
  ClusterState clusterState=zkStateReader.getClusterState();
  Map<String,Slice> slices=clusterState.getActiveSlicesMap(corename);
  if (slices == null) {
    return null;
  }
  Set<Entry<String,Slice>> entries=slices.entrySet();
  SolrCore core=null;
  done:   for (  Entry<String,Slice> entry : entries) {
    ZkNodeProps leaderProps=clusterState.getLeader(corename,entry.getKey());
    if (leaderProps != null) {
      core=checkProps(cores,leaderProps);
    }
    if (core != null) {
      break done;
    }
    Map<String,Replica> shards=entry.getValue().getReplicasMap();
    Set<Entry<String,Replica>> shardEntries=shards.entrySet();
    for (    Entry<String,Replica> shardEntry : shardEntries) {
      Replica zkProps=shardEntry.getValue();
      core=checkProps(cores,zkProps);
      if (core != null) {
        break done;
      }
    }
  }
  return core;
}
