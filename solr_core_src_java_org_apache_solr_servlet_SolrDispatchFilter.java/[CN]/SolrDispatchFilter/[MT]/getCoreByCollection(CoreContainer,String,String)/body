{
  String collection=corename;
  ZkStateReader zkStateReader=cores.getZkController().getZkStateReader();
  ClusterState clusterState=zkStateReader.getClusterState();
  Map<String,Slice> slices=clusterState.getSlices(collection);
  if (slices == null) {
    return null;
  }
  Set<Entry<String,Slice>> entries=slices.entrySet();
  SolrCore core=null;
  done:   for (  Entry<String,Slice> entry : entries) {
    ZkNodeProps leaderProps=clusterState.getLeader(collection,entry.getKey());
    if (leaderProps != null) {
      core=checkProps(cores,path,leaderProps);
    }
    if (core != null) {
      break done;
    }
    Map<String,ZkNodeProps> shards=entry.getValue().getShards();
    Set<Entry<String,ZkNodeProps>> shardEntries=shards.entrySet();
    for (    Entry<String,ZkNodeProps> shardEntry : shardEntries) {
      ZkNodeProps zkProps=shardEntry.getValue();
      core=checkProps(cores,path,zkProps);
      if (core != null) {
        break done;
      }
    }
  }
  return core;
}
