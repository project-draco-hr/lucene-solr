{
  log.info("SolrDispatchFilter.init()" + this.getClass().getClassLoader());
  try {
    Properties extraProperties=(Properties)config.getServletContext().getAttribute(PROPERTIES_ATTRIBUTE);
    if (extraProperties == null)     extraProperties=new Properties();
    String solrHome=(String)config.getServletContext().getAttribute(SOLRHOME_ATTRIBUTE);
    if (solrHome == null)     solrHome=SolrResourceLoader.locateSolrHome();
    this.cores=createCoreContainer(solrHome,extraProperties);
    log.info("user.dir=" + System.getProperty("user.dir"));
  }
 catch (  Throwable t) {
    log.error("Could not start Solr. Check solr/home property and the logs");
    SolrCore.log(t);
    if (t instanceof Error) {
      throw (Error)t;
    }
  }
  log.info("SolrDispatchFilter.init() done");
}
