{
  ClusterState clusterState=cores.getZkController().getClusterState();
  Collection<Slice> slices=clusterState.getActiveSlices(collectionName);
  boolean byCoreName=false;
  if (slices == null) {
    slices=new ArrayList<>();
    byCoreName=true;
    slices=getSlicesForCollections(clusterState,slices,true);
    if (slices == null || slices.size() == 0) {
      slices=getSlicesForCollections(clusterState,slices,false);
    }
  }
  if (slices == null || slices.size() == 0) {
    return null;
  }
  String coreUrl=getCoreUrl(cores,collectionName,origCorename,clusterState,slices,byCoreName,true);
  if (coreUrl == null) {
    coreUrl=getCoreUrl(cores,collectionName,origCorename,clusterState,slices,byCoreName,false);
  }
  return coreUrl;
}
