{
  if (stateVer != null && !stateVer.isEmpty() && cores.isZooKeeperAware()) {
    String[] pairs=StringUtils.split(stateVer,'|');
    for (    String pair : pairs) {
      String[] pcs=StringUtils.split(pair,':');
      if (pcs.length == 2 && !pcs[0].isEmpty() && !pcs[1].isEmpty()) {
        Boolean status=cores.getZkController().getZkStateReader().checkValid(pcs[0],Integer.parseInt(pcs[1]));
        if (Boolean.TRUE != status) {
          throw new SolrException(ErrorCode.INVALID_STATE,"STATE STALE: " + pair + "valid : "+ status);
        }
      }
    }
  }
}
