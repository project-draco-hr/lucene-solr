{
  SolrQueryResponse solrResp=new SolrQueryResponse();
  SolrCore.preDecorateResponse(solrReq,solrResp);
  handler.handleRequest(solrReq,solrResp);
  SolrCore.postDecorateResponse(handler,solrReq,solrResp);
  if (log.isInfoEnabled() && solrResp.getToLog().size() > 0) {
    log.info(solrResp.getToLogAsString("[admin] "));
  }
  QueryResponseWriter respWriter=SolrCore.DEFAULT_RESPONSE_WRITERS.get(solrReq.getParams().get(CommonParams.WT));
  if (respWriter == null)   respWriter=SolrCore.DEFAULT_RESPONSE_WRITERS.get("standard");
  writeResponse(solrResp,response,respWriter,solrReq,Method.getMethod(req.getMethod()));
}
