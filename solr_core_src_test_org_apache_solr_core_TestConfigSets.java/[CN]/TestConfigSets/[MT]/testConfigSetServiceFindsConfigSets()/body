{
  CoreContainer container=null;
  try {
    container=setupContainer(TEST_PATH().resolve("configsets").toString());
    Path testDirectory=container.getResourceLoader().getInstancePath();
    SolrCore core1=container.create(new CoreDescriptor(container,"core1",testDirectory.resolve("core1").toString(),"configSet","configset-2"));
    assertThat(core1.getCoreDescriptor().getName(),is("core1"));
    assertThat(Paths.get(core1.getDataDir()).toString(),is(testDirectory.resolve("core1").resolve("data").toString()));
  }
  finally {
    if (container != null)     container.shutdown();
  }
}
