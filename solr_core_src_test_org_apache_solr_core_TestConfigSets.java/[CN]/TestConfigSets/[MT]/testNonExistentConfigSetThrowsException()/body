{
  CoreContainer container=null;
  try {
    container=setupContainer(getFile("solr/configsets").getAbsolutePath());
    Path testDirectory=container.getResourceLoader().getInstancePath();
    container.create(new CoreDescriptor(container,"core1",testDirectory.resolve("core1").toString(),"configSet","nonexistent"));
    fail("Expected core creation to fail");
  }
 catch (  Exception e) {
    Throwable wrappedException=getWrappedException(e);
    assertThat(wrappedException.getMessage(),containsString("nonexistent"));
  }
 finally {
    if (container != null)     container.shutdown();
  }
}
