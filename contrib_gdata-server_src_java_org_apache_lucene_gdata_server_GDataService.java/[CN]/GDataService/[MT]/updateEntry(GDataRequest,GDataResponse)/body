{
  ServerBaseEntry entry=buildEntry(request,response);
  entry.setFeedId(request.getFeedId());
  setVersionId(entry,request,response);
  entry.setServiceConfig(request.getConfigurator());
  if (LOG.isInfoEnabled())   LOG.info("update Entry" + entry.getId() + " for feedId: "+ request.getFeedId());
  if (entry.getId() == null) {
    throw new ServiceException("Entry id is null can not update entry",GDataResponse.BAD_REQUEST);
  }
  if (!entry.getId().equals(request.getEntryId())) {
    if (LOG.isInfoEnabled())     LOG.info("Entry id in the entry xml does not match the requested resource -- XML-ID:" + entry.getId() + "; Requested resource: "+ request.getEntryId());
    throw new ServiceException("Entry id in the entry xml does not match the requested resource",GDataResponse.BAD_REQUEST);
  }
  BaseEntry tempEntry=entry.getEntry();
  tempEntry.setUpdated(getCurrentDateTime());
  removeDynamicElements(entry.getEntry());
  BaseEntry retVal=null;
  try {
    retVal=this.storage.updateEntry(entry);
  }
 catch (  ResourceNotFoundException e) {
    ServiceException ex=new ServiceException("Could not update entry",e,GDataResponse.BAD_REQUEST);
    ex.setStackTrace(e.getStackTrace());
    throw ex;
  }
catch (  ModificationConflictException e) {
    ServiceException ex=new ServiceException("Could not update entry - version conflict",e,GDataResponse.CONFLICT);
    ex.setStackTrace(e.getStackTrace());
    throw ex;
  }
catch (  StorageException e) {
    ServiceException ex=new ServiceException("Could not update entry",e,GDataResponse.SERVER_ERROR);
    ex.setStackTrace(e.getStackTrace());
    throw ex;
  }
  this.entryEventMediator.entryUpdated(entry);
  return retVal;
}
