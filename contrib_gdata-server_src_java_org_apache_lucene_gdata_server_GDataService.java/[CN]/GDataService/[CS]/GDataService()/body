{
  try {
    StorageController controller=GDataServerRegistry.getRegistry().lookup(StorageController.class,ComponentType.STORAGECONTROLLER);
    if (controller == null)     throw new StorageException("StorageController is not registered");
    this.storage=controller.getStorage();
    this.entryEventMediator=GDataServerRegistry.getRegistry().getEntryEventMediator();
  }
 catch (  StorageException e) {
    LOG.fatal("Can't get Storage Instance -- can't serve any requests",e);
    ServiceException ex=new ServiceException("Can't get Storage instance" + e.getMessage(),e,GDataResponse.SERVER_ERROR);
    ex.setStackTrace(e.getStackTrace());
    throw ex;
  }
}
