{
  Directory newDir=newFSSwitchDirectory(Collections.singleton("cfs"));
  CompoundFileDirectory csw=new CompoundFileDirectory(newDir,"d.cfs",newIOContext(random),true);
  createSequenceFile(newDir,"d1",(byte)0,15);
  IndexOutput out=csw.createOutput("d.xyz",newIOContext(random));
  out.writeInt(0);
  try {
    newDir.copy(csw,"d1","d1",newIOContext(random));
    fail("file does already exist");
  }
 catch (  IllegalArgumentException e) {
  }
  out.close();
  assertEquals(1,csw.listAll().length);
  assertEquals("d.xyz",csw.listAll()[0]);
  csw.close();
  CompoundFileDirectory cfr=new CompoundFileDirectory(newDir,"d.cfs",newIOContext(random),false);
  assertEquals(1,cfr.listAll().length);
  assertEquals("d.xyz",cfr.listAll()[0]);
  cfr.close();
  newDir.close();
}
