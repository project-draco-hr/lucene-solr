{
  Deque<TransactionLog> logList;
synchronized (this) {
    logList=new LinkedList<TransactionLog>(logs);
    for (    TransactionLog log : logList) {
      log.incref();
    }
    if (prevTlog != null) {
      prevTlog.incref();
      logList.addFirst(prevTlog);
    }
    if (tlog != null) {
      tlog.incref();
      logList.addFirst(tlog);
    }
  }
  boolean success=false;
  RecentUpdates recentUpdates=null;
  try {
    recentUpdates=new RecentUpdates();
    recentUpdates.logList=logList;
    recentUpdates.update();
    success=true;
  }
  finally {
    if (!success && recentUpdates != null) {
      recentUpdates.close();
    }
  }
  return recentUpdates;
}
