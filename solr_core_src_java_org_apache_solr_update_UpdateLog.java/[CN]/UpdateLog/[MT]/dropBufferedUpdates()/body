{
  versionInfo.blockUpdates();
  try {
    if (state != State.BUFFERING)     return false;
    if (log.isInfoEnabled()) {
      log.info("Dropping buffered updates " + this);
    }
synchronized (this) {
      if (tlog != null) {
        tlog.rollback(recoveryInfo.positionOfStart);
      }
    }
    state=State.ACTIVE;
    operationFlags&=~FLAG_GAP;
  }
 catch (  IOException e) {
    SolrException.log(log,"Error attempting to roll back log",e);
    return false;
  }
 finally {
    versionInfo.unblockUpdates();
  }
  return true;
}
