{
  IndexWriterConfig conf=new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  IndexWriter indexWriter=new IndexWriter(indexDir,conf);
  DirectoryTaxonomyWriter taxoWriter=new DirectoryTaxonomyWriter(taxoDir);
  FacetFields facetFields=new FacetFields(taxoWriter);
  indexWriter.addDocument(newDocument(facetFields,"Date/2010/March/12","A/1"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2010/March/23","A/2"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2010/April/17","A/3"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2010/May/18","A/1"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2011/January/1","A/3"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2011/February/12","A/1"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2011/February/18","A/4"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2012/August/15","A/1"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2012/July/5","A/2"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2013/September/13","A/1"));
  indexWriter.addDocument(newDocument(facetFields,"Date/2013/September/25","A/4"));
  IOUtils.close(indexWriter,taxoWriter);
}
