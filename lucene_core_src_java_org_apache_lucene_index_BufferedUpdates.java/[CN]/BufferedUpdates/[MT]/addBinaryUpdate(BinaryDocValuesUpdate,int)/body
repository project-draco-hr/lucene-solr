{
  LinkedHashMap<Term,BinaryDocValuesUpdate> fieldUpdates=binaryUpdates.get(update.field);
  if (fieldUpdates == null) {
    fieldUpdates=new LinkedHashMap<>();
    binaryUpdates.put(update.field,fieldUpdates);
    bytesUsed.addAndGet(BYTES_PER_BINARY_FIELD_ENTRY);
  }
  final BinaryDocValuesUpdate current=fieldUpdates.get(update.term);
  if (current != null && docIDUpto < current.docIDUpto) {
    return;
  }
  update.docIDUpto=docIDUpto;
  if (current != null) {
    fieldUpdates.remove(update.term);
  }
  fieldUpdates.put(update.term,update);
  numBinaryUpdates.incrementAndGet();
  if (current == null) {
    bytesUsed.addAndGet(BYTES_PER_BINARY_UPDATE_ENTRY + update.sizeInBytes());
  }
}
