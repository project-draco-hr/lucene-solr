{
  LinkedHashMap<Term,NumericUpdate> fieldUpdates=numericUpdates.get(update.field);
  if (fieldUpdates == null) {
    fieldUpdates=new LinkedHashMap<>();
    numericUpdates.put(update.field,fieldUpdates);
    bytesUsed.addAndGet(BYTES_PER_NUMERIC_FIELD_ENTRY);
  }
  final NumericUpdate current=fieldUpdates.get(update.term);
  if (current != null && docIDUpto < current.docIDUpto) {
    return;
  }
  update.docIDUpto=docIDUpto;
  if (current != null) {
    fieldUpdates.remove(update.term);
  }
  fieldUpdates.put(update.term,update);
  numNumericUpdates.incrementAndGet();
  if (current == null) {
    bytesUsed.addAndGet(BYTES_PER_NUMERIC_UPDATE_ENTRY + update.sizeInBytes());
  }
}
