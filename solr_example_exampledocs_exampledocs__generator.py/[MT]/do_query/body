def do_query(filmlist, cursor=''):
    params = {'query': json.dumps(query), 'key': API_KEY, 'cursor': cursor, }
    url = ((service_url + '?') + urllib.parse.urlencode(params))
    data = urllib.request.urlopen(url).read().decode('utf-8')
    response = json.loads(data)
    for item in response['result']:
        del item['type']
        try:
            datetime.datetime.strptime(item['initial_release_date'], '%Y-%m-%d')
        except ValueError:
            del item['initial_release_date']
        filmlist.append(item)
    return response.get('cursor')
