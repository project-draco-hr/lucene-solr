def gen_xml(filmlist):
    root = ET.Element('add')
    for film in filmlist:
        doc = ET.SubElement(root, 'doc')
        for key in film:
            if isinstance(film[key], list):
                for value in film[key]:
                    field = ET.SubElement(doc, 'field')
                    field.set('name', key)
                    field.text = value
            else:
                field = ET.SubElement(doc, 'field')
                field.set('name', key)
                field.text = film[key]
    tree = ET.ElementTree(root)
    with open('films.xml', 'w') as f:
        f.write(minidom.parseString(ET.tostring(tree.getroot(), 'utf-8')).toprettyxml(indent='  '))
