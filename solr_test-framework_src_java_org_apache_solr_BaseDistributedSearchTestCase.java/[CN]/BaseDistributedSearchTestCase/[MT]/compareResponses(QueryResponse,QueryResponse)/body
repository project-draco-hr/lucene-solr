{
  String cmp;
  if (System.getProperty("remove.version.field") != null) {
    if (a.getResults() != null) {
      for (      SolrDocument doc : a.getResults()) {
        doc.removeFields("_version_");
      }
    }
    if (b.getResults() != null) {
      for (      SolrDocument doc : b.getResults()) {
        doc.removeFields("_version_");
      }
    }
  }
  cmp=compare(a.getResponse(),b.getResponse(),flags,handle);
  if (cmp != null) {
    log.error("Mismatched responses:\n" + a + "\n"+ b);
    Assert.fail(cmp);
  }
}
