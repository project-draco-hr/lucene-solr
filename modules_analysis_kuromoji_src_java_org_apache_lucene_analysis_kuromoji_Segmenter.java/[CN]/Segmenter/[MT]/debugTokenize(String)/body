{
  ViterbiNode[][][] lattice;
  try {
    lattice=this.viterbi.build(text.toCharArray(),0,text.length());
  }
 catch (  IOException impossible) {
    throw new RuntimeException(impossible);
  }
  List<ViterbiNode> bestPath=this.viterbi.search(lattice);
  return new GraphvizFormatter(ConnectionCosts.getInstance()).format(lattice[0],lattice[1],bestPath);
}
