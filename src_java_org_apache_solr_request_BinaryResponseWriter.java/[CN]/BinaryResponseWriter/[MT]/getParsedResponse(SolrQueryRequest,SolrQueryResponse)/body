{
  try {
    Resolver resolver=new Resolver(req,rsp.getReturnFields());
    ByteArrayOutputStream out=new ByteArrayOutputStream();
    NamedListCodec codec=new NamedListCodec(resolver);
    codec.marshal(rsp.getValues(),out);
    InputStream in=new ByteArrayInputStream(out.toByteArray());
    return codec.unmarshal(in);
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
}
