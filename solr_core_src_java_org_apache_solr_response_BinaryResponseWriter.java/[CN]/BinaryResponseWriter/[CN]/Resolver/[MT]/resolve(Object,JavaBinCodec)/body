{
  if (o instanceof ResultContext) {
    writeResults((ResultContext)o,codec);
    return null;
  }
  if (o instanceof DocList) {
    ResultContext ctx=new BasicResultContext((DocList)o,returnFields,null,null,solrQueryRequest);
    writeResults(ctx,codec);
    return null;
  }
  if (o instanceof StorableField) {
    if (schema == null)     schema=solrQueryRequest.getSchema();
    StorableField f=(StorableField)o;
    SchemaField sf=schema.getFieldOrNull(f.name());
    try {
      o=DocsStreamer.getValue(sf,f);
    }
 catch (    Exception e) {
      LOG.warn("Error reading a field : " + o,e);
    }
  }
  return o;
}
