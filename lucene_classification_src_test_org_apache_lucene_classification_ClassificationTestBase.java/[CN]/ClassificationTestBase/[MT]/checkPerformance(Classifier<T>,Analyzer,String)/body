{
  LeafReader leafReader=null;
  long trainStart=System.currentTimeMillis();
  try {
    populatePerformanceIndex(analyzer);
    leafReader=SlowCompositeReaderWrapper.wrap(indexWriter.getReader());
    classifier.train(leafReader,textFieldName,classFieldName,analyzer);
    long trainEnd=System.currentTimeMillis();
    long trainTime=trainEnd - trainStart;
    assertTrue("training took more than 2 mins : " + trainTime / 1000 + "s",trainTime < 120000);
  }
  finally {
    if (leafReader != null)     leafReader.close();
  }
}
