{
  AtomicReader atomicReader=null;
  long trainStart=System.currentTimeMillis();
  long trainEnd=0l;
  try {
    populatePerformanceIndex(analyzer);
    atomicReader=SlowCompositeReaderWrapper.wrap(indexWriter.getReader());
    classifier.train(atomicReader,textFieldName,classFieldName,analyzer);
    trainEnd=System.currentTimeMillis();
    long trainTime=trainEnd - trainStart;
    assertTrue("training took more than 2 mins : " + trainTime / 1000 + "s",trainTime < 120000);
  }
  finally {
    if (atomicReader != null)     atomicReader.close();
  }
}
