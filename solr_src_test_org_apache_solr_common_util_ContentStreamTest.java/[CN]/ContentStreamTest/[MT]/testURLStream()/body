{
  String content=null;
  URL url=new URL("http://svn.apache.org/repos/asf/lucene/dev/trunk/");
  InputStream in=null;
  try {
    in=url.openStream();
    content=IOUtils.toString(in);
  }
 catch (  ConnectException ex) {
    assumeNoException("Unable to connect to " + url + " to run the test.",ex);
  }
 finally {
    if (in != null) {
      IOUtils.closeQuietly(in);
    }
  }
  assertTrue(content.length() > 10);
  ContentStreamBase stream=new ContentStreamBase.URLStream(url);
  assertEquals(content.length(),stream.getSize().intValue());
  in=stream.getStream();
  try {
    assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(content.getBytes()),in));
  }
  finally {
    IOUtils.closeQuietly(in);
  }
  stream=new ContentStreamBase.URLStream(url);
  assertTrue(IOUtils.contentEquals(new StringReader(content),stream.getReader()));
}
