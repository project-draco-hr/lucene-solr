{
  StringBuilder sb=new StringBuilder();
  for (  String fieldName : inputFields) {
    log.debug("Appending field " + fieldName);
    if (doc.containsKey(fieldName)) {
      Collection<Object> fieldValues=doc.getFieldValues(fieldName);
      if (fieldValues != null) {
        for (        Object content : fieldValues) {
          if (content instanceof String) {
            sb.append((String)content);
            sb.append(" ");
          }
 else {
            log.warn("Field " + fieldName + " not a String value, not including in detection");
          }
        }
      }
    }
  }
  return sb.toString();
}
