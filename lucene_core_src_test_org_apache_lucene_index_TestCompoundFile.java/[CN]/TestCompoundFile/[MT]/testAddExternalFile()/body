{
  createSequenceFile(dir,"d1",(byte)0,15);
  Directory newDir=newDirectory();
  byte id[]=StringHelper.randomId();
  CompoundFileDirectory csw=new CompoundFileDirectory(id,newDir,"d.cfs",newIOContext(random()),true);
  dir.copy(csw,"d1","d1",newIOContext(random()));
  csw.close();
  CompoundFileDirectory csr=new CompoundFileDirectory(id,newDir,"d.cfs",newIOContext(random()),false);
  IndexInput expected=dir.openInput("d1",newIOContext(random()));
  IndexInput actual=csr.openInput("d1",newIOContext(random()));
  assertSameStreams("d1",expected,actual);
  assertSameSeekBehavior("d1",expected,actual);
  expected.close();
  actual.close();
  csr.close();
  newDir.close();
}
