{
  Directory newDir=newDirectory();
  byte id[]=StringHelper.randomId();
  CompoundFileDirectory csw=new CompoundFileDirectory(id,newDir,"d.cfs",newIOContext(random()),true);
  IndexOutput out=csw.createOutput("d.xyz",newIOContext(random()));
  out.writeInt(0);
  out.close();
  csw.close();
  csw.close();
  csw=new CompoundFileDirectory(id,newDir,"d.cfs",newIOContext(random()),false);
  IndexInput openInput=csw.openInput("d.xyz",newIOContext(random()));
  assertEquals(0,openInput.readInt());
  openInput.close();
  csw.close();
  csw.close();
  newDir.close();
}
