{
  testInsertEntry();
  for (int i=1; i < this.count; i++) {
    if (i % 2 == 0 || i < 10) {
      this.modifier.deleteEntry("" + i,feedId);
    }
    ReferenceCounter<StorageQuery> query=StorageCoreController.getStorageCoreController().getStorageQuery();
    if (i % 2 == 0 || i < 10) {
      assertNull(query.get().singleEntryQuery("" + i,feedId,this.profile));
    }
 else     assertEquals("" + i,query.get().singleEntryQuery("" + i,feedId,this.profile).getId());
    query.decrementRef();
  }
  StorageCoreController.getStorageCoreController().forceWrite();
  IndexSearcher searcher=new IndexSearcher(this.dir);
  for (int i=1; i < this.count; i++) {
    Query luceneQuery=new TermQuery(new Term(StorageEntryWrapper.FIELD_ENTRY_ID,"" + i));
    Hits hits=searcher.search(luceneQuery);
    if (i % 2 == 0 || i < 10) {
      assertEquals(0,hits.length());
    }
 else     assertEquals(1,hits.length());
  }
  searcher.close();
}
