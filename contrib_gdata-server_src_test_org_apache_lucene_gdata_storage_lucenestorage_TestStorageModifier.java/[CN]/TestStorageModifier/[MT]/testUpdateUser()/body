{
  testSaveUser();
  GDataAccount user=new GDataAccount();
  user.setName(username);
  user.setPassword("newPass");
  StorageAccountWrapper wrapper=new StorageAccountWrapper(user);
  this.modifier.updateAccount(wrapper);
  IndexSearcher searcher=new IndexSearcher(this.dir);
  Query q=new TermQuery(new Term(StorageAccountWrapper.FIELD_ACCOUNTNAME,username));
  Hits h=searcher.search(q);
  assertEquals("length == 1",1,h.length());
  GDataAccount storedUser=StorageAccountWrapper.buildEntity(h.doc(0));
  assertTrue(storedUser.equals(user));
  assertFalse(storedUser.getPassword().equals(password));
  searcher.close();
}
