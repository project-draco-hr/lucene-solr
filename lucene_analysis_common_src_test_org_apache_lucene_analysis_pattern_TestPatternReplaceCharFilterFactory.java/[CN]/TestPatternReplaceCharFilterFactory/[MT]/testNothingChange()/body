{
  Reader reader=new StringReader("this is test.");
  reader=charFilterFactory("PatternReplace","pattern","(aa)\\s+(bb)\\s+(cc)","replacement","$1$2$3").create(reader);
  TokenStream ts=new MockTokenizer(reader,MockTokenizer.WHITESPACE,false);
  assertTokenStreamContents(ts,new String[]{"this","is","test."},new int[]{0,5,8},new int[]{4,7,13});
}
