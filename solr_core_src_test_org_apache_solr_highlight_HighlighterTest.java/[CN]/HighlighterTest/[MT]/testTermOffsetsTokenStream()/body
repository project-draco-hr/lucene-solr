{
  String[] multivalued={"a b c d","e f g","h","i j k l m n"};
  Analyzer a1=new WhitespaceAnalyzer(TEST_VERSION_CURRENT);
  TokenStream tokenStream=a1.tokenStream("",new StringReader("a b c d e f g h i j k l m n"));
  tokenStream.reset();
  TermOffsetsTokenStream tots=new TermOffsetsTokenStream(tokenStream);
  for (  String v : multivalued) {
    TokenStream ts1=tots.getMultiValuedTokenStream(v.length());
    Analyzer a2=new WhitespaceAnalyzer(TEST_VERSION_CURRENT);
    TokenStream ts2=a2.tokenStream("",new StringReader(v));
    ts2.reset();
    while (ts1.incrementToken()) {
      assertTrue(ts2.incrementToken());
      assertEquals(ts1,ts2);
    }
    assertFalse(ts2.incrementToken());
  }
}
