{
  List<String> rawCollectionsList=StrUtils.splitSmart(collection,",",true);
  Set<String> collectionNames=new HashSet<>();
  for (  String collectionName : rawCollectionsList) {
    if (!clusterState.getCollections().contains(collectionName)) {
      Aliases aliases=zkStateReader.getAliases();
      String alias=aliases.getCollectionAlias(collectionName);
      if (alias != null) {
        List<String> aliasList=StrUtils.splitSmart(alias,",",true);
        collectionNames.addAll(aliasList);
        continue;
      }
      throw new SolrException(ErrorCode.BAD_REQUEST,"Collection not found: " + collectionName);
    }
    collectionNames.add(collectionName);
  }
  return collectionNames;
}
