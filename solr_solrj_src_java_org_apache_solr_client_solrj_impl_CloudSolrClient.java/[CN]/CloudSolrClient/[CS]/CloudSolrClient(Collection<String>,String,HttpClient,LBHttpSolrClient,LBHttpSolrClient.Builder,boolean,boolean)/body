{
  this.clientIsInternal=httpClient == null;
  this.shutdownLBHttpSolrServer=lbSolrClient == null;
  if (lbHttpSolrClientBuilder != null)   lbSolrClient=lbHttpSolrClientBuilder.build();
  if (lbSolrClient != null)   httpClient=lbSolrClient.getHttpClient();
  this.myClient=httpClient == null ? HttpClientUtil.createClient(null) : httpClient;
  if (lbSolrClient == null)   lbSolrClient=createLBHttpSolrClient(myClient);
  this.lbClient=lbSolrClient;
  this.zkHost=buildZkHostString(zkHosts,chroot);
  this.updatesToLeaders=updatesToLeaders;
  this.directUpdatesToLeadersOnly=directUpdatesToLeadersOnly;
}
