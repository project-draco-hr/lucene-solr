{
  String[] tests=new String[docIds != null && docIds.length > 0 ? docIds.length + 1 : 1];
  tests[0]="*[count(//doc)=" + count + "]";
  if (docIds != null && docIds.length > 0) {
    int i=1;
    for (    int docId : docIds) {
      tests[i++]="//result/doc/int[@name='id'][.='" + docId + "']";
    }
  }
  String method=exact ? "sfilt" : "bbox";
  assertQ(req("fl","id","q","*:*","rows","1000","fq","{!" + method + " fl="+ fieldName+ "}","pt",pt,"d",String.valueOf(distance)),tests);
}
