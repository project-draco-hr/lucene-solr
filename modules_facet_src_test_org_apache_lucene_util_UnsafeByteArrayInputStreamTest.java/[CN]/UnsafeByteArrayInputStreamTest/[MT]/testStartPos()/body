{
  int length=100;
  byte[] buffer=new byte[length];
  for (int i=0; i < length; ++i) {
    buffer[i]=(byte)i;
  }
  int startPos=5;
  byte[] result=new byte[buffer.length];
  UnsafeByteArrayInputStream ubais=new UnsafeByteArrayInputStream(buffer,startPos,length);
  int index=0;
  int by=ubais.read();
  while (by >= 0) {
    result[index++]=(byte)(by);
    by=ubais.read();
  }
  assertEquals(length - startPos,index);
  for (int i=startPos; i < length; i++) {
    assertEquals(buffer[i],result[i - startPos]);
  }
}
