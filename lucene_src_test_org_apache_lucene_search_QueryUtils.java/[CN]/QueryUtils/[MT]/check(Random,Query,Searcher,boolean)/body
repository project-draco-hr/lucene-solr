{
  try {
    check(q1);
    if (s != null) {
      if (s instanceof IndexSearcher) {
        IndexSearcher is=(IndexSearcher)s;
        checkFirstSkipTo(q1,is);
        checkSkipTo(q1,is);
        if (wrap) {
          check(random,q1,wrapUnderlyingReader(random,is,-1),false);
          check(random,q1,wrapUnderlyingReader(random,is,0),false);
          check(random,q1,wrapUnderlyingReader(random,is,+1),false);
        }
      }
      if (wrap) {
        check(random,q1,wrapSearcher(random,s,-1),false);
        check(random,q1,wrapSearcher(random,s,0),false);
        check(random,q1,wrapSearcher(random,s,+1),false);
      }
      checkExplanations(q1,s);
      checkSerialization(q1,s);
      Query q2=(Query)q1.clone();
      checkEqual(s.rewrite(q1),s.rewrite(q2));
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
