{
  try {
    String m=(null == message) ? "" : message + " ";
    String response=h.query(req);
    String results=h.validateXPath(response,tests);
    if (null != results) {
      fail(m + "query failed XPath: " + results+ "\n xml response was: "+ response+ "\n request was: "+ req.getParamString());
    }
  }
 catch (  XPathExpressionException e1) {
    throw new RuntimeException("XPath is invalid",e1);
  }
catch (  Exception e2) {
    throw new RuntimeException("Exception during query",e2);
  }
}
