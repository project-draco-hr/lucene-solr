{
  String coreName=getCoreName();
  if (coreName != null) {
    dataDir=new File(System.getProperty("java.io.tmpdir") + System.getProperty("file.separator") + System.currentTimeMillis());
  }
 else {
    dataDir=new File(System.getProperty("java.io.tmpdir") + System.getProperty("file.separator") + getClass().getName()+ "-"+ System.currentTimeMillis());
  }
  dataDir.mkdirs();
  solrConfig=h.createConfig(getSolrConfigFile());
  h=new TestHarness(coreName,dataDir.getAbsolutePath(),solrConfig,getSchemaFile());
  lrf=h.getRequestFactory("standard",0,20,"version","2.2");
}
