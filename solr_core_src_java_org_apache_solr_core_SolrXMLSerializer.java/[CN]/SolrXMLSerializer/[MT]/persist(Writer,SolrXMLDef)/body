{
  w.write("<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n");
  w.write("<solr");
  Map<String,String> rootSolrAttribs=solrXMLDef.solrAttribs;
  Set<String> solrAttribKeys=rootSolrAttribs.keySet();
  for (  String key : solrAttribKeys) {
    String value=rootSolrAttribs.get(key);
    writeAttribute(w,key,value);
  }
  w.write(">\n");
  Properties containerProperties=solrXMLDef.containerProperties;
  if (containerProperties != null && !containerProperties.isEmpty()) {
    writeProperties(w,containerProperties,"  ");
  }
  if (solrXMLDef.loggingAttribs.size() > 0 || solrXMLDef.watcherAttribs.size() > 0) {
    w.write(INDENT + "<logging");
    for (    Map.Entry<String,String> ent : solrXMLDef.loggingAttribs.entrySet()) {
      writeAttribute(w,ent.getKey(),ent.getValue());
    }
    w.write(">\n");
    if (solrXMLDef.watcherAttribs.size() > 0) {
      w.write(INDENT + INDENT + "<watcher");
      for (      Map.Entry<String,String> ent : solrXMLDef.watcherAttribs.entrySet()) {
        writeAttribute(w,ent.getKey(),ent.getValue());
      }
      w.write("/>\n");
    }
    w.write(INDENT + "</logging>\n");
  }
  w.write(INDENT + "<cores");
  Map<String,String> coresAttribs=solrXMLDef.coresAttribs;
  Set<String> coreAttribKeys=coresAttribs.keySet();
  for (  String key : coreAttribKeys) {
    String value=coresAttribs.get(key);
    writeAttribute(w,key,value);
  }
  w.write(">\n");
  for (  SolrCoreXMLDef coreDef : solrXMLDef.coresDefs) {
    persist(w,coreDef);
  }
  if (solrXMLDef.shardHandlerNode != null) {
    w.write(nodeToXML(solrXMLDef.shardHandlerNode));
  }
  w.write(INDENT + "</cores>\n");
  w.write("</solr>\n");
}
