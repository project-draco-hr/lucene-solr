{
  Version[] versions=new Version[]{Version.LUCENE_30,Version.LUCENE_31};
  for (  Version version : versions) {
    CharacterUtils instance=CharacterUtils.getInstance(version);
    Reader reader=new StringReader("helloworld");
    CharacterBuffer buffer=CharacterUtils.newCharacterBuffer(6);
    assertTrue(instance.fill(buffer,reader));
    assertEquals(0,buffer.getOffset());
    assertEquals(6,buffer.getLength());
    assertEquals("hellow",new String(buffer.getBuffer()));
    assertTrue(instance.fill(buffer,reader));
    assertEquals(4,buffer.getLength());
    assertEquals(0,buffer.getOffset());
    assertEquals("orld",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
    assertFalse(instance.fill(buffer,reader));
  }
}
