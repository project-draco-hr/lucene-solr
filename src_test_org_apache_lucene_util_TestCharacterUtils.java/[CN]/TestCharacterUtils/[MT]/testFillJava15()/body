{
  String input="1234\ud801\udc1c789123\ud801\ud801\udc1c\ud801";
  CharacterUtils instance=CharacterUtils.getInstance(TEST_VERSION_CURRENT);
  Reader reader=new StringReader(input);
  CharacterBuffer buffer=CharacterUtils.newCharacterBuffer(5);
  assertTrue(instance.fill(buffer,reader));
  assertEquals(4,buffer.getLength());
  assertEquals("1234",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
  assertTrue(instance.fill(buffer,reader));
  assertEquals(5,buffer.getLength());
  assertEquals("\ud801\udc1c789",new String(buffer.getBuffer()));
  assertTrue(instance.fill(buffer,reader));
  assertEquals(4,buffer.getLength());
  assertEquals("123\ud801",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
  assertTrue(instance.fill(buffer,reader));
  assertEquals(2,buffer.getLength());
  assertEquals("\ud801\udc1c",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
  assertTrue(instance.fill(buffer,reader));
  assertEquals(1,buffer.getLength());
  assertEquals("\ud801",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
  assertFalse(instance.fill(buffer,reader));
}
