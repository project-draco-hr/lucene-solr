{
  if (content.length() == 0) {
    return null;
  }
  breakIterator.setText(content);
  List<OffsetsEnum> offsetsEnums=fieldOffsetStrategy.getOffsetsEnums(reader,docId,content);
  Passage[] passages;
  try {
    passages=highlightOffsetsEnums(offsetsEnums);
  }
  finally {
    IOUtils.close(offsetsEnums);
  }
  if (passages.length == 0) {
    passages=getSummaryPassagesNoHighlight(maxNoHighlightPassages == -1 ? maxPassages : maxNoHighlightPassages);
  }
  if (passages.length > 0) {
    return passageFormatter.format(passages,content);
  }
 else {
    return null;
  }
}
