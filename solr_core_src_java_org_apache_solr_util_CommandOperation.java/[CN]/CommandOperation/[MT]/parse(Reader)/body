{
  JSONParser parser=new JSONParser(rdr);
  ObjectBuilder ob=new ObjectBuilder(parser);
  if (parser.lastEvent() != JSONParser.OBJECT_START) {
    throw new RuntimeException("The JSON must be an Object of the form {\"command\": {...},...");
  }
  List<CommandOperation> operations=new ArrayList<>();
  for (; ; ) {
    int ev=parser.nextEvent();
    if (ev == JSONParser.OBJECT_END)     return operations;
    Object key=ob.getKey();
    ev=parser.nextEvent();
    Object val=ob.getVal();
    if (val instanceof List) {
      List list=(List)val;
      for (      Object o : list) {
        operations.add(new CommandOperation(String.valueOf(key),o));
      }
    }
 else {
      operations.add(new CommandOperation(String.valueOf(key),val));
    }
  }
}
