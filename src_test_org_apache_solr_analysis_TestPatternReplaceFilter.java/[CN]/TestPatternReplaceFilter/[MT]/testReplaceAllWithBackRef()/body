{
  String input="aabfooaabfooabfoob ab caaaaaaaaab";
  TokenStream ts=new PatternReplaceFilter(new WhitespaceTokenizer(new StringReader(input)),Pattern.compile("(a*)b"),"$1\\$",true);
  assertEquals("aa$fooaa$fooa$foo$",ts.next().termText());
  assertEquals("a$",ts.next().termText());
  assertEquals("caaaaaaaaa$",ts.next().termText());
  assertNull(ts.next());
}
