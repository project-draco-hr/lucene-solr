{
  String input="aabfooaabfooabfoob ab caaaaaaaaab";
  TokenStream ts=new PatternReplaceFilter(new WhitespaceTokenizer(new StringReader(input)),Pattern.compile("a*b"),"-",true);
  Token token=ts.next();
  assertEquals("-foo-foo-foo-",new String(token.termBuffer(),0,token.termLength()));
  token=ts.next();
  assertEquals("-",new String(token.termBuffer(),0,token.termLength()));
  token=ts.next();
  assertEquals("c-",new String(token.termBuffer(),0,token.termLength()));
  token=ts.next();
  assertNull(token);
}
