{
  File tempSolrHome=createTempDir().toFile();
  FileUtils.copyFileToDirectory(new File(ExternalPaths.SERVER_HOME,"solr.xml"),tempSolrHome);
  File collection1Dir=new File(tempSolrHome,"collection1");
  FileUtils.forceMkdir(collection1Dir);
  FileUtils.copyDirectoryToDirectory(new File(ExternalPaths.SCHEMALESS_CONFIGSET),collection1Dir);
  Properties props=new Properties();
  props.setProperty("name","collection1");
  OutputStreamWriter writer=null;
  try {
    writer=new OutputStreamWriter(FileUtils.openOutputStream(new File(collection1Dir,"core.properties")),"UTF-8");
    props.store(writer,null);
  }
  finally {
    if (writer != null) {
      try {
        writer.close();
      }
 catch (      Exception ignore) {
      }
    }
  }
  createJetty(tempSolrHome.getAbsolutePath());
}
