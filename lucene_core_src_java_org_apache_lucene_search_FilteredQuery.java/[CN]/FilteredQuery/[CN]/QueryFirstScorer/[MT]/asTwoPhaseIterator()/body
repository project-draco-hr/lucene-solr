{
  TwoPhaseIterator inner=scorer.asTwoPhaseIterator();
  if (inner != null) {
    return new TwoPhaseIterator(){
      @Override public DocIdSetIterator approximation(){
        return inner.approximation();
      }
      @Override public boolean matches() throws IOException {
        return inner.matches() && filterBits.get(scorer.docID());
      }
    }
;
  }
 else {
    return new TwoPhaseIterator(){
      @Override public DocIdSetIterator approximation(){
        return scorer;
      }
      @Override public boolean matches() throws IOException {
        return filterBits.get(scorer.docID());
      }
    }
;
  }
}
