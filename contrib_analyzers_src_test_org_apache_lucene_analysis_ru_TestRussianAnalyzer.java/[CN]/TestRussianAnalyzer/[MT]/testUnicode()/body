{
  RussianAnalyzer ra=new RussianAnalyzer(RussianCharsets.UnicodeRussian);
  inWords=new InputStreamReader(new FileInputStream(new File(dataDir,"/org/apache/lucene/analysis/ru/testUnicode.txt")),"Unicode");
  sampleUnicode=new InputStreamReader(new FileInputStream(new File(dataDir,"/org/apache/lucene/analysis/ru/resUnicode.htm")),"Unicode");
  TokenStream in=ra.tokenStream("all",inWords);
  RussianLetterTokenizer sample=new RussianLetterTokenizer(sampleUnicode,RussianCharsets.UnicodeRussian);
  for (; ; ) {
    Token token=in.next();
    if (token == null) {
      break;
    }
    Token sampleToken=sample.next();
    assertEquals("Unicode",token.termText(),sampleToken == null ? null : sampleToken.termText());
  }
  inWords.close();
  sampleUnicode.close();
}
