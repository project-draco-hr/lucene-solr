{
  Replica replica=null;
  ClusterState clusterState=null;
  for (int idx=0; idx < 300; ++idx) {
    clusterState=client.getZkStateReader().getClusterState();
    replica=clusterState.getReplica(collectionName,replicaName);
    if (replica == null) {
      fail("Could not find collection/replica pair! " + collectionName + "/"+ replicaName);
    }
    if (StringUtils.equals(val,replica.getStr(property)))     return;
    Thread.sleep(100);
  }
  fail("Property '" + property + "' with value "+ replica.getStr(property)+ " not set correctly for collection/replica pair: "+ collectionName+ "/"+ replicaName+ " property map is "+ replica.getProperties().toString()+ ".");
}
