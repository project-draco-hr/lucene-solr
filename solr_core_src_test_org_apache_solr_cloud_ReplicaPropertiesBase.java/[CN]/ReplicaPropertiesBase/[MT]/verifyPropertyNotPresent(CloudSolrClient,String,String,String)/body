{
  ClusterState clusterState=null;
  Replica replica=null;
  for (int idx=0; idx < 300; ++idx) {
    client.getZkStateReader().updateClusterState();
    clusterState=client.getZkStateReader().getClusterState();
    replica=clusterState.getReplica(collectionName,replicaName);
    if (replica == null) {
      fail("Could not find collection/replica pair! " + collectionName + "/"+ replicaName);
    }
    if (StringUtils.isBlank(replica.getStr(property)))     return;
    Thread.sleep(100);
  }
  fail("Property " + property + " not set correctly for collection/replica pair: "+ collectionName+ "/"+ replicaName+ ". Replica props: "+ replica.getProperties().toString()+ ". Cluster state is "+ clusterState.toString());
}
