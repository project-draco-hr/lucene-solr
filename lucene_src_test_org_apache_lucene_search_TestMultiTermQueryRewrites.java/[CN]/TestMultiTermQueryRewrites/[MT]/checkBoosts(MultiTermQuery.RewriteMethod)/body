{
  final MultiTermQuery mtq=new MultiTermQuery("data"){
    @Override protected TermsEnum getTermsEnum(    IndexReader reader,    AttributeSource atts) throws IOException {
      return new TermRangeTermsEnum(reader,field,"2","7",true,true,null){
        final BoostAttribute boostAtt=attributes().addAttribute(BoostAttribute.class);
        @Override protected AcceptStatus accept(        BytesRef term){
          boostAtt.setBoost(Float.parseFloat(term.utf8ToString()));
          return super.accept(term);
        }
      }
;
    }
    @Override public String toString(    String field){
      return "dummy";
    }
  }
;
  mtq.setRewriteMethod(method);
  final Query q1=searcher.rewrite(mtq);
  final Query q2=multiSearcher.rewrite(mtq);
  if (VERBOSE) {
    System.out.println();
    System.out.println("single segment: " + q1);
    System.out.println(" multi segment: " + q2);
  }
  assertEquals("The multi-segment case must produce same rewritten query",q1,q2);
  checkBooleanQueryBoosts((BooleanQuery)q1);
  checkBooleanQueryBoosts((BooleanQuery)q2);
}
