{
  final String f="a_tdt";
  final String pre="//lst[@name='facet_dates']/lst[@name='" + f + "']";
  assertQ("checking counts for lower",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-16T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","lower"),"*[count(" + pre + "/int)=18]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-13T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-14T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-15T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='1']",pre + "/int[@name='after'  ][.='1']",pre + "/int[@name='between'][.='8']");
  assertQ("checking counts for upper",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-16T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","upper"),"*[count(" + pre + "/int)=18]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-07T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-13T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-14T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-15T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='2']",pre + "/int[@name='after'  ][.='1']",pre + "/int[@name='between'][.='7']");
  assertQ("checking counts for lower & upper",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-16T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","lower","facet.date.include","upper"),"*[count(" + pre + "/int)=18]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-04T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-13T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-14T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-15T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='1']",pre + "/int[@name='after'  ][.='1']",pre + "/int[@name='between'][.='8']");
  assertQ("checking counts for upper & edge",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-16T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","upper","facet.date.include","edge"),"*[count(" + pre + "/int)=18]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-07T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-13T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-14T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-15T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='1']",pre + "/int[@name='after'  ][.='1']",pre + "/int[@name='between'][.='8']");
  assertQ("checking counts for upper & outer",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-13T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","upper","facet.date.include","outer"),"*[count(" + pre + "/int)=15]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-07T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='2']",pre + "/int[@name='after'  ][.='4']",pre + "/int[@name='between'][.='5']");
  assertQ("checking counts for lower & edge",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-13T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","lower","facet.date.include","edge"),"*[count(" + pre + "/int)=15]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='1']",pre + "/int[@name='after'  ][.='3']",pre + "/int[@name='between'][.='6']");
  assertQ("checking counts for lower & outer",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-13T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","lower","facet.date.include","outer"),"*[count(" + pre + "/int)=15]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='0']",pre + "/int[@name='before' ][.='2']",pre + "/int[@name='after'  ][.='4']",pre + "/int[@name='between'][.='5']");
  assertQ("checking counts for lower & edge & outer",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-13T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","lower","facet.date.include","edge","facet.date.include","outer"),"*[count(" + pre + "/int)=15]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-04T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='2']",pre + "/int[@name='after'  ][.='4']",pre + "/int[@name='between'][.='6']");
  assertQ("checking counts for all",req("q","*:*","rows","0","facet","true","facet.date",f,"facet.date.start","1976-07-01T00:00:00.000Z","facet.date.end","1976-07-13T00:00:00.000Z","facet.date.gap","+1DAY","facet.date.other","all","facet.date.include","all"),"*[count(" + pre + "/int)=15]",pre + "/int[@name='1976-07-01T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-02T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-03T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-04T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-05T00:00:00Z'][.='2'  ]",pre + "/int[@name='1976-07-06T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-07T00:00:00Z'][.='1'  ]",pre + "/int[@name='1976-07-08T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-09T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-10T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-11T00:00:00Z'][.='0']",pre + "/int[@name='1976-07-12T00:00:00Z'][.='1'  ]",pre + "/int[@name='before' ][.='2']",pre + "/int[@name='after'  ][.='4']",pre + "/int[@name='between'][.='6']");
}
