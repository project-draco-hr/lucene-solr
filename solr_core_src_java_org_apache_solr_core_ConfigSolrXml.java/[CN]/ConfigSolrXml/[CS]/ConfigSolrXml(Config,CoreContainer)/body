{
  super(config);
  try {
    checkForIllegalConfig();
    fillPropMap();
    config.substituteProperties();
    String coreRoot=get(CfgProp.SOLR_COREROOTDIRECTORY,(container == null ? config.getResourceLoader().getInstanceDir() : container.getSolrHome()));
    coreDescriptorMap=solrCoreDiscoverer.discover(container,new File(coreRoot));
  }
 catch (  IOException e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
  }
}
