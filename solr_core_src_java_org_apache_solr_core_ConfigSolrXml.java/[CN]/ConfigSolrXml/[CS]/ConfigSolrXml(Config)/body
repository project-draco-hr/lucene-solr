{
  super(config);
  try {
    checkForIllegalConfig();
    fillPropMap();
    config.substituteProperties();
    log.info("Config-defined core root directory: {}",get(CfgProp.SOLR_COREROOTDIRECTORY,""));
    String coreRoot=get(CfgProp.SOLR_COREROOTDIRECTORY,config.getResourceLoader().getInstanceDir());
    coresLocator=new CorePropertiesLocator(coreRoot);
  }
 catch (  IOException e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
  }
}
