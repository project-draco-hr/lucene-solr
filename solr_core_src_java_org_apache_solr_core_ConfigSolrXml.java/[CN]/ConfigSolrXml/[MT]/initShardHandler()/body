{
  PluginInfo info=null;
  Node shfn=getNode("solr/cores/shardHandlerFactory",false);
  if (shfn != null) {
    info=new PluginInfo(shfn,"shardHandlerFactory",false,true);
  }
 else {
    Map m=new HashMap();
    m.put("class",HttpShardHandlerFactory.class.getName());
    info=new PluginInfo("shardHandlerFactory",m,null,Collections.<PluginInfo>emptyList());
  }
  ShardHandlerFactory fac;
  try {
    fac=getResourceLoader().findClass(info.className,ShardHandlerFactory.class).newInstance();
  }
 catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error instantiating shardHandlerFactory class " + info.className);
  }
  if (fac instanceof PluginInfoInitialized) {
    ((PluginInfoInitialized)fac).init(info);
  }
  return fac;
}
