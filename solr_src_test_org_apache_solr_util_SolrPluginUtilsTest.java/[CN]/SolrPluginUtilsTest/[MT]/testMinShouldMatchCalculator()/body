{
  assertEquals(0,calcMSM(5,"0"));
  assertEquals(0,calcMSM(5,"0%"));
  assertEquals(0,calcMSM(5,"-5"));
  assertEquals(0,calcMSM(5,"-100%"));
  assertEquals(3,calcMSM(5,"3"));
  assertEquals(2,calcMSM(5,"-3"));
  assertEquals(3,calcMSM(3,"3"));
  assertEquals(0,calcMSM(3,"-3"));
  assertEquals(3,calcMSM(3,"5"));
  assertEquals(0,calcMSM(3,"-5"));
  assertEquals(0,calcMSM(3,"25%"));
  assertEquals(1,calcMSM(4,"25%"));
  assertEquals(1,calcMSM(5,"25%"));
  assertEquals(2,calcMSM(10,"25%"));
  assertEquals(3,calcMSM(3,"-25%"));
  assertEquals(3,calcMSM(4,"-25%"));
  assertEquals(4,calcMSM(5,"-25%"));
  assertEquals(8,calcMSM(10,"-25%"));
  assertEquals(1,calcMSM(1,"3<0"));
  assertEquals(2,calcMSM(2,"3<0"));
  assertEquals(3,calcMSM(3,"3<0"));
  assertEquals(0,calcMSM(4,"3<0"));
  assertEquals(0,calcMSM(5,"3<0"));
  assertEquals(1,calcMSM(1,"3<25%"));
  assertEquals(2,calcMSM(2,"3<25%"));
  assertEquals(3,calcMSM(3,"3<25%"));
  assertEquals(1,calcMSM(4,"3<25%"));
  assertEquals(1,calcMSM(5,"3<25%"));
  assertEquals(1,calcMSM(1,"3<-25% 10<-3"));
  assertEquals(2,calcMSM(2,"3<-25% 10<-3"));
  assertEquals(3,calcMSM(3,"3<-25% 10<-3"));
  assertEquals(3,calcMSM(4,"3<-25% 10<-3"));
  assertEquals(4,calcMSM(5,"3<-25% 10<-3"));
  assertEquals(5,calcMSM(6,"3<-25% 10<-3"));
  assertEquals(6,calcMSM(7,"3<-25% 10<-3"));
  assertEquals(6,calcMSM(8,"3<-25% 10<-3"));
  assertEquals(7,calcMSM(9,"3<-25% 10<-3"));
  assertEquals(8,calcMSM(10,"3<-25% 10<-3"));
  assertEquals(8,calcMSM(11,"3<-25% 10<-3"));
  assertEquals(9,calcMSM(12,"3<-25% 10<-3"));
  assertEquals(97,calcMSM(100,"3<-25% 10<-3"));
  BooleanQuery q=new BooleanQuery();
  q.add(new TermQuery(new Term("a","b")),Occur.SHOULD);
  q.add(new TermQuery(new Term("a","c")),Occur.SHOULD);
  q.add(new TermQuery(new Term("a","d")),Occur.SHOULD);
  q.add(new TermQuery(new Term("a","d")),Occur.SHOULD);
  SolrPluginUtils.setMinShouldMatch(q,"0");
  assertEquals(0,q.getMinimumNumberShouldMatch());
  SolrPluginUtils.setMinShouldMatch(q,"1");
  assertEquals(1,q.getMinimumNumberShouldMatch());
  SolrPluginUtils.setMinShouldMatch(q,"50%");
  assertEquals(2,q.getMinimumNumberShouldMatch());
  SolrPluginUtils.setMinShouldMatch(q,"99");
  assertEquals(4,q.getMinimumNumberShouldMatch());
  q.add(new TermQuery(new Term("a","e")),Occur.MUST);
  q.add(new TermQuery(new Term("a","f")),Occur.MUST);
  SolrPluginUtils.setMinShouldMatch(q,"50%");
  assertEquals(2,q.getMinimumNumberShouldMatch());
}
