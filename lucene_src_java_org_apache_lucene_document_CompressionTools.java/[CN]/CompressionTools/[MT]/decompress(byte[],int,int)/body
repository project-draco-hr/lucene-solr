{
  ByteArrayOutputStream bos=new ByteArrayOutputStream(length);
  Inflater decompressor=new Inflater();
  try {
    decompressor.setInput(value,offset,length);
    final byte[] buf=new byte[1024];
    while (!decompressor.finished()) {
      int count=decompressor.inflate(buf);
      bos.write(buf,0,count);
    }
  }
  finally {
    decompressor.end();
  }
  return bos.toByteArray();
}
