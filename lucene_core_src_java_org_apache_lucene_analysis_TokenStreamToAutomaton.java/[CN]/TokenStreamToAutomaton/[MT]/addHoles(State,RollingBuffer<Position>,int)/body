{
  Position posData=positions.get(pos);
  Position prevPosData=positions.get(pos - 1);
  while (posData.arriving == null || prevPosData.leaving == null) {
    if (posData.arriving == null) {
      posData.arriving=new State();
      posData.arriving.addTransition(new Transition(POS_SEP,posData.leaving));
    }
    if (prevPosData.leaving == null) {
      if (pos == 1) {
        prevPosData.leaving=startState;
      }
 else {
        prevPosData.leaving=new State();
      }
      if (prevPosData.arriving != null) {
        prevPosData.arriving.addTransition(new Transition(POS_SEP,prevPosData.leaving));
      }
    }
    prevPosData.leaving.addTransition(new Transition(HOLE,posData.arriving));
    pos--;
    if (pos <= 0) {
      break;
    }
    posData=prevPosData;
    prevPosData=positions.get(pos - 1);
  }
}
