{
  IndexWriterConfig iwc=newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  Directory dir=newDirectory();
  RandomIndexWriter riw=new RandomIndexWriter(random(),dir,iwc);
  try {
    riw.w.getConfig().clone();
    fail("did not hit expected exception");
  }
 catch (  IllegalStateException ise) {
  }
  riw.close();
  dir.close();
}
