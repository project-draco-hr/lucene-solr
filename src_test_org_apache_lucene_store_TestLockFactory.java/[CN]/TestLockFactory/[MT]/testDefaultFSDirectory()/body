{
  File indexDirName=_TestUtil.getTempDir("index.TestLockFactory1");
  IndexWriter writer=new IndexWriter(indexDirName,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  assertTrue("FSDirectory did not use correct LockFactory: got " + writer.getDirectory().getLockFactory(),SimpleFSLockFactory.class.isInstance(writer.getDirectory().getLockFactory()) || NativeFSLockFactory.class.isInstance(writer.getDirectory().getLockFactory()));
  IndexWriter writer2=null;
  try {
    writer2=new IndexWriter(indexDirName,new WhitespaceAnalyzer(),false,IndexWriter.MaxFieldLength.LIMITED);
    fail("Should have hit an IOException with two IndexWriters on default SimpleFSLockFactory");
  }
 catch (  IOException e) {
  }
  writer.close();
  if (writer2 != null) {
    writer2.close();
  }
  _TestUtil.rmDir(indexDirName);
}
