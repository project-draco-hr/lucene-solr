{
  File indexDirName=_TestUtil.getTempDir("index.TestLockFactory5");
  LockFactory lf=new SingleInstanceLockFactory();
  FSDirectory fs1=FSDirectory.getDirectory(indexDirName,lf);
  try {
    FSDirectory.getDirectory(indexDirName,new SingleInstanceLockFactory());
    fail("Should have hit an IOException because LockFactory instances differ");
  }
 catch (  IOException e) {
  }
  FSDirectory fs2=null;
  try {
    fs2=FSDirectory.getDirectory(indexDirName,lf);
  }
 catch (  IOException e) {
    e.printStackTrace(System.out);
    fail("Should not have hit an IOException because LockFactory instances are the same");
  }
  fs1.close();
  if (fs2 != null) {
    fs2.close();
  }
  _TestUtil.rmDir(indexDirName);
}
