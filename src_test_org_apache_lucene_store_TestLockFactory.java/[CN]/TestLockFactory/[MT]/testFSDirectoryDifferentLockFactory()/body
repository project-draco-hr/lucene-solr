{
  String indexDirName="index.TestLockFactory5";
  LockFactory lf=new SingleInstanceLockFactory();
  FSDirectory fs1=FSDirectory.getDirectory(indexDirName,true,lf);
  try {
    FSDirectory fs2=FSDirectory.getDirectory(indexDirName,true,new SingleInstanceLockFactory());
    fail("Should have hit an IOException because LockFactory instances differ");
  }
 catch (  IOException e) {
  }
  FSDirectory fs2=null;
  try {
    fs2=FSDirectory.getDirectory(indexDirName,true,lf);
  }
 catch (  IOException e) {
    e.printStackTrace(System.out);
    fail("Should not have hit an IOException because LockFactory instances are the same");
  }
  fs1.close();
  if (fs2 != null) {
    fs2.close();
  }
  rmDir(indexDirName);
}
