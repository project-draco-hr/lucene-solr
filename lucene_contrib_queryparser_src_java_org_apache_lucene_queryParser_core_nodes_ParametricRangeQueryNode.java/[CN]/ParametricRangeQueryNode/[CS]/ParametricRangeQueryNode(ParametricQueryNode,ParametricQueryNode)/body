{
  if (upperBound.getOperator() != CompareOperator.LE && upperBound.getOperator() != CompareOperator.LT) {
    throw new IllegalArgumentException("upper bound should have " + CompareOperator.LE + " or "+ CompareOperator.LT);
  }
  if (lowerBound.getOperator() != CompareOperator.GE && lowerBound.getOperator() != CompareOperator.GT) {
    throw new IllegalArgumentException("lower bound should have " + CompareOperator.GE + " or "+ CompareOperator.GT);
  }
  if (upperBound.getField() != lowerBound.getField() || (upperBound.getField() != null && !upperBound.getField().equals(lowerBound.getField()))) {
    throw new IllegalArgumentException("lower and upper bounds should have the same field name!");
  }
  allocate();
  setLeaf(false);
  add(lowerBound);
  add(upperBound);
}
