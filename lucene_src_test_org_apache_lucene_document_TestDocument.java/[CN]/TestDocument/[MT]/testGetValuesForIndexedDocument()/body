{
  Directory dir=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random,dir);
  writer.addDocument(makeDocumentWithFields());
  IndexReader reader=writer.getReader();
  IndexSearcher searcher=newSearcher(reader);
  Query query=new TermQuery(new Term("keyword","test1"));
  ScoreDoc[] hits=searcher.search(query,null,1000).scoreDocs;
  assertEquals(1,hits.length);
  doAssert(searcher.doc(hits[0].doc),true);
  writer.close();
  reader.close();
  dir.close();
}
