{
  LimitTokenPositionFilterFactory factory=new LimitTokenPositionFilterFactory();
  Map<String,String> args=new HashMap<String,String>();
  args.put(LimitTokenPositionFilterFactory.MAX_TOKEN_POSITION_KEY,"1");
  factory.init(args);
  String input="one two three four five";
  MockTokenizer tok=new MockTokenizer(new StringReader(input),MockTokenizer.WHITESPACE,false);
  tok.setEnableChecks(false);
  ShingleFilter shingleFilter=new ShingleFilter(tok,2,3);
  shingleFilter.setOutputUnigrams(true);
  TokenStream stream=factory.create(shingleFilter);
  assertTokenStreamContents(stream,new String[]{"one","one two","one two three"});
}
