{
  TestHighlightRunner helper=new TestHighlightRunner(){
    @Override public void run() throws Exception {
      String docMainText="fred is one of the people";
      QueryParser parser=new QueryParser(TEST_VERSION_CURRENT,FIELD_NAME,analyzer);
      Query query=parser.parse("fred category:people");
      Scorer fieldSpecificScorer=null;
      if (mode == TestHighlightRunner.QUERY) {
        fieldSpecificScorer=new QueryScorer(query,FIELD_NAME);
      }
 else       if (mode == TestHighlightRunner.QUERY_TERM) {
        fieldSpecificScorer=new QueryTermScorer(query,"contents");
      }
      Highlighter fieldSpecificHighlighter=new Highlighter(new SimpleHTMLFormatter(),fieldSpecificScorer);
      fieldSpecificHighlighter.setTextFragmenter(new NullFragmenter());
      String result=fieldSpecificHighlighter.getBestFragment(analyzer,FIELD_NAME,docMainText);
      assertEquals("Should match",result,"<B>fred</B> is one of the people");
      Scorer fieldInSpecificScorer=null;
      if (mode == TestHighlightRunner.QUERY) {
        fieldInSpecificScorer=new QueryScorer(query,null);
      }
 else       if (mode == TestHighlightRunner.QUERY_TERM) {
        fieldInSpecificScorer=new QueryTermScorer(query);
      }
      Highlighter fieldInSpecificHighlighter=new Highlighter(new SimpleHTMLFormatter(),fieldInSpecificScorer);
      fieldInSpecificHighlighter.setTextFragmenter(new NullFragmenter());
      result=fieldInSpecificHighlighter.getBestFragment(analyzer,FIELD_NAME,docMainText);
      assertEquals("Should match",result,"<B>fred</B> is one of the <B>people</B>");
      reader.close();
    }
  }
;
  helper.start();
}
