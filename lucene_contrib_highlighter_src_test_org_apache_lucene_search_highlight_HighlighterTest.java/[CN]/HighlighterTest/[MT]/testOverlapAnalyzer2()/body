{
  TestHighlightRunner helper=new TestHighlightRunner(){
    @Override public void run() throws Exception {
      String s="Hi-Speed10 foo";
      Query query;
      Highlighter highlighter;
      String result;
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("foo");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("Hi-Speed10 <B>foo</B>",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("10");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("Hi-Speed<B>10</B> foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hi");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("<B>Hi</B>-Speed10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("speed");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("Hi-<B>Speed</B>10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hispeed");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("<B>Hi-Speed</B>10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hi speed");
      highlighter=getHighlighter(query,"text",getTS2(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2(),s,3,"...");
      assertEquals("<B>Hi-Speed</B>10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("foo");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("Hi-Speed10 <B>foo</B>",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("10");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("Hi-Speed<B>10</B> foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hi");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("<B>Hi</B>-Speed10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("speed");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("Hi-<B>Speed</B>10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hispeed");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("<B>Hi-Speed</B>10 foo",result);
      query=new QueryParser(TEST_VERSION_CURRENT,"text",new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).parse("hi speed");
      highlighter=getHighlighter(query,"text",getTS2a(),HighlighterTest.this);
      result=highlighter.getBestFragments(getTS2a(),s,3,"...");
      assertEquals("<B>Hi-Speed</B>10 foo",result);
    }
  }
;
  helper.start();
}
