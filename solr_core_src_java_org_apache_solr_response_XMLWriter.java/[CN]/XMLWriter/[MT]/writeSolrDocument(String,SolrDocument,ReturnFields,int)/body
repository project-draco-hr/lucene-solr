{
  startTag("doc",name,false);
  incLevel();
  for (  String fname : doc.getFieldNames()) {
    if (returnFields != null && !returnFields.wantsField(fname)) {
      continue;
    }
    Object val=doc.getFieldValue(fname);
    if ("_explain_".equals(fname)) {
      System.out.println(val);
    }
    writeVal(fname,val);
  }
  if (doc.hasChildDocuments()) {
    for (    SolrDocument childDoc : doc.getChildDocuments()) {
      writeSolrDocument(null,childDoc,new SolrReturnFields(),idx);
    }
  }
  decLevel();
  writer.write("</doc>");
}
