{
  Expression expr=JavascriptCompiler.compile("sqrt(a) + ln(b)");
  SimpleBindings bindings=new SimpleBindings();
  bindings.add(new SortField("a",SortField.Type.INT));
  bindings.add(new SortField("b",SortField.Type.INT));
  ValueSource vs1=expr.getValueSource(bindings);
  assertEquals(vs1,vs1);
  assertFalse(vs1.equals(null));
  assertFalse(vs1.equals("foobar"));
  ValueSource vs2=expr.getValueSource(bindings);
  assertEquals(vs1.hashCode(),vs2.hashCode());
  assertEquals(vs1,vs2);
  SimpleBindings bindings2=new SimpleBindings();
  bindings2.add(new SortField("a",SortField.Type.INT));
  bindings2.add(new SortField("b",SortField.Type.INT));
  ValueSource vs3=expr.getValueSource(bindings2);
  assertEquals(vs1,vs3);
  SimpleBindings bindings3=new SimpleBindings();
  bindings3.add(new SortField("a",SortField.Type.LONG));
  bindings3.add(new SortField("b",SortField.Type.INT));
  ValueSource vs4=expr.getValueSource(bindings3);
  assertFalse(vs1.equals(vs4));
}
