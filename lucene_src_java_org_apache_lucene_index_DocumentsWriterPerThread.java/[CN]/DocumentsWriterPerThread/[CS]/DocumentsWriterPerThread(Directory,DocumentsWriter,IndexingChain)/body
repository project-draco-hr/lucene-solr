{
  parent.indexWriter.testPoint("DocumentsWriterPerThread.init start");
  this.directory=directory;
  this.parent=parent;
  this.writer=parent.indexWriter;
  this.infoStream=parent.indexWriter.getInfoStream();
  this.docState=new DocState(this);
  this.docState.similarity=parent.config.getSimilarity();
  this.docState.maxFieldLength=parent.config.getMaxFieldLength();
  consumer=indexingChain.getChain(this);
  if (consumer instanceof DocFieldProcessor) {
    docFieldProcessor=(DocFieldProcessor)consumer;
  }
}
