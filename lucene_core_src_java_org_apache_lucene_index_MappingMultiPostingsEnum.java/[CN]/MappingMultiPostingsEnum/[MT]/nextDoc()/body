{
  while (true) {
    if (current == null) {
      if (upto == numSubs - 1) {
        return this.doc=NO_MORE_DOCS;
      }
 else {
        upto++;
        final int reader=subs[upto].slice.readerIndex;
        current=subs[upto].postingsEnum;
        currentBase=mergeState.docBase[reader];
        currentMap=mergeState.docMaps[reader];
      }
    }
    int doc=current.nextDoc();
    if (doc != NO_MORE_DOCS) {
      doc=currentMap.get(doc);
      if (doc == -1) {
        continue;
      }
      return this.doc=currentBase + doc;
    }
 else {
      current=null;
    }
  }
}
