{
  String startDate=getLocalizedDate(2002,1,1);
  String endDate=getLocalizedDate(2002,1,4);
  Calendar endDateExpected=new GregorianCalendar(TimeZone.getDefault(),Locale.getDefault());
  endDateExpected.clear();
  endDateExpected.set(2002,1,4,23,59,59);
  endDateExpected.set(Calendar.MILLISECOND,999);
  final String defaultField="default";
  final String monthField="month";
  final String hourField="hour";
  StandardQueryParser qp=new StandardQueryParser();
  Map<CharSequence,DateTools.Resolution> dateRes=new HashMap<>();
  dateRes.put(monthField,DateTools.Resolution.MONTH);
  qp.setDateResolution(dateRes);
  qp.setDateResolution(DateTools.Resolution.MILLISECOND);
  dateRes.put(hourField,DateTools.Resolution.HOUR);
  qp.setDateResolution(dateRes);
  assertDateRangeQueryEquals(qp,defaultField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MILLISECOND);
  assertDateRangeQueryEquals(qp,monthField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MONTH);
  assertDateRangeQueryEquals(qp,hourField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.HOUR);
}
