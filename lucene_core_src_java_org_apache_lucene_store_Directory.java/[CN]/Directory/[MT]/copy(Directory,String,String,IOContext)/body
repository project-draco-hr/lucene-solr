{
  IndexOutput os=null;
  IndexInput is=null;
  IOException priorException=null;
  try {
    os=to.createOutput(dest,context);
    is=openInput(src,context);
    os.copyBytes(is,is.length());
  }
 catch (  IOException ioe) {
    priorException=ioe;
  }
 finally {
    boolean success=false;
    try {
      IOUtils.closeWhileHandlingException(priorException,os,is);
      success=true;
    }
  finally {
      if (!success) {
        try {
          to.deleteFile(dest);
        }
 catch (        Throwable t) {
        }
      }
    }
  }
}
