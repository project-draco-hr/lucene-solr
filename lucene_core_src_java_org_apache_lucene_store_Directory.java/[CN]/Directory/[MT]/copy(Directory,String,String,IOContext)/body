{
  IndexOutput os=null;
  IndexInput is=null;
  boolean success=false;
  try {
    os=to.createOutput(dest,context);
    is=openInput(src,context);
    os.copyBytes(is,is.length());
    success=true;
  }
  finally {
    if (success) {
      IOUtils.close(os,is);
    }
 else {
      IOUtils.closeWhileHandlingException(os,is);
      try {
        to.deleteFile(dest);
      }
 catch (      Throwable t) {
      }
    }
  }
}
