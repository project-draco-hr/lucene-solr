{
  ExampleUtils.log("Query: " + q);
  IndexSearcher searcher=new IndexSearcher(indexReader);
  TopScoreDocCollector topDocsCollector=TopScoreDocCollector.create(10,true);
  if (indexingParams == null) {
    indexingParams=new DefaultFacetIndexingParams();
  }
  FacetSearchParams facetSearchParams=new FacetSearchParams(indexingParams);
  for (  FacetRequest frq : facetRequests) {
    facetSearchParams.addFacetRequest(frq);
  }
  FacetsCollector facetsCollector=new FacetsCollector(facetSearchParams,indexReader,taxoReader);
  searcher.search(q,MultiCollector.wrap(topDocsCollector,facetsCollector));
  List<FacetResult> res=facetsCollector.getFacetResults();
  int i=0;
  for (  FacetResult facetResult : res) {
    ExampleUtils.log("Res " + (i++) + ": "+ facetResult);
  }
  return res;
}
