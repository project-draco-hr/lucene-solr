{
  Directory dir=FSDirectory.getDirectory(indexDir);
  MockRAMDirectory ramDir=new MockRAMDirectory(dir);
  dir.close();
  assertEquals(ramDir.sizeInBytes(),ramDir.getRecomputedSizeInBytes());
  IndexReader reader=IndexReader.open(ramDir);
  assertEquals(docsToAdd,reader.numDocs());
  IndexSearcher searcher=new IndexSearcher(reader);
  for (int i=0; i < docsToAdd; i++) {
    Document doc=searcher.doc(i);
    assertTrue(doc.getField("content") != null);
  }
  reader.close();
  searcher.close();
}
