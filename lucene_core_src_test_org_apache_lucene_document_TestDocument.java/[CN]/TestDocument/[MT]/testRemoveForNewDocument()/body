{
  Document doc=makeDocumentWithFields();
  assertEquals(10,doc.getFields().size());
  doc.removeFields("keyword");
  assertEquals(8,doc.getFields().size());
  doc.removeFields("doesnotexists");
  doc.removeFields("keyword");
  assertEquals(8,doc.getFields().size());
  doc.removeField("text");
  assertEquals(7,doc.getFields().size());
  doc.removeField("text");
  assertEquals(6,doc.getFields().size());
  doc.removeField("text");
  assertEquals(6,doc.getFields().size());
  doc.removeField("doesnotexists");
  assertEquals(6,doc.getFields().size());
  doc.removeFields("unindexed");
  assertEquals(4,doc.getFields().size());
  doc.removeFields("unstored");
  assertEquals(2,doc.getFields().size());
  doc.removeFields("doesnotexists");
  assertEquals(2,doc.getFields().size());
  doc.removeFields("indexed_not_tokenized");
  assertEquals(0,doc.getFields().size());
}
