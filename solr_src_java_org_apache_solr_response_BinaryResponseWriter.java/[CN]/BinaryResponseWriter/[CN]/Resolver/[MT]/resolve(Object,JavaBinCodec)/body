{
  if (o instanceof ResultContext) {
    writeResults((ResultContext)o,codec);
    return null;
  }
  if (o instanceof DocList) {
    ResultContext ctx=new ResultContext();
    ctx.docs=(DocList)o;
    writeResults(ctx,codec);
    return null;
  }
  if (o instanceof SolrDocument) {
    SolrDocument doc=(SolrDocument)o;
    for (    String fname : doc.getFieldNames()) {
      if (!returnFields.wantsField(fname)) {
        doc.removeFields(fname);
      }
    }
    return doc;
  }
  return o;
}
