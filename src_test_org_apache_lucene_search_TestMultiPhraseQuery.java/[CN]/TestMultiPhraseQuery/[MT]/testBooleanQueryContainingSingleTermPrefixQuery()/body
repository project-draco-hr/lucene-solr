{
  RAMDirectory indexStore=new RAMDirectory();
  IndexWriter writer=new IndexWriter(indexStore,new SimpleAnalyzer(),true);
  add("blueberry pie",writer);
  add("blueberry chewing gum",writer);
  add("blue raspberry pie",writer);
  writer.optimize();
  writer.close();
  IndexSearcher searcher=new IndexSearcher(indexStore);
  BooleanQuery q=new BooleanQuery();
  q.add(new TermQuery(new Term("body","pie")),BooleanClause.Occur.MUST);
  MultiPhraseQuery trouble=new MultiPhraseQuery();
  trouble.add(new Term[]{new Term("body","blueberry"),new Term("body","blue")});
  q.add(trouble,BooleanClause.Occur.MUST);
  Hits hits=searcher.search(q);
  assertEquals("Wrong number of hits",2,hits.length());
  searcher.close();
}
