{
  RAMDirectory indexStore=new RAMDirectory();
  IndexWriter writer=new IndexWriter(indexStore,new StandardAnalyzer(new HashSet(0)),true,IndexWriter.MaxFieldLength.LIMITED);
  add("This is a test","object",writer);
  add("a note","note",writer);
  writer.close();
  IndexSearcher searcher=new IndexSearcher(indexStore,true);
  BooleanQuery q=new BooleanQuery();
  q.add(new TermQuery(new Term("type","note")),BooleanClause.Occur.MUST);
  MultiPhraseQuery trouble=new MultiPhraseQuery();
  trouble.add(new Term("body","a"));
  trouble.add(new Term[]{new Term("body","test"),new Term("body","this")});
  q.add(trouble,BooleanClause.Occur.MUST);
  ScoreDoc[] hits=searcher.search(q,null,1000).scoreDocs;
  assertEquals("Wrong number of hits",0,hits.length);
  searcher.close();
}
