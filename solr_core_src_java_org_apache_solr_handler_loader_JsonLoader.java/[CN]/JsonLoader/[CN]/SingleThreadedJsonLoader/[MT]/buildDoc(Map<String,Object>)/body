{
  SolrInputDocument result=new SolrInputDocument();
  for (  Map.Entry<String,Object> e : m.entrySet()) {
    if (e.getKey() == null) {
      if (e.getValue() instanceof List) {
        List value=(List)e.getValue();
        for (        Object o : value) {
          if (o instanceof Map)           result.addChildDocument(buildDoc((Map)o));
        }
      }
 else       if (e.getValue() instanceof Map) {
        result.addChildDocument(buildDoc((Map)e));
      }
    }
 else {
      result.setField(e.getKey(),e.getValue());
    }
  }
  return result;
}
