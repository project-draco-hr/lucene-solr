{
  ModifiableSolrParams params=new ModifiableSolrParams(super.getParams());
  if (collection == null)   throw new IllegalArgumentException("You must call setCollection() on this request");
  params.add(CoreAdminParams.COLLECTION,collection);
  if (shard == null || shard.isEmpty()) {
    if (routeKey == null) {
      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Either shard or routeKey must be provided");
    }
    params.add(ShardParams._ROUTE_,routeKey);
  }
 else {
    params.add(CoreAdminParams.SHARD,shard);
  }
  if (node != null) {
    params.add("node",node);
  }
  if (instanceDir != null) {
    params.add("instanceDir",instanceDir);
  }
  if (dataDir != null) {
    params.add("dataDir",dataDir);
  }
  if (properties != null) {
    addProperties(params,properties);
  }
  return params;
}
