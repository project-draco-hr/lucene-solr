{
  String replicaCoreUrl=replica.getCoreUrl();
  log.info("Sending commit request to: " + replicaCoreUrl);
  long startMs=System.currentTimeMillis();
  try (HttpSolrClient client=new HttpSolrClient(replicaCoreUrl)){
    try {
      client.commit();
      long tookMs=System.currentTimeMillis() - startMs;
      log.info("Sent commit request to " + replicaCoreUrl + " OK, took: "+ tookMs);
    }
 catch (    Exception exc) {
      Throwable rootCause=SolrException.getRootCause(exc);
      if (rootCause instanceof NoHttpResponseException) {
        log.warn("No HTTP response from sending commit request to " + replicaCoreUrl + "; will re-try after waiting 3 seconds");
        Thread.sleep(3000);
        client.commit();
        log.info("Second attempt at sending commit to " + replicaCoreUrl + " succeeded.");
      }
 else {
        throw exc;
      }
    }
  }
 }
