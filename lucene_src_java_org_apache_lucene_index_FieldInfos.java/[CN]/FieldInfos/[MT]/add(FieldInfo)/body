{
  int preferredFieldNumber=fi.number;
  FieldInfo other=localFieldInfos.get(preferredFieldNumber);
  if (other == null || !other.name.equals(fi.name)) {
    preferredFieldNumber=-1;
  }
  return addOrUpdateInternal(fi.name,preferredFieldNumber,fi.isIndexed,fi.storeTermVector,fi.storePositionWithTermVector,fi.storeOffsetWithTermVector,fi.omitNorms,fi.storePayloads,fi.omitTermFreqAndPositions);
}
