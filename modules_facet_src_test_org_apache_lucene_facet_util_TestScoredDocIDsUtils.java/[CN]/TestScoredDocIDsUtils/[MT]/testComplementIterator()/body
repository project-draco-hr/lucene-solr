{
  final int n=atLeast(10000);
  final OpenBitSet bits=new OpenBitSet(n);
  for (int i=0; i < 5 * n; i++) {
    bits.flip(random.nextInt(n));
  }
  OpenBitSet verify=new OpenBitSet(n);
  verify.or(bits);
  ScoredDocIDs scoredDocIDs=ScoredDocIdsUtils.createScoredDocIds(bits,n);
  Directory dir=newDirectory();
  IndexReader reader=createReaderWithNDocs(random,n,dir);
  try {
    assertEquals(n - verify.cardinality(),ScoredDocIdsUtils.getComplementSet(scoredDocIDs,reader).size());
  }
  finally {
    reader.close();
    dir.close();
  }
}
