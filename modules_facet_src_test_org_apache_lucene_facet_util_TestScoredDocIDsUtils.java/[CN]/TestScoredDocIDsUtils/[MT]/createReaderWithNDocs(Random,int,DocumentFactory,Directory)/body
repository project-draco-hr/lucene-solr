{
  RandomIndexWriter writer=new RandomIndexWriter(random,dir,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer(random,MockTokenizer.KEYWORD,false)));
  for (int docNum=0; docNum < nDocs; docNum++) {
    writer.addDocument(docFactory.getDoc(docNum));
  }
  writer.close();
  IndexReader reader=IndexReader.open(dir,false);
  reader.deleteDocuments(new Term(DocumentFactory.field,DocumentFactory.delTxt));
  reader.close();
  return IndexReader.open(dir,true);
}
