{
  for (int n=RETRIES; n > 0; n--) {
    FacetsCollector samplingFC=samplingCollector(false,sampler,params);
    searcher.search(q,samplingFC);
    List<FacetResult> sampledResults=samplingFC.getFacetResults();
    try {
      assertSameResults(expected,sampledResults);
      break;
    }
 catch (    Exception e) {
      if (n <= 1) {
        throw e;
      }
    }
  }
}
