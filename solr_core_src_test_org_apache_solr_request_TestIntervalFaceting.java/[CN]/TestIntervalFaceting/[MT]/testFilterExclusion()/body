{
  assertU(adoc("id","1","test_s_dv","dog"));
  assertU(adoc("id","2","test_s_dv","cat"));
  assertU(adoc("id","3","test_s_dv","bird"));
  assertU(adoc("id","4","test_s_dv","cat"));
  assertU(adoc("id","5","test_s_dv","turtle"));
  assertU(adoc("id","6","test_s_dv","dog"));
  assertU(adoc("id","7","test_s_dv","dog"));
  assertU(adoc("id","8","test_s_dv","dog"));
  assertU(adoc("id","9","test_s_dv","cat"));
  assertU(adoc("id","10"));
  assertU(commit());
  assertQ(req("q","*:*","facet","true","facet.interval","test_s_dv","rows","0","f.test_s_dv.facet.interval.set","[a,d]","f.test_s_dv.facet.interval.set","[d,z]"),"//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[a,d]'][.=4]","//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[d,z]'][.=5]");
  assertQ(req("q","*:*","facet","true","facet.interval","test_s_dv","rows","0","f.test_s_dv.facet.interval.set","[a,d]","f.test_s_dv.facet.interval.set","[d,z]","fq","test_s_dv:dog"),"//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[a,d]'][.=0]","//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[d,z]'][.=4]");
  assertQ(req("q","*:*","facet","true","facet.interval","{!ex=dogs}test_s_dv","rows","0","f.test_s_dv.facet.interval.set","[a,d]","f.test_s_dv.facet.interval.set","[d,z]","fq","{!tag='dogs'}test_s_dv:dog"),"//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[a,d]'][.=4]","//lst[@name='facet_intervals']/lst[@name='test_s_dv']/int[@name='[d,z]'][.=5]");
}
