{
  final LongValues ordMap=map == null ? null : map.getGlobalOrds(subIndex);
  int doc;
  while ((doc=disi.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {
    int term=si.getOrd(doc);
    if (term >= 0) {
      if (map != null) {
        term=(int)ordMap.get(term);
      }
      counts[term]++;
      for (      FieldFacetStats f : facetStats) {
        f.facetTermNum(docBase + doc,term);
      }
    }
  }
}
