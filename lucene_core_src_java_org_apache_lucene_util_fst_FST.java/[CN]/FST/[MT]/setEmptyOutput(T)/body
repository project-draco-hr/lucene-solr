{
  if (emptyOutput != null) {
    emptyOutput=outputs.merge(emptyOutput,v);
  }
 else {
    emptyOutput=v;
  }
  final int posSave=writer.getPosition();
  outputs.writeFinalOutput(emptyOutput,writer);
  emptyOutputBytes=new byte[writer.getPosition() - posSave];
  if (!packed) {
    final int stopAt=(writer.getPosition() - posSave) / 2;
    int upto=0;
    while (upto < stopAt) {
      final byte b=bytes[posSave + upto];
      bytes[posSave + upto]=bytes[writer.getPosition() - upto - 1];
      bytes[writer.getPosition() - upto - 1]=b;
      upto++;
    }
  }
  System.arraycopy(bytes,posSave,emptyOutputBytes,0,writer.getPosition() - posSave);
  writer.setPosition(posSave);
}
