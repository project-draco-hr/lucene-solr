{
  clearAttributes();
  if (finiteStrings == null) {
    Automaton automaton=toAutomaton();
    finiteStrings=new LimitedFiniteStringsIterator(automaton,maxGraphExpansions);
  }
  IntsRef string=finiteStrings.next();
  if (string == null) {
    return false;
  }
  Util.toBytesRef(string,bytesAtt.builder());
  if (charTermAttribute != null) {
    charTermAttribute.setLength(0);
    charTermAttribute.append(bytesAtt.toUTF16());
  }
  if (payload != null) {
    payloadAttr.setPayload(this.payload);
  }
  return true;
}
