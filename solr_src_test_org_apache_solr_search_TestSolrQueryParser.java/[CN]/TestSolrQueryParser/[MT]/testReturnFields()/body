{
  ReturnFields rf=new ReturnFields(req("fl","id,score"));
  assertTrue(rf.wantsScore());
  assertTrue(rf.wantsField("score"));
  assertTrue(rf.wantsField("id"));
  assertFalse(rf.wantsField("xxx"));
  assertTrue(rf.getTransformer() instanceof ScoreAugmenter);
  rf=new ReturnFields(req("fl","*"));
  assertFalse(rf.wantsScore());
  assertTrue(rf.wantsField("xxx"));
  assertTrue(rf.wantsAllFields());
  assertNull(rf.getTransformer());
  rf=new ReturnFields(req("fl","_explain_"));
  assertFalse(rf.wantsScore());
  assertFalse(rf.wantsField("id"));
  assertTrue(rf.getTransformer() instanceof ExplainAugmenter);
  rf=new ReturnFields(req("fl","id,aaa*,*bbb"));
  assertTrue(rf.wantsField("id"));
  assertTrue(rf.wantsField("aaaa"));
  assertTrue(rf.wantsField("xxxbbb"));
  assertFalse(rf.wantsField("aa"));
  assertFalse(rf.wantsField("bb"));
  rf=new ReturnFields(req("fl","  "));
  assertTrue(rf.wantsScore());
  assertTrue(rf.wantsField("xxx"));
  assertTrue(rf.wantsAllFields());
  assertTrue(rf.getTransformer() instanceof ScoreAugmenter);
}
