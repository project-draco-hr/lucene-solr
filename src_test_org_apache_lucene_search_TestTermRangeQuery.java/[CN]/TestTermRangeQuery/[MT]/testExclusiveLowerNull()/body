{
  Analyzer analyzer=new SingleCharAnalyzer();
  Query query=new TermRangeQuery("content",null,"C",false,false);
  initializeIndex(new String[]{"A","B","","C","D"},analyzer);
  IndexSearcher searcher=new IndexSearcher(dir);
  Hits hits=searcher.search(query);
  assertEquals("A,B,<empty string>,C,D => A, B & <empty string> are in range",3,hits.length());
  searcher.close();
  initializeIndex(new String[]{"A","B","","D"},analyzer);
  searcher=new IndexSearcher(dir);
  hits=searcher.search(query);
  assertEquals("A,B,<empty string>,D => A, B & <empty string> are in range",3,hits.length());
  searcher.close();
  addDoc("C");
  searcher=new IndexSearcher(dir);
  hits=searcher.search(query);
  assertEquals("C added, still A, B & <empty string> are in range",3,hits.length());
  searcher.close();
}
