{
  String topLev="";
  if (!cache || exclude) {
    topLev="" + (cache || random().nextBoolean() ? " cache=" + cache : "") + (cost != 0 ? " cost=" + cost : "")+ ((exclude) ? " tag=t" : "");
  }
  String ret="{!frange v=" + field + " l="+ l+ " u="+ u;
  if (negative) {
    ret="-_query_:\"" + ret + "}\"";
    if (topLev.length() > 0) {
      ret="{!" + topLev + "}"+ ret;
    }
  }
 else {
    ret+=topLev + "}";
  }
  return ret;
}
