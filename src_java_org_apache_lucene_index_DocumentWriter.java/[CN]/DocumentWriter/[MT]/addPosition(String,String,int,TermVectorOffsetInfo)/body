{
  termBuffer.set(field,text);
  Posting ti=(Posting)postingTable.get(termBuffer);
  if (ti != null) {
    int freq=ti.freq;
    if (ti.positions.length == freq) {
      int[] newPositions=new int[freq * 2];
      int[] positions=ti.positions;
      for (int i=0; i < freq; i++)       newPositions[i]=positions[i];
      ti.positions=newPositions;
    }
    ti.positions[freq]=position;
    if (offset != null) {
      if (ti.offsets.length == freq) {
        TermVectorOffsetInfo[] newOffsets=new TermVectorOffsetInfo[freq * 2];
        TermVectorOffsetInfo[] offsets=ti.offsets;
        for (int i=0; i < freq; i++) {
          newOffsets[i]=offsets[i];
        }
        ti.offsets=newOffsets;
      }
      ti.offsets[freq]=offset;
    }
    ti.freq=freq + 1;
  }
 else {
    Term term=new Term(field,text,false);
    postingTable.put(term,new Posting(term,position,offset));
  }
}
