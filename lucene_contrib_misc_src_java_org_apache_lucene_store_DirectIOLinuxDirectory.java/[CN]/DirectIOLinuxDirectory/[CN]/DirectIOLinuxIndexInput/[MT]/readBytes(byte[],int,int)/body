{
  int toRead=len;
  while (true) {
    final int left=bufferSize - bufferPos;
    if (left < toRead) {
      buffer.get(dst,offset,left);
      toRead-=left;
      offset+=left;
      refill();
    }
 else {
      buffer.get(dst,offset,toRead);
      bufferPos+=toRead;
      break;
    }
  }
}
