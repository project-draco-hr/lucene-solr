{
  final TermEnum enumerator=query.getEnum(reader);
  try {
    if (enumerator.term() == null)     return DocIdSet.EMPTY_DOCIDSET;
    final OpenBitSet bitSet=new OpenBitSet(reader.maxDoc());
    new TermGenerator(){
      @Override public void handleDoc(      int doc){
        bitSet.set(doc);
      }
    }
.generate(reader,enumerator);
    return bitSet;
  }
  finally {
    enumerator.close();
  }
}
