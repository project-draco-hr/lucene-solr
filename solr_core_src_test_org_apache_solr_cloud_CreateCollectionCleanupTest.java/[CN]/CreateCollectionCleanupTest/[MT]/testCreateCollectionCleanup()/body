{
  final CloudSolrClient cloudClient=cluster.getSolrClient();
  CollectionAdminRequest.Create create=CollectionAdminRequest.createCollection("foo","conf1",1,1);
  Properties properties=new Properties();
  properties.put(CoreAdminParams.DATA_DIR,"/some_invalid_dir/foo");
  create.setProperties(properties);
  CollectionAdminResponse rsp=create.process(cloudClient);
  assertFalse(rsp.isSuccess());
  CollectionAdminRequest.List list=CollectionAdminRequest.listCollections();
  rsp=list.process(cloudClient);
  assertFalse(((ArrayList)rsp.getResponse().get("collections")).contains("foo"));
}
