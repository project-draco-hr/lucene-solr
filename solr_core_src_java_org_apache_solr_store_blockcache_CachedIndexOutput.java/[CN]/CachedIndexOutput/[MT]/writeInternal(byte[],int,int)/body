{
  long position=getBufferStart();
  while (length > 0) {
    int len=writeBlock(position,b,offset,length);
    position+=len;
    length-=len;
    offset+=len;
  }
}
