{
  super.setUp();
  if (this.__test_dir == null) {
    String tmp_dir=System.getProperty("java.io.tmpdir","tmp");
    this.__test_dir=new File(tmp_dir,"testIndexWriter");
    if (this.__test_dir.exists()) {
      throw new IOException("test directory \"" + this.__test_dir.getPath() + "\" already exists (please remove by hand)");
    }
    if (!this.__test_dir.mkdirs() && !this.__test_dir.isDirectory()) {
      throw new IOException("unable to create test directory \"" + this.__test_dir.getPath() + "\"");
    }
  }
}
