{
  IndexOutput out=createOutput(dir,segmentFileName);
  out.writeInt(SegmentInfos.CURRENT_FORMAT);
  out.writeLong(++infos.version);
  out.writeInt(infos.counter);
  out.writeInt(infos.size());
  for (  SegmentInfo si : infos) {
    si.write(out);
  }
  out.writeStringStringMap(infos.getUserData());
  return out;
}
