{
  IndexOutput out=createOutput(dir,segmentFileName);
  out.writeInt(FORMAT_CURRENT);
  out.writeLong(infos.version);
  out.writeInt(infos.counter);
  out.writeLong(infos.getGlobalFieldMapVersion());
  out.writeInt(infos.size());
  for (  SegmentInfo si : infos) {
    si.write(out);
  }
  out.writeStringStringMap(infos.getUserData());
  return out;
}
