{
  RAMDirectory ramDir1=new RAMDirectory();
  addDoc(ramDir1,"test foo",true);
  RAMDirectory ramDir2=new RAMDirectory();
  addDoc(ramDir2,"test blah",true);
  IndexReader[] readers=new IndexReader[]{IndexReader.open(ramDir1),IndexReader.open(ramDir2)};
  MultiReader mr=new MultiReader(readers);
  assertTrue(mr.isCurrent());
  addDoc(ramDir1,"more text",false);
  assertFalse(mr.isCurrent());
  addDoc(ramDir2,"even more text",false);
  assertFalse(mr.isCurrent());
  try {
    mr.getVersion();
    fail();
  }
 catch (  UnsupportedOperationException e) {
  }
  mr.close();
}
