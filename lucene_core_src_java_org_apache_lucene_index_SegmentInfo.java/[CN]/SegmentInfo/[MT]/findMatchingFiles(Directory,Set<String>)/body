{
  List<String> files=new ArrayList<String>();
  final String[] existingFiles;
  try {
    existingFiles=dir.listAll();
  }
 catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
  for (  String nameOrPattern : namesOrPatterns) {
    boolean exists=false;
    try {
      exists=dir.fileExists(nameOrPattern);
    }
 catch (    IOException ioe) {
    }
    if (exists) {
      files.add(nameOrPattern);
    }
 else {
      for (      String file : existingFiles) {
        if (Pattern.matches(nameOrPattern,file)) {
          files.add(file);
        }
      }
    }
  }
  return files;
}
