{
  if (fieldInfos == null) {
    Directory dir0=dir;
    if (isCompoundFile && checkCompoundFile) {
      dir0=new CompoundFileDirectory(dir,IndexFileNames.segmentFileName(name,"",IndexFileNames.COMPOUND_FILE_EXTENSION),IOContext.READONCE,false);
    }
    try {
      FieldInfosReader reader=codec.fieldInfosFormat().getFieldInfosReader();
      fieldInfos=reader.read(dir0,name,IOContext.READONCE);
    }
  finally {
      if (dir != dir0) {
        dir0.close();
      }
    }
  }
}
