{
  if (mu != null && z != null) {
    throw new RuntimeException("specifying mu and z make no sense for: " + expr);
  }
  if (mu != null && !"H3".equals(expr)) {
    throw new RuntimeException("parameter mu only makes sense for normalization H3");
  }
  if (z != null && !"Z".equals(expr)) {
    throw new RuntimeException("parameter z only makes sense for normalization Z");
  }
  if ("H1".equals(expr)) {
    return new NormalizationH1();
  }
 else   if ("H2".equals(expr)) {
    return new NormalizationH2();
  }
 else   if ("H3".equals(expr)) {
    return (mu != null) ? new NormalizationH3(Float.parseFloat(mu)) : new NormalizationH3();
  }
 else   if ("Z".equals(expr)) {
    return (z != null) ? new NormalizationZ(Float.parseFloat(z)) : new NormalizationZ();
  }
 else   if ("none".equals(expr)) {
    return new Normalization.NoNormalization();
  }
 else {
    throw new RuntimeException("Invalid normalization: " + expr);
  }
}
