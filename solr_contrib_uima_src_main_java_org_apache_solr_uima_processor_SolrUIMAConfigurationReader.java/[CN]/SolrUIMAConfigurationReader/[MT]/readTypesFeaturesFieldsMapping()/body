{
  Map<String,Map<String,String>> map=new HashMap<String,Map<String,String>>();
  Node fieldMappingNode=solrConfig.getNode(FIELD_MAPPING_NODE_PATH,true);
  if (fieldMappingNode.hasChildNodes()) {
    NodeList typeNodes=fieldMappingNode.getChildNodes();
    for (int i=0; i < typeNodes.getLength(); i++) {
      Node typeNode=typeNodes.item(i);
      if (typeNode.getNodeType() != Node.TEXT_NODE) {
        Node typeNameAttribute=typeNode.getAttributes().getNamedItem("name");
        String typeName=typeNameAttribute.getNodeValue();
        map.put(typeName,new HashMap<String,String>());
        if (typeNode.hasChildNodes()) {
          NodeList featuresNodeList=typeNode.getChildNodes();
          for (int j=0; j < featuresNodeList.getLength(); j++) {
            Node mappingNode=featuresNodeList.item(j);
            if (mappingNode.getNodeType() != Node.TEXT_NODE) {
              Node fieldNameNode=mappingNode.getAttributes().getNamedItem("field");
              String mappedFieldName=fieldNameNode.getNodeValue();
              Node featureNameNode=mappingNode.getAttributes().getNamedItem("feature");
              String featureName=featureNameNode.getNodeValue();
              map.get(typeName).put(featureName,mappedFieldName);
            }
          }
        }
      }
    }
  }
  return map;
}
