{
  super.setUp();
  dir=new RAMDirectory();
  appAnalyzer=new WhitespaceAnalyzer(TEST_VERSION_CURRENT);
  IndexWriter writer=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT).setAnalyzer(appAnalyzer));
  int numDocs=200;
  for (int i=0; i < numDocs; i++) {
    Document doc=new Document();
    String variedFieldValue=variedFieldValues[i % variedFieldValues.length];
    String repetitiveFieldValue=repetitiveFieldValues[i % repetitiveFieldValues.length];
    doc.add(new Field("variedField",variedFieldValue,Field.Store.YES,Field.Index.ANALYZED));
    doc.add(new Field("repetitiveField",repetitiveFieldValue,Field.Store.YES,Field.Index.ANALYZED));
    writer.addDocument(doc);
  }
  writer.close();
  reader=IndexReader.open(dir,true);
  protectedAnalyzer=new QueryAutoStopWordAnalyzer(TEST_VERSION_CURRENT,appAnalyzer);
}
