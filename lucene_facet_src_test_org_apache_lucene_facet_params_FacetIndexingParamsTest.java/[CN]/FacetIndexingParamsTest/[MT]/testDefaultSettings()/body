{
  FacetIndexingParams dfip=FacetIndexingParams.DEFAULT;
  assertNotNull("Missing default category list",dfip.getAllCategoryListParams());
  assertEquals("all categories have the same CategoryListParams by default",dfip.getCategoryListParams(null),dfip.getCategoryListParams(new CategoryPath("a")));
  assertEquals("Expected default category list field is $facets","$facets",dfip.getCategoryListParams(null).field);
  String expectedDDText="a" + dfip.getFacetDelimChar() + "b";
  CategoryPath cp=new CategoryPath("a","b");
  assertEquals("wrong drill-down term",new Term("$facets",expectedDDText),DrillDownQuery.term(dfip,cp));
  char[] buf=new char[20];
  int numchars=dfip.drillDownTermText(cp,buf);
  assertEquals("3 characters should be written",3,numchars);
  assertEquals("wrong drill-down term text",expectedDDText,new String(buf,0,numchars));
  assertEquals("partition for all ordinals is the first","",PartitionsUtils.partitionNameByOrdinal(dfip,250));
  assertEquals("for partition 0, the same name should be returned","",PartitionsUtils.partitionName(0));
  assertEquals("for any other, it's the concatenation of name + partition",PartitionsUtils.PART_NAME_PREFIX + "1",PartitionsUtils.partitionName(1));
  assertEquals("default partition number is always 0",0,PartitionsUtils.partitionNumber(dfip,100));
  assertEquals("default partition size is unbounded",Integer.MAX_VALUE,dfip.getPartitionSize());
}
