{
  for (int i=0; i < numIterations; i++) {
    String reg=AutomatonTestUtil.randomRegexp(random());
    LightAutomaton automaton=BasicOperations.determinize(new RegExp(reg,RegExp.NONE).toLightAutomaton());
    TermsEnum te=MultiFields.getTerms(reader,"field").iterator(null);
    ArrayList<BytesRef> unsortedTerms=new ArrayList<>(terms);
    Collections.shuffle(unsortedTerms,random());
    for (    BytesRef term : unsortedTerms) {
      if (BasicOperations.run(automaton,term.utf8ToString())) {
        if (random().nextBoolean()) {
          assertTrue(te.seekExact(term));
        }
 else {
          assertEquals(SeekStatus.FOUND,te.seekCeil(term));
          assertEquals(term,te.term());
        }
      }
    }
  }
}
