{
  NumberFormat format=new DecimalFormat("000000000");
  Directory dir=newDirectory();
  IndexWriter w=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).setOpenMode(OpenMode.CREATE));
  for (int x=0; x < 11; x++) {
    Document doc=createDocument(x,"1",3,format);
    w.addDocument(doc);
  }
  for (int x=11; x < 20; x++) {
    Document doc=createDocument(x,"2",3,format);
    w.addDocument(doc);
  }
  w.close();
  final Term midTerm=new Term("id",format.format(11));
  checkSplitting(dir,midTerm,11,9);
  w=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random,MockTokenizer.WHITESPACE,false)).setOpenMode(OpenMode.APPEND));
  w.deleteDocuments(midTerm);
  w.deleteDocuments(new Term("id",format.format(2)));
  w.close();
  checkSplitting(dir,midTerm,10,8);
  dir.close();
}
