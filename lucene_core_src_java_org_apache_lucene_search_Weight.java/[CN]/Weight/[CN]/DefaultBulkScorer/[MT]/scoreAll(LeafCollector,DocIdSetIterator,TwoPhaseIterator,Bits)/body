{
  if (twoPhase == null) {
    for (int doc=iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc=iterator.nextDoc()) {
      if (acceptDocs == null || acceptDocs.get(doc)) {
        collector.collect(doc);
      }
    }
  }
 else {
    final DocIdSetIterator approximation=twoPhase.approximation();
    for (int doc=approximation.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc=approximation.nextDoc()) {
      if ((acceptDocs == null || acceptDocs.get(doc)) && twoPhase.matches()) {
        collector.collect(doc);
      }
    }
  }
}
