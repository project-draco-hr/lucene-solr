{
  collector.setScorer(scorer);
  final TwoPhaseIterator twoPhase=scorer.asTwoPhaseIterator();
  if (scorer.docID() == -1 && min == 0 && max == DocIdSetIterator.NO_MORE_DOCS) {
    scoreAll(collector,scorer,twoPhase,acceptDocs);
    return DocIdSetIterator.NO_MORE_DOCS;
  }
 else {
    int doc=scorer.docID();
    if (doc < min) {
      if (twoPhase == null) {
        doc=scorer.advance(min);
      }
 else {
        doc=twoPhase.approximation().advance(min);
      }
    }
    return scoreRange(collector,scorer,twoPhase,acceptDocs,doc,max);
  }
}
