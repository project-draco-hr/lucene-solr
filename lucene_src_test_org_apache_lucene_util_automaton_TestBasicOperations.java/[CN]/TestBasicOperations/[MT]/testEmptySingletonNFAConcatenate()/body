{
  Automaton singleton=BasicAutomata.makeString("");
  Automaton expandedSingleton=singleton.cloneExpanded();
  Automaton nfa=BasicOperations.union(BasicAutomata.makeString("this"),BasicAutomata.makeString("three"));
  Automaton concat1=BasicOperations.concatenate(expandedSingleton,nfa);
  Automaton concat2=BasicOperations.concatenate(singleton,nfa);
  assertFalse(concat2.isDeterministic());
  assertEquals(concat1,concat2);
  assertEquals(nfa,concat1);
  assertEquals(nfa,concat2);
}
