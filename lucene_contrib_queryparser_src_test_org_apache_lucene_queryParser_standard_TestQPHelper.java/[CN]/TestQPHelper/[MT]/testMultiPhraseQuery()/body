{
  Random random=newRandom();
  MockRAMDirectory dir=newDirectory(random);
  IndexWriter w=new IndexWriter(dir,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new CannedAnalyzer()));
  Document doc=new Document();
  doc.add(new Field("field","",Field.Store.NO,Field.Index.ANALYZED));
  w.addDocument(doc);
  IndexReader r=w.getReader();
  IndexSearcher s=new IndexSearcher(r);
  Query q=new StandardQueryParser(new CannedAnalyzer()).parse("\"a\"","field");
  assertTrue(q instanceof MultiPhraseQuery);
  assertEquals(1,s.search(q,10).totalHits);
  r.close();
  w.close();
  dir.close();
}
