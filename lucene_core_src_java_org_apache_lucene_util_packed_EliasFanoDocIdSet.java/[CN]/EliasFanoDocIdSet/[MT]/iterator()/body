{
  if (efEncoder.lastEncoded >= DocIdSetIterator.NO_MORE_DOCS) {
    throw new UnsupportedOperationException("Highest encoded value too high for DocIdSetIterator.NO_MORE_DOCS: " + efEncoder.lastEncoded);
  }
  return new DocIdSetIterator(){
    private int curDocId=-1;
    private final EliasFanoDecoder efDecoder=efEncoder.getDecoder();
    @Override public int docID(){
      return curDocId;
    }
    private int setCurDocID(    long value){
      curDocId=(value == EliasFanoDecoder.NO_MORE_VALUES) ? NO_MORE_DOCS : (int)value;
      return curDocId;
    }
    @Override public int nextDoc(){
      return setCurDocID(efDecoder.nextValue());
    }
    @Override public int advance(    int target){
      return setCurDocID(efDecoder.advanceToValue(target));
    }
    @Override public long cost(){
      return efDecoder.numEncoded();
    }
  }
;
}
