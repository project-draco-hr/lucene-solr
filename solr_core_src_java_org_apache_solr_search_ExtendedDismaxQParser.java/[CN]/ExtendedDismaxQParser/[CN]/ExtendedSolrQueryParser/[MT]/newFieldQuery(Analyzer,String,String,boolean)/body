{
  Analyzer actualAnalyzer;
  if (removeStopFilter) {
    if (nonStopFilterAnalyzerPerField == null) {
      nonStopFilterAnalyzerPerField=new HashMap<String,Analyzer>();
    }
    actualAnalyzer=nonStopFilterAnalyzerPerField.get(field);
    if (actualAnalyzer == null) {
      actualAnalyzer=noStopwordFilterAnalyzer(field);
    }
  }
 else {
    actualAnalyzer=parser.getReq().getSchema().getFieldType(field).getQueryAnalyzer();
  }
  return super.newFieldQuery(actualAnalyzer,field,queryText,quoted);
}
