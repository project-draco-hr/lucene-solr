{
  List<FieldParams> allPhraseFields=config.getAllPhraseFields();
  if (allPhraseFields.size() > 0) {
    List<Clause> normalClauses=new ArrayList<>(clauses.size());
    for (    Clause clause : clauses) {
      if (clause.field != null || clause.isPhrase)       continue;
      if (clause.isBareWord()) {
        String s=clause.val.toString();
        if ("OR".equals(s) || "AND".equals(s) || "NOT".equals(s)|| "TO".equals(s))         continue;
      }
      normalClauses.add(clause);
    }
    for (    FieldParams phraseField : allPhraseFields) {
      Map<String,Float> pf=new HashMap<>(1);
      pf.put(phraseField.getField(),phraseField.getBoost());
      addShingledPhraseQueries(query,normalClauses,pf,phraseField.getWordGrams(),config.tiebreaker,phraseField.getSlop());
    }
  }
}
