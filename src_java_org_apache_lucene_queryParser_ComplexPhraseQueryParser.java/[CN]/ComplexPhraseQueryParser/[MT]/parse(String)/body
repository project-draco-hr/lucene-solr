{
  if (isPass2ResolvingPhrases) {
    boolean oldConstantScoreRewriteSetting=getConstantScoreRewrite();
    try {
      setConstantScoreRewrite(false);
      return super.parse(query);
    }
  finally {
      setConstantScoreRewrite(oldConstantScoreRewriteSetting);
    }
  }
  complexPhrases=new ArrayList();
  Query q=super.parse(query);
  isPass2ResolvingPhrases=true;
  try {
    for (Iterator iterator=complexPhrases.iterator(); iterator.hasNext(); ) {
      currentPhraseQuery=(ComplexPhraseQuery)iterator.next();
      currentPhraseQuery.parsePhraseElements(this);
    }
  }
  finally {
    isPass2ResolvingPhrases=false;
  }
  return q;
}
