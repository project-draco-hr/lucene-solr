{
  String[] files=directory.list();
  if (files == null)   throw new IOException("cannot read directory " + directory + ": list() returned null");
  IndexFileNameFilter filter=IndexFileNameFilter.getFilter();
  for (int i=0; i < files.length; i++) {
    String fileName=files[i];
    if (filter.accept(null,fileName) && !refCounts.containsKey(fileName) && !fileName.equals(IndexFileNames.SEGMENTS_GEN)) {
      if (infoStream != null) {
        message("refresh: removing newly created unreferenced file \"" + fileName + "\"");
      }
      deleteFile(fileName);
    }
  }
}
