{
  final String qstr=getString();
  if (qstr == null || qstr.isEmpty()) {
    return null;
  }
  final IndexSchema schema=req.getSchema();
  final String defaultField=QueryParsing.getDefaultField(schema,getParam(CommonParams.DF));
  final Analyzer analyzer=schema.getQueryAnalyzer();
  final SolrCoreParser solrParser=new SolrCoreParser(defaultField,analyzer,req);
  try {
    return solrParser.parse(new ByteArrayInputStream(qstr.getBytes(contentEncoding)));
  }
 catch (  UnsupportedEncodingException e) {
    throw new SyntaxError(e.getMessage() + " in " + req.toString());
  }
catch (  ParserException e) {
    throw new SyntaxError(e.getMessage() + " in " + req.toString());
  }
}
