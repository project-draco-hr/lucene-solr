{
  List<PluginInfo> implicits=PluginsRegistry.getHandlers(core);
  Map<PluginInfo,SolrRequestHandler> handlers=new LinkedHashMap<>();
  Map<String,PluginInfo> infoMap=new LinkedHashMap<>();
  for (  PluginInfo info : implicits)   infoMap.put(info.name,info);
  for (  PluginInfo info : config.getPluginInfos(SolrRequestHandler.class.getName()))   if (infoMap.containsKey(info.name))   infoMap.remove(info.name);
  for (  Map.Entry e : core.getSolrConfig().getOverlay().getReqHandlers().entrySet())   infoMap.put((String)e.getKey(),new PluginInfo(SolrRequestHandler.TYPE,(Map)e.getValue()));
  ArrayList<PluginInfo> infos=new ArrayList<>(infoMap.values());
  infos.addAll(config.getPluginInfos(SolrRequestHandler.class.getName()));
  for (  PluginInfo info : infos) {
    try {
      SolrRequestHandler requestHandler;
      String startup=info.attributes.get("startup");
      if (startup != null) {
        if ("lazy".equals(startup)) {
          log.info("adding lazy requestHandler: " + info.className);
          requestHandler=new LazyRequestHandlerWrapper(core,info.className,info.initArgs);
        }
 else {
          throw new Exception("Unknown startup value: '" + startup + "' for: "+ info.className);
        }
      }
 else {
        requestHandler=core.createRequestHandler(info.className);
      }
      handlers.put(info,requestHandler);
      SolrRequestHandler old=register(info.name,requestHandler);
      if (old != null) {
        log.warn("Multiple requestHandler registered to the same name: " + info.name + " ignoring: "+ old.getClass().getName());
      }
      if (info.isDefault()) {
        old=register("",requestHandler);
        if (old != null)         log.warn("Multiple default requestHandler registered" + " ignoring: " + old.getClass().getName());
      }
      log.info("created " + info.name + ": "+ info.className);
    }
 catch (    Exception ex) {
      throw new SolrException(ErrorCode.SERVER_ERROR,"RequestHandler init failure",ex);
    }
  }
  for (  Map.Entry<PluginInfo,SolrRequestHandler> entry : handlers.entrySet()) {
    PluginInfo info=entry.getKey();
    SolrRequestHandler requestHandler=entry.getValue();
    info=applyInitParams(config,info);
    if (requestHandler instanceof PluginInfoInitialized) {
      ((PluginInfoInitialized)requestHandler).init(info);
    }
 else {
      requestHandler.init(info.initArgs);
    }
  }
  if (get("") == null)   register("",get("/select"));
  if (get("") == null)   register("",get("standard"));
  if (get("") == null)   log.warn("no default request handler is registered (either '/select' or 'standard')");
}
