{
  Analyzer analyzer=new SingleCharAnalyzer();
  Query query=TermRangeQuery.newStringRange("content",null,"C",false,false);
  initializeIndex(new String[]{"A","B","","C","D"},analyzer);
  IndexSearcher searcher=new IndexSearcher(dir,true);
  int numHits=searcher.search(query,null,1000).totalHits;
  assertEquals("A,B,<empty string>,C,D => A, B & <empty string> are in range",3,numHits);
  searcher.close();
  initializeIndex(new String[]{"A","B","","D"},analyzer);
  searcher=new IndexSearcher(dir,true);
  numHits=searcher.search(query,null,1000).totalHits;
  assertEquals("A,B,<empty string>,D => A, B & <empty string> are in range",3,numHits);
  searcher.close();
  addDoc("C");
  searcher=new IndexSearcher(dir,true);
  numHits=searcher.search(query,null,1000).totalHits;
  assertEquals("C added, still A, B & <empty string> are in range",3,numHits);
  searcher.close();
}
