{
  Directory rd1=newDirectory();
  IndexWriter iw=new IndexWriter(rd1,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
  iw.close();
  Directory rd2=newDirectory(rd1);
  Directory rdOut=newDirectory();
  IndexWriter iwOut=new IndexWriter(rdOut,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
  ParallelAtomicReader pr=new ParallelAtomicReader.Builder().add(SlowCompositeReaderWrapper.wrap(DirectoryReader.open(rd1))).add(SlowCompositeReaderWrapper.wrap(DirectoryReader.open(rd2))).build();
  iwOut.addIndexes(pr);
  iwOut.forceMerge(1);
  iwOut.close();
  rdOut.close();
  rd1.close();
  rd2.close();
}
