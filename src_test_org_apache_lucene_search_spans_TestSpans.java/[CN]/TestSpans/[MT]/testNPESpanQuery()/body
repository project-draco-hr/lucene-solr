{
  final Directory dir=new MockRAMDirectory();
  final IndexWriter writer=new IndexWriter(dir,new StandardAnalyzer(new String[0]),IndexWriter.MaxFieldLength.LIMITED);
  addDoc(writer,"1","the big dogs went running to the market");
  addDoc(writer,"2","the cat chased the mouse, then the cat ate the mouse quickly");
  writer.close();
  final IndexReader reader=IndexReader.open(dir);
  final IndexSearcher searcher=new IndexSearcher(reader);
  assertEquals(2,hitCount(searcher,"the"));
  assertEquals(1,hitCount(searcher,"cat"));
  assertEquals(1,hitCount(searcher,"dogs"));
  assertEquals(0,hitCount(searcher,"rabbit"));
  assertEquals(1,searcher.search(createSpan(0,true,new SpanQuery[]{createSpan(4,false,"chased","cat"),createSpan("ate")}),10).totalHits);
  reader.close();
  dir.close();
}
