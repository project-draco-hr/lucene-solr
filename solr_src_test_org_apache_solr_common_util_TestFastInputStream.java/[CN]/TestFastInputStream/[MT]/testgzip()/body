{
  ByteArrayOutputStream b=new ByteArrayOutputStream();
  FastOutputStream fos=new FastOutputStream(b);
  GZIPOutputStream gzos=new GZIPOutputStream(fos);
  String ss="Helloooooooooooooooooooo";
  writeChars(gzos,ss,0,ss.length());
  gzos.close();
  NamedListCodec.writeVInt(10,fos);
  fos.flushBuffer();
  GZIPInputStream gzis=new GZIPInputStream(new ByteArrayInputStream(b.toByteArray(),0,b.size()));
  char[] cbuf=new char[ss.length()];
  readChars(gzis,cbuf,0,ss.length());
  assertEquals(new String(cbuf),ss);
  ByteArrayInputStream bis=new ByteArrayInputStream(b.toByteArray(),0,b.size());
  gzis=new GZIPInputStream(new FastInputStream(bis));
  cbuf=new char[ss.length()];
  readChars(gzis,cbuf,0,ss.length());
  assertEquals(new String(cbuf),ss);
}
