{
  int bufferIndex=(int)(offset >> BYTE_BLOCK_SHIFT);
  int pos=(int)(offset & BYTE_BLOCK_MASK);
  if (pos + ref.length <= BYTE_BLOCK_SIZE) {
    ref.bytes=buffers[bufferIndex];
    ref.offset=pos;
  }
 else {
    ref.bytes=new byte[ref.length];
    ref.offset=0;
    readBytes(offset,ref.bytes,0,ref.length);
  }
}
