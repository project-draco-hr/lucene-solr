{
  Token token;
  while (todo > 0 && index < stack.length) {
    token=createToken(stack[index++],current);
    if (token != null) {
      todo--;
      return token;
    }
  }
  token=input.next();
  if (token == null)   return null;
  stack=synonyms.getSynonyms(token.termText());
  if (stack.length > maxSynonyms)   randomize(stack);
  index=0;
  current=token;
  todo=maxSynonyms;
  return token;
}
