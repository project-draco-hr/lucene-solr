{
  indexWriter.addDocument(newDoc("alpha bravo charlie - gap alpha bravo"));
  initReaderSearcherHighlighter();
  highlighter.setMaxLength(21);
  BooleanQuery query=new BooleanQuery.Builder().add(newPhraseQuery("body","alpha bravo"),BooleanClause.Occur.MUST).add(newPhraseQuery("body","gap alpha"),BooleanClause.Occur.MUST).add(newPhraseQuery("body","charlie gap"),BooleanClause.Occur.SHOULD).build();
  TopDocs topDocs=searcher.search(query,10,Sort.INDEXORDER);
  String[] snippets=highlighter.highlight("body",query,topDocs);
  if (fieldType == UHTestHelper.reanalysisType) {
    assertArrayEquals(new String[]{"<b>alpha</b> <b>bravo</b> charlie -"},snippets);
  }
 else {
    assertArrayEquals(new String[]{"<b>alpha</b> <b>bravo</b> <b>charlie</b> -"},snippets);
  }
}
