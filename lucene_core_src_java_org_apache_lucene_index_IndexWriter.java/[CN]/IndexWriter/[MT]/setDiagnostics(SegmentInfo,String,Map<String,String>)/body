{
  Map<String,String> diagnostics=new HashMap<>();
  diagnostics.put("source",source);
  diagnostics.put("lucene.version",Version.LATEST.toString());
  diagnostics.put("os",Constants.OS_NAME);
  diagnostics.put("os.arch",Constants.OS_ARCH);
  diagnostics.put("os.version",Constants.OS_VERSION);
  diagnostics.put("java.version",Constants.JAVA_VERSION);
  diagnostics.put("java.vendor",Constants.JAVA_VENDOR);
  diagnostics.put("java.runtime.version",System.getProperty("java.runtime.version","undefined"));
  diagnostics.put("java.vm.version",System.getProperty("java.vm.version","undefined"));
  diagnostics.put("timestamp",Long.toString(new Date().getTime()));
  if (details != null) {
    diagnostics.putAll(details);
  }
  info.setDiagnostics(diagnostics);
}
