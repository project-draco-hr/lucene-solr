{
  ensureOpen();
  int count;
  if (docWriter != null)   count=docWriter.getNumDocs();
 else   count=0;
  for (  final SegmentInfoPerCommit info : segmentInfos) {
    count+=info.info.getDocCount() - numDeletedDocs(info);
  }
  return count;
}
