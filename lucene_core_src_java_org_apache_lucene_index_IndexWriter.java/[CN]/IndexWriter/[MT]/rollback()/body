{
  ensureOpen();
synchronized (commitLock) {
    if (shouldClose()) {
      rollbackInternal();
    }
  }
}
