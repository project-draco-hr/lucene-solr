{
  if (baseSolrUrl == null) {
    throw new IllegalArgumentException("Cannot create HttpSolrClient without a valid baseSolrUrl!");
  }
  if (delegationToken == null) {
    return new HttpSolrClient(baseSolrUrl,httpClient,responseParser,compression);
  }
 else {
    return new DelegationTokenHttpSolrClient(baseSolrUrl,httpClient,responseParser,compression,delegationToken);
  }
}
