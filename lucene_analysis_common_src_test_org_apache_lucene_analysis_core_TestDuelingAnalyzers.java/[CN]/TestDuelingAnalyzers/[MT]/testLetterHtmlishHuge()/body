{
  Random random=random();
  int maxLength=1024;
  MockAnalyzer left=new MockAnalyzer(random,jvmLetter,false);
  left.setMaxTokenLength(255);
  Analyzer right=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName){
      Tokenizer tokenizer=new LetterTokenizer(newAttributeFactory());
      return new TokenStreamComponents(tokenizer,tokenizer);
    }
  }
;
  int numIterations=atLeast(50);
  for (int i=0; i < numIterations; i++) {
    String s=TestUtil.randomHtmlishString(random,maxLength);
    assertEquals(s,left.tokenStream("foo",newStringReader(s)),right.tokenStream("foo",newStringReader(s)));
  }
}
