{
  SynonymMap map=new SynonymMap();
  boolean orig=false;
  boolean merge=true;
  map.add(strings("a"),tokens("a5,5"),orig,merge);
  map.add(strings("a"),tokens("a3,3"),orig,merge);
  assertTokenizesTo(map,"a",new String[]{"a3","a5"},new int[]{1,2});
  map.add(strings("b"),tokens("b3,3"),orig,merge);
  map.add(strings("b"),tokens("b5,5"),orig,merge);
  assertTokenizesTo(map,"b",new String[]{"b3","b5"},new int[]{1,2});
  map.add(strings("a"),tokens("A3,3"),orig,merge);
  map.add(strings("a"),tokens("A5,5"),orig,merge);
  assertTokenizesTo(map,"a",new String[]{"a3","A3","a5","A5"},new int[]{1,0,2,0});
  map.add(strings("a"),tokens("a1"),orig,merge);
  assertTokenizesTo(map,"a",new String[]{"a1","a3","A3","a5","A5"},new int[]{1,2,0,2,0});
  map.add(strings("a"),tokens("a2,2"),orig,merge);
  map.add(strings("a"),tokens("a4,4 a6,2"),orig,merge);
  assertTokenizesTo(map,"a",new String[]{"a1","a2","a3","A3","a4","a5","A5","a6"},new int[]{1,1,1,0,1,1,0,1});
}
