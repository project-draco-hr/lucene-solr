{
  MiniSolrCloudCluster miniCluster=createMiniSolrCloudCluster();
  collectionCreateSearchDelete(miniCluster);
  MockAuthenticationPlugin.expectedUsername="solr";
  MockAuthenticationPlugin.expectedPassword="s0lrRocks";
  try {
    collectionCreateSearchDelete(miniCluster);
    fail("Should've returned a 401 error");
  }
 catch (  Exception ex) {
    if (!ex.getMessage().contains("Error 401")) {
      fail("Should've returned a 401 error");
    }
  }
 finally {
    MockAuthenticationPlugin.expectedUsername=null;
    MockAuthenticationPlugin.expectedPassword=null;
  }
  miniCluster.shutdown();
}
