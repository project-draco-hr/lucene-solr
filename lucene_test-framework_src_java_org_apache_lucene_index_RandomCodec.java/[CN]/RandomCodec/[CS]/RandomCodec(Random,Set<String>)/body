{
  this.avoidCodecs=avoidCodecs;
  this.perFieldSeed=random.nextInt();
  int minItemsPerBlock=_TestUtil.nextInt(random,2,100);
  int maxItemsPerBlock=2 * (Math.max(2,minItemsPerBlock - 1)) + random.nextInt(100);
  add(new Lucene40PostingsFormat(minItemsPerBlock,maxItemsPerBlock));
  minItemsPerBlock=_TestUtil.nextInt(random,2,100);
  maxItemsPerBlock=2 * (Math.max(1,minItemsPerBlock - 1)) + random.nextInt(100);
  add(new Pulsing40PostingsFormat(1 + random.nextInt(20),minItemsPerBlock,maxItemsPerBlock));
  add(new MockSepPostingsFormat());
  add(new MockFixedIntBlockPostingsFormat(_TestUtil.nextInt(random,1,2000)));
  add(new MockVariableIntBlockPostingsFormat(_TestUtil.nextInt(random,1,127)));
  add(new MockRandomPostingsFormat(random));
  add(new NestedPulsingPostingsFormat());
  add(new Lucene40WithOrds());
  add(new SimpleTextPostingsFormat());
  add(new MemoryPostingsFormat(random.nextBoolean()));
  Collections.shuffle(formats,random);
}
