{
  String nm=tagname.toString();
  String nm_lc=nm.toLowerCase();
  if (noCaseElms != null && noCaseElms.get(nm_lc) != null) {
    nm=nm_lc;
    keysToLowerCase(attrs);
  }
  if (atomize)   nm=Atom.getAtom(nm);
  if (isStartTag) {
    docHandler.startElement(nm,attrs);
    if (isEmpty)     docHandler.endElement(nm);
    noChildren=!isEmpty;
  }
 else {
    if (noChildren) {
      docHandler.characters(buf.getCharArray(),0,0);
      noChildren=false;
    }
    docHandler.endElement(nm);
  }
  toStart();
}
