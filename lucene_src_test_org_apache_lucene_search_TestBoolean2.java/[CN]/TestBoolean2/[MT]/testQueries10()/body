{
  BooleanQuery query=new BooleanQuery();
  query.add(new TermQuery(new Term(field,"w3")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"xx")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"w2")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"zz")),BooleanClause.Occur.SHOULD);
  int[] expDocNrs={2,3};
  SimilarityProvider oldSimilarity=searcher.getSimilarityProvider();
  try {
    searcher.setSimilarityProvider(new DefaultSimilarityProvider(){
      @Override public float coord(      int overlap,      int maxOverlap){
        return overlap / ((float)maxOverlap - 1);
      }
    }
);
    queriesTest(query,expDocNrs);
  }
  finally {
    searcher.setSimilarityProvider(oldSimilarity);
  }
}
