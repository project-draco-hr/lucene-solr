{
  List<FacetRequest> facetRequests=new ArrayList<FacetRequest>();
  for (  String dim : dimension) {
    facetRequests.add(new PerDimCountFacetRequest(new CategoryPath(dim),10));
  }
  FacetSearchParams sParams=new FacetSearchParams(facetRequests,iParams){
    @Override public CategoryListCache getCategoryListCache(){
      return clCache;
    }
  }
;
  FacetsAccumulator acc=new StandardFacetsAccumulator(sParams,reader,taxo);
  acc.setComplementThreshold(FacetsAccumulator.DISABLE_COMPLEMENT);
  List<FacetResult> results=acc.accumulate(allDocs);
  assertEquals("Wrong #results",dimension.length,results.size());
  for (int i=0; i < results.size(); i++) {
    FacetResult res=results.get(i);
    assertEquals("wrong num-descendants for dimension " + dimension[i],expectedNumDescendants[i],res.getNumValidDescendants());
    FacetResultNode resNode=res.getFacetResultNode();
    assertEquals("wrong value for dimension " + dimension[i],expectedValue[i],(int)resNode.getValue());
  }
}
