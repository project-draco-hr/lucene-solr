{
  HttpClientBuilder builder=HttpClientBuilder.create();
  RequestConfig config=RequestConfig.custom().setSocketTimeout(2000).build();
  builder.setDefaultRequestConfig(config);
  try (CloseableHttpClient httpClient=builder.build();HttpSolrClient solrClient=new HttpSolrClient(jetty.getBaseUrl().toString() + "/slow/foo",httpClient)){
    SolrQuery q=new SolrQuery("*:*");
    try {
      solrClient.query(q,SolrRequest.METHOD.GET);
      fail("No exception thrown.");
    }
 catch (    SolrServerException e) {
      assertTrue(e.getMessage().contains("Timeout"));
    }
  }
 }
