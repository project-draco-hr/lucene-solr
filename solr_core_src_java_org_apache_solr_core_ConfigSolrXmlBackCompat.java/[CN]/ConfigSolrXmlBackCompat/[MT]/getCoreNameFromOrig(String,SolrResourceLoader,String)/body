{
synchronized (coreNodes) {
    Node coreNode=null;
    for (int i=0; i < coreNodes.getLength(); i++) {
      Node node=coreNodes.item(i);
      String name=DOMUtil.getAttr(node,CoreDescriptor.CORE_NAME,null);
      if (origCoreName.equals(name)) {
        if (coreName.equals(origCoreName)) {
          return name;
        }
        return coreName;
      }
    }
    if (coreNode == null) {
      for (int i=0; i < coreNodes.getLength(); i++) {
        Node node=coreNodes.item(i);
        String name=DOMUtil.getAttr(node,CoreDescriptor.CORE_NAME,null);
        if (origCoreName.equals(PropertiesUtil.substituteProperty(name,loader.getCoreProperties()))) {
          if (coreName.equals(origCoreName)) {
            return name;
          }
          return coreName;
        }
      }
    }
  }
  return null;
}
