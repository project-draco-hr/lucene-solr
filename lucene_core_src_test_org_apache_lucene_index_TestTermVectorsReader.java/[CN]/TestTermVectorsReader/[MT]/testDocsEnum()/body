{
  TermVectorsReader reader=Codec.getDefault().termVectorsFormat().vectorsReader(dir,seg.info,fieldInfos,newIOContext(random()));
  for (int j=0; j < 5; j++) {
    Terms vector=reader.get(j).terms(testFields[0]);
    assertNotNull(vector);
    assertEquals(testTerms.length,vector.size());
    TermsEnum termsEnum=vector.iterator(null);
    DocsEnum docsEnum=null;
    for (int i=0; i < testTerms.length; i++) {
      final BytesRef text=termsEnum.next();
      assertNotNull(text);
      String term=text.utf8ToString();
      assertEquals(testTerms[i],term);
      docsEnum=_TestUtil.docs(random(),termsEnum,null,docsEnum,DocsEnum.FLAG_NONE);
      assertNotNull(docsEnum);
      int doc=docsEnum.docID();
      assertEquals(-1,doc);
      assertTrue(docsEnum.nextDoc() != DocIdSetIterator.NO_MORE_DOCS);
      assertEquals(DocIdSetIterator.NO_MORE_DOCS,docsEnum.nextDoc());
    }
    assertNull(termsEnum.next());
  }
  reader.close();
}
