{
  Codec codec=getCodec();
  for (  Version v : getVersions()) {
    Directory dir=newDirectory();
    byte id[]=StringHelper.randomId();
    SegmentInfo info=new SegmentInfo(dir,v,"_123",1,false,codec,Collections.<String,String>emptyMap(),id);
    info.setFiles(Collections.<String>emptySet());
    codec.segmentInfoFormat().write(dir,info,IOContext.DEFAULT);
    SegmentInfo info2=codec.segmentInfoFormat().read(dir,"_123",id,IOContext.DEFAULT);
    assertEquals(info2.getVersion(),v);
    dir.close();
  }
}
