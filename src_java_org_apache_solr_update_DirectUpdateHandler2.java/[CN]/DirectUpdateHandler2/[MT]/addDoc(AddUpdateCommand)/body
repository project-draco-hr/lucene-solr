{
  addCommands.incrementAndGet();
  addCommandsCumulative.incrementAndGet();
  int rc=-1;
  try {
    if (!cmd.allowDups && !cmd.overwritePending && !cmd.overwriteCommitted) {
      throw new SolrException(400,"unsupported param combo:" + cmd);
    }
 else     if (!cmd.allowDups && !cmd.overwritePending && cmd.overwriteCommitted) {
      rc=addConditionally(cmd);
      return rc;
    }
 else     if (!cmd.allowDups && cmd.overwritePending && !cmd.overwriteCommitted) {
      throw new SolrException(400,"unsupported param combo:" + cmd);
    }
 else     if (!cmd.allowDups && cmd.overwritePending && cmd.overwriteCommitted) {
      rc=overwriteBoth(cmd);
      return rc;
    }
 else     if (cmd.allowDups && !cmd.overwritePending && !cmd.overwriteCommitted) {
      rc=allowDups(cmd);
      return rc;
    }
 else     if (cmd.allowDups && !cmd.overwritePending && cmd.overwriteCommitted) {
      throw new SolrException(400,"unsupported param combo:" + cmd);
    }
 else     if (cmd.allowDups && cmd.overwritePending && !cmd.overwriteCommitted) {
      throw new SolrException(400,"unsupported param combo:" + cmd);
    }
 else     if (cmd.allowDups && cmd.overwritePending && cmd.overwriteCommitted) {
      rc=overwriteBoth(cmd);
      return rc;
    }
    throw new SolrException(400,"unsupported param combo:" + cmd);
  }
  finally {
    if (rc != 1) {
      numErrors.incrementAndGet();
      numErrorsCumulative.incrementAndGet();
    }
 else {
      numDocsPending.incrementAndGet();
    }
  }
}
