{
  docsSinceCommit++;
  lastAddedTime=System.currentTimeMillis();
  if (docsUpperBound > 0 && (docsSinceCommit > docsUpperBound)) {
    scheduleCommitWithin(DOC_COMMIT_DELAY_MS);
  }
  long ctime=(commitWithin > 0) ? commitWithin : timeUpperBound;
  if (ctime > 0) {
    scheduleCommitWithin(ctime);
  }
}
