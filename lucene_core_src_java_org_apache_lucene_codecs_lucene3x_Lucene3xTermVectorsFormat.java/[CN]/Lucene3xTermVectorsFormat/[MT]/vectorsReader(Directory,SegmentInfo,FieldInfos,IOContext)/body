{
  final String fileName=IndexFileNames.segmentFileName(Lucene3xSegmentInfoFormat.getDocStoreSegment(segmentInfo),"",Lucene3xTermVectorsReader.VECTORS_FIELDS_EXTENSION);
  final boolean exists;
  if (Lucene3xSegmentInfoFormat.getDocStoreOffset(segmentInfo) != -1 && Lucene3xSegmentInfoFormat.getDocStoreIsCompoundFile(segmentInfo)) {
    String cfxFileName=IndexFileNames.segmentFileName(Lucene3xSegmentInfoFormat.getDocStoreSegment(segmentInfo),"",Lucene3xCodec.COMPOUND_FILE_STORE_EXTENSION);
    if (segmentInfo.dir.fileExists(cfxFileName)) {
      Directory cfsDir=new CompoundFileDirectory(segmentInfo.dir,cfxFileName,context,false);
      try {
        exists=cfsDir.fileExists(fileName);
      }
  finally {
        cfsDir.close();
      }
    }
 else {
      exists=false;
    }
  }
 else {
    exists=directory.fileExists(fileName);
  }
  if (!exists) {
    return null;
  }
 else {
    return new Lucene3xTermVectorsReader(directory,segmentInfo,fieldInfos,context);
  }
}
