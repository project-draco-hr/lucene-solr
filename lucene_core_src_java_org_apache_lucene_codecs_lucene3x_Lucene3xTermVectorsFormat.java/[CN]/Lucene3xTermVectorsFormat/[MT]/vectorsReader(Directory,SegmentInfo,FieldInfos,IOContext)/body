{
  final String fileName=IndexFileNames.segmentFileName(segmentInfo.getDocStoreSegment(),"",Lucene3xTermVectorsReader.VECTORS_FIELDS_EXTENSION);
  final boolean exists;
  if (segmentInfo.getDocStoreOffset() != -1 && segmentInfo.getDocStoreIsCompoundFile()) {
    String cfxFileName=IndexFileNames.segmentFileName(segmentInfo.getDocStoreSegment(),"",Lucene3xCodec.COMPOUND_FILE_STORE_EXTENSION);
    if (segmentInfo.dir.fileExists(cfxFileName)) {
      Directory cfsDir=new CompoundFileDirectory(segmentInfo.dir,cfxFileName,context,false);
      try {
        exists=cfsDir.fileExists(fileName);
      }
  finally {
        cfsDir.close();
      }
    }
 else {
      exists=false;
    }
  }
 else {
    exists=directory.fileExists(fileName);
  }
  if (!exists) {
    return null;
  }
 else {
    return new Lucene3xTermVectorsReader(directory,segmentInfo,fieldInfos,context);
  }
}
