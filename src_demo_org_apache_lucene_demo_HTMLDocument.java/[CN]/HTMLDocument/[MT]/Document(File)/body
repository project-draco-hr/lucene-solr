{
  Document doc=new Document();
  doc.add(new Field("path",f.getPath().replace(dirSep,'/'),Field.Store.YES,Field.Index.UN_TOKENIZED));
  doc.add(new Field("modified",DateField.timeToString(f.lastModified()),Field.Store.YES,Field.Index.UN_TOKENIZED));
  doc.add(new Field("uid",uid(f),Field.Store.NO,Field.Index.UN_TOKENIZED));
  FileInputStream fis=null;
  try {
    fis=new FileInputStream(f);
    HTMLParser parser=new HTMLParser(fis);
    doc.add(new Field("contents",parser.getReader()));
    doc.add(new Field("summary",parser.getSummary(),Field.Store.YES,Field.Index.NO));
    doc.add(new Field("title",parser.getTitle(),Field.Store.YES,Field.Index.TOKENIZED));
  }
  finally {
    if (fis != null)     fis.close();
  }
  return doc;
}
