{
  Document doc=new Document();
  doc.add(Field.Keyword("path",f.getPath().replace(dirSep,'/')));
  doc.add(Field.Keyword("modified",DateField.timeToString(f.lastModified())));
  doc.add(new Field("uid",uid(f),false,true,false));
  FileInputStream fis=null;
  try {
    fis=new FileInputStream(f);
    HTMLParser parser=new HTMLParser(fis);
    doc.add(Field.Text("contents",parser.getReader()));
    doc.add(Field.UnIndexed("summary",parser.getSummary()));
    doc.add(Field.Text("title",parser.getTitle()));
  }
  finally {
    if (fis != null)     fis.close();
  }
  return doc;
}
