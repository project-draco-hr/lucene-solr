{
  Collection<Slice> slices=state.getSlices(message.getStr(ZkStateReader.COLLECTION_PROP));
  if (slices != null) {
    for (    Slice slice : slices) {
      for (      Replica replica : slice.getReplicas()) {
        String nodeName=replica.getStr(ZkStateReader.NODE_NAME_PROP);
        String core=replica.getStr(ZkStateReader.CORE_NAME_PROP);
        String msgNodeName=message.getStr(ZkStateReader.NODE_NAME_PROP);
        String msgCore=message.getStr(ZkStateReader.CORE_NAME_PROP);
        if (nodeName.equals(msgNodeName) && core.equals(msgCore)) {
          return replica.getName();
        }
      }
    }
  }
  return null;
}
