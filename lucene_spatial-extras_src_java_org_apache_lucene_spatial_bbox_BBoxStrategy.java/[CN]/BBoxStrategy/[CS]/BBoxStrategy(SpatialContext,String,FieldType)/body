{
  super(ctx,fieldNamePrefix);
  field_bbox=fieldNamePrefix;
  field_minX=fieldNamePrefix + SUFFIX_MINX;
  field_maxX=fieldNamePrefix + SUFFIX_MAXX;
  field_minY=fieldNamePrefix + SUFFIX_MINY;
  field_maxY=fieldNamePrefix + SUFFIX_MAXY;
  field_xdl=fieldNamePrefix + SUFFIX_XDL;
  fieldType.freeze();
  this.optionsFieldType=fieldType;
  int numQuads=0;
  if ((this.hasStored=fieldType.stored())) {
    numQuads++;
  }
  if ((this.hasDocVals=fieldType.docValuesType() != DocValuesType.NONE)) {
    numQuads++;
  }
  if ((this.hasPointVals=fieldType.pointDimensionCount() > 0)) {
    numQuads++;
  }
  if (fieldType.indexOptions() != IndexOptions.NONE && fieldType instanceof LegacyFieldType && ((LegacyFieldType)fieldType).numericType() != null) {
    if (hasPointVals) {
      throw new IllegalArgumentException("pointValues and LegacyNumericType are mutually exclusive");
    }
    final LegacyFieldType legacyType=(LegacyFieldType)fieldType;
    if (legacyType.numericType() != LegacyNumericType.DOUBLE) {
      throw new IllegalArgumentException(getClass() + " does not support " + legacyType.numericType());
    }
    numQuads++;
    legacyNumericFieldType=new LegacyFieldType(LegacyDoubleField.TYPE_NOT_STORED);
    legacyNumericFieldType.setNumericPrecisionStep(legacyType.numericPrecisionStep());
    legacyNumericFieldType.freeze();
  }
 else {
    legacyNumericFieldType=null;
  }
  if (hasPointVals || legacyNumericFieldType != null) {
    xdlFieldType=new FieldType(StringField.TYPE_NOT_STORED);
    xdlFieldType.setIndexOptions(IndexOptions.DOCS);
    xdlFieldType.freeze();
  }
 else {
    xdlFieldType=null;
  }
  this.fieldsLen=numQuads * 4 + (xdlFieldType != null ? 1 : 0);
}
