def verifyGitFilesAgainstSvn(gitRepo, svnWorkingCopy):
    fileNamesOut = gitRepo.checkOutputAsStr((gitRepo.gitCmd, 'ls-tree', '-r', '--name-only', gitRepo.getCurrentBranch()))
    fileNames = nonEmptyLines(fileNamesOut)
    print('verifyGitFilesAgainstSvn checking', len(fileNames), 'files')
    result = True
    for fileName in fileNames:
        fileNameInGitRepo = os.path.join(gitRepo.getPathName(), fileName)
        fileNameInSvnWorkingCopy = os.path.join(svnWorkingCopy.getPathName(), fileName)
        try:
            diffOutput = subprocess.check_output(('diff', '-q', fileNameInGitRepo, fileNameInSvnWorkingCopy))
        except (subprocess.CalledProcessError, exitError):
            print('difference in file', fileName)
            print('diff exitError', exitError)
            result = False
        if (not checkEqualProtectionBits(fileNameInSvnWorkingCopy, fileNameInGitRepo)):
            result = False
    if result:
        print('no differences')
    else:
        print('some differences')
