{
  Analyzer analyzer=new MockAnalyzer(random());
  IndexWriter iw=new IndexWriter(dir,iwcWithSuggestField(analyzer,"suggest_field"));
  int num=atLeast(10);
  Document document=new Document();
  for (int i=0; i < num; i++) {
    document.add(newSuggestField("suggest_field","abc_" + i,i));
    document.add(newStringField("delete","delete",Field.Store.NO));
    iw.addDocument(document);
    document.clear();
  }
  iw.deleteDocuments(new Term("delete","delete"));
  DirectoryReader reader=DirectoryReader.open(iw,false);
  SuggestIndexSearcher indexSearcher=new SuggestIndexSearcher(reader,analyzer);
  TopSuggestDocs suggest=indexSearcher.suggest("suggest_field","abc_",num);
  assertThat(suggest.totalHits,equalTo(0));
  reader.close();
  iw.close();
}
