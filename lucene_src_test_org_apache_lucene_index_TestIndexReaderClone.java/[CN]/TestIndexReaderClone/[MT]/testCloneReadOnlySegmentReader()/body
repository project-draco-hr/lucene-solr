{
  final Directory dir1=newDirectory(random);
  TestIndexReaderReopen.createIndex(random,dir1,false);
  IndexReader reader=IndexReader.open(dir1,false);
  IndexReader readOnlyReader=reader.clone(true);
  if (!isReadOnly(readOnlyReader)) {
    fail("reader isn't read only");
  }
  if (deleteWorked(1,readOnlyReader)) {
    fail("deleting from the original should not have worked");
  }
  reader.close();
  readOnlyReader.close();
  dir1.close();
}
