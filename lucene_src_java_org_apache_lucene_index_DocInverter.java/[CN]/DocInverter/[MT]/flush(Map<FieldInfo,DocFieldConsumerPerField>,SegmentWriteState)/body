{
  Map<FieldInfo,InvertedDocConsumerPerField> childFieldsToFlush=new HashMap<FieldInfo,InvertedDocConsumerPerField>();
  Map<FieldInfo,InvertedDocEndConsumerPerField> endChildFieldsToFlush=new HashMap<FieldInfo,InvertedDocEndConsumerPerField>();
  for (  Map.Entry<FieldInfo,DocFieldConsumerPerField> fieldToFlush : fieldsToFlush.entrySet()) {
    DocInverterPerField perField=(DocInverterPerField)fieldToFlush.getValue();
    childFieldsToFlush.put(fieldToFlush.getKey(),perField.consumer);
    endChildFieldsToFlush.put(fieldToFlush.getKey(),perField.endConsumer);
  }
  consumer.flush(childFieldsToFlush,state);
  endConsumer.flush(endChildFieldsToFlush,state);
}
