{
  HttpSolrClient client=new HttpSolrClient.Builder(server).withHttpClient(httpClient).withResponseParser(parser).build();
  if (connectionTimeout != null) {
    client.setConnectionTimeout(connectionTimeout);
  }
  if (soTimeout != null) {
    client.setSoTimeout(soTimeout);
  }
  if (requestWriter != null) {
    client.setRequestWriter(requestWriter);
  }
  if (queryParams != null) {
    client.setQueryParams(queryParams);
  }
  return client;
}
