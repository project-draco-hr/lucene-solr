{
  Field f=new Field(fieldname,val,store,index ? Field.Index.NOT_ANALYZED_NO_NORMS : Field.Index.NO);
  if (index) {
    f.setOmitTf(true);
    ldoc.add(f);
    final StringBuffer sb=new StringBuffer(TRIE_CODED_LENGTH);
synchronized (sb) {
      for (int i=TRIE_CODED_LENGTH - 1; i > 0; i--) {
        sb.setLength(0);
        f=new Field(fieldname + LOWER_PRECISION_FIELD_NAME_SUFFIX,sb.append((char)(TRIE_CODED_PADDING_START + i)).append(val.substring(0,i)).toString(),Field.Store.NO,Field.Index.NOT_ANALYZED_NO_NORMS);
        f.setOmitTf(true);
        ldoc.add(f);
      }
    }
  }
 else {
    ldoc.add(f);
  }
}
