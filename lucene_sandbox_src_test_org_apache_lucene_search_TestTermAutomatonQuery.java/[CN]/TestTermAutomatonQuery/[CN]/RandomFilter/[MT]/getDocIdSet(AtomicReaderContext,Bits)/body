{
  int maxDoc=context.reader().maxDoc();
  FixedBitSet bits=new FixedBitSet(maxDoc);
  Random random=new Random(seed ^ context.docBase);
  for (int docID=0; docID < maxDoc; docID++) {
    if (random.nextFloat() <= density && (acceptDocs == null || acceptDocs.get(docID))) {
      bits.set(docID);
    }
  }
  return bits;
}
