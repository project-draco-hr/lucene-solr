{
  try {
    return (FSLockFactory)Class.forName(lockFactoryClassName).getField("INSTANCE").get(null);
  }
 catch (  ReflectiveOperationException e) {
  }
  try {
    return Class.forName(lockFactoryClassName).asSubclass(FSLockFactory.class).newInstance();
  }
 catch (  ReflectiveOperationException|ClassCastException e) {
  }
  throw new IOException("Cannot get lock factory singleton of " + lockFactoryClassName);
}
