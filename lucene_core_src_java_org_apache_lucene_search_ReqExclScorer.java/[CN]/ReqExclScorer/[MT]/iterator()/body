{
  return new DocIdSetIterator(){
    /** 
 * Advance to the next non-excluded doc. 
 */
    private int toNonExcluded(    int doc) throws IOException {
      int exclDoc=exclApproximation.docID();
      for (; ; doc=reqApproximation.nextDoc()) {
        if (doc == NO_MORE_DOCS) {
          return NO_MORE_DOCS;
        }
        if (exclDoc < doc) {
          exclDoc=exclApproximation.advance(doc);
        }
        if (matches(doc,exclDoc,reqTwoPhaseIterator,exclTwoPhaseIterator)) {
          return doc;
        }
      }
    }
    @Override public int nextDoc() throws IOException {
      return toNonExcluded(reqApproximation.nextDoc());
    }
    @Override public int advance(    int target) throws IOException {
      return toNonExcluded(reqApproximation.advance(target));
    }
    @Override public int docID(){
      return reqApproximation.docID();
    }
    @Override public long cost(){
      return reqApproximation.cost();
    }
  }
;
}
