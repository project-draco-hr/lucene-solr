{
  boolean statSpecifiedByLocalParam=false;
  Iterator<String> itParams=localParams.getParameterNamesIterator();
  while (itParams.hasNext()) {
    String paramKey=itParams.next();
    Stat stat=Stat.forName(paramKey);
    if (stat != null) {
      statSpecifiedByLocalParam=true;
      if (localParams.getBool(paramKey,false)) {
        statsInResponse.add(stat);
        statsToCalculate.addAll(stat.getDistribDeps());
      }
    }
  }
  if (!statSpecifiedByLocalParam) {
    statsInResponse.addAll(DEFAULT_STATS);
    for (    Stat stat : statsInResponse) {
      statsToCalculate.addAll(stat.getDistribDeps());
    }
  }
  if (topLevelCalcDistinct && localParams.getBool(Stat.calcdistinct.toString(),true)) {
    statsInResponse.add(Stat.calcdistinct);
    statsToCalculate.addAll(Stat.calcdistinct.getDistribDeps());
  }
}
