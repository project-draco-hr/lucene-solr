{
  if (filter != null) {
    query=new DrillDownQuery(filter,query);
  }
  if (sort != null) {
    final TopFieldCollector hitCollector=TopFieldCollector.create(sort,Math.min(topN,searcher.getIndexReader().maxDoc()),after,true,doDocScores,doMaxScore,true);
    DrillSidewaysResult r=new DrillSideways(searcher,taxoReader).search(query,hitCollector,fsp);
    r.hits=hitCollector.topDocs();
    return r;
  }
 else {
    return search(after,query,topN,fsp);
  }
}
