{
  String field=params.get("f");
  if (Strings.isNullOrEmpty(field)) {
    field=display;
  }
  boolean apply=true;
  if (applyToWT != null) {
    String qwt=req.getParams().get(CommonParams.WT);
    if (qwt == null) {
      QueryResponseWriter qw=req.getCore().getQueryResponseWriter(req);
      QueryResponseWriter dw=req.getCore().getQueryResponseWriter(applyToWT);
      if (qw != dw) {
        apply=false;
      }
    }
 else {
      apply=applyToWT.equals(qwt);
    }
  }
  if (apply) {
    return new RawTransformer(field,display);
  }
  if (field.equals(display)) {
    return null;
  }
  return new RenameFieldTransformer(field,display,false);
}
