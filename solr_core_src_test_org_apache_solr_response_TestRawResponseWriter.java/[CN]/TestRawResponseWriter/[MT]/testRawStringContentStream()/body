{
  SolrQueryResponse rsp=new SolrQueryResponse();
  String data=TestUtil.randomUnicodeString(random());
  StringStream stream=new StringStream(data);
  stream.setContentType(TestUtil.randomSimpleString(random()));
  rsp.add(RawResponseWriter.CONTENT,stream);
  for (  RawResponseWriter writer : allWriters) {
    assertEquals(stream.getContentType(),writer.getContentType(req(),rsp));
    StringWriter sout=new StringWriter();
    writer.write(sout,req(),rsp);
    assertEquals(data,sout.toString());
    ByteArrayOutputStream bout=new ByteArrayOutputStream();
    writer.write(bout,req(),rsp);
    assertEquals(data,bout.toString(StandardCharsets.UTF_8.toString()));
  }
}
