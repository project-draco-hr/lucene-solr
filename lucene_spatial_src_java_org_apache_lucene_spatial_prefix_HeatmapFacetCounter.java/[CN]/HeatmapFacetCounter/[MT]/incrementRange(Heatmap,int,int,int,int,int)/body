{
  if (startColumn < 0) {
    endColumn+=startColumn;
    startColumn=0;
  }
  endColumn=Math.min(heatmap.columns - 1,endColumn);
  if (startRow < 0) {
    endRow+=startRow;
    startRow=0;
  }
  endRow=Math.min(heatmap.rows - 1,endRow);
  if (startRow > endRow) {
    return;
  }
  for (int c=startColumn; c <= endColumn; c++) {
    int cBase=c * heatmap.rows;
    for (int r=startRow; r <= endRow; r++) {
      heatmap.counts[cBase + r]+=count;
    }
  }
}
