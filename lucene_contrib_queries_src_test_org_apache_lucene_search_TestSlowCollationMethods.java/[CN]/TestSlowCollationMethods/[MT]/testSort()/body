{
  SortField sf=new SortField("field",new FieldComparatorSource(){
    @Override public FieldComparator newComparator(    String fieldname,    int numHits,    int sortPos,    boolean reversed) throws IOException {
      return new SlowCollatedStringComparator(numHits,fieldname,collator);
    }
  }
);
  TopFieldDocs docs=searcher.search(new MatchAllDocsQuery(),null,numDocs,new Sort(sf));
  String prev="";
  for (  ScoreDoc doc : docs.scoreDocs) {
    String value=reader.document(doc.doc).get("field");
    assertTrue(collator.compare(value,prev) >= 0);
    prev=value;
  }
}
