{
  final int[] docids=sampleSet;
  Arrays.sort(docids);
  final float[] scores=new float[docids.length];
  ScoredDocIDsIterator it=allDocIds.iterator();
  int n=0;
  while (it.next() && n < docids.length) {
    int doc=it.getDocID();
    if (doc == docids[n]) {
      scores[n]=it.getScore();
      ++n;
    }
  }
  final int size=n;
  return new ScoredDocIDs(){
    @Override public DocIdSet getDocIDs(){
      return new DocIdSet(){
        @Override public boolean isCacheable(){
          return true;
        }
        @Override public DocIdSetIterator iterator(){
          return new DocIdSetIterator(){
            private int next=-1;
            @Override public int advance(            int target){
              while (next < size && docids[next++] < target) {
              }
              return next == size ? NO_MORE_DOCS : docids[next];
            }
            @Override public int docID(){
              return docids[next];
            }
            @Override public int nextDoc(){
              if (++next >= size) {
                return NO_MORE_DOCS;
              }
              return docids[next];
            }
            @Override public long cost(){
              return size;
            }
          }
;
        }
      }
;
    }
    @Override public ScoredDocIDsIterator iterator(){
      return new ScoredDocIDsIterator(){
        int next=-1;
        @Override public boolean next(){
          return ++next < size;
        }
        @Override public float getScore(){
          return scores[next];
        }
        @Override public int getDocID(){
          return docids[next];
        }
      }
;
    }
    @Override public int size(){
      return size;
    }
  }
;
}
