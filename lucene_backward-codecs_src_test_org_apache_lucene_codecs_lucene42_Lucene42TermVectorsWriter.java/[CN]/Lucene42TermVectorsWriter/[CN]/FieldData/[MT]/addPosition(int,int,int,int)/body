{
  if (hasPositions) {
    if (posStart + totalPositions == positionsBuf.length) {
      positionsBuf=ArrayUtil.grow(positionsBuf);
    }
    positionsBuf[posStart + totalPositions]=position;
  }
  if (hasOffsets) {
    if (offStart + totalPositions == startOffsetsBuf.length) {
      final int newLength=ArrayUtil.oversize(offStart + totalPositions,4);
      startOffsetsBuf=Arrays.copyOf(startOffsetsBuf,newLength);
      lengthsBuf=Arrays.copyOf(lengthsBuf,newLength);
    }
    startOffsetsBuf[offStart + totalPositions]=startOffset;
    lengthsBuf[offStart + totalPositions]=length;
  }
  if (hasPayloads) {
    if (payStart + totalPositions == payloadLengthsBuf.length) {
      payloadLengthsBuf=ArrayUtil.grow(payloadLengthsBuf);
    }
    payloadLengthsBuf[payStart + totalPositions]=payloadLength;
  }
  ++totalPositions;
}
