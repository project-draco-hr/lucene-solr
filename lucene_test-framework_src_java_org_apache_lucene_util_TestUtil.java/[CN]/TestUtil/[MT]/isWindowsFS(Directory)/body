{
  while (true) {
    if (dir instanceof FSDirectory) {
      return isWindowsFS(((FSDirectory)dir).getDirectory());
    }
 else     if (dir instanceof FilterDirectory) {
      dir=((FilterDirectory)dir).getDelegate();
    }
 else {
      return false;
    }
  }
}
