{
  rm(destDir);
  destDir.mkdir();
  LuceneTestCase.closeAfterSuite(new CloseableFile(destDir,LuceneTestCase.suiteFailureMarker));
  ZipFile zipFile=new ZipFile(zipName);
  Enumeration<? extends ZipEntry> entries=zipFile.entries();
  while (entries.hasMoreElements()) {
    ZipEntry entry=entries.nextElement();
    InputStream in=zipFile.getInputStream(entry);
    File targetFile=new File(destDir,entry.getName());
    if (entry.isDirectory()) {
      targetFile.mkdirs();
    }
 else {
      if (targetFile.getParentFile() != null) {
        targetFile.getParentFile().mkdirs();
      }
      OutputStream out=new BufferedOutputStream(new FileOutputStream(targetFile));
      byte[] buffer=new byte[8192];
      int len;
      while ((len=in.read(buffer)) >= 0) {
        out.write(buffer,0,len);
      }
      in.close();
      out.close();
    }
  }
  zipFile.close();
}
