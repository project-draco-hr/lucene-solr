{
  if (prefix.length() < 3) {
    throw new IllegalArgumentException("prefix must be at least 3 characters");
  }
  String newSuffix=suffix == null ? ".tmp" : suffix;
  File result;
  do {
    result=genTempFile(prefix,newSuffix,directory);
  }
 while (!result.createNewFile());
  return maybeRemoveAfterSuite(result);
}
