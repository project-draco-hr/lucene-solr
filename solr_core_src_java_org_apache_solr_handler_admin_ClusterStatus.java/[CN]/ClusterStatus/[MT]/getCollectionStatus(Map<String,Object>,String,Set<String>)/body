{
  if (collection == null) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Collection: " + name + " not found");
  }
  if (requestedShards == null || requestedShards.isEmpty()) {
    return collection;
  }
 else {
    Map<String,Object> shards=(Map<String,Object>)collection.get("shards");
    Map<String,Object> selected=new HashMap<>();
    for (    String selectedShard : requestedShards) {
      if (!shards.containsKey(selectedShard)) {
        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Collection: " + name + " shard: "+ selectedShard+ " not found");
      }
      selected.put(selectedShard,shards.get(selectedShard));
      collection.put("shards",selected);
    }
    return collection;
  }
}
