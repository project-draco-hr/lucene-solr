{
  try {
    Map<String,String> params=new HashMap();
    params.put("type","kerberos");
    putParam(params,"kerberos.name.rules",NAME_RULES_PARAM,"DEFAULT");
    putParam(params,"token.valid",TOKEN_VALID_PARAM,"30");
    putParam(params,"cookie.domain",COOKIE_DOMAIN_PARAM,null);
    putParam(params,"cookie.path",COOKIE_PATH_PARAM,"/");
    putParam(params,"kerberos.principal",PRINCIPAL_PARAM,null);
    putParam(params,"kerberos.keytab",KEYTAB_PARAM,null);
    log.info("Params: " + params);
    FilterConfig conf=new FilterConfig(){
      @Override public ServletContext getServletContext(){
        return noContext;
      }
      @Override public Enumeration<String> getInitParameterNames(){
        return new IteratorEnumeration(params.keySet().iterator());
      }
      @Override public String getInitParameter(      String param){
        return params.get(param);
      }
      @Override public String getFilterName(){
        return "KerberosFilter";
      }
    }
;
    kerberosFilter.init(conf);
  }
 catch (  ServletException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error initializing kerberos authentication plugin: " + e);
  }
}
