{
  try {
    Map<String,String> params=new HashMap();
    params.put("type","kerberos");
    params.put("kerberos.name.rules",System.getProperty("solr.kerberos.name.rules","DEFAULT"));
    params.put("token.valid",System.getProperty("solr.kerberos.token.valid","30"));
    params.put("cookie.domain",System.getProperty("solr.kerberos.cookie.domain"));
    params.put("cookie.path",System.getProperty("solr.kerberos.cookie.path","/"));
    params.put("kerberos.principal",System.getProperty("solr.kerberos.principal"));
    params.put("kerberos.keytab",System.getProperty("solr.kerberos.keytab"));
    log.info("Params: " + params);
    FilterConfig conf=new FilterConfig(){
      @Override public ServletContext getServletContext(){
        return noContext;
      }
      @Override public Enumeration<String> getInitParameterNames(){
        return new IteratorEnumeration(params.keySet().iterator());
      }
      @Override public String getInitParameter(      String param){
        return params.get(param);
      }
      @Override public String getFilterName(){
        return "KerberosFilter";
      }
    }
;
    kerberosFilter.init(conf);
  }
 catch (  ServletException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error initializing kerberos authentication plugin: " + e);
  }
}
