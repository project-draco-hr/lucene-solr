{
  String[] strings=new String[]{"station","commotion","elation","elastic","plastic","stop","ftop","ftation","stat"};
  String[] strings2=new String[]{"station","commotion","elation","elastic","plastic","stop","ftop","ftation"};
  IntsRef[] terms=new IntsRef[strings.length];
  IntsRef[] terms2=new IntsRef[strings2.length];
  for (int inputMode=0; inputMode < 2; inputMode++) {
    if (VERBOSE) {
      System.out.println("TEST: inputMode=" + inputModeToString(inputMode));
    }
    for (int idx=0; idx < strings.length; idx++) {
      terms[idx]=toIntsRef(strings[idx],inputMode);
    }
    for (int idx=0; idx < strings2.length; idx++) {
      terms2[idx]=toIntsRef(strings2[idx],inputMode);
    }
    Arrays.sort(terms2);
    doTest(inputMode,terms);
{
      final Outputs<Object> outputs=NoOutputs.getSingleton();
      final Object NO_OUTPUT=outputs.getNoOutput();
      final List<FSTTester.InputOutput<Object>> pairs=new ArrayList<FSTTester.InputOutput<Object>>(terms2.length);
      for (      IntsRef term : terms2) {
        pairs.add(new FSTTester.InputOutput<Object>(term,NO_OUTPUT));
      }
      FST<Object> fst=new FSTTester<Object>(random,dir,inputMode,pairs,outputs,false).doTest(0,0,false);
      assertNotNull(fst);
      assertEquals(22,fst.getNodeCount());
      assertEquals(27,fst.getArcCount());
    }
{
      final PositiveIntOutputs outputs=PositiveIntOutputs.getSingleton(true);
      final List<FSTTester.InputOutput<Long>> pairs=new ArrayList<FSTTester.InputOutput<Long>>(terms2.length);
      for (int idx=0; idx < terms2.length; idx++) {
        pairs.add(new FSTTester.InputOutput<Long>(terms2[idx],(long)idx));
      }
      final FST<Long> fst=new FSTTester<Long>(random,dir,inputMode,pairs,outputs,true).doTest(0,0,false);
      assertNotNull(fst);
      assertEquals(22,fst.getNodeCount());
      assertEquals(27,fst.getArcCount());
    }
{
      final ByteSequenceOutputs outputs=ByteSequenceOutputs.getSingleton();
      final BytesRef NO_OUTPUT=outputs.getNoOutput();
      final List<FSTTester.InputOutput<BytesRef>> pairs=new ArrayList<FSTTester.InputOutput<BytesRef>>(terms2.length);
      for (int idx=0; idx < terms2.length; idx++) {
        final BytesRef output=random.nextInt(30) == 17 ? NO_OUTPUT : new BytesRef(Integer.toString(idx));
        pairs.add(new FSTTester.InputOutput<BytesRef>(terms2[idx],output));
      }
      final FST<BytesRef> fst=new FSTTester<BytesRef>(random,dir,inputMode,pairs,outputs,false).doTest(0,0,false);
      assertNotNull(fst);
      assertEquals(24,fst.getNodeCount());
      assertEquals(30,fst.getArcCount());
    }
  }
}
