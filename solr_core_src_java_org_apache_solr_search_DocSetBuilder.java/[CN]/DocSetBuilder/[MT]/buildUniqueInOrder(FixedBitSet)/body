{
  if (bitSet != null) {
    if (filter != null) {
      bitSet.and(filter);
    }
    return new BitDocSet(bitSet);
  }
 else {
    int l=pos;
    if (filter != null) {
      l=dedup(buffer,pos,filter);
    }
    return new SortedIntDocSet(buffer,l);
  }
}
