{
  IndexWriter indexWriter=new IndexWriter(indexDir,new IndexWriterConfig(FacetExamples.EXAMPLES_VER,new WhitespaceAnalyzer(FacetExamples.EXAMPLES_VER)));
  DirectoryTaxonomyWriter taxoWriter=new DirectoryTaxonomyWriter(taxoDir);
  Document doc=new Document();
  doc.add(new TextField("c","foo bar",Store.NO));
  doc.add(new NumericDocValuesField("popularity",5L));
  doc.add(new FacetField("A","B"));
  indexWriter.addDocument(config.build(taxoWriter,doc));
  doc=new Document();
  doc.add(new TextField("c","foo foo bar",Store.NO));
  doc.add(new NumericDocValuesField("popularity",3L));
  doc.add(new FacetField("A","C"));
  indexWriter.addDocument(config.build(taxoWriter,doc));
  indexWriter.shutdown();
  taxoWriter.close();
}
