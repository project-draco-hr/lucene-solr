{
  Analyzer a=new MockAnalyzer(random());
  while (true) {
    String s=_TestUtil.randomRealisticUnicodeString(random());
    if (other != null && s.equals(other)) {
      continue;
    }
    final TokenStream ts=a.tokenStream("foo",new StringReader(s));
    final TermToBytesRefAttribute termAtt=ts.getAttribute(TermToBytesRefAttribute.class);
    final BytesRef termBytes=termAtt.getBytesRef();
    ts.reset();
    int count=0;
    boolean changed=false;
    while (ts.incrementToken()) {
      termAtt.fillBytesRef();
      if (count == 0 && !termBytes.utf8ToString().equals(s)) {
        changed=true;
      }
      count++;
    }
    ts.end();
    ts.close();
    if (!changed && count == 1) {
      return s;
    }
  }
}
