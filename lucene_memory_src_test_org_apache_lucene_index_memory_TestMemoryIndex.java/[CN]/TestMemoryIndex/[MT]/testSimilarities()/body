{
  MemoryIndex mi=new MemoryIndex();
  mi.addField("f1","a long text field that contains many many terms",analyzer);
  IndexSearcher searcher=mi.createSearcher();
  LeafReader reader=(LeafReader)searcher.getIndexReader();
  NumericDocValues norms=reader.getNormValues("f1");
  assertEquals(0,norms.nextDoc());
  float n1=norms.longValue();
  mi.setSimilarity(new ClassicSimilarity(){
    @Override public float lengthNorm(    FieldInvertState state){
      return 74;
    }
  }
);
  norms=reader.getNormValues("f1");
  assertEquals(0,norms.nextDoc());
  float n2=norms.longValue();
  assertTrue(n1 != n2);
  TestUtil.checkReader(reader);
}
