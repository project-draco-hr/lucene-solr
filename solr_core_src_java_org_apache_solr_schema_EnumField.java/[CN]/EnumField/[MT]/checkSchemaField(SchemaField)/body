{
  if (field.hasDocValues() && !field.multiValued() && !(field.isRequired() || field.getDefaultValue() != null)) {
    throw new IllegalStateException("Field " + this + " has single-valued doc values enabled, but has no default value and is not required");
  }
}
