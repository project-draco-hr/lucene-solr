{
  HashSet<String> hset=new HashSet<String>();
  hset.addAll(Arrays.asList(TEST_STOP_WORDS));
  assertTrue("in 3.0 version, iterator should be CharArraySetIterator",((Iterator)CharArraySet.copy(Version.LUCENE_30,hset).iterator()) instanceof CharArraySet.CharArraySetIterator);
  CharArraySet set=CharArraySet.copy(Version.LUCENE_CURRENT,hset);
  assertFalse("in current version, iterator should not be CharArraySetIterator",((Iterator)set.iterator()) instanceof CharArraySet.CharArraySetIterator);
  Iterator<String> it=set.stringIterator();
  assertTrue(it instanceof CharArraySet.CharArraySetIterator);
  while (it.hasNext()) {
    assertTrue(hset.contains(it.next()));
    try {
      it.remove();
      fail("remove() should not work on CharArraySetIterator");
    }
 catch (    UnsupportedOperationException uoe) {
    }
  }
}
