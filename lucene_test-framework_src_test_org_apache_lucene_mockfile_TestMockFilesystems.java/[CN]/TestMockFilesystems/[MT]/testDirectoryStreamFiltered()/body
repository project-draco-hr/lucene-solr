{
  Path dir=FilterPath.unwrap(createTempDir());
  FileSystem fs=new FilterFileSystemProvider("test://",dir.getFileSystem()).getFileSystem(URI.create("file:///"));
  Path wrapped=new FilterPath(dir,fs);
  OutputStream file=Files.newOutputStream(wrapped.resolve("file1"));
  file.write(5);
  file.close();
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(wrapped)){
    int count=0;
    for (    Path path : stream) {
      assertTrue(path instanceof FilterPath);
      if (!path.getFileName().toString().startsWith("extra")) {
        count++;
      }
    }
    assertEquals(1,count);
  }
   dir=FilterPath.unwrap(createTempDir());
  fs=new LeakFS(dir.getFileSystem()).getFileSystem(URI.create("file:///"));
  wrapped=new FilterPath(dir,fs);
  file=Files.newOutputStream(wrapped.resolve("file1"));
  file.write(5);
  file.close();
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(wrapped)){
    int count=0;
    for (    Path path : stream) {
      assertTrue(path instanceof FilterPath);
      if (!path.getFileName().toString().startsWith("extra")) {
        count++;
      }
    }
    assertEquals(1,count);
  }
 }
