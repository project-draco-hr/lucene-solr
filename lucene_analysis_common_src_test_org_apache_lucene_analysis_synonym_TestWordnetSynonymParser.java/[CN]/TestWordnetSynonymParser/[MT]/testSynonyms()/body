{
  WordnetSynonymParser parser=new WordnetSynonymParser(true,true,new MockAnalyzer(random()));
  parser.add(new StringReader(synonymsFile));
  final SynonymMap map=parser.build();
  Analyzer analyzer=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      Tokenizer tokenizer=new MockTokenizer(reader,MockTokenizer.WHITESPACE,false);
      return new TokenStreamComponents(tokenizer,new SynonymFilter(tokenizer,map,false));
    }
  }
;
  assertAnalyzesTo(analyzer,"Lost in the woods",new String[]{"Lost","in","the","woods","wood","forest"},new int[]{0,5,8,12,12,12},new int[]{4,7,11,17,17,17},new int[]{1,1,1,1,0,0});
  assertAnalyzesTo(analyzer,"king",new String[]{"king","baron"});
  assertAnalyzesTo(analyzer,"king's evil",new String[]{"king's","king's","evil","meany"});
}
