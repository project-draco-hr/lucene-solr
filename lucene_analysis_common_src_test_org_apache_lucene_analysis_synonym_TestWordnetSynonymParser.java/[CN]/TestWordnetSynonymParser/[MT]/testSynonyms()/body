{
  Analyzer analyzer=new MockAnalyzer(random());
  WordnetSynonymParser parser=new WordnetSynonymParser(true,true,analyzer);
  parser.parse(new StringReader(synonymsFile));
  final SynonymMap map=parser.build();
  analyzer.close();
  analyzer=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName){
      Tokenizer tokenizer=new MockTokenizer(MockTokenizer.WHITESPACE,false);
      return new TokenStreamComponents(tokenizer,new SynonymFilter(tokenizer,map,false));
    }
  }
;
  assertAnalyzesTo(analyzer,"Lost in the woods",new String[]{"Lost","in","the","woods","wood","forest"},new int[]{0,5,8,12,12,12},new int[]{4,7,11,17,17,17},new int[]{1,1,1,1,0,0});
  assertAnalyzesTo(analyzer,"king",new String[]{"king","baron"});
  assertAnalyzesTo(analyzer,"king's evil",new String[]{"king's","king's","evil","meany"});
  analyzer.close();
}
