{
  Fieldable binaryFldStored=new Field("binaryStored",binaryValStored.getBytes(),Field.Store.YES);
  Fieldable binaryFldCompressed=new Field("binaryCompressed",binaryValCompressed.getBytes(),Field.Store.COMPRESS);
  Fieldable stringFldStored=new Field("stringStored",binaryValStored,Field.Store.YES,Field.Index.NO,Field.TermVector.NO);
  Fieldable stringFldCompressed=new Field("stringCompressed",binaryValCompressed,Field.Store.COMPRESS,Field.Index.NO,Field.TermVector.NO);
  try {
    new Field("fail",binaryValCompressed.getBytes(),Field.Store.NO);
    fail();
  }
 catch (  IllegalArgumentException iae) {
    ;
  }
  Document doc=new Document();
  doc.add(binaryFldStored);
  doc.add(binaryFldCompressed);
  doc.add(stringFldStored);
  doc.add(stringFldCompressed);
  assertEquals(4,doc.fields.size());
  RAMDirectory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new StandardAnalyzer(),true);
  writer.addDocument(doc);
  writer.close();
  IndexReader reader=IndexReader.open(dir);
  Document docFromReader=reader.document(0);
  assertTrue(docFromReader != null);
  String binaryFldStoredTest=new String(docFromReader.getBinaryValue("binaryStored"));
  assertTrue(binaryFldStoredTest.equals(binaryValStored));
  String binaryFldCompressedTest=new String(docFromReader.getBinaryValue("binaryCompressed"));
  assertTrue(binaryFldCompressedTest.equals(binaryValCompressed));
  String stringFldStoredTest=new String(docFromReader.get("stringStored"));
  assertTrue(stringFldStoredTest.equals(binaryValStored));
  String stringFldCompressedTest=new String(docFromReader.get("stringCompressed"));
  assertTrue(stringFldCompressedTest.equals(binaryValCompressed));
  reader.deleteDocument(0);
  assertEquals(0,reader.numDocs());
  reader.close();
}
