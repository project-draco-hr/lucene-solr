{
  Fieldable binaryFldCompressed=new Field("binaryCompressed",CompressionTools.compress(binaryValCompressed.getBytes()),Field.Store.YES);
  Document doc=new Document();
  doc.add(binaryFldCompressed);
  MockRAMDirectory dir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new StandardAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  writer.addDocument(doc);
  writer.close();
  IndexReader reader=IndexReader.open(dir);
  Document docFromReader=reader.document(0);
  assertTrue(docFromReader != null);
  String binaryFldCompressedTest=new String(CompressionTools.decompress(docFromReader.getBinaryValue("binaryCompressed")));
  assertTrue(binaryFldCompressedTest.equals(binaryValCompressed));
  reader.close();
  dir.close();
}
