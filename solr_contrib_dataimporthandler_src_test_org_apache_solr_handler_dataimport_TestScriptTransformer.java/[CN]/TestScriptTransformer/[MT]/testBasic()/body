{
  try {
    String script="function f1(row,context){" + "row.put('name','Hello ' + row.get('name'));" + "return row;\n"+ "}";
    Context context=getContext("f1",script);
    Map<String,Object> map=new HashMap<String,Object>();
    map.put("name","Scott");
    EntityProcessorWrapper sep=new EntityProcessorWrapper(new SqlEntityProcessor(),null);
    sep.init(context);
    sep.applyTransformer(map);
    assertEquals(map.get("name"),"Hello Scott");
  }
 catch (  DataImportHandlerException e) {
    assumeFalse("JRE does not contain a JavaScript engine (OpenJDK)",e.getMessage().startsWith("<script> can be used only in java 6 or above"));
    throw e;
  }
}
