{
  try {
    String script="function f1(row,context){" + "row.put('name','Hello ' + row.get('name'));" + "return row;\n"+ "}";
    Context context=getContext("f1",script);
    Map<String,Object> map=new HashMap<String,Object>();
    map.put("name","Scott");
    EntityProcessorWrapper sep=new EntityProcessorWrapper(new SqlEntityProcessor(),null,null);
    sep.init(context);
    sep.applyTransformer(map);
    assertEquals(map.get("name"),"Hello Scott");
  }
 catch (  DataImportHandlerException e) {
    assumeFalse("This JVM does not have Rhino installed.  Test Skipped.",e.getMessage().startsWith("Cannot load Script Engine for language"));
    throw e;
  }
}
