{
  if (fieldInfos == null) {
    Directory dir0=dir;
    if (isCompoundFile && checkCompoundFile) {
      dir0=new CompoundFileReader(dir,IndexFileNames.segmentFileName(name,"",IndexFileNames.COMPOUND_FILE_EXTENSION));
    }
    try {
      fieldInfos=new FieldInfos(dir0,IndexFileNames.segmentFileName(name,"",IndexFileNames.FIELD_INFOS_EXTENSION));
    }
  finally {
      if (dir != dir0) {
        dir0.close();
      }
    }
  }
}
