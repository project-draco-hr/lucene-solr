{
  ObjectToIntMap<Integer> map=new ObjectToIntMap<Integer>();
  for (int i=0; i < 100; ++i) {
    map.put(i,Integer.valueOf(100 + i));
  }
  HashSet<Integer> set=new HashSet<Integer>();
  for (IntIterator iterator=map.iterator(); iterator.hasNext(); ) {
    set.add(iterator.next());
  }
  assertEquals(set.size(),map.size());
  for (int i=0; i < 100; ++i) {
    assertTrue(set.contains(Integer.valueOf(100 + i)));
  }
  set.clear();
  for (IntIterator iterator=map.iterator(); iterator.hasNext(); ) {
    Integer value=iterator.next();
    if (value % 2 == 1) {
      iterator.remove();
      continue;
    }
    set.add(value);
  }
  assertEquals(set.size(),map.size());
  for (int i=0; i < 100; i+=2) {
    assertTrue(set.contains(Integer.valueOf(100 + i)));
  }
}
