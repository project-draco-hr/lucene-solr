{
  int num=atLeast(200);
  for (int i=0; i < num; i++) {
    LightAutomaton a=AutomatonTestUtil.randomAutomaton(random());
    a=AutomatonTestUtil.minimizeSimple(a);
    LightAutomaton b=MinimizationOperationsLight.minimize(a);
    assertTrue(BasicOperations.sameLanguage(a,b));
    assertEquals(a.getNumStates(),b.getNumStates());
    int numStates=a.getNumStates();
    int sum1=0;
    for (int s=0; s < numStates; s++) {
      sum1+=a.getNumTransitions(s);
    }
    int sum2=0;
    for (int s=0; s < numStates; s++) {
      sum2+=b.getNumTransitions(s);
    }
    assertEquals(sum1,sum2);
  }
}
