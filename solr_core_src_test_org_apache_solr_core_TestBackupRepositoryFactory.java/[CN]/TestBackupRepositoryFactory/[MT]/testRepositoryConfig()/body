{
  PluginInfo[] plugins=new PluginInfo[1];
{
    Map<String,Object> attrs=new HashMap<>();
    attrs.put(CoreAdminParams.NAME,"repo1");
    attrs.put(FieldType.CLASS_NAME,LocalFileSystemRepository.class.getName());
    attrs.put("default","true");
    attrs.put(ZkStateReader.BACKUP_LOCATION,"/tmp");
    plugins[0]=new PluginInfo("repository",attrs);
  }
  BackupRepositoryFactory f=new BackupRepositoryFactory(plugins);
{
    BackupRepository repo=f.newInstance(loader);
    assertTrue(repo instanceof LocalFileSystemRepository);
    assertEquals("/tmp",repo.getConfigProperty(ZkStateReader.BACKUP_LOCATION));
  }
{
    BackupRepository repo=f.newInstance(loader,"repo1");
    assertTrue(repo instanceof LocalFileSystemRepository);
    assertEquals("/tmp",repo.getConfigProperty(ZkStateReader.BACKUP_LOCATION));
  }
}
