{
  if (upperBound.getOperator() != ParametricQueryNode.CompareOperator.LE && upperBound.getOperator() != ParametricQueryNode.CompareOperator.LT) {
    throw new IllegalArgumentException("upper bound should have " + ParametricQueryNode.CompareOperator.LE + " or "+ ParametricQueryNode.CompareOperator.LT);
  }
  if (lowerBound.getOperator() != ParametricQueryNode.CompareOperator.GE && lowerBound.getOperator() != ParametricQueryNode.CompareOperator.GT) {
    throw new IllegalArgumentException("lower bound should have " + ParametricQueryNode.CompareOperator.GE + " or "+ ParametricQueryNode.CompareOperator.GT);
  }
  if (upperBound.getField() != lowerBound.getField() || (upperBound.getField() != null && !upperBound.getField().equals(lowerBound.getField()))) {
    throw new IllegalArgumentException("lower and upper bounds should have the same field name!");
  }
  allocate();
  setLeaf(false);
  add(lowerBound);
  add(upperBound);
}
