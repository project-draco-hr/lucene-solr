{
  final Weight originalWeight=originalQuery.createWeight(searcher,needsScores);
  return new Weight(TermsIncludingScoreQuery.this){
    private TermsEnum segmentTermsEnum;
    @Override public Explanation explain(    LeafReaderContext context,    int doc) throws IOException {
      Terms terms=context.reader().terms(field);
      if (terms != null) {
        segmentTermsEnum=terms.iterator(segmentTermsEnum);
        BytesRef spare=new BytesRef();
        PostingsEnum postingsEnum=null;
        for (int i=0; i < TermsIncludingScoreQuery.this.terms.size(); i++) {
          if (segmentTermsEnum.seekExact(TermsIncludingScoreQuery.this.terms.get(ords[i],spare))) {
            postingsEnum=segmentTermsEnum.postings(null,postingsEnum,PostingsEnum.FLAG_NONE);
            if (postingsEnum.advance(doc) == doc) {
              final float score=TermsIncludingScoreQuery.this.scores[ords[i]];
              return new ComplexExplanation(true,score,"Score based on join value " + segmentTermsEnum.term().utf8ToString());
            }
          }
        }
      }
      return new ComplexExplanation(false,0.0f,"Not a match");
    }
    @Override public float getValueForNormalization() throws IOException {
      return originalWeight.getValueForNormalization() * TermsIncludingScoreQuery.this.getBoost() * TermsIncludingScoreQuery.this.getBoost();
    }
    @Override public void normalize(    float norm,    float topLevelBoost){
      originalWeight.normalize(norm,topLevelBoost * TermsIncludingScoreQuery.this.getBoost());
    }
    @Override public Scorer scorer(    LeafReaderContext context,    Bits acceptDocs) throws IOException {
      Terms terms=context.reader().terms(field);
      if (terms == null) {
        return null;
      }
      final long cost=context.reader().maxDoc() * terms.size();
      segmentTermsEnum=terms.iterator(segmentTermsEnum);
      if (multipleValuesPerDocument) {
        return new MVInOrderScorer(this,acceptDocs,segmentTermsEnum,context.reader().maxDoc(),cost);
      }
 else {
        return new SVInOrderScorer(this,acceptDocs,segmentTermsEnum,context.reader().maxDoc(),cost);
      }
    }
  }
;
}
