{
  Codec defaultCodec=TestUtil.getDefaultCodec();
  if (random().nextBoolean()) {
    int maxPointsInLeafNode=TestUtil.nextInt(random(),50,500);
    if (VERBOSE) {
      System.out.println("TEST: using Lucene60PointsFormat with maxPointsInLeafNode=" + maxPointsInLeafNode);
    }
    codec=new FilterCodec(defaultCodec.getName(),defaultCodec){
      @Override public PointsFormat pointsFormat(){
        return new PointsFormat(){
          @Override public PointsWriter fieldsWriter(          SegmentWriteState writeState) throws IOException {
            return new Lucene60PointsWriter(writeState,maxPointsInLeafNode);
          }
          @Override public PointsReader fieldsReader(          SegmentReadState readState) throws IOException {
            return new Lucene60PointsReader(readState);
          }
        }
;
      }
    }
;
  }
 else {
    codec=defaultCodec;
  }
}
