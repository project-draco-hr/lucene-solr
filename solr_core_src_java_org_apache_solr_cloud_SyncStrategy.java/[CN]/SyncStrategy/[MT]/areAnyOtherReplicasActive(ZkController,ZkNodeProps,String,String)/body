{
  ClusterState clusterState=zkController.getZkStateReader().getClusterState();
  Map<String,Slice> slices=clusterState.getSlices(collection);
  Slice slice=slices.get(shardId);
  Map<String,ZkNodeProps> shards=slice.getShards();
  for (  Map.Entry<String,ZkNodeProps> shard : shards.entrySet()) {
    String state=shard.getValue().get(ZkStateReader.STATE_PROP);
    if ((state.equals(ZkStateReader.ACTIVE)) && clusterState.liveNodesContain(shard.getValue().get(ZkStateReader.NODE_NAME_PROP)) && !new ZkCoreNodeProps(shard.getValue()).getCoreUrl().equals(new ZkCoreNodeProps(leaderProps).getCoreUrl())) {
      return true;
    }
  }
  return false;
}
