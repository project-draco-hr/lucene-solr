{
  boolean success=false;
  CloudDescriptor cloudDesc=core.getCoreDescriptor().getCloudDescriptor();
  String collection=cloudDesc.getCollectionName();
  String shardId=cloudDesc.getShardId();
  try {
    success=syncWithReplicas(zkController,core,leaderProps,collection,shardId);
  }
 catch (  Exception e) {
    SolrException.log(log,"Sync Failed",e);
  }
  try {
    if (!success && !areAnyOtherReplicasActive(zkController,leaderProps,collection,shardId)) {
      log.info("Sync was not a success but no one else is active! I am the leader");
      zkController.publish(core.getCoreDescriptor(),ZkStateReader.ACTIVE);
      success=true;
    }
    if (success) {
      log.info("Sync Success - now sync replicas to me");
      syncToMe(zkController,collection,shardId,leaderProps);
    }
 else {
      SolrException.log(log,"Sync Failed");
    }
  }
 catch (  Exception e) {
    SolrException.log(log,"Sync Failed",e);
  }
  return success;
}
