{
  SpanTermQuery q1=new SpanTermQuery(new Term(FIELD,"w1"));
  SpanTermQuery q2=new SpanTermQuery(new Term(FIELD,"w2"));
  SpanTermQuery q3=new SpanTermQuery(new Term(FIELD,"w3"));
  SpanNearQuery nq=new SpanNearQuery(new SpanQuery[]{q1,q2},2,true);
  SpanNotQuery notq=new SpanNotQuery(nq,q3);
  TermCollector collector=new TermCollector();
  Spans spans=MultiSpansWrapper.wrap(reader,notq,SpanWeight.Postings.POSITIONS);
  assertEquals(2,spans.advance(2));
  spans.nextStartPosition();
  checkCollectedTerms(spans,collector,new Term(FIELD,"w1"),new Term(FIELD,"w2"));
}
