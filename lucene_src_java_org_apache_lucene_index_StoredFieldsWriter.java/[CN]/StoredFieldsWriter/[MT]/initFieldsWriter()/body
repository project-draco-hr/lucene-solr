{
  if (fieldsWriter == null) {
    docStoreSegment=docWriter.getDocStoreSegment();
    if (docStoreSegment != null) {
      fieldsWriter=new FieldsWriter(docWriter.directory,docStoreSegment,fieldInfos);
      docWriter.addOpenFile(IndexFileNames.segmentFileName(docStoreSegment,"",IndexFileNames.FIELDS_EXTENSION));
      docWriter.addOpenFile(IndexFileNames.segmentFileName(docStoreSegment,"",IndexFileNames.FIELDS_INDEX_EXTENSION));
      lastDocID=0;
    }
  }
}
