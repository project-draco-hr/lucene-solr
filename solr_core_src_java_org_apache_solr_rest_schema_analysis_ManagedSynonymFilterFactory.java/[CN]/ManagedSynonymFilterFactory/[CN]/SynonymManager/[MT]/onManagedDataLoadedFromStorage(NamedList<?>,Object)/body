{
  NamedList<Object> initArgs=(NamedList<Object>)managedInitArgs;
  String format=(String)initArgs.get("format");
  if (format != null && !"solr".equals(format)) {
    throw new SolrException(ErrorCode.BAD_REQUEST,"Invalid format " + format + "! Only 'solr' is supported.");
  }
  if (initArgs.get(IGNORE_CASE_INIT_ARG) == null) {
    initArgs.add(IGNORE_CASE_INIT_ARG,Boolean.FALSE);
  }
  boolean ignoreCase=getIgnoreCase(managedInitArgs);
  synonymMappings=new TreeMap<>();
  if (managedData != null) {
    Map<String,Object> storedSyns=(Map<String,Object>)managedData;
    for (    String key : storedSyns.keySet()) {
      String caseKey=applyCaseSetting(ignoreCase,key);
      CasePreservedSynonymMappings cpsm=synonymMappings.get(caseKey);
      if (cpsm == null) {
        cpsm=new CasePreservedSynonymMappings();
        synonymMappings.put(caseKey,cpsm);
      }
      Object mapping=storedSyns.get(key);
      if (!(mapping instanceof List)) {
        throw new SolrException(ErrorCode.SERVER_ERROR,"Invalid synonym file format! Expected a list of synonyms for " + key + " but got "+ mapping.getClass().getName());
      }
      Set<String> sortedVals=new TreeSet<>();
      sortedVals.addAll((List<String>)storedSyns.get(key));
      cpsm.mappings.put(key,sortedVals);
    }
  }
  log.info("Loaded {} synonym mappings for {}",synonymMappings.size(),getResourceId());
}
