{
  Analyzer a=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      return new TokenStreamComponents(new MockTokenizer(reader));
    }
    @Override protected Reader initReader(    String fieldName,    Reader reader){
      return new MockCharFilter(reader,7);
    }
  }
;
  assertAnalyzesTo(a,"ab",new String[]{"aab"},new int[]{0},new int[]{2});
  PerFieldAnalyzerWrapper p=new PerFieldAnalyzerWrapper(a,Collections.<String,Analyzer>emptyMap());
  assertAnalyzesTo(p,"ab",new String[]{"aab"},new int[]{0},new int[]{2});
}
