{
  Map<String,String> clientOptions=new HashMap();
  clientOptions.put("principal",clientPrincipal);
  clientOptions.put("keyTab",clientKeytab.getAbsolutePath());
  clientOptions.put("useKeyTab","true");
  clientOptions.put("storeKey","true");
  clientOptions.put("useTicketCache","false");
  clientOptions.put("refreshKrb5Config","true");
  String jaasProp=System.getProperty("solr.jaas.debug");
  if (jaasProp != null && "true".equalsIgnoreCase(jaasProp)) {
    clientOptions.put("debug","true");
  }
  clientEntry=new AppConfigurationEntry[]{new AppConfigurationEntry(getKrb5LoginModuleName(),AppConfigurationEntry.LoginModuleControlFlag.REQUIRED,clientOptions)};
  if (serverPrincipal != null && serverKeytab != null) {
    Map<String,String> serverOptions=new HashMap(clientOptions);
    serverOptions.put("principal",serverPrincipal);
    serverOptions.put("keytab",serverKeytab.getAbsolutePath());
    serverEntry=new AppConfigurationEntry[]{new AppConfigurationEntry(getKrb5LoginModuleName(),AppConfigurationEntry.LoginModuleControlFlag.REQUIRED,serverOptions)};
  }
}
