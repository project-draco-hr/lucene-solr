{
  assertTrue(dir != null);
  assertTrue(fieldInfos != null);
  IndexReader reader=IndexReader.open(dir);
  Document doc=reader.document(0);
  assertTrue(doc != null);
  assertTrue(doc.getField(DocHelper.TEXT_FIELD_1_KEY) != null);
  Field field=(Field)doc.getField(DocHelper.TEXT_FIELD_2_KEY);
  assertTrue(field != null);
  assertTrue(field.storeTermVectors() == true);
  assertTrue(field.storeTermVectorOffsets() == true);
  assertTrue(field.storeTermVectorPositions() == true);
  assertTrue(field.omitNorms() == false);
  assertTrue(field.indexOptions() == IndexOptions.DOCS_AND_FREQS_AND_POSITIONS);
  field=(Field)doc.getField(DocHelper.TEXT_FIELD_3_KEY);
  assertTrue(field != null);
  assertTrue(field.storeTermVectors() == false);
  assertTrue(field.storeTermVectorOffsets() == false);
  assertTrue(field.storeTermVectorPositions() == false);
  assertTrue(field.omitNorms() == true);
  assertTrue(field.indexOptions() == IndexOptions.DOCS_AND_FREQS_AND_POSITIONS);
  field=(Field)doc.getField(DocHelper.NO_TF_KEY);
  assertTrue(field != null);
  assertTrue(field.storeTermVectors() == false);
  assertTrue(field.storeTermVectorOffsets() == false);
  assertTrue(field.storeTermVectorPositions() == false);
  assertTrue(field.omitNorms() == false);
  assertTrue(field.indexOptions() == IndexOptions.DOCS_ONLY);
  DocumentStoredFieldVisitor visitor=new DocumentStoredFieldVisitor(DocHelper.TEXT_FIELD_3_KEY);
  reader.document(0,visitor);
  final List<IndexableField> fields=visitor.getDocument().getFields();
  assertEquals(1,fields.size());
  assertEquals(DocHelper.TEXT_FIELD_3_KEY,fields.get(0).name());
  reader.close();
}
