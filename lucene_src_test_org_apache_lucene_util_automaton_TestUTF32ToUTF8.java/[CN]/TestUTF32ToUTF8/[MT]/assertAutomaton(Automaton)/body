{
  CharacterRunAutomaton cra=new CharacterRunAutomaton(automaton);
  ByteRunAutomaton bra=new ByteRunAutomaton(automaton);
  final BasicOperations.RandomAcceptedStrings ras=new BasicOperations.RandomAcceptedStrings(automaton);
  for (int i=0; i < 1000; i++) {
    final String string;
    if (random.nextBoolean()) {
      string=_TestUtil.randomUnicodeString(random);
    }
 else {
      int[] codepoints=ras.getRandomAcceptedString(random);
      string=new String(codepoints,0,codepoints.length);
    }
    BytesRef bytesRef=new BytesRef(string);
    assertEquals(cra.run(string),bra.run(bytesRef.bytes,0,bytesRef.length));
  }
}
