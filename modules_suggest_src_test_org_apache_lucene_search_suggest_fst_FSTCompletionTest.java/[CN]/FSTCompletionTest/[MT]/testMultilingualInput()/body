{
  List<TermFreq> input=LookupBenchmarkTest.readTop50KWiki();
  FSTCompletionLookup lookup=new FSTCompletionLookup();
  lookup.build(new TermFreqArrayIterator(input));
  for (  TermFreq tf : input) {
    assertNotNull("Not found: " + tf.term.toString(),lookup.get(_TestUtil.bytesToCharSequence(tf.term,random)));
    assertEquals(tf.term.utf8ToString(),lookup.lookup(_TestUtil.bytesToCharSequence(tf.term,random),true,1).get(0).key.toString());
  }
  List<LookupResult> result=lookup.lookup(_TestUtil.stringToCharSequence("wit",random),true,5);
  assertEquals(5,result.size());
  assertTrue(result.get(0).key.toString().equals("wit"));
  assertTrue(result.get(1).key.toString().equals("with"));
}
