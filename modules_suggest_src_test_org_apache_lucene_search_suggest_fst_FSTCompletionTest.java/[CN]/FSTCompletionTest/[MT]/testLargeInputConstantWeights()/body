{
  FSTCompletionLookup lookup=new FSTCompletionLookup(10,true);
  Random r=random;
  List<TermFreq> keys=new ArrayList<TermFreq>();
  for (int i=0; i < 5000; i++) {
    keys.add(new TermFreq(_TestUtil.randomSimpleString(r),-1));
  }
  lookup.build(new TermFreqArrayIterator(keys));
  Float previous=null;
  for (  TermFreq tf : keys) {
    Float current=(Float)lookup.get(_TestUtil.bytesToCharSequence(tf.term,random));
    if (previous != null) {
      assertEquals(previous,current);
    }
    previous=current;
  }
}
