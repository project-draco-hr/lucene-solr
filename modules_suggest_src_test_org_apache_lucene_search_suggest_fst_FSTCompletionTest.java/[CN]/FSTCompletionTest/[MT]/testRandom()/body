{
  List<TermFreq> freqs=new ArrayList<TermFreq>();
  Random rnd=random;
  for (int i=0; i < 2500 + rnd.nextInt(2500); i++) {
    float weight=rnd.nextFloat() * 100;
    freqs.add(new TermFreq("" + rnd.nextLong(),weight));
  }
  FSTCompletionLookup lookup=new FSTCompletionLookup();
  lookup.build(new TermFreqArrayIterator(freqs.toArray(new TermFreq[freqs.size()])));
  for (  TermFreq tf : freqs) {
    final String term=tf.term;
    for (int i=1; i < term.length(); i++) {
      String prefix=term.substring(0,i);
      for (      LookupResult lr : lookup.lookup(prefix,true,10)) {
        assertTrue(lr.key.startsWith(prefix));
      }
    }
  }
}
