{
  List<TermFreq> freqs=new ArrayList<TermFreq>();
  Random rnd=random;
  for (int i=0; i < 2500 + rnd.nextInt(2500); i++) {
    int weight=random.nextInt(100);
    freqs.add(new TermFreq("" + rnd.nextLong(),weight));
  }
  FSTCompletionLookup lookup=new FSTCompletionLookup();
  lookup.build(new TermFreqArrayIterator(freqs.toArray(new TermFreq[freqs.size()])));
  for (  TermFreq tf : freqs) {
    final String term=tf.term.utf8ToString();
    for (int i=1; i < term.length(); i++) {
      String prefix=term.substring(0,i);
      for (      LookupResult lr : lookup.lookup(_TestUtil.stringToCharSequence(prefix,random),true,10)) {
        assertTrue(lr.key.toString().startsWith(prefix));
      }
    }
  }
}
