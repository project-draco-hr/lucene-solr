{
  SolrParams params=req.getParams();
  SolrCore core=req.getCore();
  String actionParam=params.get("action");
  ACTIONS action=null;
  if (actionParam == null) {
    action=ACTIONS.PING;
  }
 else {
    try {
      action=ACTIONS.valueOf(actionParam.toUpperCase(Locale.ENGLISH));
    }
 catch (    IllegalArgumentException iae) {
      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Unknown action: " + actionParam);
    }
  }
switch (action) {
case PING:
    if (isPingDisabled()) {
      throw new SolrException(SolrException.ErrorCode.SERVICE_UNAVAILABLE,"Service disabled");
    }
  handlePing(req,rsp);
break;
case ENABLE:
handleEnable(true);
break;
case DISABLE:
handleEnable(false);
break;
case STATUS:
if (healthcheck == null) {
SolrException e=new SolrException(SolrException.ErrorCode.SERVICE_UNAVAILABLE,"healthcheck not configured");
rsp.setException(e);
}
 else {
rsp.add("status",isPingDisabled() ? "disabled" : "enabled");
}
}
}
