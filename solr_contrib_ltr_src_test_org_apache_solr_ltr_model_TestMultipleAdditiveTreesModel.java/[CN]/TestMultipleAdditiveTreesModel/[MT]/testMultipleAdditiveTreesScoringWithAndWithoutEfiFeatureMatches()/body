{
  final SolrQuery query=new SolrQuery();
  query.setQuery("*:*");
  query.add("rows","3");
  query.add("fl","*,score");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/score==1.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/score==1.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[2]/score==1.0");
  query.add("rq","{!ltr reRankDocs=3 model=multipleadditivetreesmodel efi.user_query=dsjkafljjk}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/score==-120.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/score==-120.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[2]/score==-120.0");
  query.remove("rq");
  query.add("rq","{!ltr reRankDocs=3 model=multipleadditivetreesmodel efi.user_query=w3}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/id=='3'");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/score==-20.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/score==-120.0");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[2]/score==-120.0");
}
