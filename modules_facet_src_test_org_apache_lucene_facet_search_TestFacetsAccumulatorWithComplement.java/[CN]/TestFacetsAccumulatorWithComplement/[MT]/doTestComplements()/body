{
  Query q=new MatchAllDocsQuery();
  if (VERBOSE) {
    System.out.println("Query: " + q);
  }
  ScoredDocIdCollector dCollector=ScoredDocIdCollector.create(indexReader.maxDoc(),false);
  searcher.search(q,dCollector);
  List<FacetResult> countResWithComplement=findFacets(dCollector.getScoredDocIDs(),true);
  List<FacetResult> countResNoComplement=findFacets(dCollector.getScoredDocIDs(),false);
  assertEquals("Wrong number of facet count results with complement!",1,countResWithComplement.size());
  assertEquals("Wrong number of facet count results no complement!",1,countResNoComplement.size());
  FacetResultNode parentResWithComp=countResWithComplement.get(0).getFacetResultNode();
  FacetResultNode parentResNoComp=countResWithComplement.get(0).getFacetResultNode();
  assertEquals("Wrong number of top count aggregated categories with complement!",3,parentResWithComp.getNumSubResults());
  assertEquals("Wrong number of top count aggregated categories no complement!",3,parentResNoComp.getNumSubResults());
}
