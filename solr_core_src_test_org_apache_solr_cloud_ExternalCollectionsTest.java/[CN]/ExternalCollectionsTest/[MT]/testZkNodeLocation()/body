{
  externalColl=true;
  String collectionName="myExternColl";
  createCollection(collectionName,client,2,2);
  waitForRecoveriesToFinish(collectionName,false);
  assertTrue("does not exist collection state externally",cloudClient.getZkStateReader().getZkClient().exists(ZkStateReader.getCollectionPath(collectionName),true));
  Stat stat=new Stat();
  cloudClient.getZkStateReader().getZkClient().getData(ZkStateReader.getCollectionPath(collectionName),null,stat,true);
  assertEquals("",cloudClient.getZkStateReader().getClusterState().getCollection(collectionName).getVersion(),stat.getVersion());
  assertTrue("DocCllection#isExternal() must be true",cloudClient.getZkStateReader().getClusterState().getCollection(collectionName).isExternal());
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("action",CollectionParams.CollectionAction.DELETE.toString());
  params.set("name",collectionName);
  QueryRequest request=new QueryRequest(params);
  request.setPath("/admin/collections");
  if (client == null) {
    client=createCloudClient(null);
  }
  client.request(request);
  checkForMissingCollection(collectionName);
  assertFalse("collection state should not exist externally",cloudClient.getZkStateReader().getZkClient().exists(ZkStateReader.getCollectionPath(collectionName),true));
}
