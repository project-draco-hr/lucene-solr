{
  if (useSsl && sslConfig != null) {
    if (null != sslConfig.getKeyStore()) {
      sslcontext.setKeyStorePath(sslConfig.getKeyStore());
    }
    if (null != sslConfig.getKeyStorePassword()) {
      sslcontext.setKeyStorePassword(sslConfig.getKeyStorePassword());
    }
    if (null != sslConfig.getTrustStore()) {
      sslcontext.setTrustStorePath(System.getProperty(sslConfig.getTrustStore()));
    }
    if (null != sslConfig.getTrustStorePassword()) {
      sslcontext.setTrustStorePassword(sslConfig.getTrustStorePassword());
    }
    sslcontext.setNeedClientAuth(sslConfig.isClientAuthMode());
  }
 else {
    boolean jettySsl=Boolean.getBoolean(System.getProperty("tests.jettySsl"));
    if (jettySsl) {
      if (null != System.getProperty("javax.net.ssl.keyStore")) {
        sslcontext.setKeyStorePath(System.getProperty("javax.net.ssl.keyStore"));
      }
      if (null != System.getProperty("javax.net.ssl.keyStorePassword")) {
        sslcontext.setKeyStorePassword(System.getProperty("javax.net.ssl.keyStorePassword"));
      }
      if (null != System.getProperty("javax.net.ssl.trustStore")) {
        sslcontext.setTrustStorePath(System.getProperty("javax.net.ssl.trustStore"));
      }
      if (null != System.getProperty("javax.net.ssl.trustStorePassword")) {
        sslcontext.setTrustStorePassword(System.getProperty("javax.net.ssl.trustStorePassword"));
      }
      sslcontext.setNeedClientAuth(Boolean.getBoolean("tests.jettySsl.clientAuth"));
    }
  }
}
