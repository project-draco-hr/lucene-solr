{
  if (useSsl && sslConfig != null) {
    if (null != sslConfig.keyStore) {
      sslcontext.setKeyStorePath(sslConfig.keyStore);
    }
    if (null != sslConfig.keyStorePassword) {
      sslcontext.setKeyStorePassword(System.getProperty("solr.javax.net.ssl.keyStorePassword"));
    }
    if (null != sslConfig.trustStore) {
      sslcontext.setTrustStore(System.getProperty("solr.javax.net.ssl.trustStore"));
    }
    if (null != sslConfig.trustStorePassword) {
      sslcontext.setTrustStorePassword(sslConfig.trustStorePassword);
    }
    sslcontext.setNeedClientAuth(sslConfig.clientAuth);
  }
 else {
    boolean jettySsl=Boolean.getBoolean("tests.jettySsl");
    if (jettySsl) {
      if (null != System.getProperty("javax.net.ssl.keyStore")) {
        sslcontext.setKeyStorePath(System.getProperty("javax.net.ssl.keyStore"));
      }
      if (null != System.getProperty("javax.net.ssl.keyStorePassword")) {
        sslcontext.setKeyStorePassword(System.getProperty("javax.net.ssl.keyStorePassword"));
      }
      if (null != System.getProperty("javax.net.ssl.trustStore")) {
        sslcontext.setTrustStore(System.getProperty("javax.net.ssl.trustStore"));
      }
      if (null != System.getProperty("javax.net.ssl.trustStorePassword")) {
        sslcontext.setTrustStorePassword(System.getProperty("javax.net.ssl.trustStorePassword"));
      }
      sslcontext.setNeedClientAuth(Boolean.getBoolean("tests.jettySsl.clientAuth"));
    }
  }
}
