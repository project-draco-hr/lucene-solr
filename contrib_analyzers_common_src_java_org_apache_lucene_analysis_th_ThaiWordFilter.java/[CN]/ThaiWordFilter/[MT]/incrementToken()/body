{
  if (thaiState != null) {
    int start=breaker.current();
    int end=breaker.next();
    if (end != BreakIterator.DONE) {
      restoreState(thaiState);
      termAtt.setTermBuffer(termAtt.termBuffer(),start,end - start);
      offsetAtt.setOffset(offsetAtt.startOffset() + start,offsetAtt.startOffset() + end);
      return true;
    }
    thaiState=null;
  }
  if (input.incrementToken() == false || termAtt.termLength() == 0)   return false;
  String text=termAtt.term();
  if (UnicodeBlock.of(text.charAt(0)) != UnicodeBlock.THAI) {
    termAtt.setTermBuffer(text.toLowerCase());
    return true;
  }
  thaiState=captureState();
  breaker.setText(text);
  int end=breaker.next();
  if (end != BreakIterator.DONE) {
    termAtt.setTermBuffer(text,0,end);
    offsetAtt.setOffset(offsetAtt.startOffset(),offsetAtt.startOffset() + end);
    return true;
  }
  return false;
}
