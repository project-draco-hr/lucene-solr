{
  final BitSet bits=new BitSet(reader.maxDoc());
  new IndexSearcher(reader).search(query,new Collector(){
    private int base=0;
    public void setScorer(    Scorer scorer) throws IOException {
    }
    public final void collect(    int doc){
      bits.set(doc + base);
    }
    public void setNextReader(    IndexReader reader,    int docBase){
      base=docBase;
    }
    public boolean acceptsDocsOutOfOrder(){
      return true;
    }
  }
);
  return bits;
}
