{
  for (int j=0; j < 10; j++) {
    OUTER:     for (int bankId=0; bankId < banks.length; bankId++) {
      AtomicInteger bitSetCounter=lockCounters[bankId];
      BlockLocks bitSet=locks[bankId];
      if (bitSetCounter.get() == numberOfBlocksPerBank) {
        continue OUTER;
      }
      int bit=bitSet.nextClearBit(0);
      INNER:       while (bit != -1) {
        if (bit >= numberOfBlocksPerBank) {
          continue OUTER;
        }
        if (!bitSet.set(bit)) {
          bit=bitSet.nextClearBit(0);
          continue INNER;
        }
 else {
          location.setBankId(bankId);
          location.setBlock(bit);
          bitSetCounter.incrementAndGet();
          return true;
        }
      }
    }
  }
  return false;
}
