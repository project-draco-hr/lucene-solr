{
  File tlogDir=new File(solrCore.getUpdateHandler().getUpdateLog().getLogDir());
  File backupTlogDir=new File(tlogDir.getParent(),UpdateLog.TLOG_NAME + "." + timestamp);
  try {
    org.apache.commons.io.FileUtils.moveDirectory(tlogDir,backupTlogDir);
  }
 catch (  IOException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Unable to rename: " + tlogDir + " to: "+ backupTlogDir,e);
  }
  try {
    tmpTlogDir=new File(backupTlogDir,tmpTlogDir.getName());
    org.apache.commons.io.FileUtils.moveDirectory(tmpTlogDir,tlogDir);
  }
 catch (  IOException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Unable to rename: " + tmpTlogDir + " to: "+ tlogDir,e);
  }
}
