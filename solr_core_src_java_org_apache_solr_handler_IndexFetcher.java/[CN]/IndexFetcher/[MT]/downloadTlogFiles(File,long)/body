{
  LOG.info("Starting download of tlog files from master: " + tlogFilesToDownload);
  tlogFilesDownloaded=Collections.synchronizedList(new ArrayList<>());
  long bytesDownloaded=0;
  boolean status=tmpTlogDir.mkdirs();
  if (!status) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Failed to create temporary tlog folder: " + tmpTlogDir.getName());
  }
  for (  Map<String,Object> file : tlogFilesToDownload) {
    String saveAs=(String)(file.get(ALIAS) == null ? file.get(NAME) : file.get(ALIAS));
    localFileFetcher=new LocalFsFileFetcher(tmpTlogDir,file,saveAs,TLOG_FILE,latestGeneration);
    currentFile=file;
    localFileFetcher.fetchFile();
    bytesDownloaded+=localFileFetcher.getBytesDownloaded();
    tlogFilesDownloaded.add(new HashMap<>(file));
  }
  return bytesDownloaded;
}
