{
  RefCounted<SolrIndexSearcher> searcher=null;
  IndexCommit commitPoint;
  SolrCore core=solrCore.getCoreDescriptor().getCoreContainer().getCore(solrCore.getName());
  try {
    Future[] waitSearcher=new Future[1];
    searcher=core.getSearcher(true,true,waitSearcher,true);
    if (waitSearcher[0] != null) {
      try {
        waitSearcher[0].get();
      }
 catch (      InterruptedException|ExecutionException e) {
        SolrException.log(LOG,e);
      }
    }
    commitPoint=searcher.get().getIndexReader().getIndexCommit();
  }
  finally {
    if (searcher != null) {
      searcher.decref();
    }
    core.close();
  }
  replicationHandler.indexCommitPoint=commitPoint;
}
