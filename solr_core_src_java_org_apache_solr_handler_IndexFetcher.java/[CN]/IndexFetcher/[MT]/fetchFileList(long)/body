{
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set(COMMAND,CMD_GET_FILE_LIST);
  params.set(GENERATION,String.valueOf(gen));
  params.set(CommonParams.WT,JAVABIN);
  params.set(CommonParams.QT,ReplicationHandler.PATH);
  QueryRequest req=new QueryRequest(params);
  try (HttpSolrClient client=new HttpSolrClient.Builder(masterUrl).withHttpClient(myHttpClient).build()){
    client.setSoTimeout(soTimeout);
    client.setConnectionTimeout(connTimeout);
    NamedList response=client.request(req);
    List<Map<String,Object>> files=(List<Map<String,Object>>)response.get(CMD_GET_FILE_LIST);
    if (files != null)     filesToDownload=Collections.synchronizedList(files);
 else {
      filesToDownload=Collections.emptyList();
      LOG.error("No files to download for index generation: " + gen);
    }
    files=(List<Map<String,Object>>)response.get(CONF_FILES);
    if (files != null)     confFilesToDownload=Collections.synchronizedList(files);
    files=(List<Map<String,Object>>)response.get(TLOG_FILES);
    if (files != null) {
      tlogFilesToDownload=Collections.synchronizedList(files);
    }
  }
 catch (  SolrServerException e) {
    throw new IOException(e);
  }
}
