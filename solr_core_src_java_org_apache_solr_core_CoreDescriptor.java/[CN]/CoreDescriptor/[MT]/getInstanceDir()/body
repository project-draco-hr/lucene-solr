{
  String instDir=coreProperties.getProperty(CORE_INSTDIR);
  if (instDir == null)   return null;
  if (new File(instDir).isAbsolute()) {
    return SolrResourceLoader.normalizeDir(SolrResourceLoader.normalizeDir(instDir));
  }
  if (coreContainer == null)   return null;
  if (coreContainer.cfg != null) {
    String coreRootDir=coreContainer.cfg.get(CfgProp.SOLR_COREROOTDIRECTORY,null);
    if (coreRootDir != null) {
      return SolrResourceLoader.normalizeDir(coreRootDir + SolrResourceLoader.normalizeDir(instDir));
    }
  }
  return SolrResourceLoader.normalizeDir(coreContainer.getSolrHome() + SolrResourceLoader.normalizeDir(instDir));
}
