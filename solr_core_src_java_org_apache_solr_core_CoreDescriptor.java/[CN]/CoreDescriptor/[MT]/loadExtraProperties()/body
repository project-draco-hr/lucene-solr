{
  String filename=coreProperties.getProperty(CORE_PROPERTIES,DEFAULT_EXTERNAL_PROPERTIES_FILE);
  File propertiesFile=resolvePaths(filename);
  if (propertiesFile.exists()) {
    FileInputStream in=null;
    try {
      in=new FileInputStream(propertiesFile);
      Properties externalProps=new Properties();
      externalProps.load(new InputStreamReader(in,"UTF-8"));
      coreProperties.putAll(externalProps);
    }
 catch (    IOException e) {
      String message=String.format(Locale.ROOT,"Could not load properties from %s: %s:",propertiesFile.getAbsoluteFile(),e.toString());
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,message);
    }
 finally {
      IOUtils.closeQuietly(in);
    }
  }
}
