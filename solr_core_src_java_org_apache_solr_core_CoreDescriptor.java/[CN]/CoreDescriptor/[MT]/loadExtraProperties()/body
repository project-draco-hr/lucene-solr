{
  String filename=coreProperties.getProperty(CORE_PROPERTIES,DEFAULT_EXTERNAL_PROPERTIES_FILE);
  Path propertiesFile=instanceDir.resolve(filename);
  if (Files.exists(propertiesFile)) {
    try (InputStream is=Files.newInputStream(propertiesFile)){
      Properties externalProps=new Properties();
      externalProps.load(new InputStreamReader(is,StandardCharsets.UTF_8));
      coreProperties.putAll(externalProps);
    }
 catch (    IOException e) {
      String message=String.format(Locale.ROOT,"Could not load properties from %s: %s:",propertiesFile.toString(),e.toString());
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,message);
    }
  }
}
