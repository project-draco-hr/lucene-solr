{
  if (name == null) {
    throw new RuntimeException("Core needs a name");
  }
  coreProperties.put(CORE_NAME,name);
  if (coreContainer != null && coreContainer.getZkController() != null) {
    this.cloudDesc=new CloudDescriptor();
    cloudDesc.setCollectionName(name);
  }
  if (instanceDir == null) {
    throw new NullPointerException("Missing required \'instanceDir\'");
  }
  instanceDir=SolrResourceLoader.normalizeDir(instanceDir);
  coreProperties.put(CORE_INSTDIR,instanceDir);
  coreProperties.put(CORE_CONFIG,getDefaultConfigName());
  coreProperties.put(CORE_SCHEMA,getDefaultSchemaName());
}
