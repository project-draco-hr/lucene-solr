{
  if (ncomponents >= ends.length) {
    short[] newends=new short[(ends.length + 1) * 2];
    System.arraycopy(ends,0,newends,0,ends.length);
    ends=newends;
  }
  short prevend=(ncomponents == 0) ? 0 : ends[ncomponents - 1];
  int cmplen=component.length();
  ends[ncomponents]=(short)(prevend + cmplen);
  if (ends[ncomponents] > chars.length) {
    char[] newchars=new char[ends[ncomponents] * 2];
    System.arraycopy(chars,0,newchars,0,chars.length);
    chars=newchars;
  }
  for (int i=0; i < cmplen; i++) {
    chars[prevend++]=component.charAt(i);
  }
  ncomponents++;
}
