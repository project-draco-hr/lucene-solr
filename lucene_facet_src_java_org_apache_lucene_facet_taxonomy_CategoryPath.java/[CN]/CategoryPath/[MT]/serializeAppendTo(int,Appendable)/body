{
  if (prefixLen < 0 || prefixLen > ncomponents) {
    prefixLen=ncomponents;
  }
  out.append((char)prefixLen);
  if (prefixLen == 0) {
    return;
  }
  for (int i=0; i < prefixLen; i++) {
    out.append((char)ends[i]);
  }
  int usedchars=ends[prefixLen - 1];
  for (int i=0; i < usedchars; i++) {
    out.append(chars[i]);
  }
}
