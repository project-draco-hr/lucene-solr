{
  InfoStreamListener stream=new InfoStreamListener("newOutputStream");
  Path dir=wrap(createTempDir(),stream);
  OutputStream file=Files.newOutputStream(dir.resolve("output"));
  assertTrue(stream.sawMessage());
  file.close();
  try {
    Files.newOutputStream(dir.resolve("output"),StandardOpenOption.CREATE_NEW);
    fail("didn't get expected exception");
  }
 catch (  IOException expected) {
  }
}
