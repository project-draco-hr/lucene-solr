{
  String text="Qwerty";
  PerFieldAnalyzerWrapper analyzer=new PerFieldAnalyzerWrapper(new WhitespaceAnalyzer(TEST_VERSION_CURRENT));
  analyzer.addAnalyzer("special",new SimpleAnalyzer(TEST_VERSION_CURRENT));
  TokenStream tokenStream=analyzer.tokenStream("field",new StringReader(text));
  CharTermAttribute termAtt=tokenStream.getAttribute(CharTermAttribute.class);
  assertTrue(tokenStream.incrementToken());
  assertEquals("WhitespaceAnalyzer does not lowercase","Qwerty",termAtt.toString());
  tokenStream=analyzer.tokenStream("special",new StringReader(text));
  termAtt=tokenStream.getAttribute(CharTermAttribute.class);
  assertTrue(tokenStream.incrementToken());
  assertEquals("SimpleAnalyzer lowercases","qwerty",termAtt.toString());
}
