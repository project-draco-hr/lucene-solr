{
  boolean done=false;
  while (!done) {
    final long currentMax=max.get();
    done=currentMax >= potentialMax || max.compareAndSet(currentMax,potentialMax);
  }
}
