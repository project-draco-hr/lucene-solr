{
  Directory dir=newDirectory();
  RandomIndexWriter w=new RandomIndexWriter(random(),dir);
  Document doc=new Document();
  Field f=newTextField("field","a b c",Field.Store.NO);
  doc.add(f);
  w.addDocument(doc);
  w.commit();
  DirectoryReader reader=w.getReader();
  final IndexSearcher searcher=new IndexSearcher(reader);
  searcher.setQueryCache(null);
  PhraseQuery pq=new PhraseQuery("field","a","b");
  BooleanQuery.Builder q=new BooleanQuery.Builder();
  q.add(pq,Occur.SHOULD);
  q.add(new TermQuery(new Term("field","d")),Occur.SHOULD);
  final Weight weight=searcher.createNormalizedWeight(q.build(),random().nextBoolean());
  final Scorer scorer=weight.scorer(searcher.getIndexReader().leaves().get(0));
  assertTrue(scorer instanceof BoostedScorer || scorer instanceof ExactPhraseScorer);
  assertNotNull(scorer.twoPhaseIterator());
  reader.close();
  w.close();
  dir.close();
}
