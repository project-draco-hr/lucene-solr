{
  BooleanQuery.Builder bq1=new BooleanQuery.Builder();
  bq1.add(new TermQuery(new Term("field","value1")),BooleanClause.Occur.SHOULD);
  bq1.add(new TermQuery(new Term("field","value2")),BooleanClause.Occur.SHOULD);
  BooleanQuery.Builder nested1=new BooleanQuery.Builder();
  nested1.add(new TermQuery(new Term("field","nestedvalue1")),BooleanClause.Occur.SHOULD);
  nested1.add(new TermQuery(new Term("field","nestedvalue2")),BooleanClause.Occur.SHOULD);
  bq1.add(nested1.build(),BooleanClause.Occur.SHOULD);
  BooleanQuery.Builder bq2=new BooleanQuery.Builder();
  bq2.add(new TermQuery(new Term("field","value1")),BooleanClause.Occur.SHOULD);
  bq2.add(new TermQuery(new Term("field","value2")),BooleanClause.Occur.SHOULD);
  BooleanQuery.Builder nested2=new BooleanQuery.Builder();
  nested2.add(new TermQuery(new Term("field","nestedvalue1")),BooleanClause.Occur.SHOULD);
  nested2.add(new TermQuery(new Term("field","nestedvalue2")),BooleanClause.Occur.SHOULD);
  bq2.add(nested2.build(),BooleanClause.Occur.SHOULD);
  assertEquals(bq1.build(),bq2.build());
}
