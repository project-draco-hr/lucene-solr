{
  Directory dir=newDirectory();
  RandomIndexWriter w=new RandomIndexWriter(random(),dir);
  Document doc=new Document();
  doc.add(newTextField("field","some text here",Field.Store.NO));
  w.addDocument(doc);
  IndexReader r=w.getReader();
  w.close();
  IndexSearcher s=new IndexSearcher(r){
    @Override protected void search(    List<LeafReaderContext> leaves,    Weight weight,    Collector collector) throws IOException {
      assertEquals(-1,collector.getClass().getSimpleName().indexOf("OutOfOrder"));
      super.search(leaves,weight,collector);
    }
  }
;
  BooleanQuery bq=new BooleanQuery();
  bq.add(new TermQuery(new Term("field","some")),BooleanClause.Occur.SHOULD);
  bq.add(new TermQuery(new Term("field","text")),BooleanClause.Occur.SHOULD);
  bq.add(new TermQuery(new Term("field","here")),BooleanClause.Occur.SHOULD);
  bq.setMinimumNumberShouldMatch(2);
  s.search(bq,10);
  r.close();
  dir.close();
}
