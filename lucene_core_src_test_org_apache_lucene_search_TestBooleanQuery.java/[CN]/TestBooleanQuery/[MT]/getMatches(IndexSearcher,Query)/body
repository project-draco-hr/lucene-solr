{
  BitSet set=new BitSet();
  searcher.search(query,new SimpleCollector(){
    int docBase=0;
    @Override public boolean needsScores(){
      return random().nextBoolean();
    }
    @Override protected void doSetNextReader(    LeafReaderContext context) throws IOException {
      super.doSetNextReader(context);
      docBase=context.docBase;
    }
    @Override public void collect(    int doc) throws IOException {
      set.set(docBase + doc);
    }
  }
);
  return set;
}
