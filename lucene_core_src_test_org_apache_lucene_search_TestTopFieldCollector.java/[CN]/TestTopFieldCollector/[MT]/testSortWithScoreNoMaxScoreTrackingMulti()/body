{
  Sort[] sort=new Sort[]{new Sort(SortField.FIELD_DOC,SortField.FIELD_SCORE)};
  for (int i=0; i < sort.length; i++) {
    Query q=new MatchAllDocsQuery();
    TopDocsCollector<Entry> tdc=TopFieldCollector.create(sort[i],10,true,true,false,true);
    is.search(q,tdc);
    TopDocs td=tdc.topDocs();
    ScoreDoc[] sd=td.scoreDocs;
    for (int j=0; j < sd.length; j++) {
      assertTrue(!Float.isNaN(sd[j].score));
    }
    assertTrue(Float.isNaN(td.getMaxScore()));
  }
}
