{
  if (filter == null) {
    for (int i=0; i < leafContexts.length; i++) {
      collector.setNextReader(leafContexts[i].reader,leafContexts[i].docBase);
      Scorer scorer=weight.scorer(leafContexts[i],!collector.acceptsDocsOutOfOrder(),true);
      if (scorer != null) {
        scorer.score(collector);
      }
    }
  }
 else {
    for (int i=0; i < leafContexts.length; i++) {
      collector.setNextReader(leafContexts[i].reader,leafContexts[i].docBase);
      searchWithFilter(leafContexts[i],weight,filter,collector);
    }
  }
}
