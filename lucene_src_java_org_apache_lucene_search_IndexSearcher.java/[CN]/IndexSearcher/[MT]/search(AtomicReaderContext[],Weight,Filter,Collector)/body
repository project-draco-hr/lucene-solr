{
  ScorerContext scorerContext=ScorerContext.def().scoreDocsInOrder(true).topScorer(true);
  if (filter == null) {
    for (int i=0; i < leaves.length; i++) {
      collector.setNextReader(leaves[i]);
      scorerContext=scorerContext.scoreDocsInOrder(!collector.acceptsDocsOutOfOrder());
      Scorer scorer=weight.scorer(leaves[i],scorerContext);
      if (scorer != null) {
        scorer.score(collector);
      }
    }
  }
 else {
    for (int i=0; i < leaves.length; i++) {
      collector.setNextReader(leaves[i]);
      searchWithFilter(leaves[i],weight,filter,collector);
    }
  }
}
