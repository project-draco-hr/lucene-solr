{
  final TopFieldDocs docs=searcher.search(slice.leaves,weight,filter,nDocs,sort,true);
  lock.lock();
  try {
    hq.setFields(docs.fields);
  }
  finally {
    lock.unlock();
  }
  final ScoreDoc[] scoreDocs=docs.scoreDocs;
  for (int j=0; j < scoreDocs.length; j++) {
    final FieldDoc fieldDoc=(FieldDoc)scoreDocs[j];
    lock.lock();
    try {
      if (fieldDoc == hq.insertWithOverflow(fieldDoc))       break;
    }
  finally {
      lock.unlock();
    }
  }
  return docs;
}
