{
  boolean success=false;
  while (!success) {
    try {
synchronized (oldSchema.getSchemaUpdateLock()) {
        IndexSchema newSchema=oldSchema.addFieldTypes(newFieldTypes);
        getSolrCore().setLatestSchema(newSchema);
        success=true;
      }
    }
 catch (    ManagedIndexSchema.SchemaChangedInZkException e) {
      log.debug("Schema changed while processing request, retrying");
      oldSchema=(ManagedIndexSchema)getSolrCore().getLatestSchema();
    }
  }
}
