{
  for (int i=0; i < 100; i++) {
    byte[] current=new byte[random.nextInt(256)];
    random.nextBytes(current);
    sorter.add(new BytesRef(current));
  }
  Iterator<BytesRef> i1=sorter.iterator();
  Iterator<BytesRef> i2=sorter.iterator();
  try {
    sorter.add(new BytesRef(new byte[1]));
    fail("expected contract violation.");
  }
 catch (  IllegalStateException e) {
  }
  while (i1.hasNext() && i2.hasNext()) {
    assertEquals(i1.next(),i2.next());
  }
  assertEquals(i1.hasNext(),i2.hasNext());
}
