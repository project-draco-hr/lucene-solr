{
  Preconditions.checkArgument(dir.exists());
  Preconditions.checkArgument(dir.isDirectory());
  ZkConfigManager manager=new ZkConfigManager(zkClient);
  manager.downloadConfigDir(configName,dir.toPath());
  File confDir=new File(dir,"conf");
  if (!confDir.isDirectory()) {
    confDir=new File(Files.createTempDir().getAbsolutePath(),"conf");
    confDir.getParentFile().deleteOnExit();
    Files.move(dir,confDir);
    dir=confDir.getParentFile();
  }
  verifyConfigDir(confDir);
  return dir;
}
