{
  Directory dir=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random(),dir);
  Document doc=new Document();
  doc.add(newStringField("c","val",Field.Store.NO));
  writer.addDocument(doc);
  IndexReader reader=writer.getReader();
  writer.close();
  IndexSearcher searcher=newSearcher(reader);
  Assert.assertEquals(1,searcher.search(new MatchAllDocsQuery(),10).totalHits);
  Filter f=new Filter(){
    @Override public DocIdSet getDocIdSet(    LeafReaderContext context,    Bits acceptDocs){
      return null;
    }
    @Override public String toString(    String field){
      return "nullDocIdSetFilter";
    }
  }
;
  Query filtered=new BooleanQuery.Builder().add(new MatchAllDocsQuery(),Occur.MUST).add(f,Occur.FILTER).build();
  Assert.assertEquals(0,searcher.search(filtered,10).totalHits);
  reader.close();
  dir.close();
}
