{
  if (offset >= string.length())   throw new IllegalArgumentException("Offset is greater than the length (" + offset + " >= "+ string.length()+ ").");
  if ((count & 0x01) != 0)   throw new IllegalArgumentException("Count is not divisible by two (" + count + ").");
  final int charCount=Math.min((string.length() - offset),count);
  final int upperBound=offset + charCount;
  final byte[] bytes=new byte[charCount >>> 1];
  int byteIndex=0;
  for (int i=offset; i < upperBound; i+=2) {
    bytes[byteIndex++]=(byte)(((digit(string.charAt(i)) << 4) | digit(string.charAt(i + 1))) & 0xFF);
  }
  return bytes;
}
