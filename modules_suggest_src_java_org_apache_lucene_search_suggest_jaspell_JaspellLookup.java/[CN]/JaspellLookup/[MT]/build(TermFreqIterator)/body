{
  if (tfit.getComparator() != null) {
    tfit=new UnsortedTermFreqIteratorWrapper(tfit);
  }
  trie=new JaspellTernarySearchTrie();
  trie.setMatchAlmostDiff(editDistance);
  BytesRef spare;
  final CharsRef charsSpare=new CharsRef();
  while ((spare=tfit.next()) != null) {
    final long weight=tfit.weight();
    if (spare.length == 0) {
      continue;
    }
    charsSpare.grow(spare.length);
    UnicodeUtil.UTF8toUTF16(spare.bytes,spare.offset,spare.length,charsSpare);
    trie.put(charsSpare.toString(),Long.valueOf(weight));
  }
}
