{
  boolean enforceSingleSegment=true;
  Directory directory=newDirectory();
  int[] filterBits={1,36};
  SimpleDocIdSetFilter filter=new SimpleDocIdSetFilter(filterBits);
  IndexWriter writer=new IndexWriter(directory,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer()).setMergePolicy(newInOrderLogMergePolicy()));
  searchFiltered(writer,directory,filter,enforceSingleSegment);
  enforceSingleSegment=false;
  filter.reset();
  writer.close();
  writer=new IndexWriter(directory,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer()).setOpenMode(OpenMode.CREATE).setMaxBufferedDocs(10).setMergePolicy(newInOrderLogMergePolicy()));
  searchFiltered(writer,directory,filter,enforceSingleSegment);
  writer.close();
  directory.close();
}
