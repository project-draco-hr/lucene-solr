{
  boolean enforceSingleSegment=true;
  Random random=newRandom();
  MockRAMDirectory directory=newDirectory(random);
  int[] filterBits={1,36};
  SimpleDocIdSetFilter filter=new SimpleDocIdSetFilter(filterBits);
  IndexWriter writer=new IndexWriter(directory,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer()));
  searchFiltered(writer,directory,filter,enforceSingleSegment);
  enforceSingleSegment=false;
  filter.reset();
  writer.close();
  writer=new IndexWriter(directory,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer()).setOpenMode(OpenMode.CREATE).setMaxBufferedDocs(10));
  searchFiltered(writer,directory,filter,enforceSingleSegment);
  writer.close();
  directory.close();
}
