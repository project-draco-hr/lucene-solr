{
  boolean error=true;
  try {
    log.info("start " + cmd);
    RefCounted<IndexWriter> iw=solrCoreState.getIndexWriter(core);
    try {
      final Map<String,String> commitData=new HashMap<>();
      commitData.put(SolrIndexWriter.COMMIT_TIME_MSEC_KEY,String.valueOf(System.currentTimeMillis()));
      iw.get().setCommitData(commitData);
      iw.get().prepareCommit();
    }
  finally {
      iw.decref();
    }
    log.info("end_prepareCommit");
    error=false;
  }
  finally {
    if (error)     numErrors.incrementAndGet();
  }
}
