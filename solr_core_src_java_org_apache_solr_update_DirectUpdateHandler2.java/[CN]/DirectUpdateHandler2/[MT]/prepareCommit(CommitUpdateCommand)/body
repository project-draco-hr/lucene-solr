{
  boolean error=true;
  try {
    log.info("start " + cmd);
    RefCounted<IndexWriter> iw=solrCoreState.getIndexWriter(core);
    try {
      setCommitData(iw.get());
      iw.get().prepareCommit();
    }
  finally {
      iw.decref();
    }
    log.info("end_prepareCommit");
    error=false;
  }
  finally {
    if (error)     numErrors.incrementAndGet();
  }
}
