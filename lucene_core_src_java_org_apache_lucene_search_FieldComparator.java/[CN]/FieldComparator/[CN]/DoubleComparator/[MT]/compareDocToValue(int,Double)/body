{
  final double value=valueObj.doubleValue();
  double docValue=currentReaderValues.get(doc);
  if (docsWithField != null && docValue == 0 && !docsWithField.get(doc)) {
    docValue=missingValue;
  }
  return Double.compare(docValue,value);
}
