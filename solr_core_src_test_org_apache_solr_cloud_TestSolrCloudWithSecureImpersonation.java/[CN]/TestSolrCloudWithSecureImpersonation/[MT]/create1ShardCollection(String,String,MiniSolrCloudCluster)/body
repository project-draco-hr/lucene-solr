{
  CollectionAdminResponse response;
  CollectionAdminRequest.Create create=new CollectionAdminRequest.Create(){
    @Override public SolrParams getParams(){
      ModifiableSolrParams msp=new ModifiableSolrParams(super.getParams());
      msp.set(USER_PARAM,"user");
      return msp;
    }
  }
;
  create.setConfigName(config);
  create.setCollectionName(name);
  create.setNumShards(1);
  create.setReplicationFactor(1);
  create.setMaxShardsPerNode(1);
  response=create.process(solrCluster.getSolrClient());
  if (response.getStatus() != 0 || response.getErrorMessages() != null) {
    fail("Could not create collection. Response" + response.toString());
  }
  ZkStateReader zkStateReader=solrCluster.getSolrClient().getZkStateReader();
  AbstractDistribZkTestBase.waitForRecoveriesToFinish(name,zkStateReader,false,true,100);
}
