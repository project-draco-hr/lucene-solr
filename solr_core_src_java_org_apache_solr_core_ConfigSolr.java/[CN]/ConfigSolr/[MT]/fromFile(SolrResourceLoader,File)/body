{
  log.info("Loading container configuration from {}",configFile.getAbsolutePath());
  InputStream inputStream=null;
  try {
    if (!configFile.exists()) {
      log.info("{} does not exist, using default configuration",configFile.getAbsolutePath());
      inputStream=new ByteArrayInputStream(ConfigSolrXmlOld.DEF_SOLR_XML.getBytes(Charsets.UTF_8));
    }
 else {
      inputStream=new FileInputStream(configFile);
    }
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ByteStreams.copy(inputStream,baos);
    String originalXml=IOUtils.toString(new ByteArrayInputStream(baos.toByteArray()),"UTF-8");
    return fromInputStream(loader,new ByteArrayInputStream(baos.toByteArray()),configFile,originalXml);
  }
 catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Could not load SOLR configuration",e);
  }
 finally {
    IOUtils.closeQuietly(inputStream);
  }
}
