{
  log.info("Loading container configuration from {}",configFile.getAbsolutePath());
  String solrHome=configFile.getParent();
  SolrResourceLoader loader=new SolrResourceLoader(solrHome);
  InputStream inputStream=null;
  try {
    if (!configFile.exists()) {
      log.info("{} does not exist, using default configuration",configFile.getAbsolutePath());
      inputStream=new ByteArrayInputStream(ConfigSolrXmlOld.DEF_SOLR_XML.getBytes(Charsets.UTF_8));
    }
 else {
      inputStream=new FileInputStream(configFile);
    }
    return fromInputStream(loader,inputStream);
  }
 catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Could not load SOLR configuration",e);
  }
 finally {
    IOUtils.closeQuietly(inputStream);
  }
}
