{
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ByteStreams.copy(is,baos);
    String originalXml=IOUtils.toString(new ByteArrayInputStream(baos.toByteArray()),"UTF-8");
    ByteArrayInputStream dup=new ByteArrayInputStream(baos.toByteArray());
    Config config=new Config(loader,null,new InputSource(dup),null,false);
    return fromConfig(config,originalXml);
  }
 catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
  }
}
