{
  if (lastTemplates != null && filename.equals(lastFilename) && cacheExpiresTimeout != null && !cacheExpiresTimeout.hasTimedOut()) {
    if (log.isDebugEnabled()) {
      log.debug("Using cached Templates:" + filename);
    }
  }
 else {
    lastTemplates=getTemplates(solrConfig.getResourceLoader(),filename,cacheLifetimeSeconds);
  }
  Transformer result=null;
  try {
    result=lastTemplates.newTransformer();
  }
 catch (  TransformerConfigurationException tce) {
    log.error(getClass().getName(),"getTransformer",tce);
    throw new IOException("newTransformer fails ( " + lastFilename + ")",tce);
  }
  return result;
}
