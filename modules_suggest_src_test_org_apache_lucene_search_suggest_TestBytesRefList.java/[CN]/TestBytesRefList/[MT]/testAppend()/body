{
  BytesRefList list=new BytesRefList();
  List<String> stringList=new ArrayList<String>();
  int entries=atLeast(500);
  BytesRef spare=new BytesRef();
  for (int i=0; i < entries; i++) {
    String randomRealisticUnicodeString=_TestUtil.randomRealisticUnicodeString(random);
    spare.copyChars(randomRealisticUnicodeString);
    list.append(spare);
    stringList.add(randomRealisticUnicodeString);
  }
  for (int i=0; i < entries; i++) {
    assertNotNull(list.get(spare,i));
    assertEquals("entry " + i + " doesn't match",stringList.get(i),spare.utf8ToString());
  }
  for (int i=0; i < entries; i++) {
    int e=random.nextInt(entries);
    assertNotNull(list.get(spare,e));
    assertEquals("entry " + i + " doesn't match",stringList.get(e),spare.utf8ToString());
  }
  for (int i=0; i < 2; i++) {
    BytesRefIterator iterator=list.iterator();
    for (    String string : stringList) {
      assertEquals(string,iterator.next().utf8ToString());
    }
  }
}
