{
  final int end=docs.length;
  int i=0;
  while (i < end && freqCount > 0) {
    final int docCode=freqStream.readVInt();
    doc+=docCode >>> 1;
    if ((docCode & 1) != 0)     freq=1;
 else     freq=freqStream.readVInt();
    freqCount--;
    if (deletedDocs == null || !deletedDocs.get(doc)) {
      docs[i]=doc;
      freqs[i]=freq;
      ++i;
    }
  }
  return i;
}
