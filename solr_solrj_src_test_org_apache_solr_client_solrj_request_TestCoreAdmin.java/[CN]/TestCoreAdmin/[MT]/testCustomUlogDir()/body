{
  SolrClient client=getSolrAdmin();
  File dataDir=createTempDir("data").toFile();
  File newCoreInstanceDir=createTempDir("instance").toFile();
  File instanceDir=new File(cores.getSolrHome());
  FileUtils.copyDirectory(instanceDir,new File(newCoreInstanceDir,"newcore"));
  CoreAdminRequest.Create req=new CoreAdminRequest.Create();
  req.setCoreName("newcore");
  req.setInstanceDir(newCoreInstanceDir.getAbsolutePath() + File.separator + "newcore");
  req.setDataDir(dataDir.getAbsolutePath());
  req.setUlogDir(new File(dataDir,"ulog").getAbsolutePath());
  req.setConfigSet("shared");
  req.setIsLoadOnStartup(false);
  req.setIsTransient(true);
  req.process(client);
  File logDir;
  try (SolrCore coreProveIt=cores.getCore("collection1");SolrCore core=cores.getCore("newcore")){
    assertTrue(core.getCoreDescriptor().isTransient());
    assertFalse(coreProveIt.getCoreDescriptor().isTransient());
    assertFalse(core.getCoreDescriptor().isLoadOnStartup());
    assertTrue(coreProveIt.getCoreDescriptor().isLoadOnStartup());
    logDir=new File(core.getUpdateHandler().getUpdateLog().getLogDir());
  }
   assertEquals(new File(dataDir,"ulog" + File.separator + "tlog").getAbsolutePath(),logDir.getAbsolutePath());
  client.shutdown();
}
