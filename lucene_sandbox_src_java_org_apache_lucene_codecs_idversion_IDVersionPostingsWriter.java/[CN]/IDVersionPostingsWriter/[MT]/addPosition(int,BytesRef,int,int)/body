{
  if (lastDocID == -1) {
    return;
  }
  if (lastPosition != -1) {
    throw new IllegalArgumentException("term appears more than once in document");
  }
  lastPosition=position;
  if (payload == null) {
    throw new IllegalArgumentException("token doens't have a payload");
  }
  if (payload.length != 8) {
    throw new IllegalArgumentException("payload.length != 8 (got " + payload.length + ")");
  }
  lastVersion=IDVersionPostingsFormat.bytesToLong(payload);
  if (lastVersion < IDVersionPostingsFormat.MIN_VERSION) {
    throw new IllegalArgumentException("version must be >= MIN_VERSION=" + IDVersionPostingsFormat.MIN_VERSION + " (got: "+ lastVersion+ "; payload="+ payload+ ")");
  }
  if (lastVersion > IDVersionPostingsFormat.MAX_VERSION) {
    throw new IllegalArgumentException("version must be <= MAX_VERSION=" + IDVersionPostingsFormat.MAX_VERSION + " (got: "+ lastVersion+ "; payload="+ payload+ ")");
  }
}
