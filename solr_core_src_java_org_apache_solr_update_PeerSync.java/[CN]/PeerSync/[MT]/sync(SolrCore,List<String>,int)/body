{
  UpdateHandler uhandler=core.getUpdateHandler();
  ShardHandlerFactory shardHandlerFactory=core.getCoreDescriptor().getCoreContainer().getShardHandlerFactory();
  ShardHandler shardHandler=shardHandlerFactory.getShardHandler();
  for (  String replica : replicas) {
    ShardRequest sreq=new ShardRequest();
    sreq.shards=new String[]{replica};
    sreq.params=new ModifiableSolrParams();
    sreq.params.set("qt","/get");
    sreq.params.set("distrib",false);
    sreq.params.set("getVersions",nUpdates);
    shardHandler.submit(sreq,replica,sreq.params);
  }
  for (  String replica : replicas) {
    ShardResponse srsp=shardHandler.takeCompletedOrError();
  }
}
