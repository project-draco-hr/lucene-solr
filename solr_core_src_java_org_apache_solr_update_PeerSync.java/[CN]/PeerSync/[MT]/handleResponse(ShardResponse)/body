{
  if (srsp.getException() != null) {
    if (srsp.getException() instanceof SolrServerException) {
      Throwable solrException=((SolrServerException)srsp.getException()).getRootCause();
      if (solrException instanceof ConnectException || solrException instanceof NoHttpResponseException) {
        return true;
      }
    }
    return false;
  }
  ShardRequest sreq=srsp.getShardRequest();
  if (sreq.purpose == 1) {
    return handleVersions(srsp);
  }
 else {
    return handleUpdates(srsp);
  }
}
