{
  if (closed) {
    delegate.close();
    return;
  }
  closed=true;
  try {
    dir.maybeThrowDeterministicException();
  }
  finally {
    delegate.close();
    if (dir.trackDiskUsage) {
      long size=dir.getRecomputedActualSizeInBytes();
      if (size > dir.maxUsedSize) {
        dir.maxUsedSize=size;
      }
    }
    dir.removeIndexOutput(this,name);
  }
}
