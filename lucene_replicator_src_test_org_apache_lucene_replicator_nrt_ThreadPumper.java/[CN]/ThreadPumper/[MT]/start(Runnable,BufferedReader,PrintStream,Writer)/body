{
  Thread t=new Thread(){
    @Override public void run(){
      try {
        Pattern logTimeStart=Pattern.compile("^[0-9\\.]+s .*");
        String line;
        while ((line=from.readLine()) != null) {
          if (toFile != null) {
            toFile.write(line);
            toFile.write("\n");
            toFile.flush();
          }
 else           if (logTimeStart.matcher(line).matches()) {
            System.out.println(line);
          }
 else {
            TestNRTReplication.message(line);
          }
        }
      }
 catch (      IOException e) {
        System.err.println("ignore IOExc reading from forked process pipe: " + e);
      }
 finally {
        onExit.run();
      }
    }
  }
;
  t.start();
  return t;
}
