{
  boolean exists=false;
  SolrResourceLoader loader=config.getResourceLoader();
  if (loader instanceof ZkSolrResourceLoader) {
    ZkSolrResourceLoader zkLoader=(ZkSolrResourceLoader)loader;
    String nonManagedSchemaPath=zkLoader.getCollectionZkPath() + "/" + resourceName;
    try {
      exists=zkLoader.getZkController().pathExists(nonManagedSchemaPath);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      log.warn("",e);
    }
catch (    KeeperException e) {
      log.warn("Error checking for the existence of the non-managed schema " + resourceName,e);
    }
  }
 else {
    InputStream nonManagedSchemaInputStream=null;
    try {
      nonManagedSchemaInputStream=loader.openSchema(resourceName);
      if (null != nonManagedSchemaInputStream) {
        exists=true;
      }
    }
 catch (    IOException e) {
    }
 finally {
      IOUtils.closeQuietly(nonManagedSchemaInputStream);
    }
  }
  return exists;
}
