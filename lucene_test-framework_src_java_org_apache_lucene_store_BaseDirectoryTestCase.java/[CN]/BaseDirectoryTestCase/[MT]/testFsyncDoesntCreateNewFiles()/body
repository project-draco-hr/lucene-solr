{
  Path path=createTempDir("nocreate");
  Directory fsdir=getDirectory(path);
  if (fsdir instanceof FSDirectory == false) {
    fsdir.close();
    assumeTrue("test only works for FSDirectory subclasses",false);
  }
  IndexOutput out=fsdir.createOutput("afile",newIOContext(random()));
  out.writeString("boo");
  out.close();
  Files.delete(path.resolve("afile"));
  int fileCount=fsdir.listAll().length;
  try {
    fsdir.sync(Collections.singleton("afile"));
    fail("didn't get expected exception, instead fsync created new files: " + Arrays.asList(fsdir.listAll()));
  }
 catch (  FileNotFoundException|NoSuchFileException expected) {
  }
  assertEquals(fileCount,fsdir.listAll().length);
  fsdir.close();
}
