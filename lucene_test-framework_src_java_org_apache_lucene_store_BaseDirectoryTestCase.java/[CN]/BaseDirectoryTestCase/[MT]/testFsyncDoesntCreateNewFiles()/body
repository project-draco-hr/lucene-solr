{
  File path=createTempDir("nocreate");
  Directory fsdir=getDirectory(path);
  if (fsdir instanceof FSDirectory == false) {
    fsdir.close();
    assumeTrue("test only works for FSDirectory subclasses",false);
  }
  IndexOutput out=fsdir.createOutput("afile",newIOContext(random()));
  out.writeString("boo");
  out.close();
  assertTrue(new File(path,"afile").delete());
  assertEquals(0,fsdir.listAll().length);
  try {
    fsdir.sync(Collections.singleton("afile"));
    fail("didn't get expected exception, instead fsync created new files: " + Arrays.asList(fsdir.listAll()));
  }
 catch (  FileNotFoundException|NoSuchFileException expected) {
  }
  assertEquals(0,fsdir.listAll().length);
  fsdir.close();
}
