{
  Map<String,String> m=new HashMap<>();
  m.put("test1","value1");
  m.put("test2","value2");
  Directory dir=getDirectory(createTempDir("testStringMap"));
  IndexOutput output=dir.createOutput("stringmap",newIOContext(random()));
  output.writeStringStringMap(m);
  output.close();
  IndexInput input=dir.openInput("stringmap",newIOContext(random()));
  assertEquals(30,input.length());
  assertEquals(m,input.readStringStringMap());
  input.close();
  dir.close();
}
