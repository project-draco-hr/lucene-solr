{
  File tmpFile=createTempDir();
  new File(tmpFile + "/collection1","data").mkdirs();
  File confDir=new File(tmpFile + "/collection1","conf");
  confDir.mkdirs();
  FileUtils.copyFile(getFile("analysis-extras/solr/collection1/conf/solrconfig-icucollate.xml"),new File(confDir,"solrconfig.xml"));
  FileUtils.copyFile(getFile("analysis-extras/solr/collection1/conf/schema-icucollate-dv.xml"),new File(confDir,"schema.xml"));
  RuleBasedCollator baseCollator=(RuleBasedCollator)Collator.getInstance(new ULocale("de","DE"));
  String DIN5007_2_tailorings="& ae , a\u0308 & AE , A\u0308" + "& oe , o\u0308 & OE , O\u0308" + "& ue , u\u0308 & UE , u\u0308";
  RuleBasedCollator tailoredCollator=new RuleBasedCollator(baseCollator.getRules() + DIN5007_2_tailorings);
  String tailoredRules=tailoredCollator.getRules();
  FileOutputStream os=new FileOutputStream(new File(confDir,"customrules.dat"));
  IOUtils.write(tailoredRules,os,"UTF-8");
  os.close();
  return tmpFile.getAbsolutePath();
}
