{
  if (this.isInitialized.get())   throw new IllegalStateException("IndexController is already initialized");
  this.destroyed.set(false);
  GDataServerRegistry.getRegistry().registerEntryEventListener(this);
  GDataServerRegistry.getRegistry().registerEntryEventListener(this);
  Collection<ProvidedService> services=GDataServerRegistry.getRegistry().getServices();
  this.indexerMap=new ConcurrentHashMap<String,ServiceIndex>(services.size());
  for (  ProvidedService service : services) {
    IndexSchema schema=service.getIndexSchema();
    schema.initialize();
    addIndexSchema(schema);
  }
  this.isInitialized.set(true);
}
