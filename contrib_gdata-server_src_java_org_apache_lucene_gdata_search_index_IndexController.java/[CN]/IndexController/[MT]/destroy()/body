{
  if (this.destroyed.get())   throw new IllegalStateException("IndexController has been destroyed");
  if (!this.isInitialized.get())   return;
  this.destroyed.set(true);
  this.isInitialized.set(false);
  LOG.info("Shutting down IndexController -- destroy has been called");
  Set<Entry<String,ServiceIndex>> entrySet=this.indexerMap.entrySet();
  for (  Entry<String,ServiceIndex> entry : entrySet) {
    ServiceIndex bean=entry.getValue();
    bean.getSearcher().decrementRef();
    GDataIndexer indexer=bean.getIndexer();
    try {
      indexer.destroy();
    }
 catch (    IOException e) {
      LOG.warn("Can not destroy indexer for service: " + bean.getSchema().getName(),e);
    }
  }
  this.taskExecutor.shutdown();
  this.indexerMap.clear();
}
