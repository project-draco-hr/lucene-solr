{
  BooleanClause[] c=from.getClauses();
  for (int i=0; i < c.length; i++) {
    Query ci=c[i].getQuery();
    ci.setBoost(ci.getBoost() * from.getBoost());
    if (ci instanceof BooleanQuery && !c[i].isRequired() && !c[i].isProhibited()) {
      flattenBooleanQuery(to,(BooleanQuery)ci);
    }
 else {
      to.add(c[i]);
    }
  }
}
