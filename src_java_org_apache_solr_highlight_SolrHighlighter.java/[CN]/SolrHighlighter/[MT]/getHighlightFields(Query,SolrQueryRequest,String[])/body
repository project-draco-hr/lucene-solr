{
  String fields[]=request.getParams().getParams(HighlightParams.FIELDS);
  if (emptyArray(fields)) {
    if (emptyArray(defaultFields)) {
      fields=new String[]{request.getSchema().getDefaultSearchFieldName()};
    }
 else {
      fields=defaultFields;
    }
  }
 else   if (fields.length == 1) {
    fields=SolrPluginUtils.split(fields[0]);
  }
  return fields;
}
