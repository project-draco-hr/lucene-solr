{
  if (fi.getCodecId() == FieldInfo.UNASSIGNED_CODEC_ID) {
    final Codec fieldCodec=provider.lookup(provider.getFieldCodec(fi.name));
    Integer ord=codecRegistry.get(fieldCodec);
    if (ord == null) {
      ord=Integer.valueOf(codecs.size());
      codecRegistry.put(fieldCodec,ord);
      codecs.add(fieldCodec);
    }
    fi.setCodecId(ord.intValue());
  }
  return this;
}
