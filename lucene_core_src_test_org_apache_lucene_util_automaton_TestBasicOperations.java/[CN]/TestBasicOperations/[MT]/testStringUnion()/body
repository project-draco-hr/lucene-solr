{
  List<BytesRef> strings=new ArrayList<>();
  for (int i=RandomInts.randomIntBetween(random(),0,1000); --i >= 0; ) {
    strings.add(new BytesRef(TestUtil.randomUnicodeString(random())));
  }
  Collections.sort(strings);
  LightAutomaton union=BasicAutomata.makeStringUnionLight(strings);
  assertTrue(BasicOperations.isDeterministic(union));
  assertTrue(BasicOperations.sameLanguage(union,naiveUnion(strings)));
}
