{
  List<BytesRef> strings=new ArrayList<BytesRef>();
  for (int i=RandomInts.randomIntBetween(random(),0,1000); --i >= 0; ) {
    strings.add(new BytesRef(_TestUtil.randomUnicodeString(random())));
  }
  Collections.sort(strings);
  Automaton union=BasicAutomata.makeStringUnion(strings);
  assertTrue(union.isDeterministic());
  assertTrue(BasicOperations.sameLanguage(union,naiveUnion(strings)));
}
