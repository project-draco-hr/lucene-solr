{
  for (int ii=1; ii <= numDocs; ++ii) {
    String[] doc={"id",ii + "0"};
    assertU(adoc(doc));
    if (random().nextBoolean()) {
      assertU(commit());
    }
  }
  assertU(commit());
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.add("defType","testxmlparser");
  params.add("q",q);
  assertQ(req(params),"*[count(//doc)=" + expectedCount + "]");
}
