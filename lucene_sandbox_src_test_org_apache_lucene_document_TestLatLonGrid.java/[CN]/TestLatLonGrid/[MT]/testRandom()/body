{
  for (int i=0; i < 1000; i++) {
    Polygon polygon=GeoTestUtil.nextPolygon();
    Rectangle box=Rectangle.fromPolygon(new Polygon[]{polygon});
    int minLat=encodeLatitude(box.minLat);
    int maxLat=encodeLatitude(box.maxLat);
    int minLon=encodeLongitude(box.minLon);
    int maxLon=encodeLongitude(box.maxLon);
    LatLonGrid grid=new LatLonGrid(minLat,maxLat,minLon,maxLon,LatLonTree.build(polygon));
    for (int j=0; j < 10000; j++) {
      int lat=TestUtil.nextInt(random(),minLat,maxLat);
      int lon=TestUtil.nextInt(random(),minLon,maxLon);
      boolean expected=polygon.contains(decodeLatitude(lat),decodeLongitude(lon));
      boolean actual=grid.contains(lat,lon);
      assertEquals(expected,actual);
    }
  }
}
