{
  if (file.isDirectory()) {
    String[] files=file.list();
    Arrays.sort(files);
    for (int i=0; i < files.length; i++)     indexDocs(new File(file,files[i]));
  }
 else   if (file.getPath().endsWith(".html") || file.getPath().endsWith(".htm") || file.getPath().endsWith(".txt")) {
    if (uidIter != null) {
      String uid=HTMLDocument.uid(file);
      BytesRef text;
      while ((text=uidIter.next()) != null) {
        String termText=text.utf8ToString();
        if (termText.compareTo(uid) < 0) {
          if (deleting) {
            System.out.println("deleting " + HTMLDocument.uid2url(termText));
            reader.deleteDocuments(new Term("uid",termText));
          }
        }
 else {
          break;
        }
      }
      if (text != null && text.utf8ToString().compareTo(uid) == 0) {
        uidIter.next();
      }
 else       if (!deleting) {
        Document doc=HTMLDocument.Document(file);
        System.out.println("adding " + doc.get("path"));
        writer.addDocument(doc);
      }
    }
 else {
      Document doc=HTMLDocument.Document(file);
      System.out.println("adding " + doc.get("path"));
      writer.addDocument(doc);
    }
  }
}
