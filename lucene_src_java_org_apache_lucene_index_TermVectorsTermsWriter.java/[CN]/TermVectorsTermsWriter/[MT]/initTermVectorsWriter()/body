{
  if (tvx == null) {
    final String docStoreSegment=docWriter.getDocStoreSegment();
    if (docStoreSegment == null)     return;
    String idxName=IndexFileNames.segmentFileName(docStoreSegment,"",IndexFileNames.VECTORS_INDEX_EXTENSION);
    String docName=IndexFileNames.segmentFileName(docStoreSegment,"",IndexFileNames.VECTORS_DOCUMENTS_EXTENSION);
    String fldName=IndexFileNames.segmentFileName(docStoreSegment,"",IndexFileNames.VECTORS_FIELDS_EXTENSION);
    hasVectors=true;
    tvx=docWriter.directory.createOutput(idxName);
    tvd=docWriter.directory.createOutput(docName);
    tvf=docWriter.directory.createOutput(fldName);
    tvx.writeInt(TermVectorsReader.FORMAT_CURRENT);
    tvd.writeInt(TermVectorsReader.FORMAT_CURRENT);
    tvf.writeInt(TermVectorsReader.FORMAT_CURRENT);
    docWriter.addOpenFile(idxName);
    docWriter.addOpenFile(fldName);
    docWriter.addOpenFile(docName);
    lastDocID=0;
  }
}
