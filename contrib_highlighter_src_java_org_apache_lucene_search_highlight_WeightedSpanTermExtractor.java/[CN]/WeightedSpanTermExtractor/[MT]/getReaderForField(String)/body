{
  if (wrapToCaching && !cachedTokenStream && !(tokenStream instanceof CachingTokenFilter)) {
    tokenStream=new CachingTokenFilter(tokenStream);
    cachedTokenStream=true;
  }
  IndexReader reader=(IndexReader)readers.get(field);
  if (reader == null) {
    MemoryIndex indexer=new MemoryIndex();
    indexer.addField(field,tokenStream);
    tokenStream.reset();
    IndexSearcher searcher=indexer.createSearcher();
    reader=searcher.getIndexReader();
    readers.put(field,reader);
  }
  return reader;
}
