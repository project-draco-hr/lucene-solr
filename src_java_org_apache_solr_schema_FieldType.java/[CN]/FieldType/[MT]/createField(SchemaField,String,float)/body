{
  String val;
  try {
    val=toInternal(externalVal);
  }
 catch (  NumberFormatException e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error while creating field '" + field + "' from value '"+ externalVal+ "'",e,false);
  }
  if (val == null)   return null;
  if (!field.indexed() && !field.stored()) {
    log.trace("Ignoring unindexed/unstored field: " + field);
    return null;
  }
  Field f=new Field(field.getName(),val,getFieldStore(field,val),getFieldIndex(field,val),getFieldTermVec(field,val));
  f.setOmitNorms(field.omitNorms());
  f.setOmitTf(field.omitTf());
  f.setBoost(boost);
  return f;
}
