{
  long gen=info.getDelGen();
  String name=IndexFileNames.fileNameFromGeneration(info.info.name,EXTENSION,gen);
  final int length=info.info.getDocCount();
  try (ChecksumIndexInput input=dir.openChecksumInput(name,context)){
    Throwable priorE=null;
    try {
      CodecUtil.checkSegmentHeader(input,CODEC_NAME,VERSION_START,VERSION_CURRENT,info.info.getId(),"");
      long filegen=input.readLong();
      if (gen != filegen) {
        throw new CorruptIndexException("file mismatch, expected generation=" + gen + ", got="+ filegen,input);
      }
      long data[]=new long[FixedBitSet.bits2words(length)];
      for (int i=0; i < data.length; i++) {
        data[i]=input.readLong();
      }
      FixedBitSet fbs=new FixedBitSet(data,length);
      if (fbs.length() - fbs.cardinality() != info.getDelCount()) {
        throw new CorruptIndexException("bits.deleted=" + (fbs.length() - fbs.cardinality()) + " info.delcount="+ info.getDelCount(),input);
      }
      return fbs;
    }
 catch (    Throwable exception) {
      priorE=exception;
    }
 finally {
      CodecUtil.checkFooter(input,priorE);
    }
  }
   throw new AssertionError();
}
