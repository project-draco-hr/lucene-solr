{
  FieldCacheImpl.Entry entry=(factory != null) ? new FieldCacheImpl.Entry(field,factory) : new FieldCacheImpl.Entry(field,type,locale);
synchronized (Comparators) {
    HashMap readerCache=(HashMap)Comparators.get(reader);
    if (readerCache == null) {
      readerCache=new HashMap();
      Comparators.put(reader,readerCache);
    }
    return readerCache.put(entry,value);
  }
}
