{
  final ScoreDoc docA=(ScoreDoc)a;
  final ScoreDoc docB=(ScoreDoc)b;
  if (docA.score > maxscore)   maxscore=docA.score;
  if (docB.score > maxscore)   maxscore=docB.score;
  final int n=comparators.length;
  int c=0;
  for (int i=0; i < n && c == 0; ++i) {
    c=(fields[i].reverse) ? comparators[i].compare(docB,docA) : comparators[i].compare(docA,docB);
  }
  if (c == 0)   return docA.doc > docB.doc;
  return c > 0;
}
