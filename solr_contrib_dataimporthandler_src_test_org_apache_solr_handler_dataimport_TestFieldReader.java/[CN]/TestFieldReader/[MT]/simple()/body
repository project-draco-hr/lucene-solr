{
  DataImporter di=new DataImporter();
  di.loadAndInit(config);
  TestDocBuilder.SolrWriterImpl sw=new TestDocBuilder.SolrWriterImpl();
  RequestInfo rp=new RequestInfo(null,createMap("command","full-import"),null);
  List<Map<String,Object>> l=new ArrayList<>();
  l.add(createMap("xml",xml));
  MockDataSource.setIterator("select * from a",l.iterator());
  di.runCmd(rp,sw);
  assertEquals(sw.docs.get(0).getFieldValue("y"),"Hello");
  MockDataSource.clearCache();
}
