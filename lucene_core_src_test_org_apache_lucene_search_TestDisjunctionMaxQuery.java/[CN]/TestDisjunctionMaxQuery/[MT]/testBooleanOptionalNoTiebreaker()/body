{
  BooleanQuery q=new BooleanQuery();
{
    DisjunctionMaxQuery q1=new DisjunctionMaxQuery(0.0f);
    q1.add(tq("hed","albino"));
    q1.add(tq("dek","albino"));
    q.add(q1,BooleanClause.Occur.SHOULD);
  }
{
    DisjunctionMaxQuery q2=new DisjunctionMaxQuery(0.0f);
    q2.add(tq("hed","elephant"));
    q2.add(tq("dek","elephant"));
    q.add(q2,BooleanClause.Occur.SHOULD);
  }
  QueryUtils.check(random(),q,s);
  ScoreDoc[] h=s.search(q,1000).scoreDocs;
  try {
    assertEquals("4 docs should match " + q.toString(),4,h.length);
    float score=h[0].score;
    for (int i=1; i < h.length - 1; i++) {
      assertEquals("score #" + i + " is not the same",score,h[i].score,SCORE_COMP_THRESH);
    }
    assertEquals("wrong last","d1",s.doc(h[h.length - 1].doc).get("id"));
    float score1=h[h.length - 1].score;
    assertTrue("d1 does not have worse score then others: " + score + " >? "+ score1,score > score1);
  }
 catch (  Error e) {
    printHits("testBooleanOptionalNoTiebreaker",h,s);
    throw e;
  }
}
