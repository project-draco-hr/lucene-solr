{
  RefCounted<SolrIndexSearcher> holder=h.getCore().getSearcher();
  try {
    SolrIndexSearcher searcher=holder.get();
    LFUCache cacheDecayTrue=(LFUCache)searcher.getCache("lfuCacheDecayTrue");
    assertNotNull(cacheDecayTrue);
    NamedList stats=cacheDecayTrue.getStatistics();
    assertTrue((Boolean)stats.get("timeDecay"));
    addCache(cacheDecayTrue,1,2,3,4,5,6,7,8,9,10);
    for (int idx=0; idx < 64; ++idx) {
      assertCache(cacheDecayTrue,1,2,3,4,5);
    }
    addCache(cacheDecayTrue,11,12,13,14,15);
    assertCache(cacheDecayTrue,1,2,3,4,5,12,13,14,15);
    LFUCache cacheDecayDefault=(LFUCache)searcher.getCache("lfuCacheDecayDefault");
    assertNotNull(cacheDecayDefault);
    stats=cacheDecayDefault.getStatistics();
    assertTrue((Boolean)stats.get("timeDecay"));
    addCache(cacheDecayDefault,1,2,3,4,5,6,7,8,9,10);
    assertCache(cacheDecayDefault,1,2,3,4,5);
    for (int idx=0; idx < 64; ++idx) {
      assertCache(cacheDecayDefault,1,2,3,4,5);
    }
    addCache(cacheDecayDefault,11,12,13,14,15);
    assertCache(cacheDecayDefault,1,2,3,4,5,12,13,14,15);
    addCache(cacheDecayDefault,11,12,13,14,15,16,17,18,19,20,21);
    assertCache(cacheDecayDefault,1,2,3,4,5,17,18,19,20,21);
    LFUCache cacheDecayFalse=(LFUCache)searcher.getCache("lfuCacheDecayFalse");
    assertNotNull(cacheDecayFalse);
    stats=cacheDecayFalse.getStatistics();
    assertFalse((Boolean)stats.get("timeDecay"));
    addCache(cacheDecayFalse,1,2,3,4,5,6,7,8,9,10);
    assertCache(cacheDecayFalse,1,2,3,4,5);
    for (int idx=0; idx < 16; ++idx) {
      assertCache(cacheDecayFalse,1,2,3,4,5);
    }
    addCache(cacheDecayFalse,11,12,13,14,15,16,17,18,19,20,21);
    assertCache(cacheDecayFalse,1,2,3,4,5);
    assertNotCache(cacheDecayFalse,6,7,8,9,10);
    for (int idx=22; idx < 256; ++idx) {
      addCache(cacheDecayFalse,idx);
    }
    assertCache(cacheDecayFalse,1,2,3,4,5);
  }
  finally {
    holder.decref();
  }
}
