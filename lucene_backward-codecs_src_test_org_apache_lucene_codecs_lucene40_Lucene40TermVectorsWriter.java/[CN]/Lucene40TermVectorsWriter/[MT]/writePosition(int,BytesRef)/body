{
  if (payloads) {
    int payloadLength=payload == null ? 0 : payload.length;
    if (payloadLength != lastPayloadLength) {
      lastPayloadLength=payloadLength;
      tvf.writeVInt((delta << 1) | 1);
      tvf.writeVInt(payloadLength);
    }
 else {
      tvf.writeVInt(delta << 1);
    }
    if (payloadLength > 0) {
      if (payloadLength + payloadData.length() < 0) {
        throw new UnsupportedOperationException("A term cannot have more than Integer.MAX_VALUE bytes of payload data in a single document");
      }
      payloadData.append(payload);
    }
  }
 else {
    tvf.writeVInt(delta);
  }
}
