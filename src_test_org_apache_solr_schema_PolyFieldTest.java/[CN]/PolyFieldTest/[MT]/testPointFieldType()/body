{
  SolrCore core=h.getCore();
  IndexSchema schema=core.getSchema();
  SchemaField home=schema.getField("home");
  assertNotNull(home);
  assertTrue("home is not a poly field",home.isPolyField());
  FieldType tmp=home.getType();
  assertTrue(tmp instanceof PointType);
  PointType pt=(PointType)tmp;
  assertEquals(pt.getDimension(),2);
  double[] xy=new double[]{35.0,-79.34};
  String point=xy[0] + "," + xy[1];
  Fieldable[] fields=home.createFields(point,2);
  assertEquals(fields.length,3);
  for (int i=0; i < 3; i++) {
    boolean hasValue=fields[1].tokenStreamValue() != null || fields[1].getBinaryValue() != null || fields[1].stringValue() != null;
    assertTrue("Doesn't have a value: " + fields[1],hasValue);
  }
  home=schema.getField("home_ns");
  assertNotNull(home);
  fields=home.createFields(point,2);
  assertEquals(fields.length,2);
  home=schema.getField("home_ns");
  assertNotNull(home);
  try {
    fields=home.createFields("35.0,foo",2);
    assertTrue(false);
  }
 catch (  Exception e) {
  }
}
