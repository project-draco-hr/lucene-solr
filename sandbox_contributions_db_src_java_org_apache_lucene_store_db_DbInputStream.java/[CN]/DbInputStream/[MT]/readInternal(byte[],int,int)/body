{
  int blockPos=(int)(position & DbOutputStream.BLOCK_MASK);
  if (position + len > length)   throw new IOException("Reading past end of file");
  while (blockPos + len >= DbOutputStream.BLOCK_LEN) {
    int blockLen=DbOutputStream.BLOCK_LEN - blockPos;
    System.arraycopy(block.getData(),blockPos,b,offset,blockLen);
    len-=blockLen;
    offset+=blockLen;
    position+=blockLen;
    block.seek(position);
    block.get(blocks,txn,flags);
    blockPos=0;
  }
  if (len > 0) {
    System.arraycopy(block.getData(),blockPos,b,offset,len);
    position+=len;
  }
}
