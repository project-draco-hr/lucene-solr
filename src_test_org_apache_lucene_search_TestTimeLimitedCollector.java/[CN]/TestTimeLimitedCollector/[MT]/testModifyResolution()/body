{
  try {
    long resolution=20 * TimeLimitedCollector.DEFAULT_RESOLUTION;
    TimeLimitedCollector.setResolution(resolution);
    assertEquals(resolution,TimeLimitedCollector.getResolution());
    doTestTimeout(false,true);
    resolution=5;
    TimeLimitedCollector.setResolution(resolution);
    assertEquals(resolution,TimeLimitedCollector.getResolution());
    doTestTimeout(false,true);
    resolution=TimeLimitedCollector.DEFAULT_RESOLUTION;
    TimeLimitedCollector.setResolution(resolution);
    assertEquals(resolution,TimeLimitedCollector.getResolution());
    doTestTimeout(false,true);
  }
  finally {
    TimeLimitedCollector.setResolution(TimeLimitedCollector.DEFAULT_RESOLUTION);
  }
}
