{
  if (frozen) {
    throw new IllegalArgumentException("Cannot call addField() when MemoryIndex is frozen");
  }
  if (fieldName == null) {
    throw new IllegalArgumentException("fieldName must not be null");
  }
  if (boost <= 0.0f) {
    throw new IllegalArgumentException("boost factor must be greater than 0.0");
  }
  Info info=fields.get(fieldName);
  if (info == null) {
    IndexOptions indexOptions=storeOffsets ? IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS : IndexOptions.DOCS_AND_FREQS_AND_POSITIONS;
    FieldInfo fieldInfo=new FieldInfo(fieldName,fields.size(),true,false,storePayloads,indexOptions,docValuesType,-1,Collections.emptyMap(),0,0);
    fields.put(fieldName,info=new Info(fieldInfo,byteBlockPool));
  }
  if (pointDimensionCount > 0) {
    storePointValues(info,pointDimensionCount,pointNumBytes,pointValue);
  }
  if (docValuesType != DocValuesType.NONE) {
    storeDocValues(info,docValuesType,docValuesValue);
  }
  if (tokenStream != null) {
    storeTerms(info,tokenStream,boost,positionIncrementGap,offsetGap);
  }
}
