{
  if (sslConfig == null) {
    if (Boolean.getBoolean(System.getProperty("tests.jettySsl"))) {
      return configureSslFromSysProps();
    }
    return null;
  }
  if (!sslConfig.useSsl)   return null;
  SslContextFactory factory=new SslContextFactory(false);
  if (sslConfig.getKeyStore() != null)   factory.setKeyStorePath(sslConfig.getKeyStore());
  if (sslConfig.getKeyStorePassword() != null)   factory.setKeyStorePassword(sslConfig.getKeyStorePassword());
  if (sslConfig.getTrustStore() != null)   factory.setTrustStorePath(System.getProperty(sslConfig.getTrustStore()));
  if (sslConfig.getTrustStorePassword() != null)   factory.setTrustStorePassword(sslConfig.getTrustStorePassword());
  return factory;
}
