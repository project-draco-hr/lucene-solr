{
  Directory dir=newDirectory();
  DirectoryTaxonomyWriter ltw=new DirectoryTaxonomyWriter(dir,OpenMode.CREATE_OR_APPEND,new NoOpCache());
  assertFalse(DirectoryReader.indexExists(dir));
  ltw.commit();
  ltw.addCategory(new CategoryPath("a"));
  IndexReader r=DirectoryReader.open(dir);
  assertEquals("No categories should have been committed to the underlying directory",1,r.numDocs());
  r.close();
  ltw.close();
  dir.close();
}
