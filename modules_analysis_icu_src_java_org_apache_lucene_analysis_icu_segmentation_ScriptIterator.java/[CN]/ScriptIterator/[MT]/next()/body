{
  if (scriptLimit >= limit)   return false;
  scriptCode=UScript.COMMON;
  scriptStart=scriptLimit;
  while (index < limit) {
    final int ch=UTF16.charAt(text,start,limit,index - start);
    final int sc=getScript(ch);
    if (isSameScript(scriptCode,sc) || UCharacter.getType(ch) == ECharacterCategory.NON_SPACING_MARK) {
      index+=UTF16.getCharCount(ch);
      if (scriptCode <= UScript.INHERITED && sc > UScript.INHERITED) {
        scriptCode=sc;
      }
    }
 else {
      break;
    }
  }
  scriptLimit=index;
  return true;
}
