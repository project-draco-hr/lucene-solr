{
  log.info("### STARTING doTriLevelHashingTest");
  for (int i=0; i < NUM_DOCS; i++) {
    int appId=r.nextInt(NUM_APPS) + 1;
    int userId=r.nextInt(NUM_USERS) + 1;
    String id="app" + appId + "!"+ "user"+ userId+ "!"+ "doc"+ r.nextInt(100);
    doAddDoc(id);
  }
  commit();
  HashMap<String,Integer> idMap=new HashMap<>();
  for (int i=1; i <= sliceCount; i++) {
    Set<String> ids=doQueryGetUniqueIdKeys("q","*:*","shards","shard" + i);
    for (    String id : ids) {
      assertFalse("Found the same route key [" + id + "] in 2 shards.",idMap.containsKey(id));
      idMap.put(getKey(id),i);
    }
  }
}
