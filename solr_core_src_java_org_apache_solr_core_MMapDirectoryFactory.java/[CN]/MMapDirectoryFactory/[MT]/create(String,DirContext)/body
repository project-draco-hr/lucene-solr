{
  MMapDirectory mapDirectory=new MMapDirectory(new File(path).toPath(),NoLockFactory.getNoLockFactory(),maxChunk);
  try {
    mapDirectory.setUseUnmap(unmapHack);
  }
 catch (  Exception e) {
    log.warn("Unmap not supported on this JVM, continuing on without setting unmap",e);
  }
  return mapDirectory;
}
