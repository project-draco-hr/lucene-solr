{
  MMapDirectory mapDirectory=new MMapDirectory(new File(path).toPath(),lockFactory,maxChunk);
  try {
    mapDirectory.setUseUnmap(unmapHack);
  }
 catch (  IllegalArgumentException e) {
    log.warn("Unmap not supported on this JVM, continuing on without setting unmap",e);
  }
  return mapDirectory;
}
