{
  int prefixLength=prefix.length();
  TermEnum enumerator=reader.terms(new Term(fieldName,prefix));
  Matcher matcher=pattern.matcher("");
  try {
    do {
      Term term=enumerator.term();
      if (term != null) {
        String text=term.text();
        if ((!text.startsWith(prefix)) || (!term.field().equals(fieldName))) {
          break;
        }
 else {
          matcher.reset(text.substring(prefixLength));
          if (matcher.matches()) {
            mtv.visitMatchingTerm(term);
          }
        }
      }
    }
 while (enumerator.next());
  }
  finally {
    enumerator.close();
    matcher.reset();
  }
}
