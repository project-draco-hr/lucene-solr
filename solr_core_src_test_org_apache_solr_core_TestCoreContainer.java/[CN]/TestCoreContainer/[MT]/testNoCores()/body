{
  CoreContainer cores=init(CONFIGSETS_SOLR_XML);
  try {
    assertEquals("There should not be cores",0,cores.getCores().size());
    cores.create("core1",ImmutableMap.of("configSet","minimal"));
    assertEquals("There core registered",1,cores.getCores().size());
    cores.unload("core1");
    assertEquals("There should not be cores",0,cores.getCores().size());
    try {
      cores.unload("non_existent_core");
      fail("Should have thrown an exception when unloading a non-existent core");
    }
 catch (    SolrException e) {
      assertThat(e.getMessage(),containsString("Cannot unload non-existent core [non_existent_core]"));
    }
    try {
      cores.unload(null);
      fail("Should have thrown an exception when unloading a null core");
    }
 catch (    Exception e) {
      if (!(e instanceof SolrException)) {
        fail("Should not have thrown SolrException but got " + e);
      }
      assertThat(e.getMessage(),containsString("Cannot unload non-existent core [null]"));
    }
  }
  finally {
    cores.shutdown();
  }
}
