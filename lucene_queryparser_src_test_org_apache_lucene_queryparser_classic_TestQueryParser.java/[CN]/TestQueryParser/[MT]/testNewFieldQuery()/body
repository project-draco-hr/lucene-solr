{
  QueryParser dumb=new QueryParser("field",new Analyzer1());
  BooleanQuery.Builder expanded=new BooleanQuery.Builder();
  expanded.setDisableCoord(true);
  expanded.add(new TermQuery(new Term("field","dogs")),BooleanClause.Occur.SHOULD);
  expanded.add(new TermQuery(new Term("field","dog")),BooleanClause.Occur.SHOULD);
  assertEquals(expanded.build(),dumb.parse("\"dogs\""));
  assertEquals(expanded.build(),dumb.parse("dogs"));
  QueryParser smart=new SmartQueryParser();
  assertEquals(expanded.build(),smart.parse("dogs"));
  Query unexpanded=new TermQuery(new Term("field","dogs"));
  assertEquals(unexpanded,smart.parse("\"dogs\""));
}
