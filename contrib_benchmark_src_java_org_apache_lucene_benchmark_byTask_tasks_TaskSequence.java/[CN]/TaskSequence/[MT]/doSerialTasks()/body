{
  if (rate > 0) {
    return doSerialTasksWithRate();
  }
  initTasksArray();
  int count=0;
  final long t0=System.currentTimeMillis();
  final long runTime=(long)(runTimeSec * 1000);
  for (int k=0; fixedTime || (repetitions == REPEAT_EXHAUST && !exhausted) || k < repetitions; k++) {
    for (int l=0; l < tasksArray.length; l++)     try {
      final PerfTask task=tasksArray[l];
      count+=task.runAndMaybeStats(letChildReport);
      if (anyExhaustibleTasks)       updateExhausted(task);
    }
 catch (    NoMoreDataException e) {
      exhausted=true;
    }
    if (fixedTime && System.currentTimeMillis() - t0 > runTime) {
      repetitions=k + 1;
      break;
    }
  }
  return count;
}
