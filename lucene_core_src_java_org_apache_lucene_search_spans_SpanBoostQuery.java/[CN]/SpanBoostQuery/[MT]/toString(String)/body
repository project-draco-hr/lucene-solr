{
  boolean needsParens=NO_PARENS_REQUIRED_QUERIES.contains(query.getClass()) == false;
  StringBuilder builder=new StringBuilder();
  if (needsParens) {
    builder.append("(");
  }
  builder.append(query.toString(field));
  if (needsParens) {
    builder.append(")");
  }
  builder.append("^");
  builder.append(boost);
  return builder.toString();
}
