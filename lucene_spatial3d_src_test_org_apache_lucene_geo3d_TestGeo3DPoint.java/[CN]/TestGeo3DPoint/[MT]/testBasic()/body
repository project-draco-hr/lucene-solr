{
  Directory dir=getDirectory();
  IndexWriterConfig iwc=newIndexWriterConfig();
  iwc.setCodec(getCodec());
  IndexWriter w=new IndexWriter(dir,iwc);
  Document doc=new Document();
  doc.add(new Geo3DPoint("field",PlanetModel.WGS84,toRadians(50.7345267),toRadians(-97.5303555)));
  w.addDocument(doc);
  IndexReader r=DirectoryReader.open(w,true);
  IndexSearcher s=newSearcher(r,false);
  assertEquals(1,s.search(new PointInGeo3DShapeQuery(PlanetModel.WGS84,"field",GeoCircleFactory.makeGeoCircle(PlanetModel.WGS84,toRadians(50),toRadians(-97),Math.PI / 180.)),1).totalHits);
  w.close();
  r.close();
  dir.close();
}
