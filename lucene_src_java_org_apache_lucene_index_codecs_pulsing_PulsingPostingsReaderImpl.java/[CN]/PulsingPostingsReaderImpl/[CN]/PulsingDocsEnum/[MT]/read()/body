{
  int i=0;
  initBulkResult();
  final int[] docs=bulkResult.docs.ints;
  final int[] freqs=bulkResult.freqs.ints;
  while (nextRead < state.docFreq) {
    doc=state.docs[nextRead++];
    if (skipDocs == null || !skipDocs.get(doc.docID)) {
      docs[i]=doc.docID;
      freqs[i]=doc.numPositions;
      i++;
    }
  }
  return i;
}
