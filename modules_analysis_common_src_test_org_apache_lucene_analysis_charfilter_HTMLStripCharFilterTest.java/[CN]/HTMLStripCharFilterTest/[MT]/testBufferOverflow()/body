{
  StringBuilder testBuilder=new StringBuilder(HTMLStripCharFilter.getInitialBufferSize() + 50);
  testBuilder.append("ah<?> ??????");
  appendChars(testBuilder,HTMLStripCharFilter.getInitialBufferSize() + 500);
  processBuffer(testBuilder.toString(),"Failed on pseudo proc. instr.");
  testBuilder.setLength(0);
  testBuilder.append("<!--");
  appendChars(testBuilder,3 * HTMLStripCharFilter.getInitialBufferSize() + 500);
  testBuilder.append("-->foo");
  String gold="foo";
  Reader reader=new HTMLStripCharFilter(CharReader.get(new StringReader(testBuilder.toString())));
  int ch=0;
  StringBuilder builder=new StringBuilder();
  try {
    while ((ch=reader.read()) != -1) {
      builder.append((char)ch);
    }
  }
  finally {
  }
  assertEquals("'" + builder.toString() + "' is not equal to '"+ gold+ "'",gold,builder.toString());
  testBuilder.setLength(0);
  testBuilder.append("<?");
  appendChars(testBuilder,HTMLStripCharFilter.getInitialBufferSize() + 500);
  testBuilder.append("?>");
  gold="";
  reader=new HTMLStripCharFilter(CharReader.get(new StringReader(testBuilder.toString())));
  ch=0;
  builder=new StringBuilder();
  try {
    while ((ch=reader.read()) != -1) {
      builder.append((char)ch);
    }
  }
  finally {
  }
  assertEquals("'" + builder.toString() + "' is not equal to '"+ gold+ "'",gold,builder.toString());
  testBuilder.setLength(0);
  testBuilder.append("<b ");
  appendChars(testBuilder,HTMLStripCharFilter.getInitialBufferSize() + 500);
  testBuilder.append("/>");
  gold="";
  reader=new HTMLStripCharFilter(CharReader.get(new StringReader(testBuilder.toString())));
  ch=0;
  builder=new StringBuilder();
  try {
    while ((ch=reader.read()) != -1) {
      builder.append((char)ch);
    }
  }
  finally {
  }
  assertEquals("'" + builder.toString() + "' is not equal to '"+ gold+ "'",gold,builder.toString());
}
