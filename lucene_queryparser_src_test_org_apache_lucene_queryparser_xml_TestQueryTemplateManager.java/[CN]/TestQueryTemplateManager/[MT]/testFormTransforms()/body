{
  assumeFalse("test temporarily disabled on J9, see https://issues.apache.org/jira/browse/LUCENE-6556",Constants.JAVA_VENDOR.startsWith("IBM"));
  QueryTemplateManager qtm=new QueryTemplateManager();
  qtm.addQueryTemplate("albumBooleanQuery",getClass().getResourceAsStream("albumBooleanQuery.xsl"));
  qtm.addQueryTemplate("albumFilteredQuery",getClass().getResourceAsStream("albumFilteredQuery.xsl"));
  qtm.addQueryTemplate("albumLuceneClassicQuery",getClass().getResourceAsStream("albumLuceneClassicQuery.xsl"));
  for (  String queryForm : queryForms) {
    Properties queryFormProperties=getPropsFromString(queryForm);
    Document doc=qtm.getQueryAsDOM(queryFormProperties,queryFormProperties.getProperty("template"));
    Query q=builder.getQuery(doc.getDocumentElement());
    int h=searcher.search(q,1000).totalHits;
    int expectedHits=Integer.parseInt(queryFormProperties.getProperty("expectedMatches"));
    assertEquals("Number of results should match for query " + queryForm,expectedHits,h);
  }
}
