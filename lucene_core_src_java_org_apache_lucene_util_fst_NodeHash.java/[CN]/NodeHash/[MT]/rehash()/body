{
  final int[] oldTable=table;
  if (oldTable.length >= Integer.MAX_VALUE / 2) {
    throw new IllegalStateException("FST too large (> 2.1 GB)");
  }
  table=new int[2 * table.length];
  mask=table.length - 1;
  for (int idx=0; idx < oldTable.length; idx++) {
    final int address=oldTable[idx];
    if (address != 0) {
      addNew(address);
    }
  }
}
