{
  List<Term> sample=new ArrayList<Term>();
  Random random=new Random();
  FieldsEnum fieldsEnum=MultiFields.getFields(reader).iterator();
  String field;
  while ((field=fieldsEnum.next()) != null) {
    Terms terms=fieldsEnum.terms();
    assertNotNull(terms);
    TermsEnum termsEnum=terms.iterator(null);
    while (termsEnum.next() != null) {
      if (sample.size() >= size) {
        int pos=random.nextInt(size);
        sample.set(pos,new Term(field,termsEnum.term()));
      }
 else {
        sample.add(new Term(field,termsEnum.term()));
      }
    }
  }
  Collections.shuffle(sample);
  return sample;
}
