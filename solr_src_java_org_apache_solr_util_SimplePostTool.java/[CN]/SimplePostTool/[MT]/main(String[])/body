{
  info("version " + VERSION_OF_THIS_TOOL);
  if (0 < args.length && "-help".equals(args[0])) {
    System.out.println("This is a simple command line tool for POSTing raw XML to a Solr\n" + "port.  XML data can be read from files specified as commandline\n" + "args; as raw commandline arg strings; or via STDIN.\n"+ "Examples:\n"+ "  java -Ddata=files -jar post.jar *.xml\n"+ "  java -Ddata=args  -jar post.jar '<delete><id>42</id></delete>'\n"+ "  java -Ddata=stdin -jar post.jar < hd.xml\n"+ "Other options controlled by System Properties include the Solr\n"+ "URL to POST to, and whether a commit should be executed.  These\n"+ "are the defaults for all System Properties...\n"+ "  -Ddata=" + DEFAULT_DATA_MODE + "\n"+ "  -Durl="+ DEFAULT_POST_URL+ "\n"+ "  -Dcommit="+ DEFAULT_COMMIT+ "\n");
    return;
  }
  URL u=null;
  try {
    u=new URL(System.getProperty("url",DEFAULT_POST_URL));
  }
 catch (  MalformedURLException e) {
    fatal("System Property 'url' is not a valid URL: " + u);
  }
  final SimplePostTool t=new SimplePostTool(u);
  final String mode=System.getProperty("data",DEFAULT_DATA_MODE);
  if (!DATA_MODES.contains(mode)) {
    fatal("System Property 'data' is not valid for this tool: " + mode);
  }
  try {
    if (DATA_MODE_FILES.equals(mode)) {
      if (0 < args.length) {
        info("POSTing files to " + u + "..");
        final int posted=t.postFiles(args,0);
      }
    }
 else     if (DATA_MODE_ARGS.equals(mode)) {
      if (0 < args.length) {
        info("POSTing args to " + u + "..");
        for (        String a : args) {
          final StringWriter sw=new StringWriter();
          t.postData(new StringReader(a),sw);
          warnIfNotExpectedResponse(sw.toString(),SOLR_OK_RESPONSE_EXCERPT);
        }
      }
    }
 else     if (DATA_MODE_STDIN.equals(mode)) {
      info("POSTing stdin to " + u + "..");
      final StringWriter sw=new StringWriter();
      t.postData(new InputStreamReader(System.in,POST_ENCODING),sw);
      warnIfNotExpectedResponse(sw.toString(),SOLR_OK_RESPONSE_EXCERPT);
    }
    if ("yes".equals(System.getProperty("commit",DEFAULT_COMMIT))) {
      info("COMMITting Solr index changes..");
      final StringWriter sw=new StringWriter();
      t.commit(sw);
      warnIfNotExpectedResponse(sw.toString(),SOLR_OK_RESPONSE_EXCERPT);
    }
  }
 catch (  IOException ioe) {
    fatal("Unexpected IOException " + ioe);
  }
}
