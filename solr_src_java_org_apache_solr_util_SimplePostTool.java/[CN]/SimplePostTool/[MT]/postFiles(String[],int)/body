{
  int filesPosted=0;
  for (int j=startIndexInArgs; j < args.length; j++) {
    File srcFile=new File(args[j]);
    final StringWriter sw=new StringWriter();
    if (srcFile.canRead()) {
      info("POSTing file " + srcFile.getName());
      postFile(srcFile,sw);
      filesPosted++;
      warnIfNotExpectedResponse(sw.toString(),SOLR_OK_RESPONSE_EXCERPT);
    }
 else {
      warn("Cannot read input file: " + srcFile);
    }
  }
  return filesPosted;
}
