{
  HashMap<String,List<PluginInfo>> chains=new HashMap<String,List<PluginInfo>>();
  NodeList nodes=(NodeList)evaluate("updateRequestProcessorChain",XPathConstants.NODESET);
  if (nodes != null) {
    boolean requireName=nodes.getLength() > 1;
    for (int i=0; i < nodes.getLength(); i++) {
      Node node=nodes.item(i);
      String name=DOMUtil.getAttr(node,"name",requireName ? "[solrconfig.xml] updateRequestProcessorChain" : null);
      boolean isDefault="true".equals(DOMUtil.getAttr(node,"default",null));
      XPath xpath=getXPath();
      try {
        NodeList nl=(NodeList)xpath.evaluate("processor",node,XPathConstants.NODESET);
        if ((nl.getLength() < 1)) {
          throw new RuntimeException("updateRequestProcessorChain require at least one processor");
        }
        ArrayList<PluginInfo> result=new ArrayList<PluginInfo>();
        for (int j=0; j < nl.getLength(); j++) {
          PluginInfo pluginInfo=new PluginInfo(nl.item(j),"[solrconfig.xml] processor",false,true);
          if (pluginInfo.isEnabled())           result.add(pluginInfo);
        }
        chains.put(name,result);
        if (isDefault || nodes.getLength() == 1)         chains.put(null,result);
      }
 catch (      XPathExpressionException e) {
        throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error reading processors",e,false);
      }
    }
  }
  return chains.isEmpty() ? Collections.<String,List<PluginInfo>>emptyMap() : Collections.unmodifiableMap(chains);
}
