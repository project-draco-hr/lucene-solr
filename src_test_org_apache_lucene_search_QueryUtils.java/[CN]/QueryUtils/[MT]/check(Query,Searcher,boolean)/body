{
  try {
    check(q1);
    if (s != null) {
      if (s instanceof IndexSearcher) {
        IndexSearcher is=(IndexSearcher)s;
        checkFirstSkipTo(q1,is);
        checkSkipTo(q1,is);
        if (wrap) {
          check(q1,wrapUnderlyingReader(is,-1),false);
          check(q1,wrapUnderlyingReader(is,0),false);
          check(q1,wrapUnderlyingReader(is,+1),false);
        }
      }
      if (wrap) {
        check(q1,wrapSearcher(s,-1),false);
        check(q1,wrapSearcher(s,0),false);
        check(q1,wrapSearcher(s,+1),false);
      }
      checkExplanations(q1,s);
      checkSerialization(q1,s);
      Query q2=(Query)q1.clone();
      checkEqual(s.rewrite(q1),s.rewrite(q2));
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
