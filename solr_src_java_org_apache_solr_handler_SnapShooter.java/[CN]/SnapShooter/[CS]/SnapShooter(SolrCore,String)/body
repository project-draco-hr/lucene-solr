{
  solrCore=core;
  if (location == null)   snapDir=core.getDataDir();
 else {
    File base=new File(core.getCoreDescriptor().getInstanceDir());
    snapDir=org.apache.solr.common.util.FileUtils.resolvePath(base,location).getAbsolutePath();
    File dir=new File(snapDir);
    if (!dir.exists())     dir.mkdirs();
  }
  lockFactory=new SimpleFSLockFactory(snapDir);
}
