{
  final String testfile="_123.test";
  IOContext context=new IOContext(new FlushInfo(0,512 * 1024 * 1024));
  Directory dir=new NRTCachingDirectory(newFSDirectory(createTempDir()),2.0,25.0);
  IndexOutput out=dir.createOutput(testfile,context);
  byte[] bytes=new byte[512];
  for (int i=0; i < 1024 * 1024; i++) {
    out.writeBytes(bytes,0,bytes.length);
  }
  out.close();
  SegmentInfo si=newSegmentInfo(dir,"_123");
  si.getCodec().compoundFormat().write(dir,si,Collections.singleton(testfile),context);
  dir.close();
}
