{
  IndexReader.unlock(spellIndex);
  IndexWriter writer=new IndexWriter(spellIndex,new WhitespaceAnalyzer(),!IndexReader.indexExists(spellIndex));
  writer.setMergeFactor(300);
  writer.setMaxBufferedDocs(150);
  Iterator iter=dict.getWordsIterator();
  while (iter.hasNext()) {
    String word=(String)iter.next();
    int len=word.length();
    if (len < 3) {
      continue;
    }
    if (this.exist(word)) {
      continue;
    }
    Document doc=createDocument(word,getMin(len),getMax(len));
    writer.addDocument(doc);
  }
  writer.optimize();
  writer.close();
  if (reader != null) {
    reader.close();
    reader=null;
  }
  searcher.close();
  searcher=new IndexSearcher(this.spellIndex);
}
