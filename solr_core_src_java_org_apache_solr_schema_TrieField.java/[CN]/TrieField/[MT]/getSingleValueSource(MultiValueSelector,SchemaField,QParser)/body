{
  if (!field.multiValued()) {
    return getValueSource(field,parser);
  }
  if (!field.hasDocValues()) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"docValues='true' is required to select '" + choice.toString() + "' value from multivalued field ("+ field.getName()+ ") at query time");
  }
  SortedSetSelector.Type selectorType=choice.getSortedSetSelectorType();
  if (null == selectorType) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,choice.toString() + " is not a supported option for picking a single value" + " from the multivalued field: "+ field.getName()+ " (type: "+ this.getTypeName()+ ")");
  }
  return getSingleValueSource(selectorType,field);
}
