{
  String s=val.toString();
  try {
switch (type) {
case INTEGER:
      LegacyNumericUtils.intToPrefixCoded(Integer.parseInt(s),0,result);
    break;
case FLOAT:
  LegacyNumericUtils.intToPrefixCoded(NumericUtils.floatToSortableInt(Float.parseFloat(s)),0,result);
break;
case LONG:
LegacyNumericUtils.longToPrefixCoded(Long.parseLong(s),0,result);
break;
case DOUBLE:
LegacyNumericUtils.longToPrefixCoded(NumericUtils.doubleToSortableLong(Double.parseDouble(s)),0,result);
break;
case DATE:
LegacyNumericUtils.longToPrefixCoded(DateMathParser.parseMath(null,s).getTime(),0,result);
break;
default :
throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unknown type for trie field: " + type);
}
}
 catch (NumberFormatException nfe) {
throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Invalid Number: " + val);
}
}
