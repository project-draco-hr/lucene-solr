{
  String s=val.toString();
  try {
switch (type) {
case INTEGER:
      NumericUtils.intToPrefixCodedBytes(Integer.parseInt(s),0,result);
    break;
case FLOAT:
  NumericUtils.intToPrefixCodedBytes(NumericUtils.floatToSortableInt(Float.parseFloat(s)),0,result);
break;
case LONG:
NumericUtils.longToPrefixCodedBytes(Long.parseLong(s),0,result);
break;
case DOUBLE:
NumericUtils.longToPrefixCodedBytes(NumericUtils.doubleToSortableLong(Double.parseDouble(s)),0,result);
break;
case DATE:
NumericUtils.longToPrefixCodedBytes(dateField.parseMath(null,s).getTime(),0,result);
break;
default :
throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unknown type for trie field: " + type);
}
}
 catch (NumberFormatException nfe) {
throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Invalid Number: " + val);
}
}
