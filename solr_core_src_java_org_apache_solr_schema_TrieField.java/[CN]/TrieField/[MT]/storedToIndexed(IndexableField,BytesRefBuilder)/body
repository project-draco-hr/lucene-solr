{
  final Number val=f.numericValue();
  if (val != null) {
switch (type) {
case INTEGER:
      LegacyNumericUtils.intToPrefixCoded(val.intValue(),0,bytes);
    break;
case FLOAT:
  LegacyNumericUtils.intToPrefixCoded(LegacyNumericUtils.floatToSortableInt(val.floatValue()),0,bytes);
break;
case LONG:
case DATE:
LegacyNumericUtils.longToPrefixCoded(val.longValue(),0,bytes);
break;
case DOUBLE:
LegacyNumericUtils.longToPrefixCoded(LegacyNumericUtils.doubleToSortableLong(val.doubleValue()),0,bytes);
break;
default :
throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unknown type for trie field: " + f.name());
}
}
 else {
throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Invalid field contents: " + f.name());
}
}
