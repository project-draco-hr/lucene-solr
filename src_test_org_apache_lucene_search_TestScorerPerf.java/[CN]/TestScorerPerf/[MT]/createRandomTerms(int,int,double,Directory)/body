{
  int[] freq=new int[nTerms];
  for (int i=0; i < nTerms; i++) {
    int f=(nTerms + 1) - i;
    freq[i]=(int)Math.ceil(Math.pow(f,power));
  }
  IndexWriter iw=new IndexWriter(dir,new WhitespaceAnalyzer(),true);
  iw.setMaxBufferedDocs(123);
  for (int i=0; i < nDocs; i++) {
    Document d=new Document();
    for (int j=0; j < nTerms; j++) {
      if (r.nextInt(freq[j]) == 0) {
        d.add(new Field("f",Character.toString((char)j),Field.Store.NO,Field.Index.UN_TOKENIZED));
      }
    }
    iw.addDocument(d);
  }
  iw.close();
}
