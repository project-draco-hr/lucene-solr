{
  Map<String,String> map=new HashMap<String,String>();
  int numTerms=atLeast(50);
  for (int i=0; i < numTerms; i++) {
    String randomRealisticUnicodeString=_TestUtil.randomRealisticUnicodeString(random());
    if (randomRealisticUnicodeString.length() > 0) {
      String value=_TestUtil.randomSimpleString(random());
      map.put(randomRealisticUnicodeString,value.isEmpty() ? "a" : value);
    }
  }
  if (map.isEmpty()) {
    map.put("booked","books");
  }
  StemmerOverrideFilter.Builder builder=new StemmerOverrideFilter.Builder(random().nextBoolean());
  Set<Entry<String,String>> entrySet=map.entrySet();
  for (  Entry<String,String> entry : entrySet) {
    builder.add(entry.getKey(),entry.getValue());
  }
  StemmerOverrideMap build=builder.build();
  for (  Entry<String,String> entry : entrySet) {
    if (random().nextBoolean()) {
      Tokenizer tokenizer=new KeywordTokenizer(new StringReader(entry.getKey()));
      TokenStream stream=new PorterStemFilter(new StemmerOverrideFilter(tokenizer,build));
      assertTokenStreamContents(stream,new String[]{entry.getValue()});
    }
  }
}
