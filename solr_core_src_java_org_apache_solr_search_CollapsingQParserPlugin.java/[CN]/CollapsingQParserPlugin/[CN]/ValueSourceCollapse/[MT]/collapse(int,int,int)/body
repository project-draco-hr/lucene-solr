{
  if (needsScores || cscore) {
    this.score=scorer.score();
    this.collapseScore.score=score;
  }
  float val=functionValues.floatVal(contextDoc);
  if (ord > -1) {
    if (comp.test(val,ordVals[ord])) {
      ords[ord]=globalDoc;
      ordVals[ord]=val;
      if (needsScores) {
        scores[ord]=score;
      }
    }
  }
 else   if (this.collapsedSet.fastGet(globalDoc)) {
  }
 else   if (this.nullPolicy == CollapsingPostFilter.NULL_POLICY_COLLAPSE) {
    if (comp.test(val,nullVal)) {
      nullVal=val;
      nullDoc=globalDoc;
      if (needsScores) {
        nullScore=score;
      }
    }
  }
 else   if (this.nullPolicy == CollapsingPostFilter.NULL_POLICY_EXPAND) {
    this.collapsedSet.fastSet(globalDoc);
    if (needsScores) {
      nullScores.add(score);
    }
  }
}
