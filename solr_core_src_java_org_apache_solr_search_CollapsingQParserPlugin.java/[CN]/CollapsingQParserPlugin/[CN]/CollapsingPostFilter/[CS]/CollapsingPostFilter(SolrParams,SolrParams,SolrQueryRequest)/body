{
  this.cacheId=new Object();
  this.field=localParams.get("field");
  this.solrParams=params;
  String nPolicy=localParams.get("nullPolicy",NULL_IGNORE);
  if (nPolicy.equals(NULL_IGNORE)) {
    this.nullPolicy=NULL_POLICY_IGNORE;
  }
 else   if (nPolicy.equals(NULL_COLLAPSE)) {
    this.nullPolicy=NULL_POLICY_COLLAPSE;
  }
 else   if (nPolicy.equals((NULL_EXPAND))) {
    this.nullPolicy=NULL_POLICY_EXPAND;
  }
 else {
    throw new IOException("Invalid nullPolicy:" + nPolicy);
  }
  this.searcher=request.getSearcher();
  this.leafCount=searcher.getTopReaderContext().leaves().size();
  this.maxDoc=searcher.maxDoc();
  this.schema=searcher.getSchema();
  SchemaField schemaField=schema.getField(this.field);
  if (schemaField.hasDocValues()) {
    this.docValues=searcher.getAtomicReader().getSortedDocValues(this.field);
  }
 else {
    this.docValues=FieldCache.DEFAULT.getTermsIndex(searcher.getAtomicReader(),this.field);
  }
  this.max=localParams.get("max");
  if (this.max != null) {
    this.fieldType=searcher.getSchema().getField(this.max).getType();
  }
  this.min=localParams.get("min");
  if (this.min != null) {
    this.fieldType=searcher.getSchema().getField(this.min).getType();
  }
  this.context=request.getContext();
}
