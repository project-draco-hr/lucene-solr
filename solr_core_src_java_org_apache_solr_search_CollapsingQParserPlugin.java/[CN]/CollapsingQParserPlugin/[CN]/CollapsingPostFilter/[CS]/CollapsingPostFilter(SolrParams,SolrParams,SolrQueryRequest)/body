{
  this.collapseField=localParams.get("field");
  if (this.collapseField == null) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Required 'field' param is missing.");
  }
  this.max=localParams.get("max");
  this.min=localParams.get("min");
  this.hint=localParams.get("hint");
  this.size=localParams.getInt("size",100000);
  if (this.min != null || this.max != null) {
    this.needsScores=needsScores(params);
  }
  String nPolicy=localParams.get("nullPolicy",NULL_IGNORE);
  if (nPolicy.equals(NULL_IGNORE)) {
    this.nullPolicy=NULL_POLICY_IGNORE;
  }
 else   if (nPolicy.equals(NULL_COLLAPSE)) {
    this.nullPolicy=NULL_POLICY_COLLAPSE;
  }
 else   if (nPolicy.equals((NULL_EXPAND))) {
    this.nullPolicy=NULL_POLICY_EXPAND;
  }
 else {
    throw new IOException("Invalid nullPolicy:" + nPolicy);
  }
}
