{
  this.maxDoc=maxDoc;
  this.contexts=new LeafReaderContext[segments];
  this.collapsedSet=new FixedBitSet(maxDoc);
  this.nullValue=nullValue;
  this.nullPolicy=nullPolicy;
  if (nullPolicy == CollapsingPostFilter.NULL_POLICY_EXPAND) {
    nullScores=new FloatArrayList();
  }
  this.cmap=new IntLongHashMap(size);
  this.field=field;
  if (boostDocsMap != null) {
    this.boosts=true;
    this.boostDocs=new IntArrayList();
    this.boostKeys=new IntArrayList();
    int[] bd=new int[boostDocsMap.size()];
    Iterator<IntIntCursor> it=boostDocsMap.iterator();
    int index=-1;
    while (it.hasNext()) {
      IntIntCursor cursor=it.next();
      bd[++index]=cursor.key;
    }
    Arrays.sort(bd);
    this.mergeBoost=new MergeBoost(bd);
    this.boosts=true;
  }
}
