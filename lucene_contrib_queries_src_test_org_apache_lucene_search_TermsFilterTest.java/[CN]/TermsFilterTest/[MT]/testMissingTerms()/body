{
  String fieldName="field1";
  Directory rd=newDirectory();
  RandomIndexWriter w=new RandomIndexWriter(random,rd);
  for (int i=0; i < 100; i++) {
    Document doc=new Document();
    int term=i * 10;
    doc.add(newField(fieldName,"" + term,Field.Store.YES,Field.Index.NOT_ANALYZED));
    w.addDocument(doc);
  }
  IndexReader mainReader=w.getReader();
  w.close();
  IndexReader reader=SlowMultiReaderWrapper.wrap(mainReader);
  TermsFilter tf=new TermsFilter();
  tf.addTerm(new Term(fieldName,"19"));
  OpenBitSet bits=(OpenBitSet)tf.getDocIdSet(reader);
  assertEquals("Must match nothing",0,bits.cardinality());
  tf.addTerm(new Term(fieldName,"20"));
  bits=(OpenBitSet)tf.getDocIdSet(reader);
  assertEquals("Must match 1",1,bits.cardinality());
  tf.addTerm(new Term(fieldName,"10"));
  bits=(OpenBitSet)tf.getDocIdSet(reader);
  assertEquals("Must match 2",2,bits.cardinality());
  tf.addTerm(new Term(fieldName,"00"));
  bits=(OpenBitSet)tf.getDocIdSet(reader);
  assertEquals("Must match 2",2,bits.cardinality());
  mainReader.close();
  rd.close();
}
