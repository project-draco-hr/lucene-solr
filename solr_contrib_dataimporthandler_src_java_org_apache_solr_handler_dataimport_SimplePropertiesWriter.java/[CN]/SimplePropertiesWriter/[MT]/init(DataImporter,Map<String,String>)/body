{
  if (params.get(FILENAME) != null) {
    filename=params.get(FILENAME);
  }
 else   if (dataImporter.getHandlerName() != null) {
    filename=dataImporter.getHandlerName() + ".properties";
  }
 else {
    filename="dataimport.properties";
  }
  findDirectory(dataImporter,params);
  if (params.get(LOCALE) != null) {
    String localeStr=params.get(LOCALE);
    for (    Locale l : Locale.getAvailableLocales()) {
      if (localeStr.equals(l.getDisplayName(Locale.ROOT))) {
        locale=l;
        break;
      }
    }
    if (locale == null) {
      throw new DataImportHandlerException(SEVERE,"Unsupported locale for PropertWriter: " + localeStr);
    }
  }
 else {
    locale=Locale.ROOT;
  }
  if (params.get(DATE_FORMAT) != null) {
    dateFormat=new SimpleDateFormat(params.get(DATE_FORMAT),locale);
  }
 else {
    dateFormat=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",locale);
  }
}
