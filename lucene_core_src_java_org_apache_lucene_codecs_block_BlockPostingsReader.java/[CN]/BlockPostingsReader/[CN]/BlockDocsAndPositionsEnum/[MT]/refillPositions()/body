{
  if (DEBUG) {
    System.out.println("      refillPositions");
  }
  if (posIn.getFilePointer() == lastPosBlockFP) {
    if (DEBUG) {
      System.out.println("        vInt pos block @ fp=" + posIn.getFilePointer() + " hasPayloads="+ indexHasPayloads+ " hasOffsets="+ indexHasOffsets);
    }
    final int count=posIn.readVInt();
    int payloadLength=0;
    for (int i=0; i < count; i++) {
      int code=posIn.readVInt();
      if (indexHasPayloads) {
        if ((code & 1) != 0) {
          payloadLength=posIn.readVInt();
        }
        posDeltaBuffer[i]=code >>> 1;
        if (payloadLength != 0) {
          posIn.seek(posIn.getFilePointer() + payloadLength);
        }
      }
 else {
        posDeltaBuffer[i]=code;
      }
      if (indexHasOffsets) {
        posIn.readVInt();
        posIn.readVInt();
      }
    }
  }
 else {
    if (DEBUG) {
      System.out.println("        bulk pos block @ fp=" + posIn.getFilePointer());
    }
    readBlock(posIn,encoded,encodedBuffer,posDeltaBuffer);
  }
}
