{
  while (true) {
    if (docUpto == docFreq) {
      return doc=NO_MORE_DOCS;
    }
    if (docBufferUpto == BLOCK_SIZE) {
      refillDocs();
    }
    accum+=docDeltaBuffer[docBufferUpto];
    docUpto++;
    if (liveDocs == null || liveDocs.get(accum)) {
      doc=accum;
      freq=freqBuffer[docBufferUpto];
      docBufferUpto++;
      return doc;
    }
    docBufferUpto++;
  }
}
