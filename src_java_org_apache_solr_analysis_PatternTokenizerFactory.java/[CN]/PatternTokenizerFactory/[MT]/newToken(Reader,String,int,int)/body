{
  Token token;
  if (reader instanceof CharStream) {
    CharStream stream=(CharStream)reader;
    token=new Token(text,stream.correctOffset(start),stream.correctOffset(end));
  }
 else {
    token=new Token(text,start,end);
  }
  return token;
}
