{
  int length=100;
  byte[] buffer=new byte[length];
  UnsafeByteArrayOutputStream ubaos=new UnsafeByteArrayOutputStream(buffer);
  for (int i=0; i < 100; i++) {
    ubaos.write((byte)i);
  }
  int length2=10;
  byte[] buffer2=new byte[length2];
  for (int i=0; i < length2; i++) {
    buffer2[i]=(byte)(8 + i);
  }
  ubaos.write(buffer2);
  byte[] result=ubaos.toByteArray();
  assertEquals(length + length2,ubaos.length());
  for (int j=0; j < length; ++j) {
    assertEquals(result[j],j);
  }
  for (int j=0; j < length2; ++j) {
    assertEquals(result[j + length],buffer2[j]);
  }
}
