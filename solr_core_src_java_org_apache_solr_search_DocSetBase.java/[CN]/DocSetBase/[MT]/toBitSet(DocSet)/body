{
  if (set instanceof DocSetBase) {
    return ((DocSetBase)set).getBits();
  }
 else {
    FixedBitSet bits=new FixedBitSet(64);
    for (DocIterator iter=set.iterator(); iter.hasNext(); ) {
      int nextDoc=iter.nextDoc();
      bits=FixedBitSet.ensureCapacity(bits,nextDoc);
      bits.set(nextDoc);
    }
    return bits;
  }
}
