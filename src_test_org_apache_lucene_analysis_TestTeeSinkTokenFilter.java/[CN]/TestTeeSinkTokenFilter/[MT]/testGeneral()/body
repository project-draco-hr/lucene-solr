{
  final TeeSinkTokenFilter source=new TeeSinkTokenFilter(new WhitespaceTokenizer(new StringReader(buffer1.toString())));
  final TokenStream sink1=source.newSinkTokenStream();
  final TokenStream sink2=source.newSinkTokenStream(theFilter);
  int i=0;
  TermAttribute termAtt=(TermAttribute)source.getAttribute(TermAttribute.class);
  while (source.incrementToken()) {
    assertEquals(tokens1[i],termAtt.term());
    i++;
  }
  assertEquals(tokens1.length,i);
  i=0;
  termAtt=(TermAttribute)sink1.getAttribute(TermAttribute.class);
  while (sink1.incrementToken()) {
    assertEquals(tokens1[i],termAtt.term());
    i++;
  }
  assertEquals(tokens1.length,i);
  i=0;
  termAtt=(TermAttribute)sink2.getAttribute(TermAttribute.class);
  while (sink2.incrementToken()) {
    assertTrue(termAtt.term().equalsIgnoreCase("The"));
    i++;
  }
  assertEquals("there should be two times 'the' in the stream",2,i);
}
