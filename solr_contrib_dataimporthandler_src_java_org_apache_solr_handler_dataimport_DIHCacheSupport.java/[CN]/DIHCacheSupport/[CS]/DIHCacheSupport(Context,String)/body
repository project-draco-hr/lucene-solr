{
  this.cacheImplName=cacheImplName;
  String where=context.getEntityAttribute("where");
  String cacheKey=context.getEntityAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY);
  String lookupKey=context.getEntityAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY);
  if (cacheKey != null && lookupKey == null) {
    throw new DataImportHandlerException(DataImportHandlerException.SEVERE,"'cacheKey' is specified for the entity " + context.getEntityAttribute("name") + " but 'cacheLookup' is missing");
  }
  if (where == null && cacheKey == null) {
    cacheDoKeyLookup=false;
  }
 else {
    if (where != null) {
      String[] splits=where.split("=");
      cacheKey=splits[0];
      cacheForeignKey=splits[1].trim();
    }
 else {
      cacheForeignKey=lookupKey;
    }
    cacheDoKeyLookup=true;
  }
  context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY,cacheKey,Context.SCOPE_ENTITY);
  context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY,cacheForeignKey,Context.SCOPE_ENTITY);
  context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,"true",Context.SCOPE_ENTITY);
  context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY,"false",Context.SCOPE_ENTITY);
}
