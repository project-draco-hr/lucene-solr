{
  Terms terms=context.reader().terms(field);
  if (terms == null) {
    return null;
  }
  ArrayList<Spans> subSpans=new ArrayList<>(clauses.size());
  SpanCollector subSpanCollector=inOrder ? collector.bufferedCollector() : collector;
  for (  SpanWeight w : subWeights) {
    Spans subSpan=w.getSpans(context,acceptDocs,subSpanCollector);
    if (subSpan != null) {
      subSpans.add(subSpan);
    }
 else {
      return null;
    }
  }
  return (!inOrder) ? new NearSpansUnordered(SpanNearQuery.this,subSpans) : new NearSpansOrdered(SpanNearQuery.this,subSpans,collector);
}
