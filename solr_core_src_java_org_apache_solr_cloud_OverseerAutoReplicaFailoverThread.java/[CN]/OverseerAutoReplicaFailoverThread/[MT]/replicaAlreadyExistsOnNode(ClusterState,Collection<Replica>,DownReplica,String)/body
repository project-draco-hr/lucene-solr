{
  if (replicas != null) {
    log.debug("check if replica already exists on node using replicas {}",getNames(replicas));
    for (    Replica replica : replicas) {
      if (!replica.getName().equals(badReplica.replica.getName()) && replica.getStr(ZkStateReader.BASE_URL_PROP).equals(baseUrl) && clusterState.liveNodesContain(replica.getNodeName())&& (replica.getStr(ZkStateReader.STATE_PROP).equals(ZkStateReader.ACTIVE) || replica.getStr(ZkStateReader.STATE_PROP).equals(ZkStateReader.DOWN) || replica.getStr(ZkStateReader.STATE_PROP).equals(ZkStateReader.RECOVERING))) {
        log.debug("replica already exists on node, bad replica={}, existing replica={}, node name={}",badReplica.replica.getName(),replica.getName(),replica.getNodeName());
        return true;
      }
    }
  }
  log.debug("replica does not yet exist on node: {}",baseUrl);
  return false;
}
