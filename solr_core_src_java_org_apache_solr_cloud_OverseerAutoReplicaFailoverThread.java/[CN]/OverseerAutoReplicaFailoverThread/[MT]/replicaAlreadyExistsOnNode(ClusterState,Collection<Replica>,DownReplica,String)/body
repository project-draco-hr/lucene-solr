{
  if (replicas != null) {
    log.debug("check if replica already exists on node using replicas {}",getNames(replicas));
    for (    Replica replica : replicas) {
      final Replica.State state=replica.getState();
      if (!replica.getName().equals(badReplica.replica.getName()) && replica.getStr(ZkStateReader.BASE_URL_PROP).equals(baseUrl) && clusterState.liveNodesContain(replica.getNodeName())&& (state == Replica.State.ACTIVE || state == Replica.State.DOWN || state == Replica.State.RECOVERING)) {
        log.debug("replica already exists on node, bad replica={}, existing replica={}, node name={}",badReplica.replica.getName(),replica.getName(),replica.getNodeName());
        return true;
      }
    }
  }
  log.debug("replica does not yet exist on node: {}",baseUrl);
  return false;
}
