{
  this.zkStateReader=zkStateReader;
  this.workLoopDelay=config.getAutoReplicaFailoverWorkLoopDelay();
  this.waitAfterExpiration=config.getAutoReplicaFailoverWaitAfterExpiration();
  int badNodeExpiration=config.getAutoReplicaFailoverBadNodeExpiration();
  log.debug("Starting " + this.getClass().getSimpleName() + " autoReplicaFailoverWorkLoopDelay={} autoReplicaFailoverWaitAfterExpiration={} autoReplicaFailoverBadNodeExpiration={}",workLoopDelay,waitAfterExpiration,badNodeExpiration);
  baseUrlForBadNodes=CacheBuilder.newBuilder().concurrencyLevel(1).expireAfterWrite(badNodeExpiration,TimeUnit.MILLISECONDS).build();
  updateExecutor=updateShardHandler.getUpdateExecutor();
}
