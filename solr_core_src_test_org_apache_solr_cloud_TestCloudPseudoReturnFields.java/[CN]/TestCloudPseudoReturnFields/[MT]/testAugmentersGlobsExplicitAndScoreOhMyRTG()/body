{
  Random random=random();
  final List<String> fl=Arrays.asList("id","[explain]","score","val_*","subj*");
  final int iters=atLeast(random,10);
  for (int i=0; i < iters; i++) {
    Collections.shuffle(fl,random);
    final SolrParams singleFl=params("fl",StringUtils.join(fl.toArray(),','));
    final ModifiableSolrParams multiFl=params();
    for (    String item : fl) {
      multiFl.add("fl",item);
    }
    for (    String id : Arrays.asList("42","99")) {
      for (      SolrParams params : Arrays.asList(singleFl,multiFl)) {
        SolrDocument doc=getRandClient(random()).getById(id,params);
        String msg=id + ": " + params+ " => "+ doc;
        assertEquals(msg,3,doc.size());
        assertTrue(msg,doc.getFieldValue("id") instanceof String);
        assertTrue(msg,doc.getFieldValue("val_i") instanceof Integer);
        assertEquals(msg,1,doc.getFieldValue("val_i"));
        assertTrue(msg,doc.getFieldValue("subject") instanceof String);
      }
    }
  }
}
