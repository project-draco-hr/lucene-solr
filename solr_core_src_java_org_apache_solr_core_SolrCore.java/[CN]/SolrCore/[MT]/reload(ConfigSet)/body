{
  solrCoreState.increfSolrCoreState();
  SolrCore currentCore;
  boolean indexDirChange=!getNewIndexDir().equals(getIndexDir());
  if (indexDirChange) {
    currentCore=null;
  }
 else {
    currentCore=this;
  }
  SolrCore core=new SolrCore(getName(),getDataDir(),coreConfig.getSolrConfig(),coreConfig.getIndexSchema(),coreDescriptor,updateHandler,this.solrDelPolicy,currentCore);
  core.solrDelPolicy=this.solrDelPolicy;
  core.getUpdateHandler().getSolrCoreState().newIndexWriter(core,false);
  core.getSearcher(true,false,null,true);
  return core;
}
