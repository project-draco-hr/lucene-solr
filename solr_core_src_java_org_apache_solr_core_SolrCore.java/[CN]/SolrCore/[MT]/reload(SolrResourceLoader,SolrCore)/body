{
  SolrConfig config=new SolrConfig(resourceLoader,getSolrConfig().getName(),null);
  IndexSchema schema=new IndexSchema(config,getSchema().getResourceName(),null);
  solrCoreState.increfSolrCoreState();
  if (!getNewIndexDir().equals(getIndexDir())) {
    prev=null;
  }
  SolrCore core=new SolrCore(getName(),getDataDir(),config,schema,coreDescriptor,updateHandler,this.solrDelPolicy,prev);
  core.solrDelPolicy=this.solrDelPolicy;
  core.getUpdateHandler().getSolrCoreState().newIndexWriter(core,false);
  core.getSearcher(true,false,null,true);
  return core;
}
