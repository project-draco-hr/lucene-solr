{
  Class clazz=null;
  if (msg == null)   msg="SolrCore Object";
  try {
    clazz=getResourceLoader().findClass(className);
    if (class1 != null && !class1.isAssignableFrom(clazz)) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error Instantiating " + msg + ", "+ className+ " is not a "+ class1.getName());
    }
    Constructor justSolrCoreCon=null;
    Constructor[] cons=clazz.getConstructors();
    for (    Constructor con : cons) {
      Class[] types=con.getParameterTypes();
      if (types.length == 2 && types[0] == SolrCore.class && types[1] == UpdateHandler.class) {
        return (T)con.newInstance(this,updateHandler);
      }
    }
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error Instantiating " + msg + ", "+ className+ " could not find proper constructor for "+ class1.getName());
  }
 catch (  SolrException e) {
    throw e;
  }
catch (  Exception e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error Instantiating " + msg + ", "+ className+ " failed to instantiate "+ class1.getName(),e);
  }
}
