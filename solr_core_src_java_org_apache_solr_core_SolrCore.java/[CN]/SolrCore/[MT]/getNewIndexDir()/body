{
  String result=dataDir + "index/";
  File propsFile=new File(dataDir + "index.properties");
  if (propsFile.exists()) {
    Properties p=new Properties();
    InputStream is=null;
    try {
      is=new FileInputStream(propsFile);
      p.load(is);
    }
 catch (    IOException e) {
    }
 finally {
      IOUtils.closeQuietly(is);
    }
    String s=p.getProperty("index");
    if (s != null && s.trim().length() > 0) {
      File tmp=new File(dataDir + s);
      if (tmp.exists() && tmp.isDirectory())       result=dataDir + s;
    }
  }
  if (!result.equals(lastNewIndexDir)) {
    log.warn("New index directory detected: old=" + lastNewIndexDir + " new="+ result);
  }
  lastNewIndexDir=result;
  return result;
}
