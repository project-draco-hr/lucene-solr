{
  if (handler == null) {
    String msg="Null Request Handler '" + req.getParams().get(CommonParams.QT) + "'";
    if (log.isWarnEnabled())     log.warn(logid + msg + ":"+ req);
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,msg);
  }
  preDecorateResponse(req,rsp);
  handler.handleRequest(req,rsp);
  postDecorateResponse(handler,req,rsp);
  if (log.isInfoEnabled() && rsp.getToLog().size() > 0) {
    log.info(rsp.getToLogAsString(logid));
  }
}
