{
  solrCoreState.increfSolrCoreState();
  boolean indexDirChange=!getNewIndexDir().equals(getIndexDir());
  if (indexDirChange || !coreConfig.getSolrConfig().nrtMode) {
    prev=null;
  }
  SolrCore core=new SolrCore(getName(),getDataDir(),coreConfig.getSolrConfig(),coreConfig.getIndexSchema(),coreDescriptor,updateHandler,this.solrDelPolicy,prev);
  core.solrDelPolicy=this.solrDelPolicy;
  core.getUpdateHandler().getSolrCoreState().newIndexWriter(core,false);
  core.getSearcher(true,false,null,true);
  return core;
}
