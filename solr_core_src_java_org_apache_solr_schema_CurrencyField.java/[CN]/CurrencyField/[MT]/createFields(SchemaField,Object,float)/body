{
  CurrencyValue value=CurrencyValue.parse(externalVal.toString(),defaultCurrency);
  IndexableField[] f=new IndexableField[field.stored() ? 3 : 2];
  f[0]=getAmountField(field).createField(String.valueOf(value.getAmount()),boost);
  f[1]=getCurrencyField(field).createField(value.getCurrencyCode(),boost);
  if (field.stored()) {
    org.apache.lucene.document.FieldType customType=new org.apache.lucene.document.FieldType();
    customType.setStored(true);
    String storedValue=externalVal.toString().trim();
    if (storedValue.indexOf(",") < 0) {
      storedValue+="," + defaultCurrency;
    }
    f[2]=createField(field.getName(),storedValue,customType,boost);
  }
  return f;
}
