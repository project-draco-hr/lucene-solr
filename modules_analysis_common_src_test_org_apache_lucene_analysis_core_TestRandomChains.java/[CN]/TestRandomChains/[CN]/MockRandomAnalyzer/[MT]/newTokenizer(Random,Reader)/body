{
  TokenizerSpec spec=new TokenizerSpec();
  while (spec.tokenizer == null) {
    final Constructor<? extends Tokenizer> ctor=tokenizers.get(random.nextInt(tokenizers.size()));
    final StringBuilder descr=new StringBuilder();
    final CheckThatYouDidntReadAnythingReaderWrapper wrapper=new CheckThatYouDidntReadAnythingReaderWrapper(reader);
    final Object args[]=newTokenizerArgs(random,wrapper,ctor.getParameterTypes());
    spec.tokenizer=createComponent(ctor,args,descr);
    if (spec.tokenizer != null) {
      if (brokenOffsetsComponents.contains(ctor.getDeclaringClass())) {
        spec.offsetsAreCorrect=false;
      }
      spec.toString=descr.toString();
    }
 else {
      assertFalse(ctor.getDeclaringClass().getName() + " has read something in ctor but failed with UOE/IAE",wrapper.readSomething);
    }
  }
  return spec;
}
