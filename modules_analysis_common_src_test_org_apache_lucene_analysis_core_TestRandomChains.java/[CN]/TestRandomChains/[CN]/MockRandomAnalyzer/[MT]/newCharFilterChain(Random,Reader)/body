{
  CharFilterSpec spec=new CharFilterSpec();
  spec.reader=reader;
  StringBuilder descr=new StringBuilder();
  int numFilters=random.nextInt(3);
  for (int i=0; i < numFilters; i++) {
    boolean success=false;
    while (!success) {
      final Constructor<? extends CharStream> ctor=charfilters.get(random.nextInt(charfilters.size()));
      final Object args[]=newCharFilterArgs(random,spec.reader,ctor.getParameterTypes());
      reader=createComponent(ctor,args,descr);
      if (reader != null) {
        success=true;
        spec.reader=reader;
      }
    }
  }
  spec.toString=descr.toString();
  return spec;
}
