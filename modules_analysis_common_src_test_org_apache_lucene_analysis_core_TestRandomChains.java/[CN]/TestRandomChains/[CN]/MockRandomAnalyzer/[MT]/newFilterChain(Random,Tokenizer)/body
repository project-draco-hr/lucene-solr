{
  TokenFilterSpec spec=new TokenFilterSpec();
  spec.stream=tokenizer;
  StringBuilder descr=new StringBuilder();
  int numFilters=random.nextInt(5);
  for (int i=0; i < numFilters; i++) {
    boolean success=false;
    while (!success) {
      try {
        int idx=random.nextInt(tokenfilters.size());
        try {
          Constructor<? extends TokenFilter> c=tokenfilters.get(idx).getConstructor(Version.class,TokenStream.class);
          spec.stream=c.newInstance(TEST_VERSION_CURRENT,spec.stream);
        }
 catch (        NoSuchMethodException e) {
          Constructor<? extends TokenFilter> c=tokenfilters.get(idx).getConstructor(TokenStream.class);
          spec.stream=c.newInstance(spec.stream);
        }
        if (descr.length() > 0) {
          descr.append(",");
        }
        descr.append(tokenfilters.get(idx).toString());
        success=true;
      }
 catch (      Exception e) {
      }
    }
  }
  spec.toString=descr.toString();
  return spec;
}
