{
  String con;
  try {
    if (ServerProtocolVersion >= HTTP_1_1 || ((((Proxy_Host == null || Protocol == HTTPS) && (con=resp.getHeader("Connection")) != null) || ((Proxy_Host != null && Protocol != HTTPS) && (con=resp.getHeader("Proxy-Connection")) != null)) && Util.hasToken(con,"keep-alive"))) {
      doesKeepAlive=true;
      keepAliveUnknown=false;
      Log.write(Log.CONN,"Conn:  Keep-Alive enabled");
    }
 else     if (resp.getStatusCode() < 400) {
      keepAliveUnknown=false;
    }
    if (doesKeepAlive && ServerProtocolVersion == HTTP_1_0 && (con=resp.getHeader("Keep-Alive")) != null) {
      HttpHeaderElement max=Util.getElement(Util.parseHeader(con),"max");
      if (max != null && max.getValue() != null) {
        keepAliveReqMax=Integer.parseInt(max.getValue());
        keepAliveReqLeft=keepAliveReqMax;
        Log.write(Log.CONN,"Conn:  Max Keep-Alive requests: " + keepAliveReqMax);
      }
    }
  }
 catch (  ParseException pe) {
  }
catch (  NumberFormatException nfe) {
  }
catch (  ClassCastException cce) {
  }
}
