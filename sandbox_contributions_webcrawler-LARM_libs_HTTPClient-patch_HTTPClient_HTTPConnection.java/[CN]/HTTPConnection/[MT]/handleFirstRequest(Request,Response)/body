{
  ServerProtocolVersion=String2ProtVers(resp.getVersion());
  ServProtVersKnown=true;
  int sts=resp.getStatusCode();
  if ((Proxy_Host != null && Protocol != HTTPS) && resp.getHeader("Via") == null && sts != 407 && sts != 502 && sts != 504) {
    ServerProtocolVersion=HTTP_1_0;
  }
  Log.write(Log.CONN,"Conn:  Protocol Version established: " + ProtVers2String(ServerProtocolVersion));
  if (ServerProtocolVersion == HTTP_1_0 && (resp.getStatusCode() == 400 || resp.getStatusCode() == 500)) {
    if (input_demux != null) {
      input_demux.markForClose(resp);
    }
    input_demux=null;
    RequestProtocolVersion="HTTP/1.0";
    return false;
  }
  return true;
}
