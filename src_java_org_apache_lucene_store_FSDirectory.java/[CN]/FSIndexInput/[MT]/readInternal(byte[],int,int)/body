{
synchronized (file) {
    long position=getFilePointer();
    if (position != file.position) {
      file.seek(position);
      file.position=position;
    }
    int total=0;
    do {
      int i=file.read(b,offset + total,len - total);
      if (i == -1)       throw new IOException("read past EOF");
      file.position+=i;
      total+=i;
    }
 while (total < len);
  }
}
