{
  if (directory.exists()) {
    String[] files=directory.list(IndexFileNameFilter.getFilter());
    if (files == null)     throw new IOException("cannot read directory " + directory.getAbsolutePath() + ": list() returned null");
    for (int i=0; i < files.length; i++) {
      File file=new File(directory,files[i]);
      if (!file.delete())       throw new IOException("Cannot delete " + file);
    }
  }
  lockFactory.clearLock(IndexWriter.WRITE_LOCK_NAME);
}
