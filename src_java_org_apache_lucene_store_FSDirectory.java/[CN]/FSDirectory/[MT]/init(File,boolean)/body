{
  directory=path;
  if (LOCK_DIR == null) {
    lockDir=directory;
  }
 else {
    lockDir=new File(LOCK_DIR);
  }
  if (!lockDir.exists()) {
    if (!lockDir.mkdirs())     throw new IOException("Cannot create directory: " + lockDir.getAbsolutePath());
  }
 else   if (!lockDir.isDirectory()) {
    throw new IOException("Found regular file where directory expected: " + lockDir.getAbsolutePath());
  }
  if (create) {
    create();
  }
  if (!directory.isDirectory())   throw new IOException(path + " not a directory");
}
