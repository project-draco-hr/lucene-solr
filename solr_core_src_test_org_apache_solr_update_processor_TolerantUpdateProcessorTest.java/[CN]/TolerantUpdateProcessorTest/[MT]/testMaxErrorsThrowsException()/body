{
  ModifiableSolrParams requestParams=new ModifiableSolrParams();
  requestParams.add("maxErrors","5");
  try {
    assertAddsSucceedWithErrors("tolerant-chain-max-errors-not-set",docs,requestParams,badIds);
    fail("Expecting exception");
  }
 catch (  SolrException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("ERROR: [doc=1] Error adding field 'weight'='b' msg=For input string: \"b\""));
  }
  assertU(commit());
  assertQ(req("q","*:*"),"//result[@numFound='6']");
}
