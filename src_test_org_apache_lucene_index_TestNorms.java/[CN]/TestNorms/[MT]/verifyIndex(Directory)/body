{
  IndexReader ir=IndexReader.open(dir);
  for (int i=0; i < NUM_FIELDS; i++) {
    String field="f" + i;
    byte b[]=ir.norms(field);
    assertEquals("number of norms mismatches",numDocNorms,b.length);
    ArrayList storedNorms=(i == 1 ? modifiedNorms : norms);
    for (int j=0; j < b.length; j++) {
      float norm=Similarity.decodeNorm(b[j]);
      float norm1=((Float)storedNorms.get(j)).floatValue();
      assertEquals("stored norm value of " + field + " for doc "+ j+ " is "+ norm+ " - a mismatch!",norm,norm1,0.000001);
    }
  }
}
