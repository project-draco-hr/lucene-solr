{
  try {
    Directory directory=new RAMDirectory();
    Analyzer analyzer=new SimpleAnalyzer();
    IndexWriter writer=new IndexWriter(directory,analyzer,true,IndexWriter.MaxFieldLength.LIMITED);
    String[] docs={"a b c d e","a b c d e a b c d e","a b c d e f g h i j","a c e","e c a","a c e a c e","a c e a b c"};
    for (int j=0; j < docs.length; j++) {
      Document d=new Document();
      d.add(new Field("contents",docs[j],Field.Store.YES,Field.Index.TOKENIZED));
      writer.addDocument(d);
    }
    writer.close();
    Searcher searcher=new IndexSearcher(directory);
    String[] queries={"\"a c e\""};
    QueryParser parser=new QueryParser("contents",analyzer);
    parser.setPhraseSlop(4);
    for (int j=0; j < queries.length; j++) {
      Query query=parser.parse(queries[j]);
      System.out.println("Query: " + query.toString("contents"));
      ScoreDoc[] hits=searcher.search(query,null,docs.length).scoreDocs;
      System.out.println(hits.length + " total results");
      for (int i=0; i < hits.length && i < 10; i++) {
        Document d=searcher.doc(hits[i].doc);
        System.out.println(i + " " + hits[i].score+ " "+ d.get("contents"));
      }
    }
    searcher.close();
  }
 catch (  Exception e) {
    System.out.println(" caught a " + e.getClass() + "\n with message: "+ e.getMessage());
  }
}
