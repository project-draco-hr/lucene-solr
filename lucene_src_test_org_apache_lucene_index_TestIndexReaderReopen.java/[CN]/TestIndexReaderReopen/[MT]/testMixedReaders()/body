{
  final Directory dir1=newDirectory();
  createIndex(random,dir1,true);
  final Directory dir2=newDirectory();
  createIndex(random,dir2,true);
  final Directory dir3=newDirectory();
  createIndex(random,dir3,false);
  final Directory dir4=newDirectory();
  createIndex(random,dir4,true);
  final Directory dir5=newDirectory();
  createIndex(random,dir5,false);
  performDefaultTests(new TestReopen(){
    @Override protected void modifyIndex(    int i) throws IOException {
      TestIndexReaderReopen.modifyIndex(i,dir4);
      TestIndexReaderReopen.modifyIndex(i,dir5);
    }
    @Override protected IndexReader openReader() throws IOException {
      MultiReader mr1=new MultiReader(IndexReader.open(dir1),IndexReader.open(dir2));
      MultiReader mr2=new MultiReader(IndexReader.open(dir3),IndexReader.open(dir4));
      return new MultiReader(mr1,mr2,IndexReader.open(dir5));
    }
  }
);
  dir1.close();
  dir2.close();
  dir3.close();
  dir4.close();
  dir5.close();
}
