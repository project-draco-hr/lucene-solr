{
switch (i) {
case 0:
{
      if (VERBOSE) {
        System.out.println("TEST: modify index");
      }
      IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
      w.setInfoStream(VERBOSE ? System.out : null);
      w.deleteDocuments(new Term("field2","a11"));
      w.deleteDocuments(new Term("field2","b30"));
      w.close();
      break;
    }
case 1:
{
    IndexReader reader=IndexReader.open(dir,false);
    DefaultSimilarity sim=new DefaultSimilarity();
    reader.setNorm(4,"field1",sim.encodeNormValue(123f));
    reader.setNorm(44,"field2",sim.encodeNormValue(222f));
    reader.setNorm(44,"field4",sim.encodeNormValue(22f));
    reader.close();
    break;
  }
case 2:
{
  IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
  w.optimize();
  w.close();
  break;
}
case 3:
{
IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
w.addDocument(createDocument(101,4));
w.optimize();
w.addDocument(createDocument(102,4));
w.addDocument(createDocument(103,4));
w.close();
break;
}
case 4:
{
IndexReader reader=IndexReader.open(dir,false);
DefaultSimilarity sim=new DefaultSimilarity();
reader.setNorm(5,"field1",sim.encodeNormValue(123f));
reader.setNorm(55,"field2",sim.encodeNormValue(222f));
reader.close();
break;
}
case 5:
{
IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
w.addDocument(createDocument(101,4));
w.close();
break;
}
}
}
