{
  Random random=newRandom();
  Directory dir=newDirectory(random);
  createIndex(random,dir,false);
  IndexReader r1=IndexReader.open(dir,false);
  IndexReader r2=IndexReader.open(dir,false);
  r2.deleteDocument(0);
  r2.close();
  IndexReader r3=r1.reopen();
  assertTrue(r1 != r3);
  r1.close();
  try {
    r1.document(2);
    fail("did not hit exception");
  }
 catch (  AlreadyClosedException ace) {
  }
  r3.close();
  dir.close();
}
