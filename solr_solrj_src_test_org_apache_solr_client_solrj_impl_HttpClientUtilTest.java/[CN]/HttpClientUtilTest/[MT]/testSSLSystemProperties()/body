{
  try {
    SSLTestConfig.setSSLSystemProperties();
    assertNotNull("HTTPS scheme could not be created using the javax.net.ssl.* system properties.",HttpClientUtil.createClient(null).getConnectionManager().getSchemeRegistry().get("https"));
    System.clearProperty(HttpClientUtil.SYS_PROP_CHECK_PEER_NAME);
    assertEquals(BrowserCompatHostnameVerifier.class,getHostnameVerifier(HttpClientUtil.createClient(null)).getClass());
    System.setProperty(HttpClientUtil.SYS_PROP_CHECK_PEER_NAME,"true");
    assertEquals(BrowserCompatHostnameVerifier.class,getHostnameVerifier(HttpClientUtil.createClient(null)).getClass());
    System.setProperty(HttpClientUtil.SYS_PROP_CHECK_PEER_NAME,"");
    assertEquals(BrowserCompatHostnameVerifier.class,getHostnameVerifier(HttpClientUtil.createClient(null)).getClass());
    System.setProperty(HttpClientUtil.SYS_PROP_CHECK_PEER_NAME,"false");
    assertEquals(AllowAllHostnameVerifier.class,getHostnameVerifier(HttpClientUtil.createClient(null)).getClass());
  }
  finally {
    SSLTestConfig.clearSSLSystemProperties();
    System.clearProperty(HttpClientUtil.SYS_PROP_CHECK_PEER_NAME);
  }
}
