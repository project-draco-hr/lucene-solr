{
  Replica leader=cloudClient.getZkStateReader().getLeaderRetry(testCollectionName,"shard1",10000);
  HttpSolrClient leaderSolr=getHttpSolrClient(leader,testCollectionName);
  List<HttpSolrClient> replicas=new ArrayList<HttpSolrClient>(notLeaders.size());
  for (  Replica r : notLeaders) {
    replicas.add(getHttpSolrClient(r,testCollectionName));
  }
  try {
    for (int d=firstDocId; d <= lastDocId; d++) {
      String docId=String.valueOf(d);
      assertDocExists(leaderSolr,testCollectionName,docId);
      for (      HttpSolrClient replicaSolr : replicas) {
        assertDocExists(replicaSolr,testCollectionName,docId);
      }
    }
  }
  finally {
    if (leaderSolr != null) {
      leaderSolr.close();
    }
    for (    HttpSolrClient replicaSolr : replicas) {
      replicaSolr.close();
    }
  }
}
