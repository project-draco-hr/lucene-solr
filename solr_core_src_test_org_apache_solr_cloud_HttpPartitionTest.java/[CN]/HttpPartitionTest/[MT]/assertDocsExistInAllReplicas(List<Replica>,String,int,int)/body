{
  Replica leader=cloudClient.getZkStateReader().getLeaderRetry(testCollectionName,"shard1",10000);
  HttpSolrServer leaderSolr=getHttpSolrServer(leader,testCollectionName);
  List<HttpSolrServer> replicas=new ArrayList<HttpSolrServer>(notLeaders.size());
  for (  Replica r : notLeaders) {
    replicas.add(getHttpSolrServer(r,testCollectionName));
  }
  try {
    for (int d=firstDocId; d <= lastDocId; d++) {
      String docId=String.valueOf(d);
      assertDocExists(leaderSolr,testCollectionName,docId);
      for (      HttpSolrServer replicaSolr : replicas) {
        assertDocExists(replicaSolr,testCollectionName,docId);
      }
    }
  }
  finally {
    if (leaderSolr != null) {
      leaderSolr.shutdown();
    }
    for (    HttpSolrServer replicaSolr : replicas) {
      replicaSolr.shutdown();
    }
  }
}
