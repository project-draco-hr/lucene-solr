{
  int jettyPort=basePort + portCounter.incrementAndGet();
  JettySolrRunner jetty=new JettySolrRunner(solrHome.getPath(),context,jettyPort,solrConfigOverride,schemaOverride,false,getExtraServlets(),sslConfig,getExtraRequestFilters());
  jetty.setShards(shardList);
  jetty.setDataDir(getDataDir(dataDir));
  int proxyPort=basePort + portCounter.incrementAndGet();
  jetty.setProxyPort(proxyPort);
  jetty.start();
  SocketProxy proxy=new SocketProxy(proxyPort,jetty.getBaseUrl().toURI());
  proxies.put(proxy.getUrl(),proxy);
  return jetty;
}
