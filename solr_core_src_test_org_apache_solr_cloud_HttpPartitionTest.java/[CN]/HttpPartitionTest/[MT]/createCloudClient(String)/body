{
  CloudSolrClient client=new CloudSolrClient.Builder().withZkHost(zkServer.getZkAddress()).sendDirectUpdatesToAnyShardReplica().build();
  client.setParallelUpdates(random().nextBoolean());
  if (defaultCollection != null)   client.setDefaultCollection(defaultCollection);
  client.getLbClient().setConnectionTimeout(30000);
  client.getLbClient().setSoTimeout(60000);
  return client;
}
