{
  QueryUtils.check(query);
  TopDocs docs=is.search(query,is.getIndexReader().maxDoc());
  for (  ScoreDoc doc : docs.scoreDocs) {
    String value=is.doc(doc.doc).get("field");
    assertTrue(collate(collator,value,startPoint) >= 0);
    assertTrue(collate(collator,value,endPoint) <= 0);
  }
  BooleanQuery bq=new BooleanQuery();
  bq.add(new MatchAllDocsQuery(),Occur.SHOULD);
  bq.add(query,Occur.MUST_NOT);
  docs=is.search(bq,is.getIndexReader().maxDoc());
  for (  ScoreDoc doc : docs.scoreDocs) {
    String value=is.doc(doc.doc).get("field");
    assertTrue(collate(collator,value,startPoint) < 0 || collate(collator,value,endPoint) > 0);
  }
}
