{
  if (!global.getBool(FacetParams.FACET,true))   return null;
  facetResponse=new SimpleOrderedMap<>();
  try {
    facetResponse.add("facet_queries",getFacetQueryCounts());
    facetResponse.add("facet_fields",getFacetFieldCounts());
    facetResponse.add("facet_dates",getFacetDateCounts());
    facetResponse.add("facet_ranges",getFacetRangeCounts());
    facetResponse.add("facet_intervals",getFacetIntervalCounts());
    facetResponse.add(SpatialHeatmapFacets.RESPONSE_KEY,getHeatmapCounts());
  }
 catch (  IOException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,e);
  }
catch (  SyntaxError e) {
    throw new SolrException(ErrorCode.BAD_REQUEST,e);
  }
  return facetResponse;
}
