{
  int code=0;
  if (hasAttributes()) {
    if (currentState == null) {
      computeCurrentState();
    }
    for (State state=currentState; state != null; state=state.next) {
      code=code * 31 + state.attribute.hashCode();
    }
  }
  return code;
}
