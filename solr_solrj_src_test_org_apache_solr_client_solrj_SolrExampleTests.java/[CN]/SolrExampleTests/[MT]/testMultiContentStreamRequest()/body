{
  SolrServer server=getSolrServer();
  server.deleteByQuery("*:*");
  server.commit();
  QueryResponse rsp=server.query(new SolrQuery("*:*"));
  Assert.assertEquals(0,rsp.getResults().getNumFound());
  ContentStreamUpdateRequest up=new ContentStreamUpdateRequest("/update");
  up.addFile(getFile("solrj/docs1.xml"));
  up.addFile(getFile("solrj/docs2.xml"));
  up.setAction(AbstractUpdateRequest.ACTION.COMMIT,true,true);
  NamedList<Object> result=server.request(up);
  assertNotNull("Couldn't upload xml files",result);
  rsp=server.query(new SolrQuery("*:*"));
  Assert.assertEquals(5,rsp.getResults().getNumFound());
  up=new ContentStreamUpdateRequest("/debug/dump");
  up.addFile(getFile("solrj/docs1.xml"));
  up.addFile(getFile("solrj/docs2.xml"));
  up.setParam("a","\u1234");
  result=server.request(up);
  System.out.println(result);
  Assert.assertEquals("\u1234",((NamedList)((NamedList)result.get("responseHeader")).get("params")).get("a"));
}
