{
  assertTrue(dir != null);
  assertTrue(fieldInfos != null);
  FieldsReader reader=new FieldsReader(dir,TEST_SEGMENT_NAME,fieldInfos);
  assertTrue(reader != null);
  assertTrue(reader.size() == 1);
  Document doc=reader.doc(0,null);
  assertTrue(doc != null);
  assertTrue(doc.getField(DocHelper.TEXT_FIELD_1_KEY) != null);
  Fieldable field=doc.getField(DocHelper.TEXT_FIELD_2_KEY);
  assertTrue(field != null);
  assertTrue(field.isTermVectorStored() == true);
  assertTrue(field.isStoreOffsetWithTermVector() == true);
  assertTrue(field.isStorePositionWithTermVector() == true);
  assertTrue(field.getOmitNorms() == false);
  assertTrue(field.getOmitTf() == false);
  field=doc.getField(DocHelper.TEXT_FIELD_3_KEY);
  assertTrue(field != null);
  assertTrue(field.isTermVectorStored() == false);
  assertTrue(field.isStoreOffsetWithTermVector() == false);
  assertTrue(field.isStorePositionWithTermVector() == false);
  assertTrue(field.getOmitNorms() == true);
  assertTrue(field.getOmitTf() == false);
  field=doc.getField(DocHelper.NO_TF_KEY);
  assertTrue(field != null);
  assertTrue(field.isTermVectorStored() == false);
  assertTrue(field.isStoreOffsetWithTermVector() == false);
  assertTrue(field.isStorePositionWithTermVector() == false);
  assertTrue(field.getOmitNorms() == false);
  assertTrue(field.getOmitTf() == true);
  reader.close();
}
