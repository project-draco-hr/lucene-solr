{
  TokenStream wrapped;
  try {
    wrapped=defaultAnalyzer.reusableTokenStream(fieldName,reader);
  }
 catch (  IOException e) {
    wrapped=defaultAnalyzer.tokenStream(fieldName,reader);
  }
  ShingleFilter filter=new ShingleFilter(wrapped);
  filter.setMaxShingleSize(maxShingleSize);
  filter.setOutputUnigrams(outputUnigrams);
  return filter;
}
