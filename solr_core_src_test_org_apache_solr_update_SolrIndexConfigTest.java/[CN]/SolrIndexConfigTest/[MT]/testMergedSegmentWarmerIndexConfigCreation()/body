{
  SolrConfig solrConfig=new SolrConfig(instanceDir,random().nextBoolean() ? solrConfigFileNameWarmerRandomMergePolicy : solrConfigFileNameWarmerRandomMergePolicyFactory,null);
  SolrIndexConfig solrIndexConfig=new SolrIndexConfig(solrConfig,null,null);
  assertNotNull(solrIndexConfig);
  assertNotNull(solrIndexConfig.mergedSegmentWarmerInfo);
  assertEquals(SimpleMergedSegmentWarmer.class.getName(),solrIndexConfig.mergedSegmentWarmerInfo.className);
  IndexSchema indexSchema=IndexSchemaFactory.buildIndexSchema(schemaFileName,solrConfig);
  h.getCore().setLatestSchema(indexSchema);
  IndexWriterConfig iwc=solrIndexConfig.toIndexWriterConfig(h.getCore());
  assertEquals(SimpleMergedSegmentWarmer.class,iwc.getMergedSegmentWarmer().getClass());
}
