{
  SolrConfig solrConfig=new SolrConfig("solr" + File.separator + "collection1","solrconfig-tieredmergepolicy.xml",null);
  SolrIndexConfig solrIndexConfig=new SolrIndexConfig(solrConfig,null,null);
  assertNotNull(solrIndexConfig);
  IndexSchema indexSchema=IndexSchemaFactory.buildIndexSchema("schema.xml",solrConfig);
  h.getCore().setLatestSchema(indexSchema);
  IndexWriterConfig iwc=solrIndexConfig.toIndexWriterConfig(h.getCore());
  assertNotNull("null mp",iwc.getMergePolicy());
  assertTrue("mp is not TMP",iwc.getMergePolicy() instanceof TieredMergePolicy);
  TieredMergePolicy mp=(TieredMergePolicy)iwc.getMergePolicy();
  assertEquals("mp.maxMergeAtOnceExplicit",19,mp.getMaxMergeAtOnceExplicit());
  assertEquals("mp.segmentsPerTier",9,(int)mp.getSegmentsPerTier());
  assertNotNull("null ms",iwc.getMergeScheduler());
  assertTrue("ms is not CMS",iwc.getMergeScheduler() instanceof ConcurrentMergeScheduler);
  ConcurrentMergeScheduler ms=(ConcurrentMergeScheduler)iwc.getMergeScheduler();
  assertEquals("ms.maxMergeCount",987,ms.getMaxMergeCount());
  assertEquals("ms.maxThreadCount",42,ms.getMaxThreadCount());
}
