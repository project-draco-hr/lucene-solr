{
  final MultiDocsEnum docsEnum;
  if (reuse != null) {
    docsEnum=(MultiDocsEnum)reuse;
  }
 else {
    docsEnum=new MultiDocsEnum();
  }
  final MultiBits multiLiveDocs;
  if (liveDocs instanceof MultiBits) {
    multiLiveDocs=(MultiBits)liveDocs;
  }
 else {
    multiLiveDocs=null;
  }
  int upto=0;
  for (int i=0; i < numTop; i++) {
    final TermsEnumWithSlice entry=top[i];
    final Bits b;
    if (multiLiveDocs != null) {
      final MultiBits.SubResult sub=multiLiveDocs.getMatchingSub(entry.subSlice);
      if (sub.matches) {
        b=sub.result;
      }
 else {
        b=new BitsSlice(liveDocs,entry.subSlice);
      }
    }
 else     if (liveDocs != null) {
      b=new BitsSlice(liveDocs,entry.subSlice);
    }
 else {
      b=null;
    }
    final DocsEnum subDocsEnum=entry.terms.docs(b,null);
    if (subDocsEnum != null) {
      subDocs[upto].docsEnum=subDocsEnum;
      subDocs[upto].slice=entry.subSlice;
      upto++;
    }
  }
  if (upto == 0) {
    return null;
  }
 else {
    return docsEnum.reset(subDocs,upto);
  }
}
