{
  try {
    SolrIndexSearcher searcher=req.getSearcher();
    IndexReader reader=searcher.getReader();
    Collection<String> fieldNames=reader.getFieldNames(IndexReader.FieldOption.ALL);
    Map fields=new HashMap();
    IndexSchema schema=req.getSchema();
    for (    String fieldName : fieldNames) {
      Map fieldInfo=new HashMap();
      FieldType fieldType=schema.getFieldTypeNoEx(fieldName);
      fieldInfo.put("type",fieldType.getTypeName());
      fields.put(fieldName,fieldInfo);
    }
    rsp.add("fields",fields);
    Map indexInfo=new HashMap();
    indexInfo.put("numDocs",reader.numDocs());
    indexInfo.put("maxDoc",reader.maxDoc());
    indexInfo.put("version",reader.getVersion());
    rsp.add("index",indexInfo);
    rsp.add("NOTICE","This interface is experimental and may be changing");
  }
 catch (  SolrException e) {
    rsp.setException(e);
    return;
  }
catch (  Exception e) {
    SolrException.log(SolrCore.log,e);
    rsp.setException(e);
    return;
  }
}
