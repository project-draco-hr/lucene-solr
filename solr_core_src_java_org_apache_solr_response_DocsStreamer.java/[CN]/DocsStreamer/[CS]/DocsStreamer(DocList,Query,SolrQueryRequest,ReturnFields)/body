{
  this.docs=docList;
  this.schema=req.getSchema();
  searcher=req.getSearcher();
  transformer=returnFields.getTransformer();
  docIterator=docList.iterator();
  context=new TransformContext();
  context.query=query;
  context.wantsScores=returnFields.wantsScore() && docList.hasScores();
  context.req=req;
  context.searcher=searcher;
  context.iterator=docIterator;
  fnames=returnFields.getLuceneFieldNames();
  onlyPseudoFields=(fnames == null && !returnFields.wantsAllFields() && !returnFields.hasPatternMatching()) || (fnames != null && fnames.size() == 1 && SolrReturnFields.SCORE.equals(fnames.iterator().next()));
  if (transformer != null)   transformer.setContext(context);
}
