{
  int id=docIterator.nextDoc();
  idx++;
  SolrDocument sdoc=null;
  if (onlyPseudoFields) {
    sdoc=new SolrDocument();
  }
 else {
    try {
      StoredDocument doc=searcher.doc(id,fnames);
      sdoc=getDoc(doc,schema);
    }
 catch (    IOException e) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error reading document with docId " + id,e);
    }
  }
  if (transformer != null) {
    try {
      transformer.transform(sdoc,id);
    }
 catch (    IOException e) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error applying transformer",e);
    }
  }
  return sdoc;
}
