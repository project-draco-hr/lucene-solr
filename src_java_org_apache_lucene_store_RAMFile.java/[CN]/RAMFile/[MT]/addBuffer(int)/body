{
  byte[] buffer=new byte[size];
  if (directory != null) synchronized (directory) {
    buffers.add(buffer);
    directory.sizeInBytes+=size;
    sizeInBytes+=size;
  }
 else   buffers.add(buffer);
  return buffer;
}
