{
  random=random();
  while (!stop) {
    try {
      Thread.sleep(random.nextInt(50) + 1);
    }
 catch (    InterruptedException e1) {
      throw new RuntimeException(e1);
    }
    try {
      String path="path" + random.nextInt(20);
synchronized (dirs) {
        Tracker tracker=dirs.get(path);
        if (tracker == null) {
          tracker=new Tracker();
          tracker.path=path;
          tracker.dir=df.get(path,DirContext.DEFAULT,null);
          dirs.put(path,tracker);
        }
 else {
          if (random.nextInt(10) > 6) {
            Tracker oldTracker=new Tracker();
            oldTracker.refCnt=new AtomicInteger(tracker.refCnt.get());
            oldTracker.path=tracker.path;
            oldTracker.dir=tracker.dir;
            oldDirs.add(oldTracker);
            tracker.dir=df.get(path,DirContext.DEFAULT,null,true);
            tracker.refCnt=new AtomicInteger(0);
          }
 else {
            tracker.dir=df.get(path,DirContext.DEFAULT,null);
          }
        }
        tracker.refCnt.incrementAndGet();
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
