{
  this.clearCore();
  UpdateLog ulog=h.getCore().getUpdateHandler().getUpdateLog();
  File logDir=new File(h.getCore().getUpdateHandler().getUpdateLog().getLogDir());
  CdcrUpdateLog.CdcrLogReader reader1=((CdcrUpdateLog)ulog).newLogReader();
  CdcrUpdateLog.CdcrLogReader reader2=((CdcrUpdateLog)ulog).newLogReader();
  int start=0;
  LinkedList<Long> versions=new LinkedList<>();
  addDocs(10,start,versions);
  start+=10;
  assertU(commit());
  addDocs(10,start,versions);
  start+=10;
  assertU(commit());
  addDocs(105,start,versions);
  start+=105;
  assertU(commit());
  assertEquals(3,ulog.getLogList(logDir).length);
  for (int i=0; i <= 11; i++) {
    assertNotNull(reader1.next());
  }
  addDocs(10,start,versions);
  start+=10;
  assertU(commit());
  assertEquals(4,ulog.getLogList(logDir).length);
  for (int i=0; i <= 11; i++) {
    assertNotNull(reader2.next());
  }
  addDocs(10,start,versions);
  start+=10;
  assertU(commit());
  assertEquals(4,ulog.getLogList(logDir).length);
  while (reader1.next() != null) {
  }
  while (reader2.next() != null) {
  }
  addDocs(80,start,versions);
  start+=80;
  assertU(commit());
  assertEquals(3,ulog.getLogList(logDir).length);
}
