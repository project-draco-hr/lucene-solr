{
  TimeOut timeout=new TimeOut(timeoutms,TimeUnit.MILLISECONDS);
  boolean deleted=false;
  while (!timeout.hasTimedOut()) {
    Thread.sleep(100);
    DocCollection docCollection=zkStateReader.getClusterState().getCollection(collectionName);
    if (docCollection != null) {
      Slice slice=docCollection.getSlice(shard);
      if (slice == null || slice.getReplica(replicaName) == null) {
        deleted=true;
      }
    }
    if (docCollection == null || deleted)     break;
  }
  return deleted;
}
