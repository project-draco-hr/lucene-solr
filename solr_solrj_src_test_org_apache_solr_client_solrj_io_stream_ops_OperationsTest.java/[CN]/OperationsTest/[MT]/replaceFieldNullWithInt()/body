{
  Tuple tuple;
  StreamOperation operation;
  operation=new ReplaceOperation("fieldA",StreamExpressionParser.parse("replace(null, withField=fieldC)"),factory);
  values.clear();
  values.put("fieldB","bar");
  values.put("fieldC",123);
  tuple=new Tuple(values);
  operation.operate(tuple);
  Assert.assertNotNull(tuple.get("fieldA"));
  Assert.assertEquals(123,tuple.get("fieldA"));
  values.clear();
  values.put("fieldA","exists");
  values.put("fieldB","bar");
  values.put("fieldC",123);
  tuple=new Tuple(values);
  operation.operate(tuple);
  Assert.assertNotNull(tuple.get("fieldA"));
  Assert.assertEquals("exists",tuple.get("fieldA"));
}
