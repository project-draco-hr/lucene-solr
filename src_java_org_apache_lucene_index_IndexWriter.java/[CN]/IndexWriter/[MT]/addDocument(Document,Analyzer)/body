{
  DocumentWriter dw=new DocumentWriter(ramDirectory,analyzer,this);
  dw.setInfoStream(infoStream);
  String segmentName=newRAMSegmentName();
  dw.addDocument(segmentName,doc);
synchronized (this) {
    ramSegmentInfos.addElement(new SegmentInfo(segmentName,1,ramDirectory));
    maybeFlushRamSegments();
  }
}
