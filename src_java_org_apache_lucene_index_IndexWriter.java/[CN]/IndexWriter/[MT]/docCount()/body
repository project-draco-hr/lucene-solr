{
  ensureOpen();
  int count;
  if (docWriter != null)   count=docWriter.getNumDocsInRAM();
 else   count=0;
  for (int i=0; i < segmentInfos.size(); i++) {
    SegmentInfo si=segmentInfos.info(i);
    count+=si.docCount;
  }
  return count;
}
