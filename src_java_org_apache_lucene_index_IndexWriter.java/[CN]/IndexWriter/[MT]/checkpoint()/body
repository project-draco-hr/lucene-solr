{
  if (autoCommit) {
    segmentInfos.write(directory);
    commitPending=false;
    if (infoStream != null)     message("checkpoint: wrote segments file \"" + segmentInfos.getCurrentSegmentFileName() + "\"");
  }
 else {
    commitPending=true;
  }
}
