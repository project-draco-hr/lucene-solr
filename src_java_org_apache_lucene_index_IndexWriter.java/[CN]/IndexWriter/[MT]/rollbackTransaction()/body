{
  if (infoStream != null)   message("now rollback transaction");
  autoCommit=localAutoCommit;
  docWriter.setFlushedDocCount(localFlushedDocCount);
  segmentInfos.clear();
  segmentInfos.addAll(localRollbackSegmentInfos);
  localRollbackSegmentInfos=null;
  deleter.checkpoint(segmentInfos,false);
  if (!autoCommit)   deleter.decRef(segmentInfos);
  deleter.refresh();
  finishMerges(false);
  stopMerges=false;
}
