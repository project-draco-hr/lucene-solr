{
  while (writeThread != null || readCount > 0)   doWait();
  ensureOpen();
  writeThread=Thread.currentThread();
}
