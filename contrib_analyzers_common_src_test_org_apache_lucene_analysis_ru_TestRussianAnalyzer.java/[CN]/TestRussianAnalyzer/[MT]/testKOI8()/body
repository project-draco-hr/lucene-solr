{
  RussianAnalyzer ra=new RussianAnalyzer(RussianCharsets.KOI8);
  inWordsKOI8=new InputStreamReader(new FileInputStream(new File(dataDir,"/org/apache/lucene/analysis/ru/testKOI8.txt")),"iso-8859-1");
  sampleKOI8=new InputStreamReader(new FileInputStream(new File(dataDir,"/org/apache/lucene/analysis/ru/resKOI8.htm")),"iso-8859-1");
  TokenStream in=ra.tokenStream("all",inWordsKOI8);
  RussianLetterTokenizer sample=new RussianLetterTokenizer(sampleKOI8,RussianCharsets.KOI8);
  TermAttribute text=in.getAttribute(TermAttribute.class);
  TermAttribute sampleText=sample.getAttribute(TermAttribute.class);
  for (; ; ) {
    if (in.incrementToken() == false)     break;
    boolean nextSampleToken=sample.incrementToken();
    assertEquals("KOI8",text.term(),nextSampleToken == false ? null : sampleText.term());
  }
  inWordsKOI8.close();
  sampleKOI8.close();
}
