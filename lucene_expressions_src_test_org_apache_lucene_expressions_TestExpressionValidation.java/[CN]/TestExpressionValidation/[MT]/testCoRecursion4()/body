{
  SimpleBindings bindings=new SimpleBindings();
  bindings.add("cycle0",JavascriptCompiler.compile("100"));
  bindings.add("cycle1",JavascriptCompiler.compile("100"));
  bindings.add("cycle2",JavascriptCompiler.compile("cycle1 + cycle0 + cycle3"));
  bindings.add("cycle3",JavascriptCompiler.compile("cycle0 + cycle1 + cycle2"));
  try {
    bindings.validate();
    fail("didn't get expected exception");
  }
 catch (  IllegalArgumentException expected) {
    assertTrue(expected.getMessage().contains("Cycle detected"));
  }
}
