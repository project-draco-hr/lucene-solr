{
  final String collectionName="deleteByCount";
  CollectionAdminRequest.createCollection(collectionName,"conf",1,3).process(cluster.getSolrClient());
  waitForState("Expected a single shard with three replicas",collectionName,clusterShape(1,3));
  CollectionAdminRequest.deleteReplicasFromShard(collectionName,"shard1",2).process(cluster.getSolrClient());
  waitForState("Expected a single shard with a single replica",collectionName,clusterShape(1,1));
}
