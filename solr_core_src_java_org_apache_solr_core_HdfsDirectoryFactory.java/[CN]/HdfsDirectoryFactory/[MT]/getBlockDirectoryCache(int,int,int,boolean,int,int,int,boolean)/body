{
  if (!staticBlockCache) {
    LOG.info("Creating new single instance HDFS BlockCache");
    return createBlockCache(numberOfBlocksPerBank,blockSize,bankCount,directAllocation,slabSize,bufferSize,bufferCount);
  }
synchronized (HdfsDirectoryFactory.class) {
    if (globalBlockCache == null) {
      LOG.info("Creating new global HDFS BlockCache");
      globalBlockCache=createBlockCache(numberOfBlocksPerBank,blockSize,bankCount,directAllocation,slabSize,bufferSize,bufferCount);
    }
  }
  return globalBlockCache;
}
