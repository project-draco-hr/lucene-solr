{
  String keytabFile=params.get(KERBEROS_KEYTAB,"").trim();
  if (keytabFile.length() == 0) {
    throw new IllegalArgumentException(KERBEROS_KEYTAB + " required because " + KERBEROS_ENABLED+ " set to true");
  }
  String principal=params.get(KERBEROS_PRINCIPAL,"");
  if (principal.length() == 0) {
    throw new IllegalArgumentException(KERBEROS_PRINCIPAL + " required because " + KERBEROS_ENABLED+ " set to true");
  }
synchronized (HdfsDirectoryFactory.class) {
    if (kerberosInit == null) {
      kerberosInit=new Boolean(true);
      Configuration conf=new Configuration();
      conf.set("hadoop.security.authentication","kerberos");
      UserGroupInformation.setConfiguration(conf);
      LOG.info("Attempting to acquire kerberos ticket with keytab: {}, principal: {} ",keytabFile,principal);
      try {
        UserGroupInformation.loginUserFromKeytab(principal,keytabFile);
      }
 catch (      IOException ioe) {
        throw new RuntimeException(ioe);
      }
      LOG.info("Got Kerberos ticket");
    }
  }
}
