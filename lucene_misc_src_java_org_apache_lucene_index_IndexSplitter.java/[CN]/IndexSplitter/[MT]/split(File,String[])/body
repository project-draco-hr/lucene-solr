{
  destDir.mkdirs();
  FSDirectory destFSDir=FSDirectory.open(destDir);
  SegmentInfos destInfos=new SegmentInfos();
  destInfos.counter=infos.counter;
  for (  String n : segs) {
    SegmentInfoPerCommit infoPerCommit=getInfo(n);
    SegmentInfo info=infoPerCommit.info;
    SegmentInfo newInfo=new SegmentInfo(destFSDir,info.getVersion(),info.name,info.docCount,info.getDocStoreOffset(),info.getDocStoreSegment(),info.getDocStoreIsCompoundFile(),info.getNormGen(),info.getUseCompoundFile(),info.getCodec(),info.getDiagnostics());
    destInfos.add(new SegmentInfoPerCommit(newInfo,infoPerCommit.getDelCount(),infoPerCommit.getDelGen()));
    Collection<String> files=infoPerCommit.files();
    for (    final String srcName : files) {
      File srcFile=new File(dir,srcName);
      File destFile=new File(destDir,srcName);
      copyFile(srcFile,destFile);
    }
  }
  destInfos.changed();
  destInfos.commit(destFSDir);
}
