{
  ScoreDoc[] scoreDocs=new ScoreDoc[queue.size()];
  if (fillFields) {
    for (int i=queue.size() - 1; i >= 0; i--) {
      scoreDocs[i]=queue.fillFields((FieldValueHitQueue.Entry)queue.pop());
    }
  }
 else {
    Entry entry=(FieldValueHitQueue.Entry)queue.pop();
    for (int i=queue.size() - 1; i >= 0; i--) {
      scoreDocs[i]=new FieldDoc(entry.docID,entry.score);
    }
  }
  return new TopFieldDocs(totalHits,scoreDocs,queue.getFields(),maxScore);
}
