{
  docWriter.pauseAllThreads();
  try {
    finishMerges(false);
    docWriter.abort();
    docWriter.setFlushedDocCount(0);
    segmentInfos.clear();
    deleter.checkpoint(segmentInfos,false);
    deleter.refresh();
    readerPool.clear(null);
    ++changeCount;
    segmentInfos.changed();
  }
 catch (  OutOfMemoryError oom) {
    handleOOM(oom,"deleteAll");
  }
 finally {
    docWriter.resumeAllThreads();
    if (infoStream != null) {
      message("hit exception during deleteAll");
    }
  }
}
