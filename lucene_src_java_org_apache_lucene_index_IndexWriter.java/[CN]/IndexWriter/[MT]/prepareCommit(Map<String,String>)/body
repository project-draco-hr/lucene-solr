{
  if (hitOOM) {
    throw new IllegalStateException("this writer hit an OutOfMemoryError; cannot commit");
  }
  if (pendingCommit != null)   throw new IllegalStateException("prepareCommit was already called with no corresponding call to commit");
  if (infoStream != null)   message("prepareCommit: flush");
  flush(true,true);
  startCommit(0,commitUserData);
}
