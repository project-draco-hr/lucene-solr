{
  ensureOpen();
  boolean maybeMerge=false;
  try {
    boolean success=false;
    try {
      maybeMerge=docWriter.updateDocument(doc,analyzer,term);
      success=true;
    }
  finally {
      if (!success && infoStream != null)       message("hit exception updating document");
    }
  }
 catch (  OutOfMemoryError oom) {
    handleOOM(oom,"updateDocument");
  }
  if (maybeMerge) {
    maybeMerge();
  }
}
