{
  ensureOpen();
  if (infoStream != null) {
    message("flush at getReader");
  }
  poolReaders=true;
  flush(true,true,false);
synchronized (this) {
    applyDeletes();
    final IndexReader r=new DirectoryReader(this,segmentInfos,config.getReaderTermsIndexDivisor(),codecs);
    if (infoStream != null) {
      message("return reader version=" + r.getVersion() + " reader="+ r);
    }
    return r;
  }
}
