{
  Map<String,InvertedDocConsumerPerField> childFieldsToFlush=new HashMap<String,InvertedDocConsumerPerField>();
  Map<String,InvertedDocEndConsumerPerField> endChildFieldsToFlush=new HashMap<String,InvertedDocEndConsumerPerField>();
  for (  Map.Entry<String,DocFieldConsumerPerField> fieldToFlush : fieldsToFlush.entrySet()) {
    DocInverterPerField perField=(DocInverterPerField)fieldToFlush.getValue();
    childFieldsToFlush.put(fieldToFlush.getKey(),perField.consumer);
    endChildFieldsToFlush.put(fieldToFlush.getKey(),perField.endConsumer);
  }
  consumer.flush(childFieldsToFlush,state);
  endConsumer.flush(endChildFieldsToFlush,state);
}
