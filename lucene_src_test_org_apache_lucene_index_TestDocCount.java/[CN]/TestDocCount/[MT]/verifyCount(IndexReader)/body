{
  Fields fields=MultiFields.getFields(ir);
  if (fields == null) {
    return;
  }
  FieldsEnum e=fields.iterator();
  String field;
  while ((field=e.next()) != null) {
    Terms terms=fields.terms(field);
    int docCount=terms.getDocCount();
    FixedBitSet visited=new FixedBitSet(ir.maxDoc());
    TermsEnum te=terms.iterator();
    while (te.next() != null) {
      DocsEnum de=te.docs(null,null);
      while (de.nextDoc() != DocIdSetIterator.NO_MORE_DOCS) {
        visited.set(de.docID());
      }
    }
    assertEquals(visited.cardinality(),docCount);
  }
}
