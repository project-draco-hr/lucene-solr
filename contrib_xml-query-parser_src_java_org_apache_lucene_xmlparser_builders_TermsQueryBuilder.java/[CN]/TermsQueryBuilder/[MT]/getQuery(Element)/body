{
  String fieldName=DOMUtils.getAttributeWithInheritanceOrFail(e,"fieldName");
  String text=DOMUtils.getNonBlankTextOrFail(e);
  BooleanQuery bq=new BooleanQuery(DOMUtils.getAttribute(e,"disableCoord",false));
  bq.setMinimumNumberShouldMatch(DOMUtils.getAttribute(e,"minimumNumberShouldMatch",0));
  TokenStream ts=analyzer.tokenStream(fieldName,new StringReader(text));
  try {
    final Token reusableToken=new Token();
    Term term=null;
    for (Token nextToken=ts.next(reusableToken); nextToken != null; nextToken=ts.next(reusableToken)) {
      if (term == null) {
        term=new Term(fieldName,nextToken.term());
      }
 else {
        term=term.createTerm(nextToken.term());
      }
      bq.add(new BooleanClause(new TermQuery(term),BooleanClause.Occur.SHOULD));
    }
  }
 catch (  IOException ioe) {
    throw new RuntimeException("Error constructing terms from index:" + ioe);
  }
  bq.setBoost(DOMUtils.getAttribute(e,"boost",1.0f));
  return bq;
}
