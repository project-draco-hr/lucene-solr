{
  if (dir instanceof FSDirectory) {
    return ((FSDirectory)dir).getDirectory().getAbsolutePath();
  }
 else   if (dir instanceof NRTCachingDirectory) {
    return getIndexDir(((NRTCachingDirectory)dir).getDelegate());
  }
 else {
    log.warn("WARNING: Directory impl does not support setting indexDir: " + dir.getClass().getName());
    return null;
  }
}
