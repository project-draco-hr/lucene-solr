{
  if (filterCache != null) {
    Query absQ=QueryUtils.getAbs(a);
    DocSet positiveA=getPositiveDocSet(absQ);
    return a == absQ ? b.intersectionSize(positiveA) : b.andNotSize(positiveA);
  }
 else {
    TotalHitCountCollector collector=new TotalHitCountCollector();
    BooleanQuery.Builder bq=new BooleanQuery.Builder();
    bq.add(QueryUtils.makeQueryable(a),BooleanClause.Occur.MUST);
    bq.add(new ConstantScoreQuery(b.getTopFilter()),BooleanClause.Occur.MUST);
    super.search(bq.build(),collector);
    return collector.getTotalHits();
  }
}
