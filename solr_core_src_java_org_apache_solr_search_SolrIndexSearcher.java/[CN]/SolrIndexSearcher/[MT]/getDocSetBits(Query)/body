{
  DocSet answer=getDocSet(q);
  if (answer instanceof BitDocSet) {
    return (BitDocSet)answer;
  }
  FixedBitSet bs=new FixedBitSet(maxDoc());
  DocIterator iter=answer.iterator();
  while (iter.hasNext()) {
    bs.set(iter.nextDoc());
  }
  BitDocSet answerBits=new BitDocSet(bs,answer.size());
  if (filterCache != null) {
    filterCache.put(q,answerBits);
  }
  return answerBits;
}
