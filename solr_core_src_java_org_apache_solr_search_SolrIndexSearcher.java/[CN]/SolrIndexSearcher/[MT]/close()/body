{
  if (debug) {
    if (cachingEnabled) {
      StringBuilder sb=new StringBuilder();
      sb.append("Closing ").append(name);
      for (      SolrCache cache : cacheList) {
        sb.append("\n\t");
        sb.append(cache);
      }
      log.debug(sb.toString());
    }
 else {
      if (debug)       log.debug("Closing " + name);
    }
  }
  core.getInfoRegistry().remove(name);
  long cpg=reader.getIndexCommit().getGeneration();
  try {
    if (closeReader)     reader.decRef();
  }
 catch (  Throwable t) {
    SolrException.log(log,"Problem dec ref'ing reader",t);
  }
  if (directoryFactory.searchersReserveCommitPoints()) {
    core.getDeletionPolicy().releaseCommitPoint(cpg);
  }
  for (  SolrCache cache : cacheList) {
    cache.close();
  }
  if (reserveDirectory) {
    directoryFactory.release(getIndexReader().directory());
  }
  if (createdDirectory) {
    directoryFactory.release(getIndexReader().directory());
  }
  numCloses.incrementAndGet();
}
