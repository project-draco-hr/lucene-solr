{
  if (log.isDebugEnabled()) {
    if (cachingEnabled) {
      final StringBuilder sb=new StringBuilder();
      sb.append("Closing ").append(name);
      for (      SolrCache cache : cacheList) {
        sb.append("\n\t");
        sb.append(cache);
      }
      log.debug(sb.toString());
    }
 else {
      log.debug("Closing [{}]",name);
    }
  }
  core.getInfoRegistry().remove(name);
  long cpg=reader.getIndexCommit().getGeneration();
  try {
    if (closeReader)     rawReader.decRef();
  }
 catch (  Exception e) {
    SolrException.log(log,"Problem dec ref'ing reader",e);
  }
  if (directoryFactory.searchersReserveCommitPoints()) {
    core.getDeletionPolicy().releaseCommitPoint(cpg);
  }
  for (  SolrCache cache : cacheList) {
    cache.close();
  }
  if (releaseDirectory) {
    directoryFactory.release(getIndexReader().directory());
  }
  numCloses.incrementAndGet();
}
