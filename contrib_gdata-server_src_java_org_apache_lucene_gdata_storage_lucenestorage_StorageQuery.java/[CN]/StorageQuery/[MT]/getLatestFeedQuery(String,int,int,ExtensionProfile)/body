{
  List<BaseEntry> returnList=new ArrayList<BaseEntry>(resultCount);
  List<StorageEntryWrapper> bufferedWrapperList=this.buffer.getSortedEntries(feedId);
  int alreadyAdded=0;
  int offset=startIndex - 1;
  if (bufferedWrapperList != null && bufferedWrapperList.size() >= startIndex) {
    for (; alreadyAdded < resultCount; alreadyAdded++) {
      if ((bufferedWrapperList.size() - offset) > 0) {
        StorageEntryWrapper wrappedEntry=bufferedWrapperList.get(offset++);
        returnList.add(wrappedEntry.getEntry());
      }
 else       break;
    }
    offset=startIndex - 1;
    if (alreadyAdded == resultCount)     return returnList;
  }
 else {
    if (bufferedWrapperList != null)     offset=startIndex - 1 - bufferedWrapperList.size();
  }
  Hits hits=storageFeedQuery(feedId,this.timeStampSort);
  if (hits.length() > 0) {
    for (; (offset < hits.length()) && (alreadyAdded < resultCount); offset++, alreadyAdded++) {
      Document doc=hits.doc(offset);
      BaseEntry entry=buildEntryFromLuceneDocument(doc,profil);
      returnList.add(entry);
    }
  }
  return returnList;
}
