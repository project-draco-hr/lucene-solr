{
  Directory d=newDirectory();
  IndexWriter w=new IndexWriter(d,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random())));
  Document doc=new Document();
  FieldType customType=new FieldType();
  customType.setStored(true);
  doc.add(newField("zzz","a b c",customType));
  doc.add(newField("aaa","a b c",customType));
  doc.add(newField("zzz","1 2 3",customType));
  w.addDocument(doc);
  IndexReader r=w.getReader();
  StoredDocument doc2=r.document(0);
  Iterator<StorableField> it=doc2.getFields().iterator();
  assertTrue(it.hasNext());
  Field f=(Field)it.next();
  assertEquals(f.name(),"zzz");
  assertEquals(f.stringValue(),"a b c");
  assertTrue(it.hasNext());
  f=(Field)it.next();
  assertEquals(f.name(),"aaa");
  assertEquals(f.stringValue(),"a b c");
  assertTrue(it.hasNext());
  f=(Field)it.next();
  assertEquals(f.name(),"zzz");
  assertEquals(f.stringValue(),"1 2 3");
  assertFalse(it.hasNext());
  r.close();
  w.shutdown();
  d.close();
}
