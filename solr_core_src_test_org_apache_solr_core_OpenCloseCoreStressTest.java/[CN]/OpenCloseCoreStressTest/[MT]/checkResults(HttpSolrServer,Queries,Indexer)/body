{
  verbose("Checking if indexes have all the documents they should...");
  long totalDocsFound=0;
  for (  Map.Entry<String,Long> ent : coreCounts.entrySet()) {
    server.setBaseURL(url + ent.getKey());
    try {
      server.commit(true,true);
    }
 catch (    Exception e) {
      fail("Exception when committing core " + ent.getKey() + " "+ e.getMessage());
    }
    long numFound=queries.getCount(server,ent.getKey());
    totalDocsFound+=numFound;
    assertEquals(String.format(Locale.ROOT,"Core %s bad!",ent.getKey()),(long)ent.getValue(),numFound);
  }
  verbose(String.format(Locale.ROOT,"\n\nDocs indexed (cumulative, all cycles): %,d, total docs: %,d: Cycle stats: updates: %,d: qtimes: %,d",Indexer.idUnique.get(),totalDocsFound,idxer.getAccumUpdates(),idxer.getAccumQtimes()));
  cumulativeDocs+=totalDocsFound;
}
