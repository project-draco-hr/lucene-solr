{
  FacetInfo fi=rb._facetInfo;
  for (  ShardResponse srsp : sreq.responses) {
    NamedList facet_counts=(NamedList)srsp.getSolrResponse().getResponse().get("facet_counts");
    NamedList facet_fields=(NamedList)facet_counts.get("facet_fields");
    fi.addExceptions((List)facet_counts.get("exception"));
    if (facet_fields == null)     continue;
    for (int i=0; i < facet_fields.size(); i++) {
      String key=facet_fields.getName(i);
      DistribFieldFacet dff=(DistribFieldFacet)fi.facets.get(key);
      if (dff == null)       continue;
      NamedList shardCounts=(NamedList)facet_fields.getVal(i);
      for (int j=0; j < shardCounts.size(); j++) {
        String name=shardCounts.getName(j);
        long count=((Number)shardCounts.getVal(j)).longValue();
        ShardFacetCount sfc=dff.counts.get(name);
        sfc.count+=count;
      }
    }
  }
}
