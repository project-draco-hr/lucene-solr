{
  SpanQuery q=new FieldMaskingSpanQuery(new SpanTermQuery(new Term("last","sally")){
    public Query rewrite(    IndexReader reader){
      return new SpanOrQuery(new SpanQuery[]{new SpanTermQuery(new Term("first","sally")),new SpanTermQuery(new Term("first","james"))});
    }
  }
,"first");
  SpanQuery qr=(SpanQuery)searcher.rewrite(q);
  QueryUtils.checkUnequal(q,qr);
  assertEquals(2,qr.getTerms().size());
}
