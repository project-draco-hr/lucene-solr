{
  DocCollection newCollection=null;
  Map<String,Slice> slices;
  if (collection == null) {
    slices=new LinkedHashMap<>(1);
    slices.put(slice.getName(),slice);
    Map<String,Object> props=new HashMap<>(1);
    props.put(DocCollection.DOC_ROUTER,ZkNodeProps.makeMap("name",ImplicitDocRouter.NAME));
    newCollection=new DocCollection(collectionName,slices,props,new ImplicitDocRouter());
  }
 else {
    slices=new LinkedHashMap<>(collection.getSlicesMap());
    slices.put(slice.getName(),slice);
    newCollection=collection.copyWithSlices(slices);
  }
  return newCollection;
}
