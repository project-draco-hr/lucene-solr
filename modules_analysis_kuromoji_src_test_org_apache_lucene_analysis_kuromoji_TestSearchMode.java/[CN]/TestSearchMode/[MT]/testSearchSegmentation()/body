{
  InputStream is=TestSearchMode.class.getResourceAsStream(SEGMENTATION_FILENAME);
  if (is == null) {
    throw new FileNotFoundException("Cannot find " + SEGMENTATION_FILENAME + " in test classpath");
  }
  try {
    LineNumberReader reader=new LineNumberReader(new InputStreamReader(is,IOUtils.CHARSET_UTF_8));
    String line=null;
    while ((line=reader.readLine()) != null) {
      line=line.replaceAll("#.*$","");
      if (line.trim().isEmpty()) {
        continue;
      }
      if (VERBOSE) {
        System.out.println("Line no. " + reader.getLineNumber() + ": "+ line);
      }
      String[] fields=line.split("\t",2);
      String sourceText=fields[0];
      String[] expectedTokens=fields[1].split("\\s+");
      assertAnalyzesTo(analyzer,sourceText,expectedTokens);
    }
  }
  finally {
    is.close();
  }
}
