def smokeTest(baseURL, version, tmpDir, isSigned):
    if (not DEBUG):
        if os.path.exists(tmpDir):
            raise RuntimeError(('temp dir %s exists; please remove first' % tmpDir))
    if (not os.path.exists(tmpDir)):
        os.makedirs(tmpDir)
    lucenePath = None
    solrPath = None
    print 
    print ('Load release URL "%s"...' % baseURL)
    newBaseURL = unshortenURL(baseURL)
    if (newBaseURL != baseURL):
        print ('  unshortened: %s' % newBaseURL)
        baseURL = newBaseURL
    for (text, subURL) in getDirEntries(baseURL):
        if (text.lower().find('lucene') != (-1)):
            lucenePath = subURL
        elif (text.lower().find('solr') != (-1)):
            solrPath = subURL
    if (lucenePath is None):
        raise RuntimeError('could not find lucene subdir')
    if (solrPath is None):
        raise RuntimeError('could not find solr subdir')
    print 
    print 'Test Lucene...'
    checkSigs('lucene', lucenePath, version, tmpDir, isSigned)
    for artifact in (('lucene-%s.tgz' % version), ('lucene-%s.zip' % version)):
        unpack('lucene', tmpDir, artifact, version)
    unpack('lucene', tmpDir, ('lucene-%s-src.tgz' % version), version)
    print 
    print 'Test Solr...'
    checkSigs('solr', solrPath, version, tmpDir, isSigned)
    for artifact in (('apache-solr-%s.tgz' % version), ('apache-solr-%s.zip' % version)):
        unpack('solr', tmpDir, artifact, version)
    unpack('solr', tmpDir, ('apache-solr-%s-src.tgz' % version), version)
    print 'Test Maven artifacts for Lucene and Solr...'
    checkMaven(baseURL, tmpDir, version, isSigned)
