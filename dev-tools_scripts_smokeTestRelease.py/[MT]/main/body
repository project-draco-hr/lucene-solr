def main():
    if (len(sys.argv) != 4):
        print 
        print ('Usage python -u %s BaseURL version tmpDir' % sys.argv[0])
        print 
        sys.exit(1)
    baseURL = sys.argv[1]
    version = sys.argv[2]
    tmpDir = os.path.abspath(sys.argv[3])
    if (not DEBUG):
        if os.path.exists(tmpDir):
            raise RuntimeError(('temp dir %s exists; please remove first' % tmpDir))
        os.makedirs(tmpDir)
    lucenePath = None
    solrPath = None
    print 'Load release URL...'
    for (text, subURL) in getDirEntries(baseURL):
        if (text.lower().find('lucene') != (-1)):
            lucenePath = subURL
        elif (text.lower().find('solr') != (-1)):
            solrPath = subURL
    if (lucenePath is None):
        raise RuntimeError('could not find lucene subdir')
    if (solrPath is None):
        raise RuntimeError('could not find solr subdir')
    print 
    print 'Test Lucene...'
    checkSigs('lucene', lucenePath, version, tmpDir)
    for artifact in (('lucene-%s.tgz' % version), ('lucene-%s.zip' % version)):
        unpack('lucene', tmpDir, artifact, version)
    unpack('lucene', tmpDir, ('lucene-%s-src.tgz' % version), version)
    print 
    print 'Test Solr...'
    checkSigs('solr', solrPath, version, tmpDir)
    for artifact in (('apache-solr-%s.tgz' % version), ('apache-solr-%s.zip' % version)):
        unpack('solr', tmpDir, artifact, version)
    unpack('solr', tmpDir, ('apache-solr-%s-src.tgz' % version), version)
