def unshortenURL(url):
    parsed = urlparse.urlparse(url)
    if (parsed[0] in ('http', 'https')):
        h = httplib.HTTPConnection(parsed.netloc)
        h.request('HEAD', parsed.path)
        response = h.getresponse()
        if (((response.status / 100) == 3) and response.getheader('Location')):
            return response.getheader('Location')
    return url
