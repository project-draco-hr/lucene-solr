{
  try {
synchronized (confDirectoryListeners) {
      if (!confDirectoryListeners.containsKey(zkDir)) {
        log.info("Watcher on {} is removed ",zkDir);
        return;
      }
      final Set<Runnable> listeners=confDirectoryListeners.get(zkDir);
      if (listeners != null && !listeners.isEmpty()) {
        new Thread(){
          public void run(){
            for (            final Runnable listener : listeners)             try {
              listener.run();
            }
 catch (            Exception e) {
              log.warn("listener throws error",e);
            }
          }
        }
.start();
      }
    }
  }
  finally {
    if (Event.EventType.None.equals(event.getType())) {
      log.info("A node got unwatched for {}",zkDir);
      return;
    }
 else {
      setConfWatcher(zkDir,this);
    }
  }
}
