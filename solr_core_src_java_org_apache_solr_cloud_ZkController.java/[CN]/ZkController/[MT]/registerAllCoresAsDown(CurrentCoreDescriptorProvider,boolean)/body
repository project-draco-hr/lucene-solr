{
  List<CoreDescriptor> descriptors=registerOnReconnect.getCurrentDescriptors();
  if (descriptors != null) {
    for (    CoreDescriptor descriptor : descriptors) {
      final String coreZkNodeName=getNodeName() + "_" + descriptor.getName();
      try {
        descriptor.getCloudDescriptor().isLeader=false;
        publish(descriptor,ZkStateReader.DOWN,updateLastPublished);
      }
 catch (      Exception e) {
        try {
          Thread.sleep(1000);
        }
 catch (        InterruptedException e1) {
          Thread.currentThread().interrupt();
        }
        try {
          publish(descriptor,ZkStateReader.DOWN);
        }
 catch (        Exception e2) {
          SolrException.log(log,"",e2);
          continue;
        }
      }
      try {
        waitForLeaderToSeeDownState(descriptor,coreZkNodeName);
      }
 catch (      Exception e) {
        SolrException.log(log,"",e);
        try {
          Thread.sleep(5000);
        }
 catch (        InterruptedException e1) {
          Thread.currentThread().interrupt();
        }
      }
    }
  }
}
