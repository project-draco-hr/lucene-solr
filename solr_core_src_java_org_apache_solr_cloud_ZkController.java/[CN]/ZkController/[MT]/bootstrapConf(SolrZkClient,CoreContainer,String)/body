{
  ZkConfigManager configManager=new ZkConfigManager(zkClient);
  List<CoreDescriptor> cds=cc.getCoresLocator().discover(cc);
  log.info("bootstrapping config for " + cds.size() + " cores into ZooKeeper using solr.xml from "+ solrHome);
  for (  CoreDescriptor cd : cds) {
    String coreName=cd.getName();
    String confName=cd.getCollectionName();
    if (StringUtils.isEmpty(confName))     confName=coreName;
    String instanceDir=cd.getInstanceDir();
    Path udir=Paths.get(instanceDir).resolve("conf");
    log.info("Uploading directory " + udir + " with name "+ confName+ " for SolrCore "+ coreName);
    configManager.uploadConfigDir(udir,confName);
  }
}
