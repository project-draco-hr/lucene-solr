{
synchronized (confDirectoryListeners) {
    final Set<Runnable> listeners=confDirectoryListeners.get(confDir);
    if (listeners == null) {
      log.warn(confDir + " has no more registered listeners, but a live one attempted to unregister!");
      return;
    }
    if (listeners.remove(listener)) {
      log.debug("removed listener for config directory [{}]",confDir);
    }
    if (listeners.isEmpty()) {
      log.debug("No more listeners for config directory [{}]",confDir);
      confDirectoryListeners.remove(confDir);
    }
  }
}
