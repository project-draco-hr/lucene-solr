{
  List<String> files=zkClient.getChildren(zkPath,null,true);
  for (  String file : files) {
    List<String> children=zkClient.getChildren(zkPath + "/" + file,null,true);
    if (children.size() == 0) {
      byte[] data=zkClient.getData(zkPath + "/" + file,null,null,true);
      dir.mkdirs();
      log.info("Write file " + new File(dir,file));
      FileUtils.writeByteArrayToFile(new File(dir,file),data);
    }
 else {
      downloadFromZK(zkClient,zkPath + "/" + file,new File(dir,file));
    }
  }
}
