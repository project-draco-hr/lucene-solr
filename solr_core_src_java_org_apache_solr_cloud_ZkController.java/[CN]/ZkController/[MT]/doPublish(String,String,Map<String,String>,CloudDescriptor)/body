{
  CoreState coreState=new CoreState(coreName,cloudDesc.getCollectionName(),props);
  coreStates.put(shardZkNodeName,coreState);
  final String nodePath="/node_states/" + getNodeName();
  try {
    zkClient.setData(nodePath,ZkStateReader.toJSON(coreStates.values()),true);
  }
 catch (  KeeperException e) {
    throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"could not publish node state",e);
  }
catch (  InterruptedException e) {
    Thread.currentThread().interrupt();
    throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"could not publish node state",e);
  }
}
