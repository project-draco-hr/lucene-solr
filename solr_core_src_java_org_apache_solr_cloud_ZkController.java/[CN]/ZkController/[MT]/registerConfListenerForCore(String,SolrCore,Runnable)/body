{
  if (listener == null) {
    throw new NullPointerException("listener cannot be null");
  }
synchronized (confDirectoryListeners) {
    final Set<Runnable> confDirListeners=getConfDirListeners(confDir);
    confDirListeners.add(listener);
    core.addCloseHook(new CloseHook(){
      @Override public void preClose(      SolrCore core){
        unregisterConfListener(confDir,listener);
      }
      @Override public void postClose(      SolrCore core){
      }
    }
);
  }
}
