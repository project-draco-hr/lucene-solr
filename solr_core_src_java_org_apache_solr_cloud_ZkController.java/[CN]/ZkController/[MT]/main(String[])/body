{
  String zkServerAddress=args[0];
  String solrPort=args[1];
  String confDir=args[2];
  String confName=args[3];
  String solrHome=null;
  if (args.length == 5) {
    solrHome=args[4];
  }
  SolrZkServer zkServer=null;
  if (solrHome != null) {
    zkServer=new SolrZkServer("true",null,solrHome,solrPort);
    zkServer.parseConfig();
    zkServer.start();
  }
  SolrZkClient zkClient=new SolrZkClient(zkServerAddress,15000,5000,new OnReconnect(){
    @Override public void command(){
    }
  }
);
  uploadConfigDir(zkClient,new File(confDir),confName);
  if (solrHome != null) {
    zkServer.stop();
  }
}
