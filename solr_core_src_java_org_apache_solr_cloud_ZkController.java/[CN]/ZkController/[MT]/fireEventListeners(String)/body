{
synchronized (confDirectoryListeners) {
    if (!confDirectoryListeners.containsKey(zkDir)) {
      log.info("Watcher on {} is removed ",zkDir);
      return false;
    }
    Set<Runnable> listeners=confDirectoryListeners.get(zkDir);
    if (listeners != null && !listeners.isEmpty()) {
      final Set<Runnable> listenersCopy=new HashSet<>(listeners);
      new Thread(){
        public void run(){
          log.info("Running listeners for {}",zkDir);
          for (          final Runnable listener : listenersCopy) {
            try {
              listener.run();
            }
 catch (            Exception e) {
              log.warn("listener throws error",e);
            }
          }
        }
      }
.start();
    }
  }
  return true;
}
