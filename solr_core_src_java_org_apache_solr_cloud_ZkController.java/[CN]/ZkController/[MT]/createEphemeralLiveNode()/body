{
  if (zkRunOnly) {
    return;
  }
  String nodeName=getNodeName();
  String nodePath=ZkStateReader.LIVE_NODES_ZKNODE + "/" + nodeName;
  log.info("Register node as live in ZooKeeper:" + nodePath);
  try {
    boolean nodeDeleted=true;
    try {
      zkClient.delete(nodePath,-1,true);
    }
 catch (    KeeperException.NoNodeException e) {
      nodeDeleted=false;
    }
    if (nodeDeleted) {
      log.info("Found a previous node that still exists while trying to register a new live node " + nodePath + " - removing existing node to create another.");
    }
    zkClient.makePath(nodePath,CreateMode.EPHEMERAL,true);
  }
 catch (  KeeperException e) {
    if (e.code() != KeeperException.Code.NODEEXISTS) {
      throw e;
    }
  }
}
