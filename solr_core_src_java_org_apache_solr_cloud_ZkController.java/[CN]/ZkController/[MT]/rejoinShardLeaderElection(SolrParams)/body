{
  try {
    String collectionName=params.get(COLLECTION_PROP);
    String shardId=params.get(SHARD_ID_PROP);
    String nodeName=params.get(NODE_NAME_PROP);
    String coreName=params.get(CORE_NAME_PROP);
    String electionNode=params.get(ELECTION_NODE_PROP);
    String baseUrl=params.get(BASE_URL_PROP);
    ZkNodeProps zkProps=new ZkNodeProps(CORE_NAME_PROP,coreName,NODE_NAME_PROP,nodeName,COLLECTION_PROP,collectionName,SHARD_ID_PROP,shardId,ELECTION_NODE_PROP,electionNode,BASE_URL_PROP,baseUrl);
    ShardLeaderElectionContext context=new ShardLeaderElectionContext(leaderElector,shardId,collectionName,nodeName,zkProps,this,getCoreContainer());
    LeaderElector elect=new LeaderElector(this.zkClient);
    context.leaderSeqPath=context.electionPath + LeaderElector.ELECTION_NODE + "/"+ electionNode;
    elect.setup(context);
    elect.retryElection(context,params.getBool(REJOIN_AT_HEAD_PROP));
  }
 catch (  Exception e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Unable to rejoin election",e);
  }
}
