{
  FieldInfo infos[]=new FieldInfo[size()];
  int upto=0;
  boolean hasVectors=false;
  boolean hasProx=false;
  boolean hasFreq=false;
  for (  FieldInfo info : this) {
    infos[upto++]=info.clone();
    hasVectors|=info.storeTermVector;
    hasProx|=info.isIndexed && info.indexOptions.compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS) >= 0;
    hasFreq|=info.isIndexed && info.indexOptions != IndexOptions.DOCS_ONLY;
  }
  return new ReadOnlyFieldInfos(infos,hasFreq,hasProx,hasVectors);
}
