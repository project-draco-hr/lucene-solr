{
  if (!field.indexed() && !field.stored()) {
    if (log.isTraceEnabled())     log.trace("Ignoring unindexed/unstored field: " + field);
    return null;
  }
  String val;
  try {
    val=toInternal(value.toString());
  }
 catch (  RuntimeException e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error while creating field '" + field + "' from value '"+ value+ "'",e,false);
  }
  if (val == null)   return null;
  org.apache.lucene.document.FieldType newType=new org.apache.lucene.document.FieldType();
  newType.setIndexed(field.indexed());
  newType.setTokenized(field.isTokenized());
  newType.setStored(field.stored());
  newType.setOmitNorms(field.omitNorms());
  newType.setIndexOptions(getIndexOptions(field,val));
  newType.setStoreTermVectors(field.storeTermVector());
  newType.setStoreTermVectorOffsets(field.storeTermOffsets());
  newType.setStoreTermVectorPositions(field.storeTermPositions());
  return createField(field.getName(),val,newType,boost);
}
