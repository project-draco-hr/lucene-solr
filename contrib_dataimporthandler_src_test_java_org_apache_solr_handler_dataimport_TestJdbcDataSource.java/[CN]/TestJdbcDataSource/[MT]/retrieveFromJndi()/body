{
  MockInitialContextFactory.bind("java:comp/env/jdbc/JndiDB",dataSource);
  props.put(JdbcDataSource.JNDI_NAME,"java:comp/env/jdbc/JndiDB");
  EasyMock.expect(dataSource.getConnection()).andReturn(connection);
  connection.setAutoCommit(false);
  connection.setHoldability(1);
  mockControl.replay();
  Connection conn=jdbcDataSource.createConnectionFactory(context,props).call();
  mockControl.verify();
  Assert.assertSame("connection",conn,connection);
}
