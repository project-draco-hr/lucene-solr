{
  final String fileName=IndexFileNames.segmentFileName(state.segmentName,state.codecId,INFO_FILE_EXT);
  final IndexOutput out=state.directory.createOutput(fileName);
  state.flushedFiles.add(fileName);
  try {
    out.writeInt(FORMAT_CURRENT);
    Writer writer=PackedInts.getWriter(out,pos,PackedInts.bitsRequired(max));
    for (int i=0; i < pos; i++) {
      writer.add(docValuesFields[i]);
    }
    writer.finish();
  }
  finally {
    out.close();
  }
}
