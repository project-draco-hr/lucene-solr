{
  final DaciukMihovAutomatonBuilderLight builder=new DaciukMihovAutomatonBuilderLight();
  CharsRef scratch=new CharsRef();
  for (  BytesRef b : input) {
    UnicodeUtil.UTF8toUTF16(b,scratch);
    builder.add(scratch);
  }
  LightAutomaton.Builder a=new LightAutomaton.Builder();
  convert(a,builder.complete(),new IdentityHashMap<State,Integer>());
  return a.finish();
}
