{
  NamedList<NamedList<NamedList<Object>>> cats=new NamedList<>();
  String[] requestedCats=req.getParams().getParams("cat");
  if (null == requestedCats || 0 == requestedCats.length) {
    for (    SolrInfoMBean.Category cat : SolrInfoMBean.Category.values()) {
      cats.add(cat.name(),new SimpleOrderedMap<NamedList<Object>>());
    }
  }
 else {
    for (    String catName : requestedCats) {
      cats.add(catName,new SimpleOrderedMap<NamedList<Object>>());
    }
  }
  Set<String> requestedKeys=arrayToSet(req.getParams().getParams("key"));
  Map<String,SolrInfoMBean> reg=req.getCore().getInfoRegistry();
  for (  Map.Entry<String,SolrInfoMBean> entry : reg.entrySet()) {
    String key=entry.getKey();
    SolrInfoMBean m=entry.getValue();
    if (!(requestedKeys.isEmpty() || requestedKeys.contains(key)))     continue;
    NamedList<NamedList<Object>> catInfo=cats.get(m.getCategory().name());
    if (null == catInfo)     continue;
    NamedList<Object> mBeanInfo=new SimpleOrderedMap<>();
    mBeanInfo.add("class",m.getName());
    mBeanInfo.add("version",m.getVersion());
    mBeanInfo.add("description",m.getDescription());
    mBeanInfo.add("src",m.getSource());
    URL[] urls=m.getDocs();
    if (urls != null) {
      List<String> docs=new ArrayList<>(urls.length);
      for (      URL url : urls) {
        docs.add(url.toExternalForm());
      }
      mBeanInfo.add("docs",docs);
    }
    if (req.getParams().getFieldBool(key,"stats",false))     mBeanInfo.add("stats",m.getStatistics());
    catInfo.add(key,mBeanInfo);
  }
  return cats;
}
