{
  Map<String,String> attributes=info.attributes;
  BreakIterator breakIterator=BreakIterator.getSentenceInstance(Locale.ROOT);
  PassageScorer scorer=new PassageScorer();
  String preTag=attributes.get("preTag");
  if (preTag == null) {
    preTag="<em>";
  }
  String postTag=attributes.get("postTag");
  if (postTag == null) {
    postTag="</em>";
  }
  String ellipsis=attributes.get("ellipsis");
  if (ellipsis == null) {
    ellipsis="... ";
  }
  PassageFormatter formatter=new PassageFormatter(preTag,postTag,ellipsis);
  int maxLength=PostingsHighlighter.DEFAULT_MAX_LENGTH;
  if (attributes.containsKey("maxLength")) {
    maxLength=Integer.parseInt(attributes.get("maxLength"));
  }
  highlighter=new PostingsHighlighter(maxLength,breakIterator,scorer,formatter);
}
