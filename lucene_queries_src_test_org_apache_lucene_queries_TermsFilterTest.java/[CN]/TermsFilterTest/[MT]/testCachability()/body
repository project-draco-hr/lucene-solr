{
  TermsFilter a=termsFilter(random().nextBoolean(),new Term("field1","a"),new Term("field1","b"));
  HashSet<Filter> cachedFilters=new HashSet<Filter>();
  cachedFilters.add(a);
  TermsFilter b=termsFilter(random().nextBoolean(),new Term("field1","b"),new Term("field1","a"));
  assertTrue("Must be cached",cachedFilters.contains(b));
  assertTrue("Must be cached",cachedFilters.contains(termsFilter(true,new Term("field1","a"),new Term("field1","a"),new Term("field1","b"))));
  assertFalse("Must not be cached",cachedFilters.contains(termsFilter(random().nextBoolean(),new Term("field1","a"),new Term("field1","a"),new Term("field1","b"),new Term("field1","v"))));
}
