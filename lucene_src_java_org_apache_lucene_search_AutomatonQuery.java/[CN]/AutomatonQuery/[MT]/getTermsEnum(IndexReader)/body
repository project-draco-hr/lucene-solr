{
  if (BasicOperations.isEmpty(automaton)) {
    return TermsEnum.EMPTY;
  }
  if (BasicOperations.isTotal(automaton)) {
    return MultiFields.getTerms(reader,getField()).iterator();
  }
  String singleton=automaton.getSingleton();
  if (singleton != null)   return new SingleTermsEnum(reader,term.createTerm(singleton));
  String commonPrefix=SpecialOperations.getCommonPrefix(automaton);
  if (automaton.equals(BasicAutomata.makeString(commonPrefix))) {
    return new SingleTermsEnum(reader,term.createTerm(commonPrefix));
  }
  Automaton prefixAutomaton=BasicOperations.concatenate(BasicAutomata.makeString(commonPrefix),BasicAutomata.makeAnyString());
  if (automaton.equals(prefixAutomaton)) {
    return new PrefixTermsEnum(reader,term.createTerm(commonPrefix));
  }
  return new AutomatonTermsEnum(automaton,term,reader);
}
