{
  DocValuesWriter writer=writers.get(fieldInfo.name);
  SortedSetDocValuesWriter sortedSetWriter;
  if (writer == null) {
    sortedSetWriter=new SortedSetDocValuesWriter(fieldInfo,bytesUsed);
    writers.put(fieldInfo.name,sortedSetWriter);
  }
 else   if (!(writer instanceof SortedSetDocValuesWriter)) {
    throw new IllegalArgumentException("Incompatible DocValues type: field \"" + fieldInfo.name + "\" changed from "+ getTypeDesc(writer)+ " to sorted");
  }
 else {
    sortedSetWriter=(SortedSetDocValuesWriter)writer;
  }
  sortedSetWriter.addValue(docID,value);
}
