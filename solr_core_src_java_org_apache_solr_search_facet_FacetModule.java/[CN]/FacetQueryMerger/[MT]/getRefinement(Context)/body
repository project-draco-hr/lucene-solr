{
  Collection<String> tags;
  if (mcontext.bucketWasMissing()) {
    tags=mcontext.getSubsWithPartial(freq);
  }
 else {
    tags=mcontext.getSubsWithRefinement(freq);
  }
  Map<String,Object> refinement=bucket.getRefinement(mcontext,tags);
  return refinement;
}
