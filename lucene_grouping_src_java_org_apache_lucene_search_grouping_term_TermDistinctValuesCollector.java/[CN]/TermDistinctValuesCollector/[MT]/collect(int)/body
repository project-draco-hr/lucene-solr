{
  if (doc > groupFieldTermIndex.docID()) {
    groupFieldTermIndex.advance(doc);
  }
  int ord;
  if (doc == groupFieldTermIndex.docID()) {
    ord=groupFieldTermIndex.ordValue();
  }
 else {
    ord=-1;
  }
  int slot=ordSet.find(ord);
  if (slot < 0) {
    return;
  }
  GroupCount gc=groupCounts[slot];
  if (doc > countFieldTermIndex.docID()) {
    countFieldTermIndex.advance(doc);
  }
  int countOrd;
  if (doc == countFieldTermIndex.docID()) {
    countOrd=countFieldTermIndex.ordValue();
  }
 else {
    countOrd=-1;
  }
  if (doesNotContainOrd(countOrd,gc.ords)) {
    if (countOrd == -1) {
      gc.uniqueValues.add(null);
    }
 else {
      BytesRef term=BytesRef.deepCopyOf(countFieldTermIndex.lookupOrd(countOrd));
      gc.uniqueValues.add(term);
    }
    gc.ords=Arrays.copyOf(gc.ords,gc.ords.length + 1);
    gc.ords[gc.ords.length - 1]=countOrd;
    if (gc.ords.length > 1) {
      Arrays.sort(gc.ords);
    }
  }
}
