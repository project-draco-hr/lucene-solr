{
  super(query);
  this.query=query;
  this.needsScores=(postingsFlags & PostingsEnum.FLAG_FREQS) != 0;
  this.similarity=searcher.getSimilarity();
  this.disableCoord=disableCoord;
  weights=new ArrayList<>(query.clauses().size());
  for (int i=0; i < query.clauses().size(); i++) {
    BooleanClause c=query.clauses().get(i);
    final int subQueryFlags=c.getOccur() == Occur.MUST_NOT ? PostingsEnum.FLAG_NONE : postingsFlags;
    Weight w=c.getQuery().createWeight(searcher,subQueryFlags);
    weights.add(w);
    if (!c.isProhibited()) {
      maxCoord++;
    }
  }
}
