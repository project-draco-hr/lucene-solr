{
  super(query);
  this.query=query;
  this.needsScores=needsScores;
  this.similarity=searcher.getSimilarity(needsScores);
  weights=new ArrayList<>();
  for (  BooleanClause c : query) {
    Weight w=searcher.createWeight(c.getQuery(),needsScores && c.isScoring());
    weights.add(w);
  }
}
