{
  if (args.length < 3) {
    System.err.println("Usage: IndexMergeTool <mergedIndex> <index1> <index2> [index3] ...");
    System.exit(1);
  }
  FSDirectory mergedIndex=FSDirectory.open(new File(args[0]));
  IndexWriter writer=new IndexWriter(mergedIndex,new IndexWriterConfig(null).setOpenMode(OpenMode.CREATE));
  Directory[] indexes=new Directory[args.length - 1];
  for (int i=1; i < args.length; i++) {
    indexes[i - 1]=FSDirectory.open(new File(args[i]));
  }
  System.out.println("Merging...");
  writer.addIndexes(indexes);
  System.out.println("Full merge...");
  writer.forceMerge(1);
  writer.close();
  System.out.println("Done.");
}
