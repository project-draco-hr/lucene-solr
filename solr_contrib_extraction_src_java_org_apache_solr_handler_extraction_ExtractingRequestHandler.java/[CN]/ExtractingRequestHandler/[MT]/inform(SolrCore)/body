{
  if (initArgs != null) {
    String tikaConfigLoc=(String)initArgs.get(CONFIG_LOCATION);
    if (tikaConfigLoc != null) {
      File configFile=new File(tikaConfigLoc);
      if (configFile.isAbsolute() == false) {
        configFile=new File(core.getResourceLoader().getConfigDir(),configFile.getPath());
      }
      try {
        config=new TikaConfig(configFile);
      }
 catch (      Exception e) {
        throw new SolrException(ErrorCode.SERVER_ERROR,e);
      }
    }
    String parseContextConfigLoc=(String)initArgs.get(PARSE_CONTEXT_CONFIG);
    if (parseContextConfigLoc != null) {
      try {
        parseContextConfig=new ParseContextConfig(core.getResourceLoader(),parseContextConfigLoc);
      }
 catch (      Exception e) {
        throw new SolrException(ErrorCode.SERVER_ERROR,e);
      }
    }
    NamedList configDateFormats=(NamedList)initArgs.get(DATE_FORMATS);
    if (configDateFormats != null && configDateFormats.size() > 0) {
      dateFormats=new HashSet<>();
      Iterator<Map.Entry> it=configDateFormats.iterator();
      while (it.hasNext()) {
        String format=(String)it.next().getValue();
        log.info("Adding Date Format: " + format);
        dateFormats.add(format);
      }
    }
  }
  if (config == null) {
    try {
      config=getDefaultConfig(core.getResourceLoader().getClassLoader());
    }
 catch (    MimeTypeException|IOException e) {
      throw new SolrException(ErrorCode.SERVER_ERROR,e);
    }
  }
  if (parseContextConfig == null) {
    parseContextConfig=new ParseContextConfig();
  }
  factory=createFactory();
}
