{
  this.fieldName=fieldName;
  Set<String> termSet=fieldQuery.getTermSet(fieldName);
  if (termSet == null)   return;
  final Fields vectors=reader.getTermVectors(docId);
  if (vectors == null) {
    return;
  }
  final Terms vector=vectors.terms(fieldName);
  if (vector == null) {
    return;
  }
  final CharsRef spare=new CharsRef();
  final TermsEnum termsEnum=vector.iterator(null);
  DocsAndPositionsEnum dpEnum=null;
  BytesRef text;
  int numDocs=reader.numDocs() - reader.numDeletedDocs();
  float weight=0;
  while ((text=termsEnum.next()) != null) {
    UnicodeUtil.UTF8toUTF16(text,spare);
    final String term=spare.toString();
    if (!termSet.contains(term)) {
      continue;
    }
    dpEnum=termsEnum.docsAndPositions(null,dpEnum,true);
    if (dpEnum == null) {
      return;
    }
    dpEnum.nextDoc();
    final int freq=dpEnum.freq();
    for (int i=0; i < freq; i++) {
      int pos=dpEnum.nextPosition();
      weight=(float)(Math.log(numDocs / (double)(reader.docFreq(fieldName,text) + 1)) + 1.0);
      termList.add(new TermInfo(term,dpEnum.startOffset(),dpEnum.endOffset(),pos,weight));
    }
  }
  Collections.sort(termList);
}
