{
  Set<String> words=new HashSet<String>();
  words.add("aaa");
  words.add("bbb");
  String input="aaa BBB ccc ddd EEE";
  Map<String,String> args=new HashMap<String,String>(DEFAULT_VERSION_PARAM);
  ResourceLoader loader=new SolrResourceLoader(null,null);
  KeepWordFilterFactory factory=new KeepWordFilterFactory();
  args.put("ignoreCase","true");
  factory.init(args);
  factory.inform(loader);
  factory.setWords(words);
  assertTrue(factory.isIgnoreCase());
  TokenStream stream=factory.create(new WhitespaceTokenizer(DEFAULT_VERSION,new StringReader(input)));
  assertTokenStreamContents(stream,new String[]{"aaa","BBB"});
  factory=new KeepWordFilterFactory();
  args=new HashMap<String,String>(DEFAULT_VERSION_PARAM);
  factory.init(args);
  factory.inform(loader);
  factory.setIgnoreCase(true);
  factory.setWords(words);
  assertTrue(factory.isIgnoreCase());
  stream=factory.create(new WhitespaceTokenizer(DEFAULT_VERSION,new StringReader(input)));
  assertTokenStreamContents(stream,new String[]{"aaa","BBB"});
  factory=new KeepWordFilterFactory();
  args=new HashMap<String,String>(DEFAULT_VERSION_PARAM);
  args.put("ignoreCase","false");
  factory.init(args);
  factory.inform(loader);
  factory.setWords(words);
  assertFalse(factory.isIgnoreCase());
  stream=factory.create(new WhitespaceTokenizer(DEFAULT_VERSION,new StringReader(input)));
  assertTokenStreamContents(stream,new String[]{"aaa"});
}
