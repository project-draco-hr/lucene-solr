{
  if (currentBufferIndex >= file.numBuffers()) {
    if (enforceEOF)     throw new IOException("Read past EOF");
 else {
      currentBufferIndex--;
      bufferPosition=BUFFER_SIZE;
    }
  }
 else {
    currentBuffer=file.getBuffer(currentBufferIndex);
    bufferPosition=0;
    bufferStart=(long)BUFFER_SIZE * (long)currentBufferIndex;
    long buflen=length - bufferStart;
    bufferLength=buflen > BUFFER_SIZE ? BUFFER_SIZE : (int)buflen;
  }
}
