{
synchronized (file) {
    long position=off + getFilePointer();
    file.seek(position);
    int total=0;
    if (position + len > end) {
      throw new EOFException("read past EOF: " + this);
    }
    try {
      do {
        final int readLength;
        if (total + chunkSize > len) {
          readLength=len - total;
        }
 else {
          readLength=chunkSize;
        }
        final int i=file.read(b,offset + total,readLength);
        if (i < 0) {
          throw new EOFException("read past EOF: " + this + " off: "+ offset+ " len: "+ len+ " total: "+ total+ " readLen: "+ readLength+ " end: "+ end);
        }
        total+=i;
      }
 while (total < len);
    }
 catch (    OutOfMemoryError e) {
      final OutOfMemoryError outOfMemoryError=new OutOfMemoryError("OutOfMemoryError likely caused by the Sun VM Bug described in " + "https://issues.apache.org/jira/browse/LUCENE-1566; try calling FSDirectory.setReadChunkSize " + "with a value smaller than the current chunk size (" + chunkSize + ")");
      outOfMemoryError.initCause(e);
      throw outOfMemoryError;
    }
catch (    IOException ioe) {
      throw new IOException(ioe.getMessage() + ": " + this,ioe);
    }
  }
}
