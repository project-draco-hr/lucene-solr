{
  try {
    check(q1);
    if (s != null) {
      checkFirstSkipTo(q1,s);
      checkSkipTo(q1,s);
      if (wrap) {
        check(random,q1,wrapUnderlyingReader(random,s,-1),false);
        check(random,q1,wrapUnderlyingReader(random,s,0),false);
        check(random,q1,wrapUnderlyingReader(random,s,+1),false);
      }
      checkExplanations(q1,s);
      Query q2=q1.clone();
      checkEqual(s.rewrite(q1),s.rewrite(q2));
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
