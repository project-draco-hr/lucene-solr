{
  GDataServerRegistry registry=GDataServerRegistry.getRegistry();
  String providedService=request.getParameter(PARAMETER_SERVICE);
  if (!registry.isServiceRegistered(providedService)) {
    setError(GDataResponse.NOT_FOUND,"no such service");
    throw new FeedHandlerException("ProvicdedService is not registered -- Name: " + providedService);
  }
  ProvidedService provServiceInstance=registry.getProvidedService(providedService);
  if (providedService == null) {
    setError(GDataResponse.BAD_REQUEST,"no such service");
    throw new FeedHandlerException("no such service registered -- " + providedService);
  }
  try {
    ServerBaseFeed retVal=new ServerBaseFeed(GDataEntityBuilder.buildFeed(request.getReader(),provServiceInstance));
    retVal.setServiceConfig(provServiceInstance);
    return retVal;
  }
 catch (  IOException e) {
    if (LOG.isInfoEnabled())     LOG.info("Can not read from input stream - ",e);
    setError(GDataResponse.BAD_REQUEST,"Can not read from input stream");
    throw e;
  }
catch (  ParseException e) {
    if (LOG.isInfoEnabled())     LOG.info("feed can not be parsed - ",e);
    setError(GDataResponse.BAD_REQUEST,"incoming feed can not be parsed");
    throw e;
  }
}
