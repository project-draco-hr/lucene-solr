{
  indexPath=Files.createTempDirectory("readonlyindex");
  Analyzer analyzer=new MockAnalyzer(random());
  Directory directory=newFSDirectory(indexPath);
  RandomIndexWriter iwriter=new RandomIndexWriter(random(),directory,analyzer);
  Document doc=new Document();
  doc.add(newTextField("fieldname",text,Field.Store.YES));
  iwriter.addDocument(doc);
  iwriter.close();
  directory.close();
  analyzer.close();
}
