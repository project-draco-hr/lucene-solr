{
  final int maxNumDocs=atLeast(100);
  final int numSeedDocs=random().nextInt(maxNumDocs / 10);
  final int numIters=atLeast(maxNumDocs * 10);
  final SolrInputDocument[] knownDocs=new SolrInputDocument[maxNumDocs];
  log.info("Starting {} iters by seeding {} of {} max docs",numIters,numSeedDocs,maxNumDocs);
  int itersSinceLastCommit=0;
  for (int i=0; i < numIters; i++) {
    itersSinceLastCommit=maybeCommit(random(),itersSinceLastCommit,numIters);
    if (i < numSeedDocs) {
      knownDocs[i]=addRandomDocument(i);
    }
 else {
      assertOneIter(knownDocs);
    }
  }
}
