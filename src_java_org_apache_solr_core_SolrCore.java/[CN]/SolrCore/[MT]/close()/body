{
  int count=refCount.decrementAndGet();
  if (count > 0)   return;
  if (count < 0) {
    log.severe("Too many close {count:" + count + "} on "+ this+ ". Please report this exception to solr-user@lucene.apache.org");
    return;
  }
  log.info(logid + " CLOSING SolrCore " + this);
  try {
    infoRegistry.clear();
  }
 catch (  Exception e) {
    SolrException.log(log,e);
  }
  try {
    closeSearcher();
  }
 catch (  Exception e) {
    SolrException.log(log,e);
  }
  try {
    searcherExecutor.shutdown();
  }
 catch (  Exception e) {
    SolrException.log(log,e);
  }
  try {
    updateHandler.close();
  }
 catch (  Exception e) {
    SolrException.log(log,e);
  }
  if (closeHooks != null) {
    for (    CloseHook hook : closeHooks) {
      hook.close(this);
    }
  }
}
