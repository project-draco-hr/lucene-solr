{
  final Map<String,UpdateRequestProcessorFactory> map=new HashMap<String,UpdateRequestProcessorFactory>();
  AbstractPluginLoader<UpdateRequestProcessorFactory> loader=new AbstractPluginLoader<UpdateRequestProcessorFactory>("updateRequestProcessor"){
    @Override protected void init(    UpdateRequestProcessorFactory plugin,    Node node) throws Exception {
      plugin.init(node);
    }
    @Override protected UpdateRequestProcessorFactory register(    String name,    UpdateRequestProcessorFactory plugin) throws Exception {
      return map.put(name,plugin);
    }
  }
;
  NodeList nodes=(NodeList)solrConfig.evaluate("updateRequestProcessor/factory",XPathConstants.NODESET);
  UpdateRequestProcessorFactory def=loader.load(nodes);
  if (def == null) {
    def=new ChainedUpdateProcessorFactory();
    def.init(null);
  }
  map.put(null,def);
  map.put("",def);
  return map;
}
