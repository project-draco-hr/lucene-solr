{
  String xpath="directoryFactory";
  Node node=(Node)solrConfig.evaluate(xpath,XPathConstants.NODE);
  DirectoryFactory dirFactory;
  if (node != null) {
    Map<String,DirectoryFactory> registry=new HashMap<String,DirectoryFactory>();
    NamedListPluginLoader<DirectoryFactory> indexReaderFactoryLoader=new NamedListPluginLoader<DirectoryFactory>("[solrconfig.xml] " + xpath,registry);
    dirFactory=indexReaderFactoryLoader.loadSingle(solrConfig.getResourceLoader(),node);
  }
 else {
    dirFactory=new StandardDirectoryFactory();
  }
  directoryFactory=dirFactory;
}
