{
  String gettable=solrConfig.get("admin/gettableFiles",null);
  if (gettable != null) {
    log.warning("solrconfig.xml uses deprecated <admin/gettableFiles>, Please " + "update your config to use the ShowFileRequestHandler.");
    if (getRequestHandler("/admin/file") == null) {
      NamedList<String> invariants=new NamedList<String>();
      Set<String> hide=new HashSet<String>();
      File configdir=new File(solrConfig.getResourceLoader().getConfigDir());
      for (      String file : configdir.list()) {
        hide.add(file.toUpperCase());
      }
      StringTokenizer st=new StringTokenizer(gettable);
      while (st.hasMoreTokens()) {
        hide.remove(st.nextToken().toUpperCase());
      }
      for (      String s : hide) {
        invariants.add(ShowFileRequestHandler.HIDDEN,s);
      }
      NamedList<Object> args=new NamedList<Object>();
      args.add("invariants",invariants);
      ShowFileRequestHandler handler=new ShowFileRequestHandler();
      handler.init(args);
      reqHandlers.register("/admin/file",handler);
      log.warning("adding ShowFileRequestHandler with hidden files: " + hide);
    }
  }
}
