{
  if (callback == null)   callback=this;
  String url=snitchInfo.getCoreContainer().getZkController().getZkStateReader().getBaseUrlForNodeName(node);
  params.add("class",klas);
  params.add(ACTION,INVOKE.toString());
  try {
    SimpleSolrResponse rsp=invoke(snitchInfo.getCoreContainer().getUpdateShardHandler(),url,CoreContainer.CORES_HANDLER_PATH,params);
    Map<String,Object> returnedVal=(Map<String,Object>)rsp.getResponse().get(klas);
    if (exception == null) {
    }
 else {
      callback.remoteCallback(SnitchContext.this,returnedVal);
    }
    callback.remoteCallback(this,returnedVal);
  }
 catch (  Exception e) {
    log.error("Unable to invoke snitch counterpart",e);
    exception=e;
  }
}
