{
  ifVerbose("adding id",id,"val=",nextVal,"version",version);
  Long returnedVersion=addAndGetVersion(sdoc("id",Integer.toString(id),field,Long.toString(nextVal),"_version_",Long.toString(version)),params(DISTRIB_UPDATE_PARAM,FROM_LEADER));
  if (returnedVersion != null) {
    assertEquals(version,returnedVersion.longValue());
  }
synchronized (model) {
    DocInfo currInfo=model.get(id);
    if (version > currInfo.version) {
      model.put(id,new DocInfo(version,nextVal));
    }
  }
  ifVerbose("adding id",id,"val=",nextVal,"version",version,"DONE");
}
