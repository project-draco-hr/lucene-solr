{
  for (int i=0; i < 17; i++) {
    MMapDirectory mmapDir=new MMapDirectory(_TestUtil.getTempDir("testSeekEnd"));
    mmapDir.setMaxChunkSize(1 << i);
    IndexOutput io=mmapDir.createOutput("bytes",IOContext.DEFAULT);
    byte bytes[]=new byte[1 << i];
    random.nextBytes(bytes);
    io.writeBytes(bytes,bytes.length);
    io.close();
    IndexInput ii=mmapDir.openInput("bytes",IOContext.DEFAULT);
    byte actual[]=new byte[1 << i];
    ii.readBytes(actual,0,actual.length);
    assertEquals(new BytesRef(bytes),new BytesRef(actual));
    ii.seek(1 << i);
    ii.close();
    mmapDir.close();
  }
}
