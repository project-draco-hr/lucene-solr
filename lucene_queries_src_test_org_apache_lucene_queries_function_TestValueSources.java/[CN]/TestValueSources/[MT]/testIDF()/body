{
  Similarity saved=searcher.getSimilarity(true);
  try {
    searcher.setSimilarity(new DefaultSimilarity());
    ValueSource vs=new IDFValueSource("bogus","bogus","text",new BytesRef("test"));
    assertHits(new FunctionQuery(vs),new float[]{1.0f,1.0f});
    assertAllExist(vs);
  }
  finally {
    searcher.setSimilarity(saved);
  }
}
