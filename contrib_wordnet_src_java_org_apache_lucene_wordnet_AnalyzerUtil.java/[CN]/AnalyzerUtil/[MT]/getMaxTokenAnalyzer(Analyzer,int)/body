{
  if (child == null)   throw new IllegalArgumentException("child analyzer must not be null");
  if (maxTokens < 0)   throw new IllegalArgumentException("maxTokens must not be negative");
  if (maxTokens == Integer.MAX_VALUE)   return child;
  return new Analyzer(){
    public TokenStream tokenStream(    String fieldName,    Reader reader){
      return new TokenFilter(child.tokenStream(fieldName,reader)){
        private int todo=maxTokens;
        public boolean incrementToken() throws IOException {
          return --todo >= 0 ? input.incrementToken() : false;
        }
      }
;
    }
  }
;
}
