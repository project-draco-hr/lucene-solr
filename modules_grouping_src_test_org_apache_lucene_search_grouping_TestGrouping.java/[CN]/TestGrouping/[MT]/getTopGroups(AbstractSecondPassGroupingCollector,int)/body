{
  if (c.getClass().isAssignableFrom(TermSecondPassGroupingCollector.class)) {
    return ((TermSecondPassGroupingCollector)c).getTopGroups(withinGroupOffset);
  }
 else   if (c.getClass().isAssignableFrom(FunctionSecondPassGroupingCollector.class)) {
    TopGroups<MutableValue> mvalTopGroups=((FunctionSecondPassGroupingCollector)c).getTopGroups(withinGroupOffset);
    List<GroupDocs<BytesRef>> groups=new ArrayList<GroupDocs<BytesRef>>(mvalTopGroups.groups.length);
    for (    GroupDocs<MutableValue> mvalGd : mvalTopGroups.groups) {
      BytesRef groupValue=mvalGd.groupValue.exists() ? ((MutableValueStr)mvalGd.groupValue).value : null;
      groups.add(new GroupDocs<BytesRef>(mvalGd.maxScore,mvalGd.totalHits,mvalGd.scoreDocs,groupValue,mvalGd.groupSortValues));
    }
    return new TopGroups<BytesRef>(mvalTopGroups.groupSort,mvalTopGroups.withinGroupSort,mvalTopGroups.totalHitCount,mvalTopGroups.totalGroupedHitCount,groups.toArray(new GroupDocs[groups.size()]));
  }
  fail();
  return null;
}
