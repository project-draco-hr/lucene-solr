{
  for (  GroupDocs group : topGroups.groups) {
    assertTrue(group instanceof GroupDocsAndShards);
    GroupDocsAndShards withShards=(GroupDocsAndShards)group;
    for (int hitIDX=0; hitIDX < withShards.scoreDocs.length; hitIDX++) {
      final ScoreDoc sd=withShards.scoreDocs[hitIDX];
      assertEquals("doc=" + sd.doc + " wrong shard",ReaderUtil.subIndex(sd.doc,docStarts),withShards.shardIndex[hitIDX]);
    }
  }
}
