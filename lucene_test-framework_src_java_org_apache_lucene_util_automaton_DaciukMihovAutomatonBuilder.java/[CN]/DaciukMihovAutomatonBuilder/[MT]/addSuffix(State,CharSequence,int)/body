{
  final int len=current.length();
  while (fromIndex < len) {
    int cp=Character.codePointAt(current,fromIndex);
    state=state.newState(cp);
    fromIndex+=Character.charCount(cp);
  }
  state.is_final=true;
}
