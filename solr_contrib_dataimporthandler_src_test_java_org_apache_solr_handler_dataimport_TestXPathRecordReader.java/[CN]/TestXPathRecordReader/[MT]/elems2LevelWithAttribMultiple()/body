{
  String xml="<root>\n" + "\t<a>\n\t   <b k=\"x\" m=\"n\" >\n" + "\t             <x>x0</x>\n"+ "\t             <y>y0</y>\n"+ "\t             </b>\n"+ "\t          <b k=\"y\" m=\"p\">\n"+ "\t             <x>x1</x>\n"+ "\t             <y>y1</y>\n"+ "\t             </b>\n"+ "\t   </a>\n"+ "\t<a>\n\t   <b k=\"x\">\n"+ "\t             <x>x3</x>\n"+ "\t             </b>\n"+ "\t          <b m=\"n\">\n"+ "\t             <y>y4</y>\n"+ "\t             </b>\n"+ "\t   </a>\n"+ "</root>";
  XPathRecordReader rr=new XPathRecordReader("/root/a");
  rr.addField("x","/root/a/b[@k][@m='n']/x",true);
  rr.addField("y","/root/a/b[@k][@m='n']/y",true);
  List<Map<String,Object>> l=rr.getAllRecords(new StringReader(xml));
  Assert.assertEquals(2,l.size());
  Assert.assertEquals(1,((List)l.get(0).get("x")).size());
  Assert.assertEquals(1,((List)l.get(0).get("y")).size());
  Assert.assertEquals(0,l.get(1).size());
}
