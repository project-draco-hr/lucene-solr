{
  PrefixAwareTokenFilter ts;
  ts=new PrefixAwareTokenFilter(new SingleTokenTokenStream(createToken("a",0,1)),new SingleTokenTokenStream(createToken("b",0,1)));
  final Token reusableToken=new Token();
  assertNext(ts,reusableToken,"a",0,1);
  assertNext(ts,reusableToken,"b",1,2);
  assertNull(ts.next(reusableToken));
  ts=new PrefixAwareTokenFilter(new SingleTokenTokenStream(createToken("^",0,0)),new WhitespaceTokenizer(new StringReader("hello world")));
  ts=new PrefixAwareTokenFilter(ts,new SingleTokenTokenStream(createToken("$",0,0)));
  assertNext(ts,reusableToken,"^",0,0);
  assertNext(ts,reusableToken,"hello",0,5);
  assertNext(ts,reusableToken,"world",6,11);
  assertNext(ts,reusableToken,"$",11,11);
  assertNull(ts.next(reusableToken));
}
