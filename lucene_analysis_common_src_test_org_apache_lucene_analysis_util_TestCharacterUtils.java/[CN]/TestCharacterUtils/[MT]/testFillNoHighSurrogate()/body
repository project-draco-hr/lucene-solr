{
  CharacterUtils versions[]=new CharacterUtils[]{CharacterUtils.getInstance(),CharacterUtils.getJava4Instance()};
  for (  CharacterUtils instance : versions) {
    Reader reader=new StringReader("helloworld");
    CharacterBuffer buffer=CharacterUtils.newCharacterBuffer(6);
    assertTrue(instance.fill(buffer,reader));
    assertEquals(0,buffer.getOffset());
    assertEquals(6,buffer.getLength());
    assertEquals("hellow",new String(buffer.getBuffer()));
    assertFalse(instance.fill(buffer,reader));
    assertEquals(4,buffer.getLength());
    assertEquals(0,buffer.getOffset());
    assertEquals("orld",new String(buffer.getBuffer(),buffer.getOffset(),buffer.getLength()));
    assertFalse(instance.fill(buffer,reader));
  }
}
