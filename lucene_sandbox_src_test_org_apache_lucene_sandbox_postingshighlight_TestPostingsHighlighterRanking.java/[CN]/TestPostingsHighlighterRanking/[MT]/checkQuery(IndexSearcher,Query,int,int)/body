{
  for (int n=1; n < maxTopN; n++) {
    FakePassageFormatter f1=new FakePassageFormatter();
    PostingsHighlighter p1=new PostingsHighlighter("body",Integer.MAX_VALUE - 1,BreakIterator.getSentenceInstance(Locale.ROOT),new PassageScorer(),f1);
    FakePassageFormatter f2=new FakePassageFormatter();
    PostingsHighlighter p2=new PostingsHighlighter("body",Integer.MAX_VALUE - 1,BreakIterator.getSentenceInstance(Locale.ROOT),new PassageScorer(),f2);
    BooleanQuery bq=new BooleanQuery(false);
    bq.add(query,BooleanClause.Occur.MUST);
    bq.add(new TermQuery(new Term("id",Integer.toString(doc))),BooleanClause.Occur.MUST);
    TopDocs td=is.search(bq,1);
    p1.highlight(bq,is,td,n);
    p2.highlight(bq,is,td,n + 1);
    assertTrue(f2.seen.containsAll(f1.seen));
  }
}
