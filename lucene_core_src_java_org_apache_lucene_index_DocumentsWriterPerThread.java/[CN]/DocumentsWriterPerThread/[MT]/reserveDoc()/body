{
  if (pendingNumDocs.incrementAndGet() > IndexWriter.getActualMaxDocs()) {
    pendingNumDocs.decrementAndGet();
    throw new IllegalStateException("number of documents in the index cannot exceed " + IndexWriter.getActualMaxDocs());
  }
}
