{
  MockDirectoryWrapper dir=newMockDirectory();
  dir.setCheckIndexOnClose(false);
  new IndexWriter(dir,new IndexWriterConfig(null)).close();
  SegmentInfos sis=new SegmentInfos();
  sis.read(dir);
  assertEquals(1,sis.getGeneration());
  dir.createOutput(IndexFileNames.SEGMENTS + "_",IOContext.DEFAULT).close();
  IndexFileDeleter.inflateGens(sis,Arrays.asList(dir.listAll()),InfoStream.getDefault());
  assertEquals(1,sis.getGeneration());
  dir.close();
}
