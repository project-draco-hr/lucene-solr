{
  MockDirectoryWrapper dir=newMockDirectory();
  dir.setCheckIndexOnClose(false);
  new IndexWriter(dir,new IndexWriterConfig(null)).close();
  SegmentInfos sis=SegmentInfos.readLatestCommit(dir);
  assertEquals(1,sis.getGeneration());
  dir.createOutput(IndexFileNames.SEGMENTS + "_2",IOContext.DEFAULT).close();
  IndexFileDeleter.inflateGens(sis,Arrays.asList(dir.listAll()),InfoStream.getDefault());
  assertEquals(2,sis.getGeneration());
  dir.createOutput(IndexFileNames.SEGMENTS + "_4",IOContext.DEFAULT).close();
  IndexFileDeleter.inflateGens(sis,Arrays.asList(dir.listAll()),InfoStream.getDefault());
  assertEquals(4,sis.getGeneration());
  dir.close();
}
