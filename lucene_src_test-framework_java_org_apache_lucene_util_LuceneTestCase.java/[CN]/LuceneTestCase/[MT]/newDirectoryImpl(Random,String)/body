{
  if (clazzName.equals("random"))   clazzName=randomDirectory(random);
  if (clazzName.indexOf(".") == -1)   clazzName="org.apache.lucene.store." + clazzName;
  try {
    final Class<? extends Directory> clazz=Class.forName(clazzName).asSubclass(Directory.class);
    if (FSDirectory.class.isAssignableFrom(clazz)) {
      final File tmpFile=_TestUtil.createTempFile("test","tmp",TEMP_DIR);
      tmpFile.delete();
      tmpFile.mkdir();
      registerTempFile(tmpFile);
      return newFSDirectoryImpl(clazz.asSubclass(FSDirectory.class),tmpFile);
    }
    return clazz.newInstance();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
