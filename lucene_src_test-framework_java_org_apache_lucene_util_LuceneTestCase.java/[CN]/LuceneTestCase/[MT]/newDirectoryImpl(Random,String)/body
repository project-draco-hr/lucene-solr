{
  if (clazzName.equals("random")) {
    clazzName=randomDirectory(random);
  }
  try {
    final Class<? extends Directory> clazz=CommandLineUtil.loadDirectoryClass(clazzName);
    if (FSDirectory.class.isAssignableFrom(clazz)) {
      final File dir=_TestUtil.getTempDir("index");
      dir.mkdirs();
      return newFSDirectoryImpl(clazz.asSubclass(FSDirectory.class),dir);
    }
    return clazz.newInstance();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
