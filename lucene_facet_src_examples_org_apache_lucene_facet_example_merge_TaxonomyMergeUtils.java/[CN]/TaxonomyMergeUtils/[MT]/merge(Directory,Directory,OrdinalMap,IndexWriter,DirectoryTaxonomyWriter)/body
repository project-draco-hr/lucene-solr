{
  destTaxWriter.addTaxonomies(new Directory[]{srcTaxDir},new OrdinalMap[]{map});
  PayloadProcessorProvider payloadProcessor=new FacetsPayloadProcessorProvider(srcIndexDir,map.getMap(),new DefaultFacetIndexingParams());
  destIndexWriter.setPayloadProcessorProvider(payloadProcessor);
  IndexReader reader=IndexReader.open(srcIndexDir);
  try {
    destIndexWriter.addIndexes(reader);
    destTaxWriter.commit();
    destIndexWriter.commit();
  }
  finally {
    reader.close();
  }
}
