{
  for (; ; ) {
    if (isEndOfLine(c)) {
      tkn.type=TT_EORECORD;
      tkn.isReady=true;
      break;
    }
 else     if (isEndOfFile(c)) {
      tkn.type=TT_EOF;
      tkn.isReady=true;
      break;
    }
 else     if (c == strategy.getDelimiter()) {
      tkn.type=TT_TOKEN;
      tkn.isReady=true;
      break;
    }
 else     if (c == '\\' && strategy.getUnicodeEscapeInterpretation() && in.lookAhead() == 'u') {
      tkn.content.append((char)unicodeEscapeLexer(c));
    }
 else     if (c == strategy.getEscape()) {
      tkn.content.append((char)readEscape(c));
    }
 else {
      tkn.content.append((char)c);
    }
    c=in.read();
  }
  if (strategy.getIgnoreTrailingWhitespaces()) {
    tkn.content.trimTrailingWhitespace();
  }
  return tkn;
}
