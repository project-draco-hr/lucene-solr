{
  if (min > max) {
    return BasicAutomata.makeEmptyLight();
  }
  LightAutomaton b;
  if (min == 0) {
    b=BasicAutomata.makeEmptyStringLight();
  }
 else   if (min == 1) {
    b=new LightAutomaton();
    b.copy(a);
  }
 else {
    List<LightAutomaton> as=new ArrayList<>();
    for (int i=0; i < min; i++) {
      as.add(a);
    }
    b=concatenateLight(as);
  }
  Set<Integer> prevAcceptStates=new HashSet<>(b.getAcceptStates());
  for (int i=min; i < max; i++) {
    int numStates=b.getNumStates();
    b.copy(a);
    for (    int s : prevAcceptStates) {
      b.addEpsilon(s,numStates);
    }
    prevAcceptStates.clear();
    for (    int s : a.getAcceptStates()) {
      prevAcceptStates.add(numStates + s);
    }
  }
  b.finish();
  return b;
}
