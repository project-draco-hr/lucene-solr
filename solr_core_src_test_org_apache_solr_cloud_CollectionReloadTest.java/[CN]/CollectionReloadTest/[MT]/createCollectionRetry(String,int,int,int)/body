{
  CollectionAdminResponse resp=createCollection(testCollectionName,numShards,replicationFactor,maxShardsPerNode);
  if (resp.getResponse().get("failure") != null) {
    CollectionAdminRequest.Delete req=new CollectionAdminRequest.Delete();
    req.setCollectionName(testCollectionName);
    req.process(cloudClient);
    resp=createCollection(testCollectionName,numShards,replicationFactor,maxShardsPerNode);
    if (resp.getResponse().get("failure") != null)     fail("Could not create " + testCollectionName);
  }
}
