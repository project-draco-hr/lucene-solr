{
  boolean onlyIfActive=rb.req.getParams().getBool("onlyIfActive",false);
  if (onlyIfActive) {
    if (!rb.req.getCore().getCoreDescriptor().getCloudDescriptor().getLastPublished().equals(ZkStateReader.ACTIVE)) {
      log.info("Last published state was not ACTIVE, cannot sync.");
      rb.rsp.add("sync","false");
      return;
    }
  }
  List<String> replicas=StrUtils.splitSmart(sync,",",true);
  boolean cantReachIsSuccess=rb.req.getParams().getBool("cantReachIsSuccess",false);
  PeerSync peerSync=new PeerSync(rb.req.getCore(),replicas,nVersions,cantReachIsSuccess,true);
  boolean success=peerSync.sync();
  rb.rsp.add("sync",success);
}
