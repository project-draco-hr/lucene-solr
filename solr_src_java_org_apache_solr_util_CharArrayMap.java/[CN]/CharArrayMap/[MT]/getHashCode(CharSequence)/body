{
  int code;
  if (ignoreCase) {
    code=0;
    int len=text.length();
    for (int i=0; i < len; i++) {
      code=code * 31 + Character.toLowerCase(text.charAt(i));
    }
  }
 else {
    if (false && text instanceof String) {
      code=text.hashCode();
    }
 else {
      code=0;
      int len=text.length();
      for (int i=0; i < len; i++) {
        code=code * 31 + text.charAt(i);
      }
    }
  }
  return code;
}
