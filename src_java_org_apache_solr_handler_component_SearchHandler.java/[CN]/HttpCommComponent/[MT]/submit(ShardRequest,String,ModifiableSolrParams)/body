{
  Callable<ShardResponse> task=new Callable<ShardResponse>(){
    public ShardResponse call() throws Exception {
      ShardResponse srsp=new ShardResponse();
      srsp.req=sreq;
      srsp.shard=shard;
      try {
        String url="http://" + shard;
        params.remove("wt");
        params.remove("version");
        SolrServer server=new CommonsHttpSolrServer(url,client);
        srsp.rsp=server.query(sreq.params);
      }
 catch (      Throwable th) {
        srsp.exception=th;
        if (th instanceof SolrException) {
          srsp.rspCode=((SolrException)th).code();
        }
 else {
          srsp.rspCode=-1;
        }
      }
      return srsp;
    }
  }
;
  pending.add(completionService.submit(task));
}
