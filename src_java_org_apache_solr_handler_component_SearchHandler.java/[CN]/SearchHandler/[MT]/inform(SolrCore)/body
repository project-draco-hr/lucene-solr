{
  Object declaredComponents=initArgs.get(INIT_COMPONENTS);
  List<String> first=(List<String>)initArgs.get(INIT_FIRST_COMPONENTS);
  List<String> last=(List<String>)initArgs.get(INIT_LAST_COMPONENTS);
  List<String> list=null;
  if (declaredComponents == null) {
    list=getDefaultComponents();
    if (first != null) {
      List<String> clist=first;
      clist.addAll(list);
      list=clist;
    }
    if (last != null) {
      list.addAll(last);
    }
  }
 else {
    list=(List<String>)declaredComponents;
    if (first != null || last != null) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"First/Last components only valid if you do not declare 'components'");
    }
  }
  components=new ArrayList<SearchComponent>(list.size());
  for (  String c : list) {
    SearchComponent comp=core.getSearchComponent(c);
    components.add(comp);
    log.info("Adding  component:" + comp);
  }
}
