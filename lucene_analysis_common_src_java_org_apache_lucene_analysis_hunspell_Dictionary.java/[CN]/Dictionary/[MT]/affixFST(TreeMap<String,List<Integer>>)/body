{
  IntSequenceOutputs outputs=IntSequenceOutputs.getSingleton();
  Builder<IntsRef> builder=new Builder<>(FST.INPUT_TYPE.BYTE4,outputs);
  IntsRefBuilder scratch=new IntsRefBuilder();
  for (  Map.Entry<String,List<Integer>> entry : affixes.entrySet()) {
    Util.toUTF32(entry.getKey(),scratch);
    List<Integer> entries=entry.getValue();
    IntsRef output=new IntsRef(entries.size());
    for (    Integer c : entries) {
      output.ints[output.length++]=c;
    }
    builder.add(scratch.get(),output);
  }
  return builder.finish();
}
