{
  this.clearSourceCollection();
  CloudSolrClient client=createCloudClient(SOURCE_COLLECTION);
  List<CloudJettyRunner> slaves=this.getShardToSlaveJetty(SOURCE_COLLECTION,SHARD1);
  try {
    for (int i=0; i < 10; i++) {
      for (int j=i * 20; j < (i * 20) + 20; j++) {
        client.add(getDoc(id,Integer.toString(j)));
        if (j == 45) {
          ChaosMonkey.stop(slaves.get(0).jetty);
        }
      }
      commit(SOURCE_COLLECTION);
    }
  }
  finally {
    client.close();
  }
  assertEquals(200,getNumDocs(SOURCE_COLLECTION));
  this.restartServer(slaves.get(0));
  this.assertUpdateLogs(SOURCE_COLLECTION,10);
}
