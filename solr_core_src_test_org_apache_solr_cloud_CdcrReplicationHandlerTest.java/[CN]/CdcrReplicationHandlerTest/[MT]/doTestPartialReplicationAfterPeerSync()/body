{
  this.clearSourceCollection();
  for (int i=0; i < 5; i++) {
    List<SolrInputDocument> docs=new ArrayList<>();
    for (int j=i * 10; j < (i * 10) + 10; j++) {
      docs.add(getDoc(id,Integer.toString(j)));
    }
    index(SOURCE_COLLECTION,docs);
  }
  List<CloudJettyRunner> slaves=this.getShardToSlaveJetty(SOURCE_COLLECTION,SHARD1);
  ChaosMonkey.stop(slaves.get(0).jetty);
  for (int i=5; i < 10; i++) {
    List<SolrInputDocument> docs=new ArrayList<>();
    for (int j=i * 10; j < (i * 10) + 10; j++) {
      docs.add(getDoc(id,Integer.toString(j)));
    }
    index(SOURCE_COLLECTION,docs);
  }
  assertEquals(100,getNumDocs(SOURCE_COLLECTION));
  this.restartServer(slaves.get(0));
  ChaosMonkey.stop(slaves.get(0).jetty);
  for (int i=10; i < 15; i++) {
    List<SolrInputDocument> docs=new ArrayList<>();
    for (int j=i * 20; j < (i * 20) + 20; j++) {
      docs.add(getDoc(id,Integer.toString(j)));
    }
    index(SOURCE_COLLECTION,docs);
  }
  this.restartServer(slaves.get(0));
  this.assertUpdateLogsEquals(SOURCE_COLLECTION,15);
}
