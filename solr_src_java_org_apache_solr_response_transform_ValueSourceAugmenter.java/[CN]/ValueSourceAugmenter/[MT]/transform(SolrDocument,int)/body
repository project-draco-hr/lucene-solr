{
  try {
    int idx=ReaderUtil.subIndex(docid,readerContexts);
    IndexReader.AtomicReaderContext rcontext=readerContexts[idx];
    DocValues values=docValuesArr[idx];
    if (values == null) {
      docValuesArr[idx]=values=valueSource.getValues(fcontext,rcontext);
    }
    int localId=docid - rcontext.docBase;
    float val=values.floatVal(localId);
    doc.setField(name,val);
  }
 catch (  IOException e) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"exception at docid " + docid + " for valuesource "+ valueSource,e,false);
  }
}
