{
  final Directory dir=newDirectory();
  final RandomIndexWriter w=new RandomIndexWriter(random(),dir);
  w.close();
  final SearcherManager sm=new SearcherManager(dir,null);
  Thread t=new Thread(){
    @Override public void run(){
      try {
        sm.maybeRefreshBlocking();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
;
  t.start();
  t.join();
  assertTrue("failde to obtain the refreshLock!",sm.maybeRefresh());
  sm.close();
  dir.close();
}
