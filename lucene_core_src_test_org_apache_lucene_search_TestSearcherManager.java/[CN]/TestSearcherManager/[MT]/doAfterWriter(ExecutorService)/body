{
  final SearcherFactory factory=new SearcherFactory(){
    @Override public IndexSearcher newSearcher(    IndexReader r) throws IOException {
      IndexSearcher s=new IndexSearcher(r,es);
      TestSearcherManager.this.warmCalled=true;
      s.search(new TermQuery(new Term("body","united")),10);
      return s;
    }
  }
;
  if (random().nextBoolean()) {
    mgr=new SearcherManager(writer,true,factory);
    isNRT=true;
  }
 else {
    writer.commit();
    mgr=new SearcherManager(dir,factory);
    isNRT=false;
    assertMergedSegmentsWarmed=false;
  }
  lifetimeMGR=new SearcherLifetimeManager();
}
