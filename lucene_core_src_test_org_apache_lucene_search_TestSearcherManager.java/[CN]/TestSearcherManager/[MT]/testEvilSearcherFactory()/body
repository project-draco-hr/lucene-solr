{
  final Random random=random();
  final Directory dir=newDirectory();
  final RandomIndexWriter w=new RandomIndexWriter(random,dir);
  w.commit();
  final IndexReader other=DirectoryReader.open(dir);
  final SearcherFactory theEvilOne=new SearcherFactory(){
    @Override public IndexSearcher newSearcher(    IndexReader ignored) throws IOException {
      return new IndexSearcher(other);
    }
  }
;
  try {
    new SearcherManager(dir,theEvilOne);
  }
 catch (  IllegalStateException ise) {
  }
  try {
    new SearcherManager(w.w,random.nextBoolean(),theEvilOne);
  }
 catch (  IllegalStateException ise) {
  }
  w.close();
  other.close();
  dir.close();
}
