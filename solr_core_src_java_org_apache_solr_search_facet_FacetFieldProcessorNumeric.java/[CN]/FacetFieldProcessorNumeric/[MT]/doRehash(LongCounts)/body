{
  if (collectAcc == null && missingAcc == null && allBucketsAcc == null)   return;
  int newTableSize=table.numSlots();
  int numSlots=newTableSize;
  final int oldMissingSlot=missingSlot;
  final int oldAllBucketsSlot=allBucketsSlot;
  if (oldMissingSlot >= 0) {
    missingSlot=numSlots++;
  }
  if (oldAllBucketsSlot >= 0) {
    allBucketsSlot=numSlots++;
  }
  final int finalNumSlots=numSlots;
  final int[] mapping=table.oldToNewMapping;
  SlotAcc.Resizer resizer=new SlotAcc.Resizer(){
    @Override public int getNewSize(){
      return finalNumSlots;
    }
    @Override public int getNewSlot(    int oldSlot){
      if (oldSlot < mapping.length) {
        return mapping[oldSlot];
      }
      if (oldSlot == oldMissingSlot) {
        return missingSlot;
      }
      if (oldSlot == oldAllBucketsSlot) {
        return allBucketsSlot;
      }
      return -1;
    }
  }
;
  if (collectAcc != null) {
    collectAcc.resize(resizer);
  }
  if (missingAcc != null) {
    missingAcc.resize(resizer);
  }
  if (allBucketsAcc != null) {
    allBucketsAcc.resize(resizer);
  }
}
