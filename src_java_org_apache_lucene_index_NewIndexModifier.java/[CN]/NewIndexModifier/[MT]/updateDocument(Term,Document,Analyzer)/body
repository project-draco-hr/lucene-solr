{
  SegmentInfo newSegmentInfo=buildSingleDocSegment(doc,analyzer);
synchronized (this) {
    bufferDeleteTerm(term);
    ramSegmentInfos.addElement(newSegmentInfo);
    maybeFlushRamSegments();
  }
}
