{
  int[] tokCount={100,500,1000,2000,5000,10000};
  int[] modCounts={1,2,5,10,20,50,100,200,500};
  for (int k=0; k < tokCount.length; k++) {
    StringBuilder buffer=new StringBuilder();
    System.out.println("-----Tokens: " + tokCount[k] + "-----");
    for (int i=0; i < tokCount[k]; i++) {
      buffer.append(English.intToEnglish(i).toUpperCase(Locale.ROOT)).append(' ');
    }
    TeeSinkTokenFilter teeStream=new TeeSinkTokenFilter(new StandardFilter(standardTokenizer(buffer)));
    TokenStream sink=new ModuloTokenFilter(teeStream.newSinkTokenStream(),100);
    teeStream.consumeAllTokens();
    TokenStream stream=new ModuloTokenFilter(new StandardFilter(standardTokenizer(buffer)),100);
    CharTermAttribute tfTok=stream.addAttribute(CharTermAttribute.class);
    CharTermAttribute sinkTok=sink.addAttribute(CharTermAttribute.class);
    for (int i=0; stream.incrementToken(); i++) {
      assertTrue(sink.incrementToken());
      assertTrue(tfTok + " is not equal to " + sinkTok+ " at token: "+ i,tfTok.equals(sinkTok) == true);
    }
    for (int j=0; j < modCounts.length; j++) {
      int tfPos=0;
      long start=System.currentTimeMillis();
      for (int i=0; i < 20; i++) {
        stream=new StandardFilter(standardTokenizer(buffer));
        PositionIncrementAttribute posIncrAtt=stream.getAttribute(PositionIncrementAttribute.class);
        while (stream.incrementToken()) {
          tfPos+=posIncrAtt.getPositionIncrement();
        }
        stream=new ModuloTokenFilter(new StandardFilter(standardTokenizer(buffer)),modCounts[j]);
        posIncrAtt=stream.getAttribute(PositionIncrementAttribute.class);
        while (stream.incrementToken()) {
          tfPos+=posIncrAtt.getPositionIncrement();
        }
      }
      long finish=System.currentTimeMillis();
      System.out.println("ModCount: " + modCounts[j] + " Two fields took "+ (finish - start)+ " ms");
      int sinkPos=0;
      start=System.currentTimeMillis();
      for (int i=0; i < 20; i++) {
        teeStream=new TeeSinkTokenFilter(new StandardFilter(standardTokenizer(buffer)));
        sink=new ModuloTokenFilter(teeStream.newSinkTokenStream(),modCounts[j]);
        PositionIncrementAttribute posIncrAtt=teeStream.getAttribute(PositionIncrementAttribute.class);
        while (teeStream.incrementToken()) {
          sinkPos+=posIncrAtt.getPositionIncrement();
        }
        posIncrAtt=sink.getAttribute(PositionIncrementAttribute.class);
        while (sink.incrementToken()) {
          sinkPos+=posIncrAtt.getPositionIncrement();
        }
      }
      finish=System.currentTimeMillis();
      System.out.println("ModCount: " + modCounts[j] + " Tee fields took "+ (finish - start)+ " ms");
      assertTrue(sinkPos + " does not equal: " + tfPos,sinkPos == tfPos);
    }
    System.out.println("- End Tokens: " + tokCount[k] + "-----");
  }
}
