{
  searcher=cmd.getReq().getSearcher();
  ranges=cmd.ranges;
  paths=cmd.paths;
  cores=cmd.cores;
  router=cmd.router;
  hashRouter=router instanceof HashBasedRouter ? (HashBasedRouter)router : null;
  if (ranges == null) {
    numPieces=paths != null ? paths.size() : cores.size();
  }
 else {
    numPieces=ranges.size();
    rangesArr=ranges.toArray(new DocRouter.Range[ranges.size()]);
  }
  routeFieldName=cmd.routeFieldName;
  if (routeFieldName == null) {
    field=searcher.getSchema().getUniqueKeyField();
  }
 else {
    field=searcher.getSchema().getField(routeFieldName);
  }
}
