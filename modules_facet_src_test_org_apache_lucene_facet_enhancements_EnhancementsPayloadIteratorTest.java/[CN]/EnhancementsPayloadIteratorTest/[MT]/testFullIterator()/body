{
  IndexReader indexReader=IndexReader.open(indexDir);
  Term term=DrillDown.term(indexingParams,new CategoryPath("tags","lucene"));
  EnhancementsPayloadIterator iterator=new EnhancementsPayloadIterator(indexingParams.getCategoryEnhancements(),indexReader,term);
  assertTrue("Unexpected failure of init()",iterator.init());
  assertTrue("Missing instance of tags/lucene in doc 0",iterator.setdoc(0));
  int assoc=(Integer)iterator.getCategoryData(associationEnhancement);
  assertEquals("Unexpected association value for tags/lucene in doc 0",3,assoc,1E-5);
  assertTrue("Missing instance of tags/lucene in doc 1",iterator.setdoc(1));
  assoc=(Integer)iterator.getCategoryData(associationEnhancement);
  assertEquals("Unexpected association value for tags/lucene in doc 1",1,assoc,1E-5);
  indexReader.close();
}
