{
  if ("FSDirectory".equals(config.get(dirParam,"RAMDirectory"))) {
    Path workDir=Paths.get(config.get("work.dir","work"));
    Path indexDir=workDir.resolve(dirName);
    if (eraseIndex && Files.exists(indexDir)) {
      IOUtils.rm(indexDir);
    }
    Files.createDirectories(indexDir);
    return FSDirectory.open(indexDir);
  }
  return new RAMDirectory();
}
