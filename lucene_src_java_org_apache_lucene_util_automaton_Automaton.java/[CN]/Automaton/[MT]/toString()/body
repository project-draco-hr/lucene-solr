{
  StringBuilder b=new StringBuilder();
  if (isSingleton()) {
    b.append("singleton: ");
    int length=singleton.codePointCount(0,singleton.length());
    int codepoints[]=new int[length];
    for (int i=0, j=0, cp=0; i < singleton.length(); i+=Character.charCount(cp))     codepoints[j++]=cp=singleton.codePointAt(i);
    for (    int c : codepoints)     Transition.appendCharString(c,b);
    b.append("\n");
  }
 else {
    State[] states=getNumberedStates();
    b.append("initial state: ").append(initial.number).append("\n");
    for (    State s : states)     b.append(s.toString());
  }
  return b.toString();
}
