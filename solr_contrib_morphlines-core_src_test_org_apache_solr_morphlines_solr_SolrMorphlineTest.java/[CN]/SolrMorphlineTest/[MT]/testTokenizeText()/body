{
  morphline=createMorphline("test-morphlines/tokenizeText");
  for (int i=0; i < 3; i++) {
    Record record=new Record();
    record.put(Fields.MESSAGE,"Hello World!");
    record.put(Fields.MESSAGE,"\nFoo@Bar.com #%()123");
    Record expected=record.copy();
    expected.getFields().putAll("tokens",Arrays.asList("hello","world","foo","bar.com","123"));
    collector.reset();
    startSession();
    Notifications.notifyBeginTransaction(morphline);
    assertTrue(morphline.process(record));
    assertEquals(1,collector.getNumStartEvents());
    Notifications.notifyCommitTransaction(morphline);
    assertEquals(expected,collector.getFirstRecord());
  }
}
