{
  Directory dir=newDirectory();
  RandomIndexWriter w=new RandomIndexWriter(random(),dir);
  try {
    w.addDocument(new IndexDocument(){
      @Override public Iterable<IndexableField> indexableFields(){
        return Collections.emptyList();
      }
      @Override public Iterable<StorableField> storableFields(){
        return Collections.<StorableField>singletonList(new CustomField());
      }
    }
);
    fail("didn't hit exception");
  }
 catch (  IllegalArgumentException iae) {
  }
  w.close();
  dir.close();
}
