{
  final TokenStream ts=new CannedTokenStream(new Token[]{token("a",1,1),token("X",0,2),token("b",2,1)});
  final LightAutomaton actual=(new TokenStreamToAutomaton()).toAutomaton(ts);
  final LightAutomaton a1=BasicOperations.unionLight(join(s2a("a"),SEP_A,HOLE_A),s2a("X"));
  final LightAutomaton expected=BasicOperations.concatenateLight(a1,join(SEP_A,s2a("b")));
  assertTrue(BasicOperations.sameLanguage(BasicOperations.determinize(BasicOperations.removeDeadStates(expected)),BasicOperations.determinize(BasicOperations.removeDeadStates(actual))));
}
