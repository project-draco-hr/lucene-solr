{
  calInstance.setTimeInMillis(time);
  if (resolution == Resolution.YEAR) {
    calInstance.set(Calendar.MONTH,0);
    calInstance.set(Calendar.DAY_OF_MONTH,1);
    calInstance.set(Calendar.HOUR_OF_DAY,0);
    calInstance.set(Calendar.MINUTE,0);
    calInstance.set(Calendar.SECOND,0);
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.MONTH) {
    calInstance.set(Calendar.DAY_OF_MONTH,1);
    calInstance.set(Calendar.HOUR_OF_DAY,0);
    calInstance.set(Calendar.MINUTE,0);
    calInstance.set(Calendar.SECOND,0);
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.DAY) {
    calInstance.set(Calendar.HOUR_OF_DAY,0);
    calInstance.set(Calendar.MINUTE,0);
    calInstance.set(Calendar.SECOND,0);
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.HOUR) {
    calInstance.set(Calendar.MINUTE,0);
    calInstance.set(Calendar.SECOND,0);
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.MINUTE) {
    calInstance.set(Calendar.SECOND,0);
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.SECOND) {
    calInstance.set(Calendar.MILLISECOND,0);
  }
 else   if (resolution == Resolution.MILLISECOND) {
  }
 else {
    throw new IllegalArgumentException("unknown resolution " + resolution);
  }
  return calInstance.getTimeInMillis();
}
