{
  if (lastBlockDocID != -1 && docBufferUpto == 1) {
    if (DEBUG) {
      System.out.println("  bufferSkip at writeBlock: lastDocID=" + lastBlockDocID + " docCount="+ (docCount - 1));
    }
    skipWriter.bufferSkip(lastBlockDocID,docCount - 1,lastBlockPosFP,lastBlockPayFP,lastBlockPosBufferUpto,lastBlockStartOffset,lastBlockPayloadByteUpto);
  }
  if (docBufferUpto == blockSize) {
    lastBlockDocID=lastDocID;
    if (posOut != null) {
      if (payOut != null) {
        lastBlockPayFP=payOut.getFilePointer();
      }
      lastBlockPosFP=posOut.getFilePointer();
      lastBlockPosBufferUpto=posBufferUpto;
      lastBlockStartOffset=lastStartOffset;
      lastBlockPayloadByteUpto=payloadByteUpto;
    }
    if (DEBUG) {
      System.out.println("  docBufferUpto=" + docBufferUpto + " now get lastBlockDocID="+ lastBlockDocID+ " lastBlockPosFP="+ lastBlockPosFP+ " lastBlockPosBufferUpto="+ lastBlockPosBufferUpto+ " lastBlockPayloadByteUpto="+ lastBlockPayloadByteUpto);
    }
    docBufferUpto=0;
  }
}
