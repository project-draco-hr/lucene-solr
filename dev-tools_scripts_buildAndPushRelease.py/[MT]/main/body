def main():
    c = parse_config()
    if c.prepare:
        rev = prepare(c.root, c.version, c.key_id, c.key_password)
    else:
        os.chdir(root)
        rev = open('rev.txt', encoding='UTF-8').read()
    if c.push_remote:
        url = push(c.version, c.root, rev, c.rc_num, c.push_remote)
    elif c.push_local:
        url = pushLocal(c.version, c.root, rev, c.rc_num, c.push_local)
    else:
        url = None
    if (url is not None):
        print ('  URL: %s' % url)
        print 'Next set the PYTHON_EXEC env var and you can run the smoker tester:'
        print ('  $PYTHON_EXEC %s %s' % (sys.argv[0], url))
