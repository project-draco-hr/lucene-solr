def push(version, root, rev, rcNum, username):
    print 'Push...'
    dir = ('lucene-solr-%s-RC%d-rev%s' % (version, rcNum, rev))
    s = os.popen(('ssh %s@people.apache.org "ls -ld public_html/staging_area/%s" 2>&1' % (username, dir))).read()
    if ('no such file or directory' not in s.lower()):
        print '  Remove old dir...'
        run(('ssh %s@people.apache.org "chmod -R u+rwX public_html/staging_area/%s; rm -rf public_html/staging_area/%s"' % (username, dir, dir)))
    run(('ssh %s@people.apache.org "mkdir -p public_html/staging_area/%s/lucene public_html/staging_area/%s/solr"' % (username, dir, dir)))
    print '  Lucene'
    os.chdir(('%s/lucene/dist' % root))
    print '    zip...'
    if os.path.exists('lucene.tar.bz2'):
        os.remove('lucene.tar.bz2')
    run('tar cjf lucene.tar.bz2 *')
    print '    copy...'
    run(('scp lucene.tar.bz2 %s@people.apache.org:public_html/staging_area/%s/lucene' % (username, dir)))
    print '    unzip...'
    run(('ssh %s@people.apache.org "cd public_html/staging_area/%s/lucene; tar xjf lucene.tar.bz2; rm -f lucene.tar.bz2"' % (username, dir)))
    os.remove('lucene.tar.bz2')
    print '  Solr'
    os.chdir(('%s/solr/package' % root))
    print '    zip...'
    if os.path.exists('solr.tar.bz2'):
        os.remove('solr.tar.bz2')
    run('tar cjf solr.tar.bz2 *')
    print '    copy...'
    run(('scp solr.tar.bz2 %s@people.apache.org:public_html/staging_area/%s/solr' % (username, dir)))
    print '    unzip...'
    run(('ssh %s@people.apache.org "cd public_html/staging_area/%s/solr; tar xjf solr.tar.bz2; rm -f solr.tar.bz2"' % (username, dir)))
    os.remove('solr.tar.bz2')
    print '  chmod...'
    run(('ssh %s@people.apache.org "chmod -R a+rX-w public_html/staging_area/%s"' % (username, dir)))
    print '  done!'
    url = ('http://people.apache.org/~%s/staging_area/%s' % (username, dir))
    return url
