{
  Directory dir=newFSSwitchDirectory(Collections.<String>emptySet());
  String name="file";
  try {
    dir.createOutput(name,newIOContext(random)).close();
    assertTrue(dir.fileExists(name));
    assertTrue(Arrays.asList(dir.listAll()).contains(name));
  }
  finally {
    dir.close();
  }
}
