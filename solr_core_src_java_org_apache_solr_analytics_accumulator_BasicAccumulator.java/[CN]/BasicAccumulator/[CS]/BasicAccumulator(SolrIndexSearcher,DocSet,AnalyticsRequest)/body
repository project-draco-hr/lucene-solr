{
  this.searcher=searcher;
  this.docs=docs;
  this.request=request;
  final List<ExpressionRequest> exRequests=new ArrayList<ExpressionRequest>(request.getExpressions());
  Collections.sort(exRequests);
  log.info("Processing request '" + request.getName() + "'");
  statsCollectorArraySupplier=StatsCollectorSupplierFactory.create(searcher.getSchema(),exRequests);
  statsCollectors=statsCollectorArraySupplier.get();
  int size=exRequests.size();
  expressionNames=new String[size];
  expressionStrings=new String[size];
  int count=0;
  for (  ExpressionRequest expRequest : exRequests) {
    expressionNames[count]=expRequest.getName();
    expressionStrings[count++]=expRequest.getExpressionString();
  }
  expressions=makeExpressions(statsCollectors);
  hiddenExpressions=request.getHiddenExpressions();
}
