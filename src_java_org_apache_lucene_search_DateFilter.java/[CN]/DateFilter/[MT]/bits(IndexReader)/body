{
  BitSet bits=new BitSet(reader.maxDoc());
  TermEnum enum=reader.terms(new Term(field,start));
  TermDocs termDocs=reader.termDocs();
  if (enum.term() == null)   return bits;
  try {
    Term stop=new Term(field,end);
    while (enum.term().compareTo(stop) <= 0) {
      termDocs.seek(enum.term());
      try {
        while (termDocs.next())         bits.set(termDocs.doc());
      }
  finally {
        termDocs.close();
      }
      if (!enum.next()) {
        break;
      }
    }
  }
  finally {
    enum.close();
  }
  return bits;
}
