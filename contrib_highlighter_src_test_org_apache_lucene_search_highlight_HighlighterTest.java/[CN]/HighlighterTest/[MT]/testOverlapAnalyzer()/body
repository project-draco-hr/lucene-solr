{
  HashMap synonyms=new HashMap();
  synonyms.put("football","soccer,footie");
  Analyzer analyzer=new SynonymAnalyzer(synonyms);
  String srchkey="football";
  String s="football-soccer in the euro 2004 footie competition";
  QueryParser parser=new QueryParser("bookid",analyzer);
  Query query=parser.parse(srchkey);
  Highlighter highlighter=new Highlighter(new QueryScorer(query));
  TokenStream tokenStream=analyzer.tokenStream(null,new StringReader(s));
  String result=highlighter.getBestFragments(tokenStream,s,3,"...");
  String expectedResult="<B>football</B>-<B>soccer</B> in the euro 2004 <B>footie</B> competition";
  assertTrue("overlapping analyzer should handle highlights OK",expectedResult.equals(result));
}
