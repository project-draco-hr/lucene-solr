{
  TestHighlightRunner helper=new TestHighlightRunner(){
    public void run() throws Exception {
      HashMap synonyms=new HashMap();
      synonyms.put("football","soccer,footie");
      Analyzer analyzer=new SynonymAnalyzer(synonyms);
      String srchkey="football";
      String s="football-soccer in the euro 2004 footie competition";
      QueryParser parser=new QueryParser(Version.LUCENE_CURRENT,"bookid",analyzer);
      Query query=parser.parse(srchkey);
      TokenStream tokenStream=analyzer.tokenStream(null,new StringReader(s));
      Highlighter highlighter=getHighlighter(query,null,tokenStream,HighlighterTest.this);
      tokenStream=analyzer.tokenStream(null,new StringReader(s));
      String result=highlighter.getBestFragments(tokenStream,s,3,"...");
      String expectedResult="<B>football</B>-<B>soccer</B> in the euro 2004 <B>footie</B> competition";
      assertTrue("overlapping analyzer should handle highlights OK, expected:" + expectedResult + " actual:"+ result,expectedResult.equals(result));
    }
  }
;
  helper.start();
}
