{
  TestHighlightRunner helper=new TestHighlightRunner(){
    @Override public void run() throws Exception {
      Set stopWords=new HashSet();
      stopWords.add("in");
      stopWords.add("it");
      TermQuery query=new TermQuery(new Term("text","searchterm"));
      String text="this is a text with searchterm in it";
      SimpleHTMLFormatter fm=new SimpleHTMLFormatter();
      Highlighter hg=getHighlighter(query,"text",new StandardAnalyzer(TEST_VERSION,stopWords).tokenStream("text",new StringReader(text)),fm);
      hg.setTextFragmenter(new NullFragmenter());
      hg.setMaxDocCharsToAnalyze(36);
      String match=hg.getBestFragment(new StandardAnalyzer(TEST_VERSION,stopWords),"text",text);
      assertTrue("Matched text should contain remainder of text after highlighted query ",match.endsWith("in it"));
    }
  }
;
  helper.start();
}
