{
  if (mode == STANDARD) {
    return new Highlighter(formatter,new QueryScorer(weightedTerms));
  }
 else   if (mode == SPAN) {
    Highlighter highlighter;
    highlighter=new Highlighter(formatter,new SpanScorer((WeightedSpanTerm[])weightedTerms));
    return highlighter;
  }
 else {
    throw new RuntimeException("Unknown highlight mode");
  }
}
