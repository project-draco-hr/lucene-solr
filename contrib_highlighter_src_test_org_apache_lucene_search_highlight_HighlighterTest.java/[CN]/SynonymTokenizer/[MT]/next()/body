{
  if (currentRealToken == null) {
    Token nextRealToken=realStream.next();
    if (nextRealToken == null) {
      return null;
    }
    String expansions=(String)synonyms.get(nextRealToken.termText());
    if (expansions == null) {
      return nextRealToken;
    }
    st=new StringTokenizer(expansions,",");
    if (st.hasMoreTokens()) {
      currentRealToken=nextRealToken;
    }
    return currentRealToken;
  }
 else {
    String nextExpandedValue=st.nextToken();
    Token expandedToken=new Token(nextExpandedValue,currentRealToken.startOffset(),currentRealToken.endOffset());
    expandedToken.setPositionIncrement(0);
    if (!st.hasMoreTokens()) {
      currentRealToken=null;
      st=null;
    }
    return expandedToken;
  }
}
