{
  if (currentRealToken == null) {
    boolean next=realStream.incrementToken();
    if (!next) {
      return false;
    }
    termAtt.setTermBuffer(realTermAtt.term());
    offsetAtt.setOffset(realOffsetAtt.startOffset(),realOffsetAtt.endOffset());
    posIncrAtt.setPositionIncrement(realPosIncrAtt.getPositionIncrement());
    String expansions=synonyms.get(realTermAtt.term());
    if (expansions == null) {
      return true;
    }
    st=new StringTokenizer(expansions,",");
    if (st.hasMoreTokens()) {
      currentRealToken=new Token(realOffsetAtt.startOffset(),realOffsetAtt.endOffset());
      currentRealToken.setTermBuffer(realTermAtt.term());
    }
    return true;
  }
 else {
    String tok=st.nextToken();
    termAtt.setTermBuffer(tok);
    offsetAtt.setOffset(currentRealToken.startOffset(),currentRealToken.endOffset());
    posIncrAtt.setPositionIncrement(0);
    if (!st.hasMoreTokens()) {
      currentRealToken=null;
      st=null;
    }
    return true;
  }
}
