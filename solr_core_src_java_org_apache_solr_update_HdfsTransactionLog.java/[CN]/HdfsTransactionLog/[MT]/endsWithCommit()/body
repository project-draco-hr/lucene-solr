{
  long size;
synchronized (this) {
    fos.flush();
    tlogOutStream.hflush();
    size=fos.size();
  }
  byte[] buf=new byte[END_MESSAGE.length()];
  long pos=size - END_MESSAGE.length() - 4;
  if (pos < 0)   return false;
  FSDataFastInputStream dis=new FSDataFastInputStream(fs.open(tlogFile),pos);
  try {
    dis.read(buf);
    for (int i=0; i < buf.length; i++) {
      if (buf[i] != END_MESSAGE.charAt(i))       return false;
    }
  }
  finally {
    dis.close();
  }
  return true;
}
