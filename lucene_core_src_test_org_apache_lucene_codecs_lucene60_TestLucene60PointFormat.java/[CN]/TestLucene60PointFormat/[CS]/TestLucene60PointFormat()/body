{
  Codec defaultCodec=TestUtil.getDefaultCodec();
  if (random().nextBoolean()) {
    int maxPointsInLeafNode=TestUtil.nextInt(random(),50,500);
    double maxMBSortInHeap=3.0 + (3 * random().nextDouble());
    if (VERBOSE) {
      System.out.println("TEST: using Lucene60PointFormat with maxPointsInLeafNode=" + maxPointsInLeafNode + " and maxMBSortInHeap="+ maxMBSortInHeap);
    }
    codec=new FilterCodec(defaultCodec.getName(),defaultCodec){
      @Override public PointFormat pointFormat(){
        return new PointFormat(){
          @Override public PointWriter fieldsWriter(          SegmentWriteState writeState) throws IOException {
            return new Lucene60PointWriter(writeState,maxPointsInLeafNode,maxMBSortInHeap);
          }
          @Override public PointReader fieldsReader(          SegmentReadState readState) throws IOException {
            return new Lucene60PointReader(readState);
          }
        }
;
      }
    }
;
  }
 else {
    codec=defaultCodec;
  }
}
