{
  long indexHeapRamBytesUsed=0;
  for (  LeafReaderContext leafReaderContext : reader.leaves()) {
    LeafReader leafReader=leafReaderContext.reader();
    if (leafReader instanceof SegmentReader) {
      indexHeapRamBytesUsed+=((SegmentReader)leafReader).ramBytesUsed();
    }
 else {
      return -1;
    }
  }
  return indexHeapRamBytesUsed;
}
