{
  int topN=groupOffset + groupLimit;
  BlockGroupingCollector c=new BlockGroupingCollector(groupSort,topN,includeScores,groupEndDocs);
  searcher.search(query,filter,c);
  int topNInsideGroup=groupDocsOffset + groupDocsLimit;
  return c.getTopGroups(sortWithinGroup,groupOffset,groupDocsOffset,topNInsideGroup,fillSortFields);
}
