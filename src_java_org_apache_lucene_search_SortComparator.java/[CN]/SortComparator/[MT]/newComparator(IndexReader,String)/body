{
  final String field=fieldname.intern();
  return new ScoreDocComparator(){
    protected Comparable[] cachedValues=FieldCache.DEFAULT.getCustom(reader,field,SortComparator.this);
    public int compare(    ScoreDoc i,    ScoreDoc j){
      return cachedValues[i.doc].compareTo(cachedValues[j.doc]);
    }
    public Comparable sortValue(    ScoreDoc i){
      return cachedValues[i.doc];
    }
    public int sortType(){
      return SortField.CUSTOM;
    }
  }
;
}
