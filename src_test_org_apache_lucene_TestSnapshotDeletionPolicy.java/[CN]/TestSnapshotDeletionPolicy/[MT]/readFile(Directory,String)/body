{
  IndexInput input=dir.openInput(name);
  try {
    long size=dir.fileLength(name);
    long bytesLeft=size;
    while (bytesLeft > 0) {
      final int numToRead;
      if (bytesLeft < buffer.length)       numToRead=(int)bytesLeft;
 else       numToRead=buffer.length;
      input.readBytes(buffer,0,numToRead,false);
      bytesLeft-=numToRead;
    }
    Thread.sleep(1);
  }
  finally {
    input.close();
  }
}
