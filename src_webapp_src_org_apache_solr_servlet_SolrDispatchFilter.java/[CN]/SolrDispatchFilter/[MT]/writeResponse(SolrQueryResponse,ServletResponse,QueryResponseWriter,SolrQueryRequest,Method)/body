{
  if (solrRsp.getException() != null) {
    sendError((HttpServletResponse)response,solrRsp.getException());
  }
 else {
    response.setContentType(responseWriter.getContentType(solrReq,solrRsp));
    if (Method.HEAD != reqMethod) {
      if (responseWriter instanceof BinaryQueryResponseWriter) {
        BinaryQueryResponseWriter binWriter=(BinaryQueryResponseWriter)responseWriter;
        binWriter.write(response.getOutputStream(),solrReq,solrRsp);
      }
 else {
        PrintWriter out=response.getWriter();
        responseWriter.write(out,solrReq,solrRsp);
      }
    }
  }
}
