{
  this.writer=writer;
  this.es=es;
  indexingGen=new AtomicLong(1);
  searchingGen=new AtomicLong(-1);
  noDeletesSearchingGen=new AtomicLong(-1);
  swapSearcher(new IndexSearcher(IndexReader.open(writer,true),es),0,true);
  writer.getConfig().setMergedSegmentWarmer(new IndexWriter.IndexReaderWarmer(){
    @Override public void warm(    IndexReader reader) throws IOException {
      NRTManager.this.warm(reader);
    }
  }
);
}
