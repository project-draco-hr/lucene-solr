{
  this.writer=writer;
  if (alwaysApplyDeletes) {
    withoutDeletes=withDeletes=new SearcherManagerRef(true,0,SearcherManager.open(writer,true,warmer,es));
  }
 else {
    withDeletes=new SearcherManagerRef(true,0,SearcherManager.open(writer,true,warmer,es));
    withoutDeletes=new SearcherManagerRef(false,0,SearcherManager.open(writer,false,warmer,es));
  }
  indexingGen=new AtomicLong(1);
}
