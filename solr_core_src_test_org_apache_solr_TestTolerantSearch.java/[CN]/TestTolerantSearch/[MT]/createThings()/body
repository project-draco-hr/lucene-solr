{
  solrHome=createSolrHome();
  createJetty(solrHome.getAbsolutePath(),null,null);
  String url=jetty.getBaseUrl().toString();
  collection1=new HttpSolrClient(url + "/collection1");
  collection2=new HttpSolrClient(url + "/collection2");
  String urlCollection1=jetty.getBaseUrl().toString() + "/" + "collection1";
  String urlCollection2=jetty.getBaseUrl().toString() + "/" + "collection2";
  shard1=urlCollection1.replaceAll("https?://","");
  shard2=urlCollection2.replaceAll("https?://","");
  HttpSolrClient nodeClient=new HttpSolrClient(url);
  try {
    CoreAdminRequest.Create req=new CoreAdminRequest.Create();
    req.setCoreName("collection2");
    req.setConfigSet("collection1");
    nodeClient.request(req);
  }
  finally {
    nodeClient.shutdown();
  }
  SolrInputDocument doc=new SolrInputDocument();
  doc.setField("id","1");
  doc.setField("subject","batman");
  doc.setField("title","foo bar");
  collection1.add(doc);
  collection1.commit();
  doc.setField("id","2");
  doc.setField("subject","superman");
  collection2.add(doc);
  collection2.commit();
  doc=new SolrInputDocument();
  doc.setField("id","3");
  doc.setField("subject","aquaman");
  doc.setField("title","foo bar");
  collection1.add(doc);
  collection1.commit();
}
