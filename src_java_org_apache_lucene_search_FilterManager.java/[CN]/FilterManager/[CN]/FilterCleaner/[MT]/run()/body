{
  while (running) {
    if (cache.size() > cacheCleanSize) {
      sortedFilterItems.clear();
synchronized (cache) {
        sortedFilterItems.addAll(cache.entrySet());
        Iterator it=sortedFilterItems.iterator();
        int numToDelete=(int)((cache.size() - cacheCleanSize) * 1.5);
        int counter=0;
        while (it.hasNext() && counter++ < numToDelete) {
          Map.Entry entry=(Map.Entry)it.next();
          cache.remove(entry.getKey());
        }
      }
      sortedFilterItems.clear();
    }
    try {
      Thread.sleep(cleanSleepTime);
    }
 catch (    InterruptedException ie) {
      Thread.currentThread().interrupt();
      throw new RuntimeException(ie);
    }
  }
}
