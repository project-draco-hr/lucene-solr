{
  mode=getMode(args);
  String userDictionaryPath=args.get(USER_DICT_PATH);
  if (userDictionaryPath != null) {
    InputStream stream=loader.openResource(userDictionaryPath);
    String encoding=args.get(USER_DICT_ENCODING);
    if (encoding == null) {
      encoding=IOUtils.UTF_8;
    }
    CharsetDecoder decoder=Charset.forName(encoding).newDecoder().onMalformedInput(CodingErrorAction.REPORT).onUnmappableCharacter(CodingErrorAction.REPORT);
    Reader reader=new InputStreamReader(stream,decoder);
    userDictionary=new UserDictionary(reader);
  }
 else {
    userDictionary=null;
  }
  discardPunctuation=getBoolean(DISCARD_PUNCTUATION,true);
}
