{
  if (pendingCount == pending.length) {
    push();
  }
  if (pendingCount == -1) {
    wrappedPostingsWriter.addPosition(position,payload,startOffset,endOffset);
  }
 else {
    final Position pos=pending[pendingCount++];
    pos.pos=position;
    pos.startOffset=startOffset;
    pos.endOffset=endOffset;
    pos.docID=currentDoc.docID;
    if (payload != null && payload.length > 0) {
      if (pos.payload == null) {
        pos.payload=BytesRef.deepCopyOf(payload);
      }
 else {
        pos.payload.copyBytes(payload);
      }
    }
 else     if (pos.payload != null) {
      pos.payload.length=0;
    }
  }
}
