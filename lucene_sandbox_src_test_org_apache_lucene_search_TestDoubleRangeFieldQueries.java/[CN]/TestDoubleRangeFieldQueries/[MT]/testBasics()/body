{
  Directory dir=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random(),dir);
  Document document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{-10.0,-10.0},new double[]{9.1,10.1}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{10.0,-10.0},new double[]{20.0,10.0}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{-20.0,-20.0},new double[]{30.0,30.1}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{-11.1,-11.2},new double[]{1.23,11.5}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{12.33,1.2},new double[]{15.1,29.9}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{-122.33,1.2},new double[]{-115.1,29.9}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{Double.NEGATIVE_INFINITY,1.2},new double[]{-11.0,29.9}));
  writer.addDocument(document);
  document=new Document();
  document.add(new DoubleRangeField(FIELD_NAME,new double[]{-11,-15},new double[]{15,20}));
  writer.addDocument(document);
  IndexReader reader=writer.getReader();
  IndexSearcher searcher=newSearcher(reader);
  assertEquals(7,searcher.count(DoubleRangeField.newIntersectsQuery(FIELD_NAME,new double[]{-11.0,-15.0},new double[]{15.0,20.0})));
  assertEquals(2,searcher.count(DoubleRangeField.newWithinQuery(FIELD_NAME,new double[]{-11.0,-15.0},new double[]{15.0,20.0})));
  assertEquals(2,searcher.count(DoubleRangeField.newContainsQuery(FIELD_NAME,new double[]{-11.0,-15.0},new double[]{15.0,20.0})));
  reader.close();
  writer.close();
  dir.close();
}
