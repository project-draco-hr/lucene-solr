{
  final byte[] xmlBytes=("<docs>\r\n" + " <doc>\r\n" + "  <field name=\"id\">M??ller</field>\r\n"+ " </doc>"+ "</docs>").getBytes(StandardCharsets.ISO_8859_1);
  final ContentStream cs=new ByteStream(xmlBytes,"application/xml; charset=ISO-8859-1");
  ModifiableSolrParams params=new ModifiableSolrParams();
  SolrQueryRequest req=new SolrQueryRequestBase(h.getCore(),params){
    @Override public Iterable<ContentStream> getContentStreams(){
      return Collections.singleton(cs);
    }
  }
;
  DocumentAnalysisRequest request=handler.resolveAnalysisRequest(req);
  assertNotNull(request);
  final List<SolrInputDocument> documents=request.getDocuments();
  assertNotNull(documents);
  assertEquals(1,documents.size());
  SolrInputDocument doc=documents.get(0);
  assertEquals("M??ller",doc.getField("id").getValue());
}
