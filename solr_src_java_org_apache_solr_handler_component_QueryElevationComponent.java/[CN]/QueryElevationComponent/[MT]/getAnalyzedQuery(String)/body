{
  if (analyzer == null) {
    return query;
  }
  StringBuilder norm=new StringBuilder();
  TokenStream tokens=analyzer.reusableTokenStream("",new StringReader(query));
  tokens.reset();
  CharTermAttribute termAtt=tokens.addAttribute(CharTermAttribute.class);
  while (tokens.incrementToken()) {
    norm.append(termAtt.buffer(),0,termAtt.length());
  }
  return norm.toString();
}
