{
  IndexSchema schema=h.getCore().getLatestSchema();
  SchemaField amount=schema.getField(field());
  assertNotNull(amount);
  assertTrue(amount.isPolyField());
  SchemaField[] dynFields=schema.getDynamicFieldPrototypes();
  boolean seenCurrency=false;
  boolean seenAmount=false;
  for (  SchemaField dynField : dynFields) {
    if (dynField.getName().equals("*" + FieldType.POLY_FIELD_SEPARATOR + CurrencyField.FIELD_SUFFIX_CURRENCY)) {
      seenCurrency=true;
    }
    if (dynField.getName().equals("*" + FieldType.POLY_FIELD_SEPARATOR + CurrencyField.FIELD_SUFFIX_AMOUNT_RAW)) {
      seenAmount=true;
    }
  }
  assertTrue("Didn't find the expected currency code dynamic field",seenCurrency);
  assertTrue("Didn't find the expected value dynamic field",seenAmount);
}
