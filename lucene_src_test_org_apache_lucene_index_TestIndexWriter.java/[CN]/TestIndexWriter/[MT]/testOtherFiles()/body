{
  Directory dir=newDirectory();
  try {
    IndexOutput out=dir.createOutput("myrandomfile",newIOContext(random));
    out.writeByte((byte)42);
    out.close();
    new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random))).close();
    assertTrue(dir.fileExists("myrandomfile"));
  }
  finally {
    dir.close();
  }
}
