{
  Directory dir=newDirectory();
  IndexWriterConfig config=new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer());
  config.setTermIndexInterval(2);
  IndexWriter w=new IndexWriter(dir,config);
  StringBuilder s=new StringBuilder();
  for (int i=0; i < 300; i++) {
    s.append(' ').append(i);
  }
  Document d=new Document();
  Field f=newField("field",s.toString(),Field.Store.NO,Field.Index.ANALYZED);
  d.add(f);
  w.addDocument(d);
  IndexReader r=w.getReader().getSequentialSubReaders()[0];
  TermsEnum t=r.fields().terms("field").iterator();
  int count=0;
  while (t.next() != null) {
    final DocsEnum docs=t.docs(null,null);
    assertEquals(0,docs.nextDoc());
    assertEquals(DocsEnum.NO_MORE_DOCS,docs.nextDoc());
    count++;
  }
  assertEquals(300,count);
  r.close();
  w.close();
  dir.close();
}
