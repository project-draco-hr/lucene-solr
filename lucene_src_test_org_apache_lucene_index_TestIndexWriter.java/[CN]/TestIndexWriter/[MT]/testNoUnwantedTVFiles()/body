{
  Directory dir=newDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)).setRAMBufferSizeMB(0.01).setMergePolicy(newLogMergePolicy()));
  ((LogMergePolicy)indexWriter.getConfig().getMergePolicy()).setUseCompoundFile(false);
  String BIG="alskjhlaksjghlaksjfhalksvjepgjioefgjnsdfjgefgjhelkgjhqewlrkhgwlekgrhwelkgjhwelkgrhwlkejg";
  BIG=BIG + BIG + BIG+ BIG;
  FieldType customType=new FieldType(TextField.TYPE_STORED);
  customType.setOmitNorms(true);
  FieldType customType2=new FieldType(TextField.TYPE_STORED);
  customType2.setTokenized(false);
  FieldType customType3=new FieldType(TextField.TYPE_STORED);
  customType3.setTokenized(false);
  customType3.setOmitNorms(true);
  for (int i=0; i < 2; i++) {
    Document doc=new Document();
    doc.add(new Field("id",customType3,Integer.toString(i) + BIG));
    doc.add(new Field("str",customType2,Integer.toString(i) + BIG));
    doc.add(new Field("str2",storedTextType,Integer.toString(i) + BIG));
    doc.add(new Field("str3",customType,Integer.toString(i) + BIG));
    indexWriter.addDocument(doc);
  }
  indexWriter.close();
  _TestUtil.checkIndex(dir);
  assertNoUnreferencedFiles(dir,"no tv files");
  String[] files=dir.listAll();
  for (  String file : files) {
    assertTrue(!file.endsWith(IndexFileNames.VECTORS_FIELDS_EXTENSION));
    assertTrue(!file.endsWith(IndexFileNames.VECTORS_INDEX_EXTENSION));
    assertTrue(!file.endsWith(IndexFileNames.VECTORS_DOCUMENTS_EXTENSION));
  }
  dir.close();
}
