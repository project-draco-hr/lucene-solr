{
  MockRAMDirectory dir=new MockRAMDirectory();
  IndexWriter iw=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new StandardAnalyzer(TEST_VERSION_CURRENT)).setMergeScheduler(new MyMergeScheduler()).setMaxBufferedDocs(2));
  LogMergePolicy lmp=(LogMergePolicy)iw.getMergePolicy();
  lmp.setMaxMergeDocs(20);
  lmp.setMergeFactor(2);
  Document document=new Document();
  document.add(new Field("tvtest","a b c",Field.Store.NO,Field.Index.ANALYZED,Field.TermVector.YES));
  for (int i=0; i < 177; i++)   iw.addDocument(document);
  iw.close();
}
