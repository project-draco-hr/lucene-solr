{
  NUM_COPY=numCopy;
  dir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new WhitespaceAnalyzer(TEST_VERSION_CURRENT)).setMaxBufferedDocs(2));
  for (int i=0; i < NUM_INIT_DOCS; i++)   addDoc(writer);
  writer.close();
  dir2=new MockRAMDirectory();
  writer2=new IndexWriter(dir2,new IndexWriterConfig(TEST_VERSION_CURRENT,new WhitespaceAnalyzer(TEST_VERSION_CURRENT)));
  writer2.commit();
  cms=(ConcurrentMergeScheduler)writer2.getConfig().getMergeScheduler();
  readers=new IndexReader[NUM_COPY];
  for (int i=0; i < NUM_COPY; i++)   readers[i]=IndexReader.open(dir,true);
}
