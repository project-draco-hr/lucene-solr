{
  final long gen=genWriter.addDocuments(docs);
  if (random().nextInt(20) == 2) {
    if (VERBOSE) {
      System.out.println(Thread.currentThread().getName() + ": nrt: verify addDocuments " + id+ " gen="+ gen);
    }
    nrtNoDeletesThread.waitForGeneration(gen);
    assertTrue(gen <= nrtNoDeletesThread.getSearchingGen());
    final IndexSearcher s=nrtNoDeletes.acquire();
    if (VERBOSE) {
      System.out.println(Thread.currentThread().getName() + ": nrt: got noDeletes searcher=" + s);
    }
    try {
      assertEquals(docs.size(),s.search(new TermQuery(id),10).totalHits);
    }
  finally {
      nrtNoDeletes.release(s);
    }
  }
  lastGens.set(gen);
}
