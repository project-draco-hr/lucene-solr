{
  HttpSolrServer httpserver=(HttpSolrServer)getSolrServer();
  HttpRequestBase m=null;
  ArrayList<BasicNameValuePair> qparams=new ArrayList<BasicNameValuePair>();
  if (params.length == 0) {
    qparams.add(new BasicNameValuePair("q","solr"));
    qparams.add(new BasicNameValuePair("qt","standard"));
  }
  for (int i=0; i < params.length / 2; i++) {
    qparams.add(new BasicNameValuePair(params[i * 2],params[i * 2 + 1]));
  }
  java.net.URI uri=URIUtils.createURI("http",new URI(httpserver.getBaseURL()).getHost(),new URI(httpserver.getBaseURL()).getPort(),"/solr/select",URLEncodedUtils.format(qparams,"UTF-8"),null);
  if ("GET".equals(method)) {
    m=new HttpGet(uri);
  }
 else   if ("HEAD".equals(method)) {
    m=new HttpHead(uri);
  }
 else   if ("POST".equals(method)) {
    m=new HttpPost(uri);
  }
  return m;
}
