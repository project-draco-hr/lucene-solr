{
  try {
    String url="http://localhost:" + port + context;
    CommonsHttpSolrServer s=new StreamingUpdateSolrServer(url,2,5){
      @Override public void handleError(      Throwable ex){
        ex.printStackTrace();
      }
    }
;
    s.setConnectionTimeout(100);
    s.setDefaultMaxConnectionsPerHost(100);
    s.setMaxTotalConnections(100);
    s.setParser(new BinaryResponseParser());
    s.setRequestWriter(new BinaryRequestWriter());
    return s;
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
}
