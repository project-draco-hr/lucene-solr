{
  PositiveIntOutputs outputs=PositiveIntOutputs.getSingleton();
  Builder<Long> fstBuilder=new Builder<>(FST.INPUT_TYPE.BYTE1,outputs);
  BytesRef scratchBytes=new BytesRef();
  IntsRef scratchInts=new IntsRef();
  for (  Map.Entry<String,Double> entry : weights.entrySet()) {
    scratchBytes.copyChars(entry.getKey());
    fstBuilder.add(Util.toIntsRef(scratchBytes,scratchInts),entry.getValue().longValue());
  }
  fst=fstBuilder.finish();
}
