{
  RAMDirectory rd=new RAMDirectory();
  IndexWriterConfig iwConfig=new IndexWriterConfig(Version.LUCENE_40,analyzer);
  IndexWriter writer=new IndexWriter(rd,iwConfig);
  InputStream dataIn=getServletContext().getResourceAsStream("/WEB-INF/data.tsv");
  BufferedReader br=new BufferedReader(new InputStreamReader(dataIn));
  String line=br.readLine();
  while (line != null) {
    line=line.trim();
    if (line.length() > 0) {
      StringTokenizer st=new StringTokenizer(line,"\t");
      Document doc=new Document();
      doc.add(new Field("location",st.nextToken(),Field.Store.YES,Field.Index.ANALYZED_NO_NORMS));
      doc.add(new Field("salary",st.nextToken(),Field.Store.YES,Field.Index.ANALYZED_NO_NORMS));
      doc.add(new Field("type",st.nextToken(),Field.Store.YES,Field.Index.ANALYZED_NO_NORMS));
      doc.add(new Field("description",st.nextToken(),Field.Store.YES,Field.Index.ANALYZED));
      writer.addDocument(doc);
    }
    line=br.readLine();
  }
  writer.close();
  searcher=new IndexSearcher(rd,true);
}
