{
  Collection<DocCollection> states=collectionStates.values();
  if (collectionName != null) {
    DocCollection c=getCollectionOrNull(collectionName);
    if (c != null)     states=Collections.singletonList(c);
  }
  for (  DocCollection coll : states) {
    for (    Slice slice : coll.getSlices()) {
      for (      Replica replica : slice.getReplicas()) {
        if (coreNodeName.equals(replica.getName())) {
          return slice.getName();
        }
      }
    }
  }
  return null;
}
