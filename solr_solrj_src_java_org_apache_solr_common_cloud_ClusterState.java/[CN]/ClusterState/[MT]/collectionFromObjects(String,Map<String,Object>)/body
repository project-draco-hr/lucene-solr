{
  Map<String,Object> props;
  Map<String,Slice> slices;
  Map<String,Object> sliceObjs=(Map<String,Object>)objs.get(DocCollection.SHARDS);
  if (sliceObjs == null) {
    slices=makeSlices(objs);
    props=Collections.emptyMap();
  }
 else {
    slices=makeSlices(sliceObjs);
    props=new HashMap<String,Object>(objs);
    objs.remove(DocCollection.SHARDS);
  }
  DocRouter router=DocRouter.getDocRouter(props.get(DocCollection.DOC_ROUTER));
  return new DocCollection(name,slices,props,router);
}
