{
  Map<String,Object> props;
  Map<String,Slice> slices;
  Map<String,Object> sliceObjs=(Map<String,Object>)objs.get(DocCollection.SHARDS);
  if (sliceObjs == null) {
    slices=makeSlices(objs);
    props=Collections.emptyMap();
  }
 else {
    slices=makeSlices(sliceObjs);
    props=new HashMap<String,Object>(objs);
    objs.remove(DocCollection.SHARDS);
  }
  Map map=(Map)props.get(DocCollection.DOC_ROUTER);
  DocRouter router=map == null ? DocRouter.DEFAULT : DocRouter.getDocRouter(map.get("name"));
  return new DocCollection(name,slices,props,router);
}
