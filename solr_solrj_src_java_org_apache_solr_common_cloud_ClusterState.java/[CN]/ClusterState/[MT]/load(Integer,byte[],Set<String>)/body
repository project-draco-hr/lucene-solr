{
  if (bytes == null || bytes.length == 0) {
    return new ClusterState(version,liveNodes,Collections.<String,Map<String,Slice>>emptyMap());
  }
  LinkedHashMap<String,Object> stateMap=(LinkedHashMap<String,Object>)ZkStateReader.fromJSON(bytes);
  HashMap<String,Map<String,Slice>> state=new HashMap<String,Map<String,Slice>>();
  for (  String collectionName : stateMap.keySet()) {
    Map<String,Object> collection=(Map<String,Object>)stateMap.get(collectionName);
    Map<String,Slice> slices=new LinkedHashMap<String,Slice>();
    for (    Entry<String,Object> sliceEntry : collection.entrySet()) {
      Slice slice=new Slice(sliceEntry.getKey(),null,(Map<String,Object>)sliceEntry.getValue());
      slices.put(slice.getName(),slice);
    }
    state.put(collectionName,slices);
  }
  return new ClusterState(version,liveNodes,state);
}
