{
  SpanNearQuery q=makeQuery();
  Weight w=q.weight(searcher);
  assertTrue(searcher.getTopReaderContext().isAtomic);
  Scorer s=w.scorer((AtomicReaderContext)searcher.getTopReaderContext(),ScorerContext.def());
  assertEquals(1,s.advance(1));
}
