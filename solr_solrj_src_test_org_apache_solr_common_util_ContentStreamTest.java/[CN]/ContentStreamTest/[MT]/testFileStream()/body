{
  InputStream is=new SolrResourceLoader(null,null).openResource("solrj/README");
  assertNotNull(is);
  File file=new File(dataDir,"README");
  FileOutputStream os=new FileOutputStream(file);
  IOUtils.copy(is,os);
  os.close();
  is.close();
  ContentStreamBase stream=new ContentStreamBase.FileStream(file);
  InputStream s=stream.getStream();
  FileInputStream fis=new FileInputStream(file);
  InputStreamReader isr=new InputStreamReader(new FileInputStream(file),StandardCharsets.UTF_8);
  Reader r=stream.getReader();
  try {
    assertEquals(file.length(),stream.getSize().intValue());
    assertTrue(IOUtils.contentEquals(fis,s));
    assertTrue(IOUtils.contentEquals(isr,r));
  }
  finally {
    s.close();
    r.close();
    isr.close();
    fis.close();
  }
}
