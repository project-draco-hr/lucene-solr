{
  InputStream is=new SolrResourceLoader(null,null).openResource("solrj/README");
  assertNotNull(is);
  File file=new File(createTempDir(),"README");
  FileOutputStream os=new FileOutputStream(file);
  IOUtils.copy(is,os);
  os.close();
  is.close();
  ContentStreamBase stream=new ContentStreamBase.URLStream(new URL(file.toURI().toASCIIString()));
  InputStream s=stream.getStream();
  FileInputStream fis=new FileInputStream(file);
  FileInputStream fis2=new FileInputStream(file);
  InputStreamReader isr=new InputStreamReader(fis,"UTF-8");
  Reader r=stream.getReader();
  try {
    assertTrue(IOUtils.contentEquals(fis2,s));
    assertEquals(file.length(),stream.getSize().intValue());
    assertTrue(IOUtils.contentEquals(isr,r));
    assertEquals(file.length(),stream.getSize().intValue());
  }
  finally {
    r.close();
    s.close();
    isr.close();
    fis.close();
    fis2.close();
  }
}
