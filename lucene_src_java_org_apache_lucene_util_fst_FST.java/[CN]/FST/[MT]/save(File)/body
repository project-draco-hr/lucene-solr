{
  boolean success=false;
  OutputStream os=new BufferedOutputStream(new FileOutputStream(file));
  try {
    save(new OutputStreamDataOutput(os));
    success=true;
  }
  finally {
    if (success) {
      IOUtils.close(os);
    }
 else {
      IOUtils.closeWhileHandlingException(os);
    }
  }
}
