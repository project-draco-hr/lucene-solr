{
  if (labelToMatch == END_LABEL) {
    if (follow.isFinal()) {
      arc.output=follow.nextFinalOutput;
      arc.label=END_LABEL;
      return arc;
    }
 else {
      return null;
    }
  }
  if (!targetHasArcs(follow)) {
    return null;
  }
  final BytesReader in=getBytesReader(follow.target);
  if ((in.readByte() & BIT_ARCS_AS_FIXED_ARRAY) != 0) {
    arc.numArcs=in.readVInt();
    arc.bytesPerArc=in.readByte() & 0xFF;
    arc.posArcsStart=in.pos;
    int low=0;
    int high=arc.numArcs - 1;
    while (low <= high) {
      int mid=(low + high) >>> 1;
      in.pos=arc.posArcsStart - arc.bytesPerArc * mid - 1;
      int midLabel=readLabel(in);
      final int cmp=midLabel - labelToMatch;
      if (cmp < 0)       low=mid + 1;
 else       if (cmp > 0)       high=mid - 1;
 else {
        arc.arcIdx=mid - 1;
        return readNextRealArc(arc);
      }
    }
    return null;
  }
  readFirstTargetArc(follow,arc);
  while (true) {
    if (arc.label == labelToMatch) {
      return arc;
    }
 else     if (arc.label > labelToMatch) {
      return null;
    }
 else     if (arc.isLast()) {
      return null;
    }
 else {
      readNextArc(arc);
    }
  }
}
