{
  final NumericDocValues oldNorms=in.getNormValues(field);
  if (oldNorms == null)   return null;
  CachedNumericDVs norms;
synchronized (cachedNorms) {
    norms=cachedNorms.get(field);
    if (norms == null) {
      FixedBitSet docsWithField=new FixedBitSet(maxDoc());
      long[] values=new long[maxDoc()];
      while (true) {
        int docID=oldNorms.nextDoc();
        if (docID == NO_MORE_DOCS) {
          break;
        }
        int newDocID=docMap.oldToNew(docID);
        docsWithField.set(newDocID);
        values[newDocID]=oldNorms.longValue();
      }
      norms=new CachedNumericDVs(values,docsWithField);
      cachedNorms.put(field,norms);
    }
  }
  return new SortingNumericDocValues(norms);
}
