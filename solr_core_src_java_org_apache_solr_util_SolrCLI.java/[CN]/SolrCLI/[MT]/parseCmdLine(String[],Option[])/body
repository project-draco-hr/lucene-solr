{
  String builderClassName=System.getProperty("solr.authentication.httpclient.builder");
  if (builderClassName != null) {
    try {
      Class c=Class.forName(builderClassName);
      SolrHttpClientBuilder builder=(SolrHttpClientBuilder)c.newInstance();
      HttpClientUtil.setHttpClientBuilder(builder);
      log.info("Set SolrHttpClientBuilder from: " + builderClassName);
    }
 catch (    Exception ex) {
      log.error(ex.getMessage());
      throw new RuntimeException("Error during loading of builder '" + builderClassName + "'.",ex);
    }
  }
  List<String> toolArgList=new ArrayList<String>();
  List<String> dashDList=new ArrayList<String>();
  for (int a=1; a < args.length; a++) {
    String arg=args[a];
    if (arg.startsWith("-D")) {
      dashDList.add(arg);
    }
 else {
      toolArgList.add(arg);
    }
  }
  String[] toolArgs=toolArgList.toArray(new String[0]);
  CommandLine cli=processCommandLineArgs(joinCommonAndToolOptions(toolOptions),toolArgs);
  List argList=cli.getArgList();
  argList.addAll(dashDList);
  String solrInstallDir=System.getProperty("solr.install.dir");
  if (solrInstallDir != null) {
    checkSslStoreSysProp(solrInstallDir,"keyStore");
    checkSslStoreSysProp(solrInstallDir,"trustStore");
  }
  return cli;
}
