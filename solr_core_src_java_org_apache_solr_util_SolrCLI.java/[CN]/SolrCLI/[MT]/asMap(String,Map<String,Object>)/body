{
  Map<String,Object> map=null;
  Object obj=atPath(jsonPath,json);
  if (obj != null) {
    if (obj instanceof Map) {
      map=(Map<String,Object>)obj;
    }
 else {
      throw new IllegalStateException("Expected a Map at path " + jsonPath + " but found "+ obj+ " instead! "+ json);
    }
  }
  return map;
}
