{
  if (args == null || args.length == 0 || args[0] == null || args[0].trim().length() == 0) {
    System.err.println("Invalid command-line args! Must pass the name of a tool to run.\n" + "Supported tools:\n");
    displayToolOptions(System.err);
    System.exit(1);
  }
  String configurerClassName=System.getProperty("solr.authentication.httpclient.configurer");
  if (configurerClassName != null) {
    try {
      Class c=Class.forName(configurerClassName);
      HttpClientConfigurer configurer=(HttpClientConfigurer)c.newInstance();
      HttpClientUtil.setConfigurer(configurer);
      log.info("Set HttpClientConfigurer from: " + configurerClassName);
    }
 catch (    Exception ex) {
      throw new RuntimeException("Error during loading of configurer '" + configurerClassName + "'.",ex);
    }
  }
  String toolType=args[0].trim().toLowerCase(Locale.ROOT);
  Tool tool=newTool(toolType);
  String[] toolArgs=new String[args.length - 1];
  System.arraycopy(args,1,toolArgs,0,toolArgs.length);
  CommandLine cli=processCommandLineArgs(joinCommonAndToolOptions(tool.getOptions()),toolArgs);
  String solrInstallDir=System.getProperty("solr.install.dir");
  if (solrInstallDir != null) {
    checkSslStoreSysProp(solrInstallDir,"keyStore");
    checkSslStoreSysProp(solrInstallDir,"trustStore");
  }
  System.exit(tool.runTool(cli));
}
