{
  T val=null;
  Object obj=atPath(jsonPath,json);
  if (obj != null) {
    if (clazz.isAssignableFrom(obj.getClass())) {
      val=(T)obj;
    }
 else {
      throw new IllegalStateException("Expected a " + clazz.getName() + " at path "+ jsonPath+ " but found "+ obj+ " instead! "+ json);
    }
  }
  return val;
}
