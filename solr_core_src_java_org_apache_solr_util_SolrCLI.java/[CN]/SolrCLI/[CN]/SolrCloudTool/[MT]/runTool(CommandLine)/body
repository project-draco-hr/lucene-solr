{
  LogManager.getLogger("org.apache.zookeeper").setLevel(Level.ERROR);
  LogManager.getLogger("org.apache.solr.common.cloud").setLevel(Level.WARN);
  String zkHost=cli.getOptionValue("zkHost",ZK_HOST);
  log.debug("Connecting to Solr cluster: " + zkHost);
  int exitStatus=0;
  try (CloudSolrClient cloudSolrClient=new CloudSolrClient(zkHost)){
    String collection=cli.getOptionValue("collection");
    if (collection != null)     cloudSolrClient.setDefaultCollection(collection);
    cloudSolrClient.connect();
    exitStatus=runCloudTool(cloudSolrClient,cli);
  }
 catch (  Exception exc) {
    String excMsg=exc.getMessage();
    if (excMsg != null) {
      System.err.println("\nERROR: " + excMsg + "\n");
      exitStatus=1;
    }
 else {
      throw exc;
    }
  }
  return exitStatus;
}
