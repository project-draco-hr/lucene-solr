{
  LogManager.getLogger("org.apache.zookeeper").setLevel(Level.ERROR);
  LogManager.getLogger("org.apache.solr.common.cloud").setLevel(Level.WARN);
  String zkHost=cli.getOptionValue("zkHost",ZK_HOST);
  log.debug("Connecting to Solr cluster: " + zkHost);
  CloudSolrServer cloudSolrServer=null;
  try {
    cloudSolrServer=new CloudSolrServer(zkHost);
    String collection=cli.getOptionValue("collection");
    if (collection != null)     cloudSolrServer.setDefaultCollection(collection);
    cloudSolrServer.connect();
    runCloudTool(cloudSolrServer,cli);
  }
  finally {
    if (cloudSolrServer != null) {
      try {
        cloudSolrServer.shutdown();
      }
 catch (      Exception ignore) {
      }
    }
  }
  return 0;
}
