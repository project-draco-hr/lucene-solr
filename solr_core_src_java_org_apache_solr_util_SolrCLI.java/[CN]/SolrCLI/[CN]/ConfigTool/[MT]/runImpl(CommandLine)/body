{
  String solrUrl=resolveSolrUrl(cli);
  String action=cli.getOptionValue("action","set-property");
  String collection=cli.getOptionValue("collection","gettingstarted");
  String property=cli.getOptionValue("property");
  String value=cli.getOptionValue("value");
  Map<String,Object> jsonObj=new HashMap<>();
  if (value != null) {
    Map<String,String> setMap=new HashMap<>();
    setMap.put(property,value);
    jsonObj.put(action,setMap);
  }
 else {
    jsonObj.put(action,property);
  }
  CharArr arr=new CharArr();
  (new JSONWriter(arr,0)).write(jsonObj);
  String jsonBody=arr.toString();
  String updatePath="/" + collection + "/config";
  echo("\nPOSTing request to Config API: " + solrUrl + updatePath);
  echo(jsonBody);
  try (SolrClient solrClient=new HttpSolrClient(solrUrl)){
    NamedList<Object> result=postJsonToSolr(solrClient,updatePath,jsonBody);
    Integer statusCode=(Integer)((NamedList)result.get("responseHeader")).get("status");
    if (statusCode == 0) {
      if (value != null) {
        echo("Successfully " + action + " "+ property+ " to "+ value);
      }
 else {
        echo("Successfully " + action + " "+ property);
      }
    }
 else {
      throw new Exception("Failed to " + action + " property due to:\n"+ result);
    }
  }
 }
