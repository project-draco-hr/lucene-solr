{
  HttpEntity entity=response.getEntity();
  if (entity != null) {
    String respBody=EntityUtils.toString(entity);
    Object resp=null;
    try {
      resp=ObjectBuilder.getVal(new JSONParser(respBody));
    }
 catch (    JSONParser.ParseException pe) {
      throw new ClientProtocolException("Expected JSON response from server but received: " + respBody + "\nTypically, this indicates a problem with the Solr server; check the Solr server logs for more information.");
    }
    if (resp != null && resp instanceof Map) {
      return (Map<String,Object>)resp;
    }
 else {
      throw new ClientProtocolException("Expected JSON object in response but received " + resp);
    }
  }
 else {
    StatusLine statusLine=response.getStatusLine();
    throw new HttpResponseException(statusLine.getStatusCode(),statusLine.getReasonPhrase());
  }
}
