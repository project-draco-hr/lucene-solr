{
  String zkHost=getZkHost(cli);
  if (zkHost == null) {
    System.err.println("\nERROR: Solr at " + cli.getOptionValue("solrUrl") + " is running in standalone server mode, please use the create_core command instead;\n"+ "create_collection can only be used when running in SolrCloud mode.\n");
    return 1;
  }
  int toolExitStatus=0;
  try (CloudSolrClient cloudSolrClient=new CloudSolrClient(zkHost)){
    System.out.println("Connecting to ZooKeeper at " + zkHost);
    cloudSolrClient.connect();
    toolExitStatus=runCloudTool(cloudSolrClient,cli);
  }
 catch (  Exception exc) {
    String excMsg=exc.getMessage();
    if (excMsg != null) {
      System.err.println("\nERROR: " + excMsg + "\n");
      toolExitStatus=1;
    }
 else {
      throw exc;
    }
  }
  return toolExitStatus;
}
