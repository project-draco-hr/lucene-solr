{
  String zkHost=getZkHost(cli);
  if (zkHost == null) {
    throw new IllegalStateException("Solr at " + cli.getOptionValue("solrUrl") + " is running in standalone server mode, please use the create_core command instead;\n"+ "create_collection can only be used when running in SolrCloud mode.\n");
  }
  try (CloudSolrClient cloudSolrClient=new CloudSolrClient(zkHost)){
    echo("\nConnecting to ZooKeeper at " + zkHost + " ...");
    cloudSolrClient.connect();
    runCloudTool(cloudSolrClient,cli);
  }
 }
