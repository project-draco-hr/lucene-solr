{
  String zkHost=getZkHost(cli);
  if (zkHost == null) {
    throw new IllegalStateException("Solr at " + cli.getOptionValue("solrUrl") + " is running in standalone server mode, upconfig can only be used when running in SolrCloud mode.\n");
  }
  try (CloudSolrClient cloudSolrClient=new CloudSolrClient.Builder().withZkHost(zkHost).build()){
    echo("\nConnecting to ZooKeeper at " + zkHost + " ...");
    cloudSolrClient.connect();
    upconfig(cloudSolrClient,cli,cli.getOptionValue("confname"),cli.getOptionValue("confdir"));
  }
 }
