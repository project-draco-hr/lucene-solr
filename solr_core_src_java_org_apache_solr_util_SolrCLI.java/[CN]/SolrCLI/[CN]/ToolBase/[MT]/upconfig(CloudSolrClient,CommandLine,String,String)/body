{
  File configSetDir=null;
  File possibleConfigDir=new File(configSet);
  if (possibleConfigDir.isDirectory()) {
    configSetDir=possibleConfigDir;
  }
 else {
    File configsetsDir=new File(cli.getOptionValue("configsetsDir"));
    if (!configsetsDir.isDirectory())     throw new FileNotFoundException(configsetsDir.getAbsolutePath() + " not found!");
    configSetDir=new File(configsetsDir,configSet);
    if (!configSetDir.isDirectory()) {
      throw new FileNotFoundException("Specified config " + configSet + " not found in "+ configsetsDir.getAbsolutePath());
    }
  }
  File confDir=new File(configSetDir,"conf");
  if (!confDir.isDirectory()) {
    if ((new File(configSetDir,"solrconfig.xml")).isFile()) {
      confDir=configSetDir;
    }
 else {
      throw new IllegalArgumentException("Specified configuration directory " + configSetDir.getAbsolutePath() + " is invalid;\nit should contain either conf sub-directory or solrconfig.xml");
    }
  }
  echo("Uploading " + confDir.getAbsolutePath() + " for config "+ confname+ " to ZooKeeper at "+ cloudSolrClient.getZkHost());
  cloudSolrClient.uploadConfig(confDir.toPath(),confname);
}
