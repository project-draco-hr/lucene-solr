{
  String solrUrl=cli.getOptionValue("solr",DEFAULT_SOLR_URL);
  if (!solrUrl.endsWith("/"))   solrUrl+="/";
  int exitCode=0;
  String systemInfoUrl=solrUrl + "admin/info/system";
  HttpClient httpClient=getHttpClient();
  try {
    Map<String,Object> systemInfo=getJson(httpClient,systemInfoUrl,2);
    Map<String,Object> status=reportStatus(solrUrl,systemInfo,httpClient);
    CharArr arr=new CharArr();
    new JSONWriter(arr,2).write(status);
    System.out.println(arr.toString());
  }
 catch (  Exception exc) {
    if (checkCommunicationError(exc)) {
      System.err.println("Solr at " + solrUrl + " not online.");
    }
 else {
      System.err.print("Failed to get system information from " + solrUrl + " due to: ");
      exc.printStackTrace(System.err);
      exitCode=1;
    }
  }
 finally {
    closeHttpClient(httpClient);
  }
  return exitCode;
}
