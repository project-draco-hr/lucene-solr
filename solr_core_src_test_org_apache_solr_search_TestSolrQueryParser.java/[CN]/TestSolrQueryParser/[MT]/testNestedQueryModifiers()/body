{
  String subqq="_query_:\"{!v=$qq}\"";
  assertJQ(req("q","_query_:\"\\\"how brown\\\"~2\"","debug","query"),"/response/docs/[0]/id=='1'");
  assertJQ(req("q",subqq,"qq","\"how brown\"~2","debug","query"),"/response/docs/[0]/id=='1'");
  assertJQ(req("q",subqq + "~1","qq","\"how brown\"~2","debug","query"),"/response/docs/[0]/id=='1'");
  assertJQ(req("q","  {!v=$qq}~1","qq","\"how brown\"~2","debug","query"),"/response/docs/[0]/id=='1'");
  assertJQ(req("fq","id:1","fl","id,score","q",subqq + "^3","qq","text:x^2","debug","query"),"/debug/parsedquery_toString=='((text:x)^2.0)^3.0'");
  assertJQ(req("fq","id:1","fl","id,score","q","  {!v=$qq}^3","qq","text:x^2","debug","query"),"/debug/parsedquery_toString=='((text:x)^2.0)^3.0'");
}
