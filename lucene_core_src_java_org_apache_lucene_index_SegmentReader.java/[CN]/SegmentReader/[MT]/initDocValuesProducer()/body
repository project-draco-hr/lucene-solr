{
  final Directory dir=core.cfsReader != null ? core.cfsReader : si.info.dir;
  if (!fieldInfos.hasDocValues()) {
    return null;
  }
 else   if (si.hasFieldUpdates()) {
    return new SegmentDocValuesProducer(si,dir,core.coreFieldInfos,fieldInfos,segDocValues);
  }
 else {
    return segDocValues.getDocValuesProducer(-1L,si,dir,fieldInfos);
  }
}
