{
  final Directory dir=core.cfsReader != null ? core.cfsReader : si.info.dir;
  final DocValuesFormat dvFormat=codec.docValuesFormat();
  if (!si.hasFieldUpdates()) {
    return segDocValues.getDocValuesProducer(-1L,si,IOContext.READ,dir,dvFormat,fieldInfos);
  }
 else {
    return new SegmentDocValuesProducer(si,dir,fieldInfos,segDocValues,dvFormat);
  }
}
