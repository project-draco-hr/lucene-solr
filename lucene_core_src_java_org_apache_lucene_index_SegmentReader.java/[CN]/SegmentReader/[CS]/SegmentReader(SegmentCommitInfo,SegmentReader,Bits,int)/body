{
  this.si=si;
  this.liveDocs=liveDocs;
  this.numDocs=numDocs;
  this.core=sr.core;
  core.incRef();
  this.segDocValues=sr.segDocValues;
  boolean success=false;
  try {
    final Codec codec=si.info.getCodec();
    if (si.getFieldInfosGen() == -1) {
      fieldInfos=sr.fieldInfos;
    }
 else {
      fieldInfos=readFieldInfos(si);
    }
    if (fieldInfos.hasDocValues()) {
      docValuesProducer=initDocValuesProducer(codec);
    }
 else {
      docValuesProducer=null;
    }
    success=true;
  }
  finally {
    if (!success) {
      doClose();
    }
  }
}
