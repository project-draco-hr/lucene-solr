{
  for (  Cluster outCluster : outputClusters) {
    NamedList cluster=new SimpleOrderedMap();
    parent.add(cluster);
    List<String> labels=outCluster.getPhrases();
    if (labels.size() > maxLabels)     labels=labels.subList(0,maxLabels);
    cluster.add("labels",labels);
    List<Document> docs=outputSubClusters ? outCluster.getDocuments() : outCluster.getAllDocuments();
    List docList=new ArrayList();
    cluster.add("docs",docList);
    for (    Document doc : docs) {
      docList.add(doc.getField("solrId"));
    }
    if (outputSubClusters) {
      List subclusters=new ArrayList();
      cluster.add("clusters",subclusters);
      clustersToNamedList(outCluster.getSubclusters(),subclusters,outputSubClusters,maxLabels);
    }
  }
}
