{
  File dir=Files.createTempDir();
  dir.deleteOnExit();
  ZkConfigManager configManager=new ZkConfigManager(zkClient);
  configManager.downloadConfigDir(configName,dir.toPath());
  File confDir=new File(dir,"conf");
  if (!confDir.isDirectory()) {
    confDir=new File(Files.createTempDir().getAbsolutePath(),"conf");
    confDir.getParentFile().deleteOnExit();
    Files.move(dir,confDir);
    dir=confDir.getParentFile();
  }
  FileUtils.writeStringToFile(new File(dir,"solr.xml"),"<solr></solr>","UTF-8");
  verifyConfigDir(confDir);
  return dir;
}
