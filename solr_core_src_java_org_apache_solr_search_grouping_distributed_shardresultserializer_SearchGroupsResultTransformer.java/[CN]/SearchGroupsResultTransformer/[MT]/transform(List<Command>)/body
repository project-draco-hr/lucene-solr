{
  NamedList<NamedList> result=new NamedList<>();
  for (  Command command : data) {
    final NamedList<Object> commandResult=new NamedList<>();
    if (SearchGroupsFieldCommand.class.isInstance(command)) {
      SearchGroupsFieldCommand fieldCommand=(SearchGroupsFieldCommand)command;
      final SearchGroupsFieldCommandResult fieldCommandResult=fieldCommand.result();
      final Collection<SearchGroup<BytesRef>> searchGroups=fieldCommandResult.getSearchGroups();
      if (searchGroups != null) {
        commandResult.add("topGroups",serializeSearchGroup(searchGroups,fieldCommand.getGroupSort()));
      }
      final Integer groupedCount=fieldCommandResult.getGroupCount();
      if (groupedCount != null) {
        commandResult.add("groupCount",groupedCount);
      }
    }
 else {
      continue;
    }
    result.add(command.getKey(),commandResult);
  }
  return result;
}
