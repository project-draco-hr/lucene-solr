{
  NamedList<NamedList> result=new NamedList<NamedList>();
  for (  Command command : data) {
    final NamedList<Object> commandResult=new NamedList<Object>();
    if (SearchGroupsFieldCommand.class.isInstance(command)) {
      SearchGroupsFieldCommand fieldCommand=(SearchGroupsFieldCommand)command;
      Pair<Integer,Collection<SearchGroup<BytesRef>>> pair=fieldCommand.result();
      Integer groupedCount=pair.getA();
      Collection<SearchGroup<BytesRef>> searchGroups=pair.getB();
      if (searchGroups != null) {
        commandResult.add("topGroups",serializeSearchGroup(searchGroups,fieldCommand.getGroupSort()));
      }
      if (groupedCount != null) {
        commandResult.add("groupCount",groupedCount);
      }
    }
 else {
      continue;
    }
    result.add(command.getKey(),commandResult);
  }
  return result;
}
