{
  String source="[ac]*a[ac]{50,200}";
  try {
    new RegExp(source).toAutomaton();
    fail();
  }
 catch (  TooComplexToDeterminizeException e) {
    assert(e.getMessage().contains(source));
    ByteArrayOutputStream bos=new ByteArrayOutputStream();
    ObjectOutput out=new ObjectOutputStream(bos);
    out.writeObject(e);
    byte[] bytes=bos.toByteArray();
    ByteArrayInputStream bis=new ByteArrayInputStream(bytes);
    ObjectInput in=new ObjectInputStream(bis);
    TooComplexToDeterminizeException e2=(TooComplexToDeterminizeException)in.readObject();
    assertNotNull(e2.getMessage());
  }
}
