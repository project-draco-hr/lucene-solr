{
  MockRAMInputStream clone=(MockRAMInputStream)super.clone();
synchronized (dir.openFiles) {
    if (dir.openFiles.containsKey(name)) {
      Integer v=(Integer)dir.openFiles.get(name);
      v=new Integer(v.intValue() + 1);
      dir.openFiles.put(name,v);
    }
 else {
      throw new RuntimeException("BUG: cloned file was not open?");
    }
  }
  return clone;
}
