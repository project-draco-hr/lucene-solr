{
  int numIterations=atLeast(1000);
  for (int i=0; i < numIterations; i++) {
    String s=_TestUtil.randomUnicodeString(random(),100);
    TokenStream ts=analyzer.tokenStream("foo",s);
    CharTermAttribute termAtt=ts.addAttribute(CharTermAttribute.class);
    ts.reset();
    while (ts.incrementToken()) {
      assertTrue(UnicodeUtil.validUTF16String(termAtt));
    }
  }
}
