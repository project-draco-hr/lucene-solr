{
  if (feed == null)   throw new StorageException("can not insert null feed");
  if (accountName == null)   throw new StorageException("accountName must not be null");
  ReferenceCounter<StorageQuery> query=null;
  try {
    query=this.controller.getStorageQuery();
    if (query.get().isFeedStored(feed.getId()))     throw new StorageException("feed with feedID " + feed.getId() + " is already stored");
    StorageModifier modifier=this.controller.getStorageModifier();
    StorageFeedWrapper wrapper=new StorageFeedWrapper(feed,accountName);
    modifier.createFeed(wrapper);
  }
 catch (  Exception e) {
    LOG.error("Can't create feed -- " + e.getMessage(),e);
    StorageException ex=new StorageException("Can't create feed -- " + e.getMessage(),e);
    ex.setStackTrace(e.getStackTrace());
    throw ex;
  }
 finally {
    if (query != null)     query.decrementRef();
  }
}
