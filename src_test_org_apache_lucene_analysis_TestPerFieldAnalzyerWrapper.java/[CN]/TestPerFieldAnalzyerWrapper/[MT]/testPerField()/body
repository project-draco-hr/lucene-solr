{
  String text="Qwerty";
  PerFieldAnalyzerWrapper analyzer=new PerFieldAnalyzerWrapper(new WhitespaceAnalyzer());
  analyzer.addAnalyzer("special",new SimpleAnalyzer());
  TokenStream tokenStream=analyzer.tokenStream("field",new StringReader(text));
  TermAttribute termAtt=(TermAttribute)tokenStream.getAttribute(TermAttribute.class);
  assertTrue(tokenStream.incrementToken());
  assertEquals("WhitespaceAnalyzer does not lowercase","Qwerty",termAtt.term());
  tokenStream=analyzer.tokenStream("special",new StringReader(text));
  termAtt=(TermAttribute)tokenStream.getAttribute(TermAttribute.class);
  assertTrue(tokenStream.incrementToken());
  assertEquals("SimpleAnalyzer lowercases","qwerty",termAtt.term());
}
