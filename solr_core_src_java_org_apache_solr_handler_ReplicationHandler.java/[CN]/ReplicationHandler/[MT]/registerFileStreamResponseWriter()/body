{
  core.registerResponseWriter(FILE_STREAM,new BinaryQueryResponseWriter(){
    @Override public void write(    OutputStream out,    SolrQueryRequest request,    SolrQueryResponse resp) throws IOException {
      DirectoryFileStream stream=(DirectoryFileStream)resp.getValues().get(FILE_STREAM);
      stream.write(out);
    }
    @Override public void write(    Writer writer,    SolrQueryRequest request,    SolrQueryResponse response){
      throw new RuntimeException("This is a binary writer , Cannot write to a characterstream");
    }
    @Override public String getContentType(    SolrQueryRequest request,    SolrQueryResponse response){
      return BinaryResponseParser.BINARY_CONTENT_TYPE;
    }
    @Override public void init(    NamedList args){
    }
  }
);
}
