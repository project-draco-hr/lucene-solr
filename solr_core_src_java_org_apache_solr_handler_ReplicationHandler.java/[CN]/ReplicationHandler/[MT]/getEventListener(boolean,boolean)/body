{
  return new SolrEventListener(){
    @Override public void init(    NamedList args){
    }
    /** 
 * This refreshes the latest replicateable index commit and optionally can create Snapshots as well
 */
    @Override public void postCommit(){
      IndexCommit currentCommitPoint=core.getDeletionPolicy().getLatestCommit();
      if (getCommit) {
        indexCommitPoint=currentCommitPoint;
      }
      if (snapshoot) {
        try {
          int numberToKeep=numberBackupsToKeep;
          if (numberToKeep < 1) {
            numberToKeep=Integer.MAX_VALUE;
          }
          SnapShooter snapShooter=new SnapShooter(core,null,null);
          snapShooter.validateCreateSnapshot();
          snapShooter.createSnapAsync(currentCommitPoint,numberToKeep,ReplicationHandler.this);
        }
 catch (        Exception e) {
          LOG.error("Exception while snapshooting",e);
        }
      }
    }
    @Override public void newSearcher(    SolrIndexSearcher newSearcher,    SolrIndexSearcher currentSearcher){
    }
    @Override public void postSoftCommit(){
    }
  }
;
}
