{
  long version[]=new long[2];
  RefCounted<SolrIndexSearcher> searcher=core.getSearcher();
  try {
    final IndexCommit commit=searcher.get().getIndexReader().getIndexCommit();
    final Map<String,String> commitData=commit.getUserData();
    String commitTime=commitData.get(SolrIndexWriter.COMMIT_TIME_MSEC_KEY);
    if (commitTime != null) {
      version[0]=Long.parseLong(commitTime);
    }
    version[1]=commit.getGeneration();
  }
 catch (  IOException e) {
    LOG.warn("Unable to get index version : ",e);
  }
 finally {
    searcher.decref();
  }
  return version;
}
