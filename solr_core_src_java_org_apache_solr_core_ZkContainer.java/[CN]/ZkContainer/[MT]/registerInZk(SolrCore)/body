{
  if (zkController != null) {
    try {
      zkController.register(core.getName(),core.getCoreDescriptor());
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      SolrException.log(log,"",e);
      throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
    }
catch (    Exception e) {
      try {
        zkController.publish(core.getCoreDescriptor(),ZkStateReader.DOWN);
      }
 catch (      KeeperException e1) {
        log.error("",e);
        throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
      }
catch (      InterruptedException e1) {
        Thread.currentThread().interrupt();
        log.error("",e);
        throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
      }
      SolrException.log(log,"",e);
      throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
    }
  }
}
