{
  Automaton utf8=new UTF32ToUTF8().convert(automaton);
  runAutomaton=new ByteRunAutomaton(utf8,true);
  sortedTransitions=utf8.getSortedTransitions();
  this.finite=finite;
  if (finite) {
    commonSuffixRef=null;
  }
 else {
    commonSuffixRef=SpecialOperations.getCommonSuffixBytesRef(utf8);
  }
}
