{
  int state;
  int pos=0;
  while (true) {
    curGen++;
    linear=false;
    state=runAutomaton.getInitialState();
    for (pos=0; pos < utf16.length; pos++) {
      visited[state]=curGen;
      int nextState=runAutomaton.step(state,utf16.result[pos]);
      if (nextState == -1)       break;
      if (!finite && !linear && visited[nextState] == curGen) {
        linear=true;
        infinitePosition=pos;
      }
      state=nextState;
    }
    if (nextString(state,pos)) {
      return true;
    }
 else {
      if (!backtrack(pos))       return false;
 else       if (runAutomaton.run(utf16.result,0,utf16.length))       return true;
    }
  }
}
