{
  String ct=getHeader("Content-Type");
  if (ct == null || !ct.toLowerCase().startsWith("text/")) {
    throw new IOException("Content-Type `" + ct + "' is not a text type");
  }
  String charset=Util.getParameter("charset",ct);
  if (charset == null) {
    charset="ISO-8859-1";
  }
  return new String(getData(),charset);
}
