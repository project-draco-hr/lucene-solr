{
  int currentIndex=0;
  long currentBits=0;
  for (int doc=it.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc=it.nextDoc()) {
    final int index=doc >>> 6;
    if (index > currentIndex) {
      out.writeLong(currentBits);
      for (int i=currentIndex + 1; i < index; ++i) {
        out.writeLong(0L);
      }
      currentIndex=index;
      currentBits=0L;
    }
    currentBits|=1L << doc;
  }
  out.writeLong(currentBits);
  final int maxIndex=(maxDoc - 1) >>> 6;
  for (int i=currentIndex + 1; i <= maxIndex; ++i) {
    out.writeLong(0L);
  }
}
