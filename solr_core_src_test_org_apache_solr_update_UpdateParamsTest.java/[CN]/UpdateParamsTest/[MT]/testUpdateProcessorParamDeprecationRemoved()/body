{
  SolrCore core=h.getCore();
  UpdateRequestHandler handler=new UpdateRequestHandler();
  handler.init(null);
  MapSolrParams params=new MapSolrParams(new HashMap<String,String>());
  params.getMap().put("update.processor","nonexistant");
  SolrQueryResponse rsp=new SolrQueryResponse();
  SolrQueryRequestBase req=new SolrQueryRequestBase(core,params){
  }
;
  try {
    handler.handleRequestBody(req,rsp);
    assertTrue("Old param update.processor should not have any effect anymore",true);
  }
 catch (  Exception e) {
    assertFalse("Got wrong exception while testing update.chain",e.getMessage().equals("unknown UpdateRequestProcessorChain: nonexistant"));
  }
  params.getMap().remove("update.processor");
  params.getMap().put(UpdateParams.UPDATE_CHAIN,"nonexistant");
  req.setParams(params);
  try {
    handler.handleRequestBody(req,rsp);
    assertFalse("Faulty update.chain parameter not causing an error - i.e. it is not detected",true);
  }
 catch (  Exception e) {
    assertEquals("Got wrong exception while testing update.chain",e.getMessage(),"unknown UpdateRequestProcessorChain: nonexistant");
  }
}
