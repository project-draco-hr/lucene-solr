{
  Set<Object> stopWordsSet=new HashSet<Object>();
  stopWordsSet.add("good");
  stopWordsSet.add("test");
  stopWordsSet.add("analyzer");
  StopAnalyzer newStop=new StopAnalyzer(Version.LUCENE_40,stopWordsSet);
  StringReader reader=new StringReader("This is a good test of the english stop analyzer");
  TokenStream stream=newStop.tokenStream("test",reader);
  assertNotNull(stream);
  CharTermAttribute termAtt=stream.getAttribute(CharTermAttribute.class);
  while (stream.incrementToken()) {
    String text=termAtt.toString();
    assertFalse(stopWordsSet.contains(text));
  }
}
