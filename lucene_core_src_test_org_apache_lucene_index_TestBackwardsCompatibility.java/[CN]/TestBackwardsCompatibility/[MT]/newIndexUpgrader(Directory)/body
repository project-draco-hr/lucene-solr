{
  final boolean streamType=random().nextBoolean();
  final int choice=TestUtil.nextInt(random(),0,2);
switch (choice) {
case 0:
    return new IndexUpgrader(dir,TEST_VERSION_CURRENT);
case 1:
  return new IndexUpgrader(dir,TEST_VERSION_CURRENT,streamType ? null : InfoStream.NO_OUTPUT,false);
case 2:
return new IndexUpgrader(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,null),false);
default :
fail("case statement didn't get updated when random bounds changed");
}
return null;
}
