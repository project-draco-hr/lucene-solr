{
  ensureOpen();
  if (this.hasChanges || this.isCurrent()) {
    return this;
  }
  return (DirectoryIndexReader)new SegmentInfos.FindSegmentsFile(directory){
    protected Object doBody(    String segmentFileName) throws CorruptIndexException, IOException {
      SegmentInfos infos=new SegmentInfos();
      infos.read(directory,segmentFileName);
      DirectoryIndexReader newReader=doReopen(infos);
      if (DirectoryIndexReader.this != newReader) {
        newReader.init(directory,infos,closeDirectory,readOnly);
        newReader.deletionPolicy=deletionPolicy;
      }
      return newReader;
    }
  }
.run();
}
