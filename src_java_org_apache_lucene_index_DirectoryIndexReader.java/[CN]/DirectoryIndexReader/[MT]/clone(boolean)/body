{
  final SegmentInfos infos=(SegmentInfos)segmentInfos.clone();
  DirectoryIndexReader newReader=doReopen(infos,true,openReadOnly);
  if (this != newReader) {
    newReader.init(directory,infos,closeDirectory,openReadOnly);
    newReader.deletionPolicy=deletionPolicy;
  }
  if (!openReadOnly && writeLock != null) {
    newReader.writeLock=writeLock;
    writeLock=null;
    hasChanges=false;
  }
  return newReader;
}
