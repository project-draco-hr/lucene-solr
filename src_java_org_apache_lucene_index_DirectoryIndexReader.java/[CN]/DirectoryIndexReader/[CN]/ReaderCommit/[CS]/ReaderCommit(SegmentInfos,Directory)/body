{
  segmentsFileName=infos.getCurrentSegmentFileName();
  this.dir=dir;
  final int size=infos.size();
  files=new ArrayList(size);
  files.add(segmentsFileName);
  for (int i=0; i < size; i++) {
    SegmentInfo info=infos.info(i);
    if (info.dir == dir)     files.addAll(info.files());
  }
  version=infos.getVersion();
  generation=infos.getGeneration();
  isOptimized=infos.size() == 1 && !infos.info(0).hasDeletions();
}
