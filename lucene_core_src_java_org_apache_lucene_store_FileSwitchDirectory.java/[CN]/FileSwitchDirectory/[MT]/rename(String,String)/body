{
  Directory sourceDir=getDirectory(source);
  if (sourceDir != getDirectory(dest)) {
    throw new AtomicMoveNotSupportedException(source,dest,"source and dest are in different directories");
  }
  sourceDir.rename(source,dest);
}
