{
  if (responseWriter instanceof BinaryQueryResponseWriter) {
    BinaryQueryResponseWriter binWriter=(BinaryQueryResponseWriter)responseWriter;
    binWriter.write(outputStream,solrRequest,solrResponse);
  }
 else {
    Writer writer=buildWriter(outputStream,ContentStreamBase.getCharsetFromContentType(contentType));
    responseWriter.write(writer,solrRequest,solrResponse);
    writer.flush();
  }
}
