{
  IndexReader reader=IndexReader.open(signedIndex.index,true);
  IndexSearcher search=new IndexSearcher(reader);
  int medId=((maxId - minId) / 2);
  String minIP=pad(minId);
  String maxIP=pad(maxId);
  String medIP=pad(medId);
  int numDocs=reader.numDocs();
  assertEquals("num of docs",numDocs,1 + maxId - minId);
  ScoreDoc[] result;
  Query q=new TermQuery(new Term("body","body"));
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,maxIP,T,T),numDocs).scoreDocs;
  assertEquals("find all",numDocs,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,maxIP,T,F),numDocs).scoreDocs;
  assertEquals("all but last",numDocs - 1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,maxIP,F,T),numDocs).scoreDocs;
  assertEquals("all but first",numDocs - 1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,maxIP,F,F),numDocs).scoreDocs;
  assertEquals("all but ends",numDocs - 2,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",medIP,maxIP,T,T),numDocs).scoreDocs;
  assertEquals("med and up",1 + maxId - medId,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,medIP,T,T),numDocs).scoreDocs;
  assertEquals("up to med",1 + medId - minId,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",null,null,T,T),numDocs).scoreDocs;
  assertEquals("find all",numDocs,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,null,T,F),numDocs).scoreDocs;
  assertEquals("min and up",numDocs,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",null,maxIP,F,T),numDocs).scoreDocs;
  assertEquals("max and down",numDocs,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,null,F,F),numDocs).scoreDocs;
  assertEquals("not min, but up",numDocs - 1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",null,maxIP,F,F),numDocs).scoreDocs;
  assertEquals("not max, but down",numDocs - 1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",medIP,maxIP,T,F),numDocs).scoreDocs;
  assertEquals("med and up, not max",maxId - medId,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,medIP,F,T),numDocs).scoreDocs;
  assertEquals("not min, up to med",medId - minId,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,minIP,F,F),numDocs).scoreDocs;
  assertEquals("min,min,F,F",0,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",medIP,medIP,F,F),numDocs).scoreDocs;
  assertEquals("med,med,F,F",0,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",maxIP,maxIP,F,F),numDocs).scoreDocs;
  assertEquals("max,max,F,F",0,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",minIP,minIP,T,T),numDocs).scoreDocs;
  assertEquals("min,min,T,T",1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",null,minIP,F,T),numDocs).scoreDocs;
  assertEquals("nul,min,F,T",1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",maxIP,maxIP,T,T),numDocs).scoreDocs;
  assertEquals("max,max,T,T",1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",maxIP,null,T,F),numDocs).scoreDocs;
  assertEquals("max,nul,T,T",1,result.length);
  result=search.search(q,FieldCacheRangeFilter.newStringRange("id",medIP,medIP,T,T),numDocs).scoreDocs;
  assertEquals("med,med,T,T",1,result.length);
}
