{
  byte[] buf=new byte[BufferedIndexOutput.BUFFER_SIZE];
  for (  String filename : filenames) {
    IndexOutput os=null;
    IndexInput is=null;
    IOException priorException=null;
    try {
      os=to.createOutput(filename);
      is=openInput(filename);
      long len=is.length();
      long readCount=0;
      while (readCount < len) {
        int toRead=readCount + BufferedIndexOutput.BUFFER_SIZE > len ? (int)(len - readCount) : BufferedIndexOutput.BUFFER_SIZE;
        is.readBytes(buf,0,toRead);
        os.writeBytes(buf,toRead);
        readCount+=toRead;
      }
    }
 catch (    IOException ioe) {
      priorException=ioe;
    }
 finally {
      IOUtils.closeSafely(priorException,os,is);
    }
  }
}
