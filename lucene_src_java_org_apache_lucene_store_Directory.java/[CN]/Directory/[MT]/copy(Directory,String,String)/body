{
  IndexOutput os=null;
  IndexInput is=null;
  IOException priorException=null;
  int bufSize=BufferedIndexOutput.BUFFER_SIZE;
  byte[] buf=new byte[bufSize];
  try {
    os=to.createOutput(dest);
    is=openInput(src);
    long len=is.length();
    long numRead=0;
    while (numRead < len) {
      long left=len - numRead;
      int toRead=(int)(bufSize < left ? bufSize : left);
      is.readBytes(buf,0,toRead);
      os.writeBytes(buf,toRead);
      numRead+=toRead;
    }
  }
 catch (  IOException ioe) {
    priorException=ioe;
  }
 finally {
    IOUtils.closeSafely(priorException,os,is);
  }
}
