{
  assertU(adoc("id","doc_1","node_id","1","edge_id","2","text","foo","title","foo10"));
  assertU(adoc("id","doc_2","node_id","2","edge_id","3","text","foo"));
  assertU(commit());
  assertU(adoc("id","doc_3","node_id","3","edge_id","4","edge_id","5","table","foo"));
  assertU(adoc("id","doc_4","node_id","4","table","foo"));
  assertU(commit());
  assertU(adoc("id","doc_5","node_id","5","edge_id","7","table","bar"));
  assertU(adoc("id","doc_6","node_id","6","edge_id","3"));
  assertU(adoc("id","doc_7","node_id","7","edge_id","1"));
  assertU(adoc("id","doc_8","node_id","8","edge_id","1","edge_id","2"));
  assertU(adoc("id","doc_9","node_id","9"));
  assertU(commit());
  assertU(adoc("id","doc_1","node_id","1","edge_id","2","text","foo"));
  assertU(adoc("id","doc_2","node_id","2","edge_id","3","edge_id","9","text","foo11"));
  assertU(commit());
  assertU(adoc("id","doc_10","node_id","10","edge_id","11","title","foo"));
  assertU(adoc("id","doc_11","node_id","11","edge_id","12","edge_id","13","text","foo11"));
  assertU(adoc("id","doc_12","node_id","12","text","foo10"));
  assertU(adoc("id","doc_13","node_id","13","edge_id","12","text","foo10"));
  assertU(commit());
  String gQuery="{!graph from=\"node_id\" to=\"edge_id\"}id:doc_1";
  SolrQueryRequest qr=createRequest(gQuery);
  assertQ(qr,"//*[@numFound='7']");
  String g2Query="{!graph from=\"node_id\" to=\"edge_id\" returnRoot=\"true\" returnOnlyLeaf=\"false\"}id:doc_8";
  qr=createRequest(g2Query);
  assertQ(qr,"//*[@numFound='8']");
  String g3Query="{!graph from=\"node_id\" to=\"edge_id\" returnRoot=\"false\" returnOnlyLeaf=\"false\"}id:doc_8";
  qr=createRequest(g3Query);
  assertQ(qr,"//*[@numFound='7']");
  String g4Query="{!graph from=\"node_id\" to=\"edge_id\" returnRoot=\"true\" returnOnlyLeaf=\"false\" traversalFilter=\"text:foo11\"}id:doc_8";
  qr=createRequest(g4Query);
  assertQ(qr,"//*[@numFound='2']");
}
