{
  Path dir=wrap(createTempDir());
  OutputStream leak=Files.newOutputStream(dir.resolve("leaky"));
  try {
    dir.getFileSystem().close();
    fail("should have gotten exception");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("file handle leaks"));
  }
  leak.close();
}
