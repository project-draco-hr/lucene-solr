{
  Calendar cal=Calendar.getInstance(GMT);
  cal.setTime(new Date(round(time,resolution)));
  SimpleDateFormat sdf=new SimpleDateFormat();
  sdf.setTimeZone(GMT);
  String pattern=null;
  if (resolution == Resolution.YEAR) {
    pattern="yyyy";
  }
 else   if (resolution == Resolution.MONTH) {
    pattern="yyyyMM";
  }
 else   if (resolution == Resolution.DAY) {
    pattern="yyyyMMdd";
  }
 else   if (resolution == Resolution.HOUR) {
    pattern="yyyyMMddHH";
  }
 else   if (resolution == Resolution.MINUTE) {
    pattern="yyyyMMddHHmm";
  }
 else   if (resolution == Resolution.SECOND) {
    pattern="yyyyMMddHHmmss";
  }
 else   if (resolution == Resolution.MILLISECOND) {
    pattern="yyyyMMddHHmmssSSS";
  }
 else {
    throw new IllegalArgumentException("unknown resolution " + resolution);
  }
  sdf.applyPattern(pattern);
  return sdf.format(cal.getTime());
}
