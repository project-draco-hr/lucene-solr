{
  Calendar cal=Calendar.getInstance(GMT);
  cal.setTime(new Date(round(time,resolution)));
  String result;
  if (resolution == Resolution.YEAR) {
synchronized (YEAR_FORMAT) {
      result=YEAR_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.MONTH) {
synchronized (MONTH_FORMAT) {
      result=MONTH_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.DAY) {
synchronized (DAY_FORMAT) {
      result=DAY_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.HOUR) {
synchronized (HOUR_FORMAT) {
      result=HOUR_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.MINUTE) {
synchronized (MINUTE_FORMAT) {
      result=MINUTE_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.SECOND) {
synchronized (SECOND_FORMAT) {
      result=SECOND_FORMAT.format(cal.getTime());
    }
  }
 else   if (resolution == Resolution.MILLISECOND) {
synchronized (MILLISECOND_FORMAT) {
      result=MILLISECOND_FORMAT.format(cal.getTime());
    }
  }
 else {
    throw new IllegalArgumentException("unknown resolution " + resolution);
  }
  return result;
}
