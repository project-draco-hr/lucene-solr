{
  if (fos.size() != 0)   return;
synchronized (this) {
    if (fos.size() != 0)     return;
    if (optional != null) {
      addGlobalStrings(optional.getFieldNames());
    }
    writeLogHeader(codec);
  }
}
