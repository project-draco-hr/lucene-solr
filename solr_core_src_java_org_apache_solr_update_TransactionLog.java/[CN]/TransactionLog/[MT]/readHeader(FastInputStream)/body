{
  fis=fis != null ? fis : new ChannelFastInputStream(channel,0);
  LogCodec codec=new LogCodec(resolver);
  Map header=(Map)codec.unmarshal(fis);
  fis.readInt();
synchronized (this) {
    globalStringList=(List<String>)header.get("strings");
    globalStringMap=new HashMap<String,Integer>(globalStringList.size());
    for (int i=0; i < globalStringList.size(); i++) {
      globalStringMap.put(globalStringList.get(i),i + 1);
    }
  }
}
