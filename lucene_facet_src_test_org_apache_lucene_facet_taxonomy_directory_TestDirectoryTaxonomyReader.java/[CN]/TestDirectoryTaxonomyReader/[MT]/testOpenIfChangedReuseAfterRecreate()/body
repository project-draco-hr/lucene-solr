{
  Directory dir=newDirectory();
  DirectoryTaxonomyWriter writer=new DirectoryTaxonomyWriter(dir);
  FacetLabel cp_a=new FacetLabel("a");
  writer.addCategory(cp_a);
  writer.close();
  DirectoryTaxonomyReader r1=new DirectoryTaxonomyReader(dir);
  assertEquals(1,r1.getOrdinal(cp_a));
  assertEquals(cp_a,r1.getPath(1));
  writer=new DirectoryTaxonomyWriter(dir,OpenMode.CREATE);
  FacetLabel cp_b=new FacetLabel("b");
  writer.addCategory(cp_b);
  writer.close();
  DirectoryTaxonomyReader r2=TaxonomyReader.openIfChanged(r1);
  assertNotNull(r2);
  assertEquals(1,r2.getOrdinal(cp_b));
  assertEquals(cp_b,r2.getPath(1));
  assertEquals(TaxonomyReader.INVALID_ORDINAL,r1.getOrdinal(cp_b));
  assertEquals(cp_a,r1.getPath(1));
  assertEquals(TaxonomyReader.INVALID_ORDINAL,r2.getOrdinal(cp_a));
  assertEquals(cp_b,r2.getPath(1));
  r2.close();
  r1.close();
  dir.close();
}
