{
  super(query);
  CollectionStatistics collectionStats=searcher.collectionStatistics(terms[0].field());
  long docFreq=0;
  long totalTermFreq=0;
  termContexts=new TermContext[terms.length];
  for (int i=0; i < termContexts.length; i++) {
    termContexts[i]=TermContext.build(searcher.getTopReaderContext(),terms[i]);
    TermStatistics termStats=searcher.termStatistics(terms[i],termContexts[i]);
    docFreq=Math.max(termStats.docFreq(),docFreq);
    if (termStats.totalTermFreq() == -1) {
      totalTermFreq=-1;
    }
 else     if (totalTermFreq != -1) {
      totalTermFreq+=termStats.totalTermFreq();
    }
  }
  TermStatistics pseudoStats=new TermStatistics(null,docFreq,totalTermFreq);
  this.similarity=searcher.getSimilarity(true);
  this.simWeight=similarity.computeWeight(collectionStats,pseudoStats);
}
