{
  String zkDir=createTempDir("zkData").getAbsolutePath();
  ZkTestServer server=null;
  server=new ZkTestServer(zkDir);
  server.run();
  AbstractZkTestCase.tryCleanSolrZkNode(server.getZkHost());
  AbstractZkTestCase.makeSolrZkNode(server.getZkHost());
  SolrZkClient zkClient=new SolrZkClient(server.getZkHost(),AbstractZkTestCase.TIMEOUT);
  assertTrue(zkClient.exists("/solr",true));
  zkClient.close();
  server.shutdown();
}
