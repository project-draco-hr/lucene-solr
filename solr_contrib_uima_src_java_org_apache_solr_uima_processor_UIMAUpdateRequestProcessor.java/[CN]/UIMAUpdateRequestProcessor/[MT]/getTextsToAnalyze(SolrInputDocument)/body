{
  String[] fieldsToAnalyze=solrUIMAConfiguration.getFieldsToAnalyze();
  boolean merge=solrUIMAConfiguration.isFieldsMerging();
  String[] textVals;
  if (merge) {
    StringBuilder unifiedText=new StringBuilder("");
    for (    String aFieldsToAnalyze : fieldsToAnalyze) {
      if (solrInputDocument.getFieldValues(aFieldsToAnalyze) != null) {
        Object[] Values=solrInputDocument.getFieldValues(aFieldsToAnalyze).toArray();
        for (        Object Value : Values) {
          if (unifiedText.length() > 0) {
            unifiedText.append(' ');
          }
          unifiedText.append(Value.toString());
        }
      }
    }
    textVals=new String[1];
    textVals[0]=unifiedText.toString();
  }
 else {
    textVals=new String[fieldsToAnalyze.length];
    for (int i=0; i < fieldsToAnalyze.length; i++) {
      if (solrInputDocument.getFieldValues(fieldsToAnalyze[i]) != null) {
        Object[] Values=solrInputDocument.getFieldValues(fieldsToAnalyze[i]).toArray();
        for (        Object Value : Values) {
          textVals[i]+=Value.toString();
        }
      }
    }
  }
  return textVals;
}
