{
  File wikipedia=null;
  File outputDir=new File("./enwiki");
  boolean keepImageOnlyDocs=true;
  for (int i=0; i < args.length; i++) {
    String arg=args[i];
    if (arg.equals("--input") || arg.equals("-i")) {
      wikipedia=new File(args[i + 1]);
      i++;
    }
 else     if (arg.equals("--output") || arg.equals("-o")) {
      outputDir=new File(args[i + 1]);
      i++;
    }
 else     if (arg.equals("--discardImageOnlyDocs") || arg.equals("-d")) {
      keepImageOnlyDocs=false;
    }
  }
  DocMaker docMaker=new DocMaker();
  Properties properties=new Properties();
  properties.setProperty("content.source","org.apache.lucene.benchmark.byTask.feeds.EnwikiContentSource");
  properties.setProperty("docs.file",wikipedia.getAbsolutePath());
  properties.setProperty("content.source.forever","false");
  properties.setProperty("keep.image.only.docs",String.valueOf(keepImageOnlyDocs));
  docMaker.setConfig(new Config(properties));
  docMaker.resetInputs();
  if (wikipedia != null && wikipedia.exists()) {
    System.out.println("Extracting Wikipedia to: " + outputDir + " using EnwikiContentSource");
    outputDir.mkdirs();
    ExtractWikipedia extractor=new ExtractWikipedia(docMaker,outputDir);
    extractor.extract();
  }
 else {
    printUsage();
  }
}
