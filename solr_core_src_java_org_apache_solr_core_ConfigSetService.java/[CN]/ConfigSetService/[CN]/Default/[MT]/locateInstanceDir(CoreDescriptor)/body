{
  String configSet=cd.getConfigSet();
  if (configSet == null)   return cd.getInstanceDir();
  File configSetDirectory=new File(configSetBase,configSet);
  if (!configSetDirectory.exists() || !configSetDirectory.isDirectory())   throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Could not load configuration from directory " + configSetDirectory.getAbsolutePath());
  return configSetDirectory.getAbsolutePath();
}
