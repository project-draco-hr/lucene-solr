{
  if (zkController != null && zkController.getCoreContainer().isShutDown())   return;
  org.apache.zookeeper.data.Stat stat=new org.apache.zookeeper.data.Stat();
  String path=OverseerElectionContext.OVERSEER_ELECT + "/leader";
  byte[] data;
  try {
    data=zkClient.getData(path,null,stat,true);
  }
 catch (  Exception e) {
    log.error("could not read the data",e);
    return;
  }
  try {
    Map m=(Map)Utils.fromJSON(data);
    String id=(String)m.get("id");
    if (overseerCollectionConfigSetProcessor.getId().equals(id)) {
      try {
        log.warn("I'm exiting, but I'm still the leader");
        zkClient.delete(path,stat.getVersion(),true);
      }
 catch (      KeeperException.BadVersionException e) {
      }
catch (      Exception e) {
        log.error("Could not delete my leader node ",e);
      }
    }
 else {
      log.debug("somebody else has already taken up the overseer position");
    }
  }
  finally {
    try {
      if (zkController != null && !zkController.getCoreContainer().isShutDown()) {
        zkController.rejoinOverseerElection(null,false);
      }
    }
 catch (    Exception e) {
      log.warn("Unable to rejoinElection ",e);
    }
  }
}
