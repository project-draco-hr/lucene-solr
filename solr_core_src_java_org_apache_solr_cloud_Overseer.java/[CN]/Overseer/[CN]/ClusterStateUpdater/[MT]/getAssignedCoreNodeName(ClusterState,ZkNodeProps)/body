{
  Collection<Slice> slices=state.getSlices(message.getStr(ZkStateReader.COLLECTION_PROP));
  if (slices != null) {
    for (    Slice slice : slices) {
      for (      Replica replica : slice.getReplicas()) {
        String baseUrl=replica.getStr(ZkStateReader.BASE_URL_PROP);
        String core=replica.getStr(ZkStateReader.CORE_NAME_PROP);
        String msgBaseUrl=message.getStr(ZkStateReader.BASE_URL_PROP);
        String msgCore=message.getStr(ZkStateReader.CORE_NAME_PROP);
        if (baseUrl.equals(msgBaseUrl) && core.equals(msgCore)) {
          return replica.getName();
        }
      }
    }
  }
  return null;
}
