{
  final String collection=message.getStr("name");
  if (!checkKeyExistence(message,"name"))   return clusterState;
  DocCollection coll=clusterState.getCollectionOrNull(collection);
  if (coll != null) {
    isClusterStateModified=true;
    if (coll.getStateFormat() > 1) {
      try {
        log.info("Deleting state for collection : {}",collection);
        zkClient.delete(ZkStateReader.getCollectionPath(collection),-1,true);
      }
 catch (      Exception e) {
        throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to remove collection state :" + collection);
      }
      return clusterState;
    }
 else {
      return clusterState.copyWith(singletonMap(collection,(DocCollection)null));
    }
  }
  return clusterState;
}
