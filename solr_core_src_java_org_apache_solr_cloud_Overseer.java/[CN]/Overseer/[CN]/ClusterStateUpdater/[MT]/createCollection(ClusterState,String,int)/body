{
  Map<String,Map<String,Slice>> newStates=new LinkedHashMap<String,Map<String,Slice>>();
  Map<String,Slice> newSlices=new LinkedHashMap<String,Slice>();
  newStates.putAll(state.getCollectionStates());
  for (int i=0; i < numShards; i++) {
    final String sliceName="shard" + (i + 1);
    newSlices.put(sliceName,new Slice(sliceName,Collections.EMPTY_MAP));
  }
  newStates.put(collectionName,newSlices);
  ClusterState newClusterState=new ClusterState(state.getLiveNodes(),newStates);
  return newClusterState;
}
