{
  zkCmdExecutor.ensureExists(ZkStateReader.COLLECTIONS_ZKNODE,zkClient);
  List<String> collections=zkClient.getChildren(ZkStateReader.COLLECTIONS_ZKNODE,new Watcher(){
    @Override public void process(    WatchedEvent event){
      try {
        List<String> collections=zkClient.getChildren(ZkStateReader.COLLECTIONS_ZKNODE,this,true);
        collectionsChanged(collections);
      }
 catch (      KeeperException e) {
        if (e.code() == Code.CONNECTIONLOSS || e.code() == Code.SESSIONEXPIRED) {
          log.warn("ZooKeeper watch triggered, but Solr cannot talk to ZK");
          return;
        }
      }
catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
        log.warn("",e);
      }
    }
  }
,true);
  collectionsChanged(collections);
}
