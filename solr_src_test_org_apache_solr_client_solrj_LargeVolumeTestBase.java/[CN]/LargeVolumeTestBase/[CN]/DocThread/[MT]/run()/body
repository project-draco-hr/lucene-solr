{
  try {
    UpdateResponse resp=null;
    List<SolrInputDocument> docs=new ArrayList<SolrInputDocument>();
    for (int i=0; i < numdocs; i++) {
      if (i > 0 && i % 200 == 0) {
        resp=tserver.add(docs);
        assertEquals(0,resp.getStatus());
        docs=new ArrayList<SolrInputDocument>();
      }
      if (i > 0 && i % 5000 == 0) {
        log.info(getName() + " - Committing " + i);
        resp=tserver.commit();
        assertEquals(0,resp.getStatus());
      }
      SolrInputDocument doc=new SolrInputDocument();
      doc.addField("id",name + i);
      doc.addField("cat","foocat");
      docs.add(doc);
    }
    resp=tserver.add(docs);
    assertEquals(0,resp.getStatus());
    resp=tserver.commit();
    assertEquals(0,resp.getStatus());
    resp=tserver.optimize();
    assertEquals(0,resp.getStatus());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(getName() + "---" + e.getMessage());
  }
}
