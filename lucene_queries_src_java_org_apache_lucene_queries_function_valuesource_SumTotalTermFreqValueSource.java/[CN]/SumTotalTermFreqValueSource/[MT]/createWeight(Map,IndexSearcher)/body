{
  long sumTotalTermFreq=0;
  for (  AtomicReaderContext readerContext : searcher.getTopReaderContext().leaves()) {
    Fields fields=readerContext.reader().fields();
    if (fields == null)     continue;
    Terms terms=fields.terms(indexedField);
    if (terms == null)     continue;
    sumTotalTermFreq+=terms.getSumTotalTermFreq();
  }
  final long ttf=Math.max(-1,sumTotalTermFreq);
  context.put(this,new LongDocValues(this){
    @Override public long longVal(    int doc){
      return ttf;
    }
  }
);
}
