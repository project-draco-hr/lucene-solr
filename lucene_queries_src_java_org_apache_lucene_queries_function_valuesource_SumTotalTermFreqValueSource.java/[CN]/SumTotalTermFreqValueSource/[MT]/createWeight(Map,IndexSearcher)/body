{
  long sumTotalTermFreq=0;
  for (  LeafReaderContext readerContext : searcher.getTopReaderContext().leaves()) {
    Fields fields=readerContext.reader().fields();
    if (fields == null)     continue;
    Terms terms=fields.terms(indexedField);
    if (terms == null)     continue;
    long v=terms.getSumTotalTermFreq();
    if (v == -1) {
      sumTotalTermFreq=-1;
      break;
    }
 else {
      sumTotalTermFreq+=v;
    }
  }
  final long ttf=sumTotalTermFreq;
  context.put(this,new LongDocValues(this){
    @Override public long longVal(    int doc){
      return ttf;
    }
  }
);
}
