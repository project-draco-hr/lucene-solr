{
  parseCommonParams(arg);
  if (arg instanceof String) {
    facet.field=(String)arg;
    parseSort(null);
  }
 else   if (arg instanceof Map) {
    Map<String,Object> m=(Map<String,Object>)arg;
    facet.field=getField(m);
    facet.offset=getLong(m,"offset",facet.offset);
    facet.limit=getLong(m,"limit",facet.limit);
    if (facet.limit == 0)     facet.offset=0;
    facet.mincount=getLong(m,"mincount",facet.mincount);
    facet.missing=getBoolean(m,"missing",facet.missing);
    facet.numBuckets=getBoolean(m,"numBuckets",facet.numBuckets);
    facet.prefix=getString(m,"prefix",facet.prefix);
    facet.allBuckets=getBoolean(m,"allBuckets",facet.allBuckets);
    facet.method=FacetField.FacetMethod.fromString(getString(m,"method",null));
    facet.cacheDf=(int)getLong(m,"cacheDf",facet.cacheDf);
    Object o=m.get("facet");
    parseSubs(o);
    parseSort(m.get("sort"));
  }
  return facet;
}
