{
  final DateFormats formats=FORMATS.get();
  formats.calInstance.setTimeInMillis(round(time,resolution));
  final Date date=formats.calInstance.getTime();
switch (resolution) {
case YEAR:
    return formats.YEAR_FORMAT.format(date);
case MONTH:
  return formats.MONTH_FORMAT.format(date);
case DAY:
return formats.DAY_FORMAT.format(date);
case HOUR:
return formats.HOUR_FORMAT.format(date);
case MINUTE:
return formats.MINUTE_FORMAT.format(date);
case SECOND:
return formats.SECOND_FORMAT.format(date);
case MILLISECOND:
return formats.MILLISECOND_FORMAT.format(date);
}
throw new IllegalArgumentException("unknown resolution " + resolution);
}
