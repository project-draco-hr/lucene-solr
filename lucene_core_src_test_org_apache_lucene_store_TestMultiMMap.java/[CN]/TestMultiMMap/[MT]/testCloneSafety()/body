{
  MMapDirectory mmapDir=new MMapDirectory(_TestUtil.getTempDir("testCloneSafety"));
  IndexOutput io=mmapDir.createOutput("bytes",newIOContext(random()));
  io.writeVInt(5);
  io.close();
  IndexInput one=mmapDir.openInput("bytes",IOContext.DEFAULT);
  IndexInput two=(IndexInput)one.clone();
  IndexInput three=(IndexInput)two.clone();
  one.close();
  try {
    one.readVInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    two.readVInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    three.readVInt();
    fail("Must throw AlreadyClosedExveption");
  }
 catch (  AlreadyClosedException ignore) {
  }
}
