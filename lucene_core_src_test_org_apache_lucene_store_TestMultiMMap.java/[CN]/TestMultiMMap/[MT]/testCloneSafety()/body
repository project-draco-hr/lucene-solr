{
  MMapDirectory mmapDir=new MMapDirectory(_TestUtil.getTempDir("testCloneSafety"));
  IndexOutput io=mmapDir.createOutput("bytes",newIOContext(random()));
  io.writeVInt(5);
  io.close();
  IndexInput one=mmapDir.openInput("bytes",IOContext.DEFAULT);
  IndexInput two=one.clone();
  IndexInput three=two.clone();
  one.close();
  try {
    one.readVInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    two.readVInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    three.readVInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  two.close();
  three.close();
  one.close();
  mmapDir.close();
}
