{
  MMapDirectory mmapDir=new MMapDirectory(createTempDir("testCloneSliceSafety"));
  IndexOutput io=mmapDir.createOutput("bytes",newIOContext(random()));
  io.writeInt(1);
  io.writeInt(2);
  io.close();
  IndexInput slicer=mmapDir.openInput("bytes",newIOContext(random()));
  IndexInput one=slicer.slice("first int",0,4);
  IndexInput two=slicer.slice("second int",4,4);
  IndexInput three=one.clone();
  IndexInput four=two.clone();
  slicer.close();
  try {
    one.readInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    two.readInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    three.readInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  try {
    four.readInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  one.close();
  two.close();
  three.close();
  four.close();
  slicer.close();
  mmapDir.close();
}
