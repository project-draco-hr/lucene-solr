{
  MMapDirectory mmapDir=new MMapDirectory(createTempDir("testCloneSliceClose"));
  IndexOutput io=mmapDir.createOutput("bytes",newIOContext(random()));
  io.writeInt(1);
  io.writeInt(2);
  io.close();
  IndexInput slicer=mmapDir.openInput("bytes",newIOContext(random()));
  IndexInput one=slicer.slice("first int",0,4);
  IndexInput two=slicer.slice("second int",4,4);
  one.close();
  try {
    one.readInt();
    fail("Must throw AlreadyClosedException");
  }
 catch (  AlreadyClosedException ignore) {
  }
  assertEquals(2,two.readInt());
  one=slicer.slice("first int",0,4);
  assertEquals(1,one.readInt());
  one.close();
  two.close();
  slicer.close();
  mmapDir.close();
}
