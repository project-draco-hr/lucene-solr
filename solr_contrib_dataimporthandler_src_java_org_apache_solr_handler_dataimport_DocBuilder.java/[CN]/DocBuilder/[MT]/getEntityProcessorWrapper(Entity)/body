{
  EntityProcessor entityProcessor=null;
  if (entity.getProcessorName() == null) {
    entityProcessor=new SqlEntityProcessor();
  }
 else {
    try {
      entityProcessor=(EntityProcessor)loadClass(entity.getProcessorName(),dataImporter.getCore()).newInstance();
    }
 catch (    Exception e) {
      wrapAndThrow(SEVERE,e,"Unable to load EntityProcessor implementation for entity:" + entity.getName());
    }
  }
  EntityProcessorWrapper epw=new EntityProcessorWrapper(entityProcessor,entity,this);
  for (  Entity e1 : entity.getChildren()) {
    epw.getChildren().add(getEntityProcessorWrapper(e1));
  }
  return epw;
}
