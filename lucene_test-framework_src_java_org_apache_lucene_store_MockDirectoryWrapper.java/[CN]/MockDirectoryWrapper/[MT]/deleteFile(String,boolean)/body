{
  maybeYield();
  maybeThrowDeterministicException();
  if (crashed && !forced)   throw new IOException("cannot delete after crash");
  if (unSyncedFiles.contains(name))   unSyncedFiles.remove(name);
  if (!forced && noDeleteOpenFile) {
    if (openFiles.containsKey(name)) {
      openFilesDeleted.add(name);
      throw fillOpenTrace(new IOException("MockDirectoryWrapper: file \"" + name + "\" is still open: cannot delete"),name,true);
    }
 else {
      openFilesDeleted.remove(name);
    }
  }
  delegate.deleteFile(name);
}
