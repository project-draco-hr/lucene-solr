{
  maybeYield();
  maybeThrowDeterministicException();
  if (crashed) {
    throw new IOException("cannot sync after crash");
  }
  if (LuceneTestCase.rarely(randomState) || mustSync()) {
    for (    String name : names) {
      maybeThrowIOException(name);
      in.sync(Collections.singleton(name));
      unSyncedFiles.remove(name);
    }
  }
 else {
    unSyncedFiles.removeAll(names);
  }
}
