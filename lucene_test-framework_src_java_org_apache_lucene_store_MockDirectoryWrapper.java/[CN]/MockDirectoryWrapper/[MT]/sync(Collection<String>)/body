{
  maybeYield();
  maybeThrowDeterministicException();
  if (crashed) {
    throw new IOException("cannot sync after crash");
  }
  unSyncedFiles.removeAll(names);
  if (true || LuceneTestCase.rarely(randomState) || delegate instanceof NRTCachingDirectory) {
    delegate.sync(names);
  }
}
