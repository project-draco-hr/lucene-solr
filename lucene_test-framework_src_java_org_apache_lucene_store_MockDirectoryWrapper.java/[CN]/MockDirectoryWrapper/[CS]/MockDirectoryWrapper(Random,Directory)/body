{
  super(delegate);
  this.randomState=new Random(random.nextInt());
  this.lockFactory=new MockLockFactoryWrapper(this,delegate.getLockFactory());
  double maxMBPerSec=10 + 5 * (randomState.nextDouble() - 0.5);
  if (LuceneTestCase.VERBOSE) {
    System.out.println("MockDirectoryWrapper: will rate limit output IO to " + maxMBPerSec + " MB/sec");
  }
  rateLimiter=new RateLimiter(maxMBPerSec);
  init();
}
