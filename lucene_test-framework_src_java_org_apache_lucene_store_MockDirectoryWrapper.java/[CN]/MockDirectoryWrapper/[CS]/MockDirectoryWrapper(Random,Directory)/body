{
  this.delegate=delegate;
  this.randomState=new Random(random.nextInt());
  this.throttledOutput=new ThrottledIndexOutput(ThrottledIndexOutput.mBitsToBytes(40 + randomState.nextInt(10)),5 + randomState.nextInt(5),null);
  try {
    setLockFactory(new MockLockFactoryWrapper(this,delegate.getLockFactory()));
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  init();
}
