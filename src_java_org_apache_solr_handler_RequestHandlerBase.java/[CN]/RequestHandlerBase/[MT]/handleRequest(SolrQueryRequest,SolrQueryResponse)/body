{
  numRequests++;
  try {
    U.setDefaults(req,defaults,appends,invariants);
    handleRequestBody(req,rsp);
  }
 catch (  Exception e) {
    SolrException.log(SolrCore.log,e);
    if (e instanceof ParseException) {
      e=new SolrException(SolrException.ErrorCode.BAD_REQUEST,e);
    }
    rsp.setException(e);
    numErrors++;
  }
  totalTime+=rsp.getEndTime() - req.getStartTime();
}
