{
  Query sub=query;
  if (sub instanceof QueryWrapperFilter) {
    sub=((QueryWrapperFilter)sub).getQuery();
  }
  Query rewritten=sub.rewrite(reader);
  if (rewritten != query) {
    rewritten=new ConstantScoreQuery(rewritten);
    rewritten.setBoost(this.getBoost());
    return rewritten;
  }
  return this;
}
