{
  if (idField == null)   throw new SolrException(400,"Operation requires schema to have a unique key field");
  String id=idFieldType.storedToIndexed(doc.getField(idField.getName()));
  if (id == null)   throw new SolrException(400,"Document is missing uniqueKey field " + idField.getName());
  return id;
}
