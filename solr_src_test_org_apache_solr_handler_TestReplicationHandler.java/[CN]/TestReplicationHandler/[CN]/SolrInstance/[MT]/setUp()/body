{
  super.setUp();
  System.setProperty("solr.test.sys.prop1","propone");
  System.setProperty("solr.test.sys.prop2","proptwo");
  String home=System.getProperty("java.io.tmpdir") + File.separator + getClass().getName()+ "-"+ System.currentTimeMillis();
  if (null == masterPort) {
    homeDir=new File(home + "master");
    dataDir=new File(home + "master","data");
    confDir=new File(home + "master","conf");
  }
 else {
    homeDir=new File(home + "slave");
    dataDir=new File(home + "slave","data");
    confDir=new File(home + "slave","conf");
  }
  homeDir.mkdirs();
  dataDir.mkdirs();
  confDir.mkdirs();
  File f=new File(confDir,"solrconfig.xml");
  copyFile(new File(getSolrConfigFile()),f,masterPort);
  f=new File(confDir,"schema.xml");
  copyFile(new File(getSchemaFile()),f);
}
