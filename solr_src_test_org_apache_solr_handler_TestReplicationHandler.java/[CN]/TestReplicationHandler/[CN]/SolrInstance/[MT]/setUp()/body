{
  System.setProperty("solr.test.sys.prop1","propone");
  System.setProperty("solr.test.sys.prop2","proptwo");
  File home=new File(TEMP_DIR,getClass().getName() + "-" + System.currentTimeMillis());
  if (null == masterPort) {
    homeDir=new File(home,"master");
    dataDir=new File(homeDir,"data");
    confDir=new File(homeDir,"conf");
  }
 else {
    homeDir=new File(home,"slave");
    dataDir=new File(homeDir,"data");
    confDir=new File(homeDir,"conf");
  }
  homeDir.mkdirs();
  dataDir.mkdirs();
  confDir.mkdirs();
  File f=new File(confDir,"solrconfig.xml");
  copyFile(new File(getSolrConfigFile()),f,masterPort);
  f=new File(confDir,"schema.xml");
  copyFile(new File(getSchemaFile()),f);
}
