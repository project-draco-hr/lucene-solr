{
{
    NamedList<Object> details=getDetails(masterClient);
    assertEquals("master isMaster?","true",details.get("isMaster"));
    assertEquals("master isSlave?","false",details.get("isSlave"));
    assertNotNull("master has master section",details.get("master"));
  }
{
    NamedList<Object> details=getDetails(slaveClient);
    assertEquals("slave isMaster?","false",details.get("isMaster"));
    assertEquals("slave isSlave?","true",details.get("isSlave"));
    assertNotNull("slave has slave section",details.get("slave"));
  }
  SolrInstance repeater=null;
  JettySolrRunner repeaterJetty=null;
  SolrServer repeaterClient=null;
  try {
    repeater=new SolrInstance("repeater",masterJetty.getLocalPort());
    repeater.setUp();
    repeaterJetty=createJetty(repeater);
    repeaterClient=createNewSolrServer(repeaterJetty.getLocalPort());
    NamedList<Object> details=getDetails(repeaterClient);
    assertEquals("repeater isMaster?","true",details.get("isMaster"));
    assertEquals("repeater isSlave?","true",details.get("isSlave"));
    assertNotNull("repeater has master section",details.get("master"));
    assertNotNull("repeater has slave section",details.get("slave"));
  }
  finally {
    try {
      if (repeaterJetty != null)       repeaterJetty.stop();
    }
 catch (    Exception e) {
    }
    try {
      if (repeater != null)       repeater.tearDown();
    }
 catch (    Exception e) {
    }
  }
}
