{
  BooleanQuery.Builder query=new BooleanQuery.Builder();
  query.setDisableCoord(random().nextBoolean());
  query.add(new TermQuery(new Term(field,"w3")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"xx")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"w2")),BooleanClause.Occur.MUST);
  query.add(new TermQuery(new Term(field,"zz")),BooleanClause.Occur.SHOULD);
  int[] expDocNrs={2,3};
  Similarity oldSimilarity=searcher.getSimilarity(true);
  Similarity newSimilarity=new ClassicSimilarity(){
    @Override public float coord(    int overlap,    int maxOverlap){
      return overlap / ((float)maxOverlap - 1);
    }
  }
;
  try {
    searcher.setSimilarity(newSimilarity);
    singleSegmentSearcher.setSimilarity(newSimilarity);
    queriesTest(query.build(),expDocNrs);
  }
  finally {
    searcher.setSimilarity(oldSimilarity);
    singleSegmentSearcher.setSimilarity(oldSimilarity);
  }
}
