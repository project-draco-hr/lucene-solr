{
  Map<String,Method> functions=new HashMap<>();
  functions.put("foo",StaticThrowingException.class.getMethod("method"));
  String source="3 * foo() / 5";
  Expression expr=JavascriptCompiler.compile(source,functions,getClass().getClassLoader());
  try {
    expr.evaluate(0,null);
    fail();
  }
 catch (  ArithmeticException e) {
    assertEquals(MESSAGE,e.getMessage());
    StringWriter sw=new StringWriter();
    PrintWriter pw=new PrintWriter(sw);
    e.printStackTrace(pw);
    pw.flush();
    assertTrue(sw.toString().contains("JavascriptCompiler$CompiledExpression.evaluate(" + source + ")"));
  }
}
