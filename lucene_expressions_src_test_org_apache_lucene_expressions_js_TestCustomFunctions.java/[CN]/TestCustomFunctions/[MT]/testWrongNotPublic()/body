{
  Map<String,Method> functions=new HashMap<>();
  functions.put("foo",getClass().getDeclaredMethod("nonPublicMethod"));
  try {
    JavascriptCompiler.compile("foo()",functions,getClass().getClassLoader());
    fail();
  }
 catch (  IllegalArgumentException e) {
    assertTrue(e.getMessage().contains("not public"));
  }
}
