{
  RuleBasedCollator baseCollator=(RuleBasedCollator)Collator.getInstance(new Locale("de","DE"));
  String DIN5007_2_tailorings="& ae , a\u0308 & AE , A\u0308" + "& oe , o\u0308 & OE , O\u0308" + "& ue , u\u0308 & UE , u\u0308";
  RuleBasedCollator tailoredCollator=new RuleBasedCollator(baseCollator.getRules() + DIN5007_2_tailorings);
  String tailoredRules=tailoredCollator.getRules();
  String[] germanUmlaut={"T??ne"};
  String[] germanOE={"Toene"};
  CollationKeyFilterFactory factory=new CollationKeyFilterFactory();
  Map<String,String> args=new HashMap<String,String>();
  args.put("custom","rules.txt");
  args.put("strength","primary");
  factory.init(args);
  factory.inform(new StringMockSolrResourceLoader(tailoredRules));
  TokenStream tsUmlaut=factory.create(new IterTokenStream(germanUmlaut));
  TokenStream tsOE=factory.create(new IterTokenStream(germanOE));
  assertTokEqual(BaseTokenTestCase.getTokens(tsUmlaut),BaseTokenTestCase.getTokens(tsOE));
}
