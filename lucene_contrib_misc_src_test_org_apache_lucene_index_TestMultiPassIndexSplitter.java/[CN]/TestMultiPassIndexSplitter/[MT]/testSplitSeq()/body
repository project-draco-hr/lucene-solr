{
  MultiPassIndexSplitter splitter=new MultiPassIndexSplitter();
  Directory[] dirs=new Directory[]{newDirectory(),newDirectory(),newDirectory()};
  splitter.split(TEST_VERSION_CURRENT,input,dirs,true);
  IndexReader ir;
  ir=IndexReader.open(dirs[0],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  Document doc=ir.document(0);
  assertEquals("0",doc.get("id"));
  int start=ir.numDocs();
  ir.close();
  ir=IndexReader.open(dirs[1],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals(start + "",doc.get("id"));
  start+=ir.numDocs();
  ir.close();
  ir=IndexReader.open(dirs[2],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals(start + "",doc.get("id"));
  TermsEnum te=MultiFields.getTerms(ir,"id").iterator(null);
  Term t=new Term("id",(NUM_DOCS - 1) + "");
  assertEquals(TermsEnum.SeekStatus.NOT_FOUND,te.seekCeil(new BytesRef(t.text())));
  assertNotSame(t.text(),te.term().utf8ToString());
  ir.close();
  for (  Directory d : dirs)   d.close();
}
