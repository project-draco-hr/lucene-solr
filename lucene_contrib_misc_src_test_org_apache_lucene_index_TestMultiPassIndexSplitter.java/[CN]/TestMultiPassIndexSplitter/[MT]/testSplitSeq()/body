{
  MultiPassIndexSplitter splitter=new MultiPassIndexSplitter();
  Directory[] dirs=new Directory[]{new RAMDirectory(),new RAMDirectory(),new RAMDirectory()};
  splitter.split(input,dirs,true);
  IndexReader ir;
  ir=IndexReader.open(dirs[0],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  Document doc=ir.document(0);
  assertEquals("0",doc.get("id"));
  int start=ir.numDocs();
  ir.close();
  ir=IndexReader.open(dirs[1],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals(start + "",doc.get("id"));
  start+=ir.numDocs();
  ir.close();
  ir=IndexReader.open(dirs[2],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals(start + "",doc.get("id"));
  Term t;
  TermEnum te;
  t=new Term("id",(NUM_DOCS - 1) + "");
  te=ir.terms(t);
  assertNotSame(t,te.term());
}
