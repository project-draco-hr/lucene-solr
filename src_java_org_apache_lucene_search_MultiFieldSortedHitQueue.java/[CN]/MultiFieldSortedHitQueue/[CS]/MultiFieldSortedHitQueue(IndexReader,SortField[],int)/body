{
  final int n=fields.length;
  comparators=new ScoreDocComparator[n];
  this.fields=new SortField[n];
  for (int i=0; i < n; ++i) {
    String fieldname=fields[i].getField();
    comparators[i]=FieldSortedHitQueue.getCachedComparator(reader,fieldname,fields[i].getType());
    this.fields[i]=new SortField(fieldname,comparators[i].sortType(),fields[i].getReverse());
  }
  initialize(size);
}
