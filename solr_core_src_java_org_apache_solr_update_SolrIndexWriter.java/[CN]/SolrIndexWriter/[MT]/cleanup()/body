{
  boolean doClose=false;
synchronized (CLOSE_LOCK) {
    if (!isClosed) {
      doClose=true;
      isClosed=true;
    }
  }
  if (doClose) {
    if (infoStream != null) {
      IOUtils.closeQuietly(infoStream);
    }
    numCloses.incrementAndGet();
    if (directoryFactory != null) {
      directoryFactory.release(directory);
    }
  }
}
