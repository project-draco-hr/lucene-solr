{
  reader=r;
  this.closeReader=closeReader;
  List<IndexReader> subReadersList=new ArrayList<IndexReader>();
  gatherSubReaders(subReadersList,reader);
  subReaders=subReadersList.toArray(new IndexReader[subReadersList.size()]);
  docStarts=new int[subReaders.length];
  int maxDoc=0;
  for (int i=0; i < subReaders.length; i++) {
    docStarts[i]=maxDoc;
    maxDoc+=subReaders[i].maxDoc();
  }
}
