{
  Template template;
  String templateName=request.getParams().get(TEMPLATE);
  String qt=request.getParams().get(CommonParams.QT);
  String path=(String)request.getContext().get("path");
  if (templateName == null && path != null) {
    templateName=path;
  }
  if (templateName == null && qt != null) {
    templateName=qt;
  }
  if (templateName == null)   templateName="index";
  try {
    template=engine.getTemplate(templateName + TEMPLATE_EXTENSION);
  }
 catch (  Exception e) {
    throw new IOException(e.getMessage());
  }
  return template;
}
