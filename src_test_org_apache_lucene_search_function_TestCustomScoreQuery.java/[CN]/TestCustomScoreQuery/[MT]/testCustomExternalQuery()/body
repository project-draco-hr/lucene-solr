{
  QueryParser qp=new QueryParser(Version.LUCENE_CURRENT,TEXT_FIELD,anlzr);
  String qtxt="first aid text";
  Query q1=qp.parse(qtxt);
  final Query q=new CustomExternalQuery(q1);
  log(q);
  IndexSearcher s=new IndexSearcher(dir);
  TopDocs hits=s.search(q,1000);
  assertEquals(N_DOCS,hits.totalHits);
  for (int i=0; i < N_DOCS; i++) {
    final int doc=hits.scoreDocs[i].doc;
    final float score=hits.scoreDocs[i].score;
    assertEquals("doc=" + doc,(float)1 + (4 * doc) % N_DOCS,score,0.0001);
  }
  s.close();
}
