{
  return new CustomScoreProvider(reader){
    @Override public float customScore(    int doc,    float subQueryScore,    float valSrcScores[]){
      if (valSrcScores.length == 0) {
        return subQueryScore;
      }
      if (valSrcScores.length == 1) {
        return subQueryScore + valSrcScores[0];
      }
      return (subQueryScore + valSrcScores[0]) * valSrcScores[1];
    }
    @Override public Explanation customExplain(    int doc,    Explanation subQueryExpl,    Explanation valSrcExpls[]){
      if (valSrcExpls.length == 0) {
        return subQueryExpl;
      }
      Explanation exp=new Explanation(valSrcExpls[0].getValue() + subQueryExpl.getValue(),"sum of:");
      exp.addDetail(subQueryExpl);
      exp.addDetail(valSrcExpls[0]);
      if (valSrcExpls.length == 1) {
        exp.setDescription("CustomMulAdd, sum of:");
        return exp;
      }
      Explanation exp2=new Explanation(valSrcExpls[1].getValue() * exp.getValue(),"custom score: product of:");
      exp2.addDetail(valSrcExpls[1]);
      exp2.addDetail(exp);
      return exp2;
    }
  }
;
}
