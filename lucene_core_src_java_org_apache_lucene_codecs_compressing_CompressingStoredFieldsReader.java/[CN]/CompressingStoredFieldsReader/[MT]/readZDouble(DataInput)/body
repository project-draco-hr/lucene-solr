{
  int b=in.readByte() & 0xFF;
  if (b == 0xFF) {
    return Double.longBitsToDouble(in.readLong());
  }
 else   if (b == 0xFE) {
    return Float.intBitsToFloat(in.readInt());
  }
 else   if ((b & 0x80) != 0) {
    return (b & 0x7f) - 1;
  }
 else {
    long bits=((long)b) << 56 | ((in.readInt() & 0xFFFFFFFFL) << 24) | ((in.readShort() & 0xFFFFL) << 8) | (in.readByte() & 0xFFL);
    return Double.longBitsToDouble(bits);
  }
}
