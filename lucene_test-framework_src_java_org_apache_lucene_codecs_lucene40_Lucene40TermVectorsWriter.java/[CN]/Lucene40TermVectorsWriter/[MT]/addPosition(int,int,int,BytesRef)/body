{
  if (positions && (offsets || payloads)) {
    writePosition(position - lastPosition,payload);
    lastPosition=position;
    if (offsets) {
      offsetStartBuffer[bufferedIndex]=startOffset;
      offsetEndBuffer[bufferedIndex]=endOffset;
    }
    bufferedIndex++;
  }
 else   if (positions) {
    writePosition(position - lastPosition,payload);
    lastPosition=position;
  }
 else   if (offsets) {
    tvf.writeVInt(startOffset - lastOffset);
    tvf.writeVInt(endOffset - startOffset);
    lastOffset=endOffset;
  }
}
