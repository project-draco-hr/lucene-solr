{
  if (iterators.size() < 2) {
    throw new IllegalArgumentException("Cannot make a ConjunctionDISI of less than 2 iterators");
  }
  final List<DocIdSetIterator> allIterators=new ArrayList<>();
  final List<TwoPhaseIterator> twoPhaseIterators=new ArrayList<>();
  for (  DocIdSetIterator iterator : iterators) {
    addIterator(iterator,allIterators,twoPhaseIterators);
  }
  DocIdSetIterator iterator=new ConjunctionDISI(allIterators);
  if (twoPhaseIterators.isEmpty() == false) {
    iterator=TwoPhaseIterator.asDocIdSetIterator(new ConjunctionTwoPhaseIterator(iterator,twoPhaseIterators));
  }
  return iterator;
}
