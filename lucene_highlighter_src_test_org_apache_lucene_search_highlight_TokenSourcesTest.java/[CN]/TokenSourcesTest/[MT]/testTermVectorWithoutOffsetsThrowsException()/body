{
  final Directory directory=newDirectory();
  final IndexWriter indexWriter=new IndexWriter(directory,newIndexWriterConfig(null));
  try {
    final Document document=new Document();
    FieldType customType=new FieldType(TextField.TYPE_NOT_STORED);
    customType.setStoreTermVectors(true);
    customType.setStoreTermVectorOffsets(false);
    customType.setStoreTermVectorPositions(true);
    document.add(new Field(FIELD,new OverlappingTokenStream(),customType));
    indexWriter.addDocument(document);
  }
  finally {
    indexWriter.shutdown();
  }
  final IndexReader indexReader=DirectoryReader.open(directory);
  try {
    assertEquals(1,indexReader.numDocs());
    TokenSources.getTokenStream(indexReader.getTermVector(0,FIELD),false);
    fail("TokenSources.getTokenStream should throw IllegalArgumentException if term vector has no offsets");
  }
 catch (  IllegalArgumentException e) {
  }
 finally {
    indexReader.close();
    directory.close();
  }
}
