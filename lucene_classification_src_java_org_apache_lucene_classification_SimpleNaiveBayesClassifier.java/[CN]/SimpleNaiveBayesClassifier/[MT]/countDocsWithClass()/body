{
  int docCount=MultiFields.getTerms(this.atomicReader,this.classFieldName).getDocCount();
  if (docCount == -1) {
    TotalHitCountCollector totalHitCountCollector=new TotalHitCountCollector();
    Query q;
    if (query != null) {
      BooleanQuery bq=new BooleanQuery();
      WildcardQuery wq=new WildcardQuery(new Term(classFieldName,String.valueOf(WildcardQuery.WILDCARD_STRING)));
      bq.add(wq,BooleanClause.Occur.MUST);
      bq.add(query,BooleanClause.Occur.MUST);
      q=bq;
    }
 else {
      q=new WildcardQuery(new Term(classFieldName,String.valueOf(WildcardQuery.WILDCARD_STRING)));
    }
    indexSearcher.search(q,totalHitCountCollector);
    docCount=totalHitCountCollector.getTotalHits();
  }
  return docCount;
}
