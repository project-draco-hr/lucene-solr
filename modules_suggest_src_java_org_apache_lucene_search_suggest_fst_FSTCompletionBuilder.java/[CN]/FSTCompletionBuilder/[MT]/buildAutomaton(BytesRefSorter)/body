{
  final Outputs<Object> outputs=NoOutputs.getSingleton();
  final Object empty=outputs.getNoOutput();
  final Builder<Object> builder=new Builder<Object>(FST.INPUT_TYPE.BYTE1,0,0,true,true,shareMaxTailLength,outputs,null);
  BytesRef scratch=new BytesRef();
  final IntsRef scratchIntsRef=new IntsRef();
  int count=0;
  for (Iterator<BytesRef> i=sorter.iterator(); i.hasNext(); count++) {
    BytesRef entry=i.next();
    if (scratch.compareTo(entry) != 0) {
      builder.add(Util.toIntsRef(entry,scratchIntsRef),empty);
      scratch.copyBytes(entry);
    }
  }
  return count == 0 ? null : builder.finish();
}
