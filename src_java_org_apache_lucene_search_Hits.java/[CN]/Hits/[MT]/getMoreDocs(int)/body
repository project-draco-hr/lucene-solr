{
  if (hitDocs.size() > min) {
    min=hitDocs.size();
  }
  int n=min * 2;
  TopDocs topDocs=searcher.search(query,filter,n);
  length=topDocs.totalHits;
  ScoreDoc[] scoreDocs=topDocs.scoreDocs;
  float scoreNorm=1.0f;
  if (length > 0 && scoreDocs[0].score > 1.0f) {
    scoreNorm=1.0f / scoreDocs[0].score;
  }
  int end=scoreDocs.length < length ? scoreDocs.length : length;
  for (int i=hitDocs.size(); i < end; i++) {
    hitDocs.addElement(new HitDoc(scoreDocs[i].score * scoreNorm,scoreDocs[i].doc));
  }
}
