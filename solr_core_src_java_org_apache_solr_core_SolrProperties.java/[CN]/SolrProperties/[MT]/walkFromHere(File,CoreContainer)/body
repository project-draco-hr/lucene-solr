{
  log.info("Looking for cores in " + file.getAbsolutePath());
  for (  File childFile : file.listFiles()) {
    File propFile=new File(childFile,CORE_PROP_FILE);
    if (propFile.exists()) {
      log.info("Discovered properties file {}, adding to cores",propFile.getAbsolutePath());
      Properties propsOrig=new Properties();
      propsOrig.load(new FileInputStream(propFile));
      Properties props=new Properties();
      for (      String prop : propsOrig.stringPropertyNames()) {
        props.put(prop,PropertiesUtil.substituteProperty(propsOrig.getProperty(prop),null));
      }
      if (props.getProperty(CoreDescriptor.CORE_INSTDIR) == null) {
        props.setProperty(CoreDescriptor.CORE_INSTDIR,childFile.getPath());
      }
      if (props.getProperty(CoreDescriptor.CORE_NAME) == null) {
        props.setProperty(CoreDescriptor.CORE_NAME,childFile.getName());
      }
      CoreDescriptor desc=new CoreDescriptor(container,props);
      CoreDescriptorPlus plus=new CoreDescriptorPlus(propFile.getAbsolutePath(),desc,propsOrig);
      coreDescriptorPlusMap.put(desc.getName(),plus);
      continue;
    }
    if (childFile.isDirectory()) {
      walkFromHere(childFile,container);
    }
  }
}
