{
  String testFile="aaa => aaaa1 aaaa2 aaaa3\n" + "bbb => bbbb1 bbbb2\n";
  SolrSynonymParser parser=new SolrSynonymParser(true,true,new MockAnalyzer(random));
  parser.add(new StringReader(testFile));
  final SynonymMap map=parser.build();
  Analyzer analyzer=new ReusableAnalyzerBase(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      Tokenizer tokenizer=new MockTokenizer(reader,MockTokenizer.WHITESPACE,true);
      return new TokenStreamComponents(tokenizer,new SynonymFilter(tokenizer,map,true));
    }
  }
;
  assertAnalyzesTo(analyzer,"xyzzy bbb pot of gold",new String[]{"xyzzy","bbbb1","pot","bbbb2","of","gold"});
  assertAnalyzesTo(analyzer,"xyzzy aaa pot of gold",new String[]{"xyzzy","aaaa1","pot","aaaa2","of","aaaa3","gold"});
}
