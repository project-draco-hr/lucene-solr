{
  SolrCore core=h.getCore();
  TermsComponent tc=(TermsComponent)core.getSearchComponent("termsComp");
  assertTrue("tc is null and it shouldn't be",tc != null);
  SolrRequestHandler handler;
  SolrQueryResponse rsp;
  NamedList values;
  NamedList terms;
  handler=core.getRequestHandler("/terms");
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.add(TermsParams.TERMS,"true");
  params.add(TermsParams.TERMS_FIELD,"lowerfilt");
  params.add(TermsParams.TERMS_LIMIT,String.valueOf(50));
  params.add(TermsParams.TERMS_LOWER,"a");
  params.add(TermsParams.TERMS_MINCOUNT,String.valueOf(2));
  params.add(TermsParams.TERMS_MAXCOUNT,String.valueOf(TermsComponent.UNLIMITED_MAX_COUNT));
  rsp=new SolrQueryResponse();
  rsp.add("responseHeader",new SimpleOrderedMap());
  handler.handleRequest(new LocalSolrQueryRequest(core,params),rsp);
  values=rsp.getValues();
  terms=(NamedList)((NamedList)values.get("terms")).get("lowerfilt");
  assertTrue("terms Size: " + terms.size() + " is not: "+ 1,terms.size() == 1);
  params=new ModifiableSolrParams();
  params.add(TermsParams.TERMS,"true");
  params.add(TermsParams.TERMS_FIELD,"standardfilt");
  params.add(TermsParams.TERMS_LIMIT,String.valueOf(50));
  params.add(TermsParams.TERMS_LOWER,"d");
  params.add(TermsParams.TERMS_MINCOUNT,String.valueOf(2));
  params.add(TermsParams.TERMS_MAXCOUNT,String.valueOf(3));
  rsp=new SolrQueryResponse();
  rsp.add("responseHeader",new SimpleOrderedMap());
  handler.handleRequest(new LocalSolrQueryRequest(core,params),rsp);
  values=rsp.getValues();
  terms=(NamedList)((NamedList)values.get("terms")).get("standardfilt");
  assertTrue("terms Size: " + terms.size() + " is not: "+ 3,terms.size() == 3);
  Integer d=(Integer)terms.get("d");
  assertTrue(d + " does not equal: " + 3,d == 3);
}
