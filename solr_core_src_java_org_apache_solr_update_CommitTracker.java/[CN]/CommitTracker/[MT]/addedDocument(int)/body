{
  docsSinceCommit++;
  lastAddedTime=System.currentTimeMillis();
  boolean triggered=false;
  if (docsUpperBound > 0 && (docsSinceCommit > docsUpperBound)) {
    _scheduleCommitWithin(DOC_COMMIT_DELAY_MS);
    triggered=true;
  }
  long ctime=(commitWithin > 0) ? commitWithin : timeUpperBound;
  if (ctime > 0) {
    _scheduleCommitWithin(ctime);
    triggered=true;
  }
  return triggered;
}
