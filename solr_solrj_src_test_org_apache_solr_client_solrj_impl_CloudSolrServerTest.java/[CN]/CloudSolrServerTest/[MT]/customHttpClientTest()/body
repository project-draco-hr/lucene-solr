{
  CloudSolrServer server=null;
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set(HttpClientUtil.PROP_SO_TIMEOUT,1000);
  HttpClient client=null;
  try {
    client=HttpClientUtil.createClient(params);
    server=new CloudSolrServer(zkServer.getZkAddress(),client);
    assertTrue(server.getLbServer().getHttpClient() == client);
  }
  finally {
    server.shutdown();
    client.getConnectionManager().shutdown();
  }
}
