{
  RegexpQuery smart=new RegexpQuery(new Term("field",regexp));
  DumbRegexpQuery dumb=new DumbRegexpQuery(new Term("field",regexp));
  if (!(smart.getTermsEnum(searcher.getIndexReader()) instanceof AutomatonTermsEnum))   return;
  TopDocs smartDocs=searcher.search(smart,25);
  TopDocs dumbDocs=searcher.search(dumb,25);
  assertEquals("for re:" + regexp,dumbDocs.totalHits,smartDocs.totalHits);
}
