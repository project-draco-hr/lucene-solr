{
  RegexpQuery smart=new RegexpQuery(new Term("field",regexp),RegExp.NONE);
  DumbRegexpQuery dumb=new DumbRegexpQuery(new Term("field",regexp),RegExp.NONE);
  Terms terms=MultiFields.getTerms(searcher.getIndexReader(),"field");
  if (!(smart.getTermsEnum(terms) instanceof AutomatonTermsEnum))   return;
  TopDocs smartDocs=searcher.search(smart,25);
  TopDocs dumbDocs=searcher.search(dumb,25);
  CheckHits.checkEqual(smart,smartDocs.scoreDocs,dumbDocs.scoreDocs);
}
