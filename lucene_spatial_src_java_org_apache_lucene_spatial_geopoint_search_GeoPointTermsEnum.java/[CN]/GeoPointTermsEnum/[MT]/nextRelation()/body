{
  double minLon=GeoPointField.decodeLongitude(currStart);
  double minLat=GeoPointField.decodeLatitude(currStart);
  double maxLon;
  double maxLat;
  boolean isWithin;
  do {
    maxLon=GeoPointField.decodeLongitude(currEnd);
    maxLat=GeoPointField.decodeLatitude(currEnd);
    isWithin=false;
    if (boundary(minLat,maxLat,minLon,maxLon) == true) {
      isWithin=within(minLat,maxLat,minLon,maxLon);
      final int m;
      if (isWithin == false || (m=shift % GeoPointField.PRECISION_STEP) == 0) {
        setNextRange(isWithin == false);
        advanceVariables();
        break;
      }
 else       if (shift < 54) {
        withinOnly=true;
        shift=(short)(shift - m);
        lastWithin=currEnd & ~((1L << shift) - 1);
        setNextRange(false);
        break;
      }
    }
    if (isWithin == true || (relationImpl.cellIntersectsMBR(minLat,maxLat,minLon,maxLon) == true && shift != maxShift)) {
      currEnd=currStart | (1L << --shift) - 1;
    }
 else {
      advanceVariables();
      minLon=GeoPointField.decodeLongitude(currStart);
      minLat=GeoPointField.decodeLatitude(currStart);
    }
  }
 while (shift < 63);
}
