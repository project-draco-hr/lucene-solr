{
  super(planetModel);
  this.testPointInSet=testPointInSet;
  this.testPoint=testPoint;
  this.testPointXZPlane=new Plane(0.0,1.0,0.0,-testPoint.y);
  this.testPointYZPlane=new Plane(1.0,0.0,0.0,-testPoint.x);
  this.testPointXYPlane=new Plane(0.0,0.0,1.0,-testPoint.z);
  this.testPointXZAbovePlane=new Plane(testPointXZPlane,true);
  this.testPointXZBelowPlane=new Plane(testPointXZPlane,false);
  this.testPointYZAbovePlane=new Plane(testPointYZPlane,true);
  this.testPointYZBelowPlane=new Plane(testPointYZPlane,false);
  this.testPointXYAbovePlane=new Plane(testPointXYPlane,true);
  this.testPointXYBelowPlane=new Plane(testPointXYPlane,false);
  this.edgePoints=new GeoPoint[pointsList.size()];
  this.shapeStartEdges=new Edge[pointsList.size()];
  int edgePointIndex=0;
  for (  final List<GeoPoint> shapePoints : pointsList) {
    GeoPoint lastGeoPoint=shapePoints.get(shapePoints.size() - 1);
    edgePoints[edgePointIndex]=lastGeoPoint;
    Edge lastEdge=null;
    Edge firstEdge=null;
    for (    final GeoPoint thisGeoPoint : shapePoints) {
      final Edge edge=new Edge(planetModel,lastGeoPoint,thisGeoPoint);
      xTree.add(edge);
      yTree.add(edge);
      zTree.add(edge);
      if (firstEdge == null) {
        firstEdge=edge;
      }
      if (lastEdge != null) {
        lastEdge.next=edge;
        edge.previous=lastEdge;
      }
      lastEdge=edge;
      lastGeoPoint=thisGeoPoint;
    }
    firstEdge.previous=lastEdge;
    lastEdge.next=firstEdge;
    shapeStartEdges[edgePointIndex]=firstEdge;
    edgePointIndex++;
  }
}
