{
  if (queryTerms != null) {
    ArrayUtil.quickSort(queryTerms);
    Map<BytesRef,Integer> tmpSet=new HashMap<BytesRef,Integer>(queryTerms.length);
    List<BytesRef> tmpList=new ArrayList<BytesRef>(queryTerms.length);
    List<Integer> tmpFreqs=new ArrayList<Integer>(queryTerms.length);
    int j=0;
    for (int i=0; i < queryTerms.length; i++) {
      BytesRef term=queryTerms[i];
      Integer position=tmpSet.get(term);
      if (position == null) {
        tmpSet.put(term,Integer.valueOf(j++));
        tmpList.add(term);
        tmpFreqs.add(Integer.valueOf(1));
      }
 else {
        Integer integer=tmpFreqs.get(position.intValue());
        tmpFreqs.set(position.intValue(),Integer.valueOf(integer.intValue() + 1));
      }
    }
    terms=tmpList.toArray(terms);
    termFreqs=new int[tmpFreqs.size()];
    int i=0;
    for (    final Integer integer : tmpFreqs) {
      termFreqs[i++]=integer.intValue();
    }
  }
}
