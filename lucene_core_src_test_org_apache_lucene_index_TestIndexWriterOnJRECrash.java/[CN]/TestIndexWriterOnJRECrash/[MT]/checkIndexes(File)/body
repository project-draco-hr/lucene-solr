{
  if (file.isDirectory()) {
    BaseDirectoryWrapper dir=newFSDirectory(file);
    dir.setCheckIndexOnClose(false);
    if (DirectoryReader.indexExists(dir)) {
      if (VERBOSE) {
        System.err.println("Checking index: " + file);
      }
      if (SegmentInfos.getLastCommitGeneration(dir) > 1) {
        TestUtil.checkIndex(dir);
      }
      dir.close();
      return true;
    }
    dir.close();
    for (    File f : file.listFiles())     if (checkIndexes(f))     return true;
  }
  return false;
}
