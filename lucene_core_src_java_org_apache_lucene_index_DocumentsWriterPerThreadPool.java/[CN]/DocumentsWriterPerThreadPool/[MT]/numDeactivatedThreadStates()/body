{
  int count=0;
  for (int i=0; i < threadStates.length; i++) {
    final ThreadState threadState=threadStates[i];
    threadState.lock();
    try {
      if (!threadState.isActive) {
        count++;
      }
    }
  finally {
      threadState.unlock();
    }
  }
  return count;
}
