{
  ThreadState threadState=null;
synchronized (this) {
    while (true) {
      if (freeCount > 0) {
        threadState=freeList[freeCount - 1];
        freeCount--;
        break;
      }
 else       if (numThreadStatesActive < threadStates.length) {
        return newThreadState();
      }
 else {
        try {
          wait();
        }
 catch (        InterruptedException ie) {
          throw new ThreadInterruptedException(ie);
        }
      }
    }
  }
  threadState.lock();
  return threadState;
}
