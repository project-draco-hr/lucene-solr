{
  if (loggingPath != null) {
    File loggingConfig=new File(loggingPath);
    if (!loggingConfig.exists() && instanceDir != null) {
      loggingConfig=new File(new File(instanceDir),loggingPath);
    }
    if (loggingConfig.exists()) {
      System.setProperty("java.util.logging.config.file",loggingConfig.getAbsolutePath());
    }
 else {
      throw new SolrException(500,"can not find logging file: " + loggingConfig);
    }
  }
  if (instanceDir != null) {
    if (Config.isInstanceDirInitialized()) {
      String dir=Config.getInstanceDir();
      if (!dir.equals(instanceDir)) {
        throw new SolrException(500,"already initalized: " + dir);
      }
    }
    Config.setInstanceDir(instanceDir);
  }
  if (dataDir != null) {
    core=new SolrCore(dataDir,new IndexSchema(instanceDir + "/conf/schema.xml"));
  }
 else {
    core=SolrCore.getSolrCore();
  }
  parser=new SolrRequestParsers(core,SolrConfig.config);
}
