{
  if (loggingPath != null) {
    File loggingConfig=new File(loggingPath);
    if (!loggingConfig.exists() && instanceDir != null) {
      loggingConfig=new File(new File(instanceDir),loggingPath);
    }
    if (loggingConfig.exists()) {
      System.setProperty("java.util.logging.config.file",loggingConfig.getAbsolutePath());
    }
 else {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"can not find logging file: " + loggingConfig);
    }
  }
  SolrConfig config=null;
  try {
    config=new SolrConfig(instanceDir,SolrConfig.DEFAULT_CONF_FILE,null);
    instanceDir=config.getResourceLoader().getInstanceDir();
    IndexSchema schema=new IndexSchema(config,instanceDir + "/conf/schema.xml",null);
    core=new SolrCore(null,dataDir,config,schema,null);
    parser=new SolrRequestParsers(config);
  }
 catch (  Exception ee) {
    throw new RuntimeException(ee);
  }
}
