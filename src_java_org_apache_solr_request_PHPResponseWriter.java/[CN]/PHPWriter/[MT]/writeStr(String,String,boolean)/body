{
  if (needsEscaping) {
    StringBuilder sb=new StringBuilder(val.length());
    sb.append('\'');
    for (int i=0; i < val.length(); i++) {
      char ch=val.charAt(i);
switch (ch) {
case '\'':
case '\\':
        sb.append('\\');
      sb.append(ch);
    break;
default :
  sb.append(ch);
}
}
sb.append('\'');
writer.append(sb);
}
 else {
writer.write('\'');
writer.write(val);
writer.write('\'');
}
}
