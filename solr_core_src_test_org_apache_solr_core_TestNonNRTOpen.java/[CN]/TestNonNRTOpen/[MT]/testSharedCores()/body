{
  assertU(optimize());
  Set<Object> s1=getCoreCacheKeys();
  assertEquals(1,s1.size());
  assertU(adoc("baz","doc"));
  assertU(commit());
  Set<Object> s2=getCoreCacheKeys();
  assertEquals(2,s2.size());
  assertTrue(s2.containsAll(s1));
  assertU(adoc("foo","doc"));
  assertU(adoc("foo2","doc"));
  assertU(commit());
  Set<Object> s3=getCoreCacheKeys();
  assertEquals(3,s3.size());
  assertTrue(s3.containsAll(s2));
  assertU(delQ("foo2:doc"));
  assertU(commit());
  assertEquals(s3,getCoreCacheKeys());
}
