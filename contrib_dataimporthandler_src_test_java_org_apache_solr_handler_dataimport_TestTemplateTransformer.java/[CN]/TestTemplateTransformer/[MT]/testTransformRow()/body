{
  List fields=new ArrayList();
  fields.add(AbstractDataImportHandlerTest.createMap("column","firstName"));
  fields.add(AbstractDataImportHandlerTest.createMap("column","lastName"));
  fields.add(AbstractDataImportHandlerTest.createMap("column","middleName"));
  fields.add(AbstractDataImportHandlerTest.createMap("column","name",TemplateTransformer.TEMPLATE,"${e.lastName}, ${e.firstName} ${e.middleName}"));
  fields.add(AbstractDataImportHandlerTest.createMap("column","mrname",TemplateTransformer.TEMPLATE,"Mr ${e.name}"));
  Map row=AbstractDataImportHandlerTest.createMap("firstName","Shalin","middleName","Shekhar","lastName","Mangar");
  VariableResolverImpl resolver=new VariableResolverImpl();
  resolver.addNamespace("e",row);
  Map<String,String> entityAttrs=AbstractDataImportHandlerTest.createMap("name","e");
  Context context=AbstractDataImportHandlerTest.getContext(null,resolver,null,0,fields,entityAttrs);
  new TemplateTransformer().transformRow(row,context);
  Assert.assertEquals("Mangar, Shalin Shekhar",row.get("name"));
  Assert.assertEquals("Mr Mangar, Shalin Shekhar",row.get("mrname"));
}
