{
  super("Thread-" + nodeNumber);
  boolean created=false;
  this.zkClient=new SolrZkClient(server.getZkAddress(),TIMEOUT);
  try {
    this.zkStateReader=new ZkStateReader(zkClient);
    this.nodeNumber=nodeNumber;
    props=new ZkNodeProps(ZkStateReader.BASE_URL_PROP,Integer.toString(nodeNumber),ZkStateReader.CORE_NAME_PROP,"");
    created=true;
  }
  finally {
    if (!created) {
      zkClient.close();
    }
  }
}
