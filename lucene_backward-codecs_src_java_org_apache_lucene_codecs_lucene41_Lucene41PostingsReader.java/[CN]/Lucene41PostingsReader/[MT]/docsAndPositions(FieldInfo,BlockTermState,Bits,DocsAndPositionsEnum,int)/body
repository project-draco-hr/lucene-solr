{
  boolean indexHasOffsets=fieldInfo.getIndexOptions().compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS) >= 0;
  boolean indexHasPayloads=fieldInfo.hasPayloads();
  if ((!indexHasOffsets || (flags & DocsAndPositionsEnum.FLAG_OFFSETS) == 0) && (!indexHasPayloads || (flags & DocsAndPositionsEnum.FLAG_PAYLOADS) == 0)) {
    BlockDocsAndPositionsEnum docsAndPositionsEnum;
    if (reuse instanceof BlockDocsAndPositionsEnum) {
      docsAndPositionsEnum=(BlockDocsAndPositionsEnum)reuse;
      if (!docsAndPositionsEnum.canReuse(docIn,fieldInfo)) {
        docsAndPositionsEnum=new BlockDocsAndPositionsEnum(fieldInfo);
      }
    }
 else {
      docsAndPositionsEnum=new BlockDocsAndPositionsEnum(fieldInfo);
    }
    return docsAndPositionsEnum.reset(liveDocs,(IntBlockTermState)termState);
  }
 else {
    EverythingEnum everythingEnum;
    if (reuse instanceof EverythingEnum) {
      everythingEnum=(EverythingEnum)reuse;
      if (!everythingEnum.canReuse(docIn,fieldInfo)) {
        everythingEnum=new EverythingEnum(fieldInfo);
      }
    }
 else {
      everythingEnum=new EverythingEnum(fieldInfo);
    }
    return everythingEnum.reset(liveDocs,(IntBlockTermState)termState,flags);
  }
}
