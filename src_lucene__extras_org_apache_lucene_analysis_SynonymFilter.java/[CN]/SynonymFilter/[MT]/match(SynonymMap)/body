{
  SynonymMap result=null;
  if (map.submap != null) {
    Token tok=nextTok();
    if (tok != null) {
      String str=ignoreCase ? tok.termText.toLowerCase() : tok.termText;
      SynonymMap subMap=(SynonymMap)map.submap.get(str);
      if (subMap != null) {
        result=match(subMap);
      }
      if (result != null) {
        matched.addFirst(tok);
      }
 else {
        pushTok(tok);
      }
    }
  }
  if (result == null && map.synonyms != null) {
    result=map;
  }
  return result;
}
