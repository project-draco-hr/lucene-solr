{
  File topicsFile=new File(args[0]);
  File qrelsFile=new File(args[1]);
  FSDirectory dir=FSDirectory.open(new File(args[3]));
  Searcher searcher=new IndexSearcher(dir,true);
  int maxResults=1000;
  String docNameField="docname";
  PrintWriter logger=new PrintWriter(System.out,true);
  TrecTopicsReader qReader=new TrecTopicsReader();
  QualityQuery qqs[]=qReader.readQueries(new BufferedReader(new FileReader(topicsFile)));
  Judge judge=new TrecJudge(new BufferedReader(new FileReader(qrelsFile)));
  judge.validateData(qqs,logger);
  QualityQueryParser qqParser=new SimpleQQParser("title","body");
  QualityBenchmark qrun=new QualityBenchmark(qqs,qqParser,searcher,docNameField);
  qrun.setMaxResults(maxResults);
  SubmissionReport submitLog=null;
  QualityStats stats[]=qrun.execute(judge,submitLog,logger);
  QualityStats avg=QualityStats.average(stats);
  avg.log("SUMMARY",2,logger,"  ");
}
