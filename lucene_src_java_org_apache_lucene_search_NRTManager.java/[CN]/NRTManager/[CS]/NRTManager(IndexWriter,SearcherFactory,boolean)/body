{
  this.writer=writer;
  if (alwaysApplyDeletes) {
    withoutDeletes=withDeletes=new SearcherManagerRef(true,0,new SearcherManager(writer,true,searcherFactory));
  }
 else {
    withDeletes=new SearcherManagerRef(true,0,new SearcherManager(writer,true,searcherFactory));
    withoutDeletes=new SearcherManagerRef(false,0,new SearcherManager(writer,false,searcherFactory));
  }
  indexingGen=new AtomicLong(1);
}
