{
  Query parentQueryWithRandomChild=createChildrenQueryWithOneParent(getRandomChildNumber(0));
  ToParentBlockJoinQuery blockJoinQuery=new ToParentBlockJoinQuery(parentQueryWithRandomChild,parentsFilter,ScoreMode.None);
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage("child query must only match non-parent docs");
  indexSearcher.search(blockJoinQuery,1);
}
