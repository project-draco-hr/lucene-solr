{
  int randomChildNumber=getRandomChildNumber(0);
  int nextRandomChildNumber=getRandomChildNumber(randomChildNumber);
  Query parentQueryWithRandomChild=createParentsQueryWithOneChild(nextRandomChildNumber);
  ToChildBlockJoinQuery blockJoinQuery=new ToChildBlockJoinQuery(parentQueryWithRandomChild,parentsFilter,false);
  BooleanQuery conjunctionQuery=new BooleanQuery();
  WildcardQuery childQuery=new WildcardQuery(new Term("child",createFieldValue(randomChildNumber)));
  conjunctionQuery.add(new BooleanClause(childQuery,BooleanClause.Occur.MUST));
  conjunctionQuery.add(new BooleanClause(blockJoinQuery,BooleanClause.Occur.MUST));
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage(ToChildBlockJoinQuery.INVALID_QUERY_MESSAGE);
  indexSearcher.search(conjunctionQuery,1);
}
