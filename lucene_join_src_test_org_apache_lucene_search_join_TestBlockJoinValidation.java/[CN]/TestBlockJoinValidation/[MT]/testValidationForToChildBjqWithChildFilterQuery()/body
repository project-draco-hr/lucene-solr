{
  Query parentQueryWithRandomChild=createParentQuery();
  ToChildBlockJoinQuery blockJoinQuery=new ToChildBlockJoinQuery(parentQueryWithRandomChild,parentsFilter);
  Filter childFilter=new QueryWrapperFilter(new TermQuery(new Term("common_field","1")));
  thrown.expect(IllegalStateException.class);
  thrown.expectMessage(ToChildBlockJoinQuery.ILLEGAL_ADVANCE_ON_PARENT);
  indexSearcher.search(blockJoinQuery,childFilter,1);
}
