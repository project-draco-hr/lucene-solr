{
  Directory dir=newDirectory();
  long start=System.currentTimeMillis();
  addDocs(random(),dir,ndocs,"foo","val",maxTF,percentDocs);
  long end=System.currentTimeMillis();
  if (VERBOSE)   System.out.println("milliseconds for creation of " + ndocs + " docs = "+ (end - start));
  IndexReader reader=IndexReader.open(dir);
  TermsEnum tenum=MultiFields.getTerms(reader,"foo").iterator(null);
  start=System.currentTimeMillis();
  int ret=0;
  DocsEnum tdocs=null;
  final Random random=new Random(random().nextLong());
  for (int i=0; i < iter; i++) {
    tenum.seekCeil(new BytesRef("val"));
    tdocs=_TestUtil.docs(random,tenum,MultiFields.getLiveDocs(reader),tdocs,false);
    while (tdocs.nextDoc() != DocIdSetIterator.NO_MORE_DOCS) {
      ret+=tdocs.docID();
    }
  }
  end=System.currentTimeMillis();
  if (VERBOSE)   System.out.println("milliseconds for " + iter + " TermDocs iteration: "+ (end - start));
  return ret;
}
