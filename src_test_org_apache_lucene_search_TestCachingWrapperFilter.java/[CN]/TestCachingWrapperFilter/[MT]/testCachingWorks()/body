{
  Directory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new StandardAnalyzer(),true);
  writer.close();
  IndexReader reader=IndexReader.open(dir);
  MockFilter filter=new MockFilter();
  CachingWrapperFilter cacher=new CachingWrapperFilter(filter);
  cacher.getDocIdSet(reader);
  assertTrue("first time",filter.wasCalled());
  filter.clear();
  cacher.getDocIdSet(reader);
  assertFalse("second time",filter.wasCalled());
  reader.close();
}
