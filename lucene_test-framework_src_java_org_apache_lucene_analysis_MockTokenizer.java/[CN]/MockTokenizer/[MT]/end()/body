{
  try {
    super.end();
    int finalOffset=correctOffset(off);
    offsetAtt.setOffset(finalOffset,finalOffset);
    if (streamState != State.INCREMENT_FALSE) {
      fail("end() called before incrementToken() returned false!");
    }
  }
  finally {
    streamState=State.END;
  }
}
