{
synchronized (locks) {
    if (locks.add(lockName)) {
      return new SingleInstanceLock(lockName);
    }
 else {
      throw new LockObtainFailedException("lock instance already obtained: (dir=" + dir + ", lockName="+ lockName+ ")");
    }
  }
}
