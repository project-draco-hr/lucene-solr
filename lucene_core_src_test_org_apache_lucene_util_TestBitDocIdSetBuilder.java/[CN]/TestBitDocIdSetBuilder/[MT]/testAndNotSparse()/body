{
  final int maxDoc=TestUtil.nextInt(random(),10000,100000);
  BitDocIdSet.Builder builder=new BitDocIdSet.Builder(maxDoc);
  FixedBitSet set=new FixedBitSet(maxDoc);
  DocIdSet other=randomSet(maxDoc,maxDoc / 2000);
  builder.or(other.iterator());
  set.or(other.iterator());
  assertFalse(builder.dense());
  other=randomSet(maxDoc,maxDoc / 2);
  builder.andNot(other.iterator());
  set.andNot(other.iterator());
  assertEquals(new BitDocIdSet(set),builder.build());
}
