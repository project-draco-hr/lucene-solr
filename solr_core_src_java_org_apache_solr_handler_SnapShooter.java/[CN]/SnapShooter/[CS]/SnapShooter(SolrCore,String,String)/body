{
  solrCore=core;
  if (location == null) {
    snapDir=core.getDataDir();
  }
 else {
    File base=new File(core.getCoreDescriptor().getInstanceDir());
    snapDir=org.apache.solr.util.FileUtils.resolvePath(base,location).getAbsolutePath();
  }
  this.snapshotName=snapshotName;
  if (snapshotName != null) {
    directoryName="snapshot." + snapshotName;
  }
 else {
    SimpleDateFormat fmt=new SimpleDateFormat(DATE_FMT,Locale.ROOT);
    directoryName="snapshot." + fmt.format(new Date());
  }
}
