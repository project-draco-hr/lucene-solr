{
  final List<T> recentItems;
  if (items.size() <= maxSize) {
    recentItems=items;
  }
 else {
    recentItems=items.subList(items.size() - maxSize,items.size());
  }
  final Map<T,Integer> expectedFrequencies=new HashMap<T,Integer>();
  for (  T item : recentItems) {
    final Integer freq=expectedFrequencies.get(item);
    if (freq == null) {
      expectedFrequencies.put(item,1);
    }
 else {
      expectedFrequencies.put(item,freq + 1);
    }
  }
  assertEquals(expectedFrequencies,buffer.asFrequencyMap());
}
