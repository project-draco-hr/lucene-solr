{
  IndexWriter writer=new IndexWriter(indexDir,new IndexWriterConfig(TEST_VERSION_CURRENT,new KeywordAnalyzer()));
  TaxonomyWriter taxoWriter=new LuceneTaxonomyWriter(taxoDir);
  for (  CategoryPath[] categories : perDocCategories) {
    writer.addDocument(new CategoryDocumentBuilder(taxoWriter,iParams).setCategoryPaths(Arrays.asList(categories)).build(new Document()));
  }
  taxoWriter.commit();
  writer.commit();
  taxoWriter.close();
  writer.close();
}
