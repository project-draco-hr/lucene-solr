{
  FacetSearchParams sParams=new FacetSearchParams(iParams);
  sParams.setClCache(clCache);
  for (  String dim : dimension) {
    sParams.addFacetRequest(new PerDimCountFacetRequest(new CategoryPath(dim),10));
  }
  FacetsAccumulator acc=new StandardFacetsAccumulator(sParams,reader,taxo);
  acc.setComplementThreshold(FacetsAccumulator.DISABLE_COMPLEMENT);
  List<FacetResult> results=acc.accumulate(allDocs);
  assertEquals("Wrong #results",dimension.length,results.size());
  for (int i=0; i < results.size(); i++) {
    FacetResult res=results.get(i);
    assertEquals("wrong num-descendants for dimension " + dimension[i],expectedNumDescendants[i],res.getNumValidDescendants());
    FacetResultNode resNode=res.getFacetResultNode();
    assertEquals("wrong value for dimension " + dimension[i],expectedValue[i],(int)resNode.getValue());
  }
}
