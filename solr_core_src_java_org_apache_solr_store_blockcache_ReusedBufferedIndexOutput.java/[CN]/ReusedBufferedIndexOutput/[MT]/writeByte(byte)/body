{
  if (bufferPosition >= bufferSize) {
    flushBufferToCache();
  }
  if (getFilePointer() >= fileLength) {
    fileLength++;
  }
  buffer[bufferPosition++]=b;
  if (bufferPosition > bufferLength) {
    bufferLength=bufferPosition;
  }
}
