{
  try {
    Document doc=new Document();
    Field field=newField("field","testData",Field.Store.YES,Field.Index.ANALYZED,Field.TermVector.WITH_POSITIONS_OFFSETS);
    doc.add(field);
    IndexWriter writer=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random)));
    iwConstructed.countDown();
    startIndexing.await();
    writer.addDocument(doc);
    writer.close();
  }
 catch (  Throwable e) {
    failed=true;
    failure=e;
    failure.printStackTrace(System.out);
    return;
  }
}
