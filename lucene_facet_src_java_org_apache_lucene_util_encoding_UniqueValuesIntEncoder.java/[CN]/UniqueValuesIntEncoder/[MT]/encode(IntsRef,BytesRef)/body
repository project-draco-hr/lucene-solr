{
  int prev=values.ints[values.offset];
  int idx=values.offset + 1;
  int upto=values.offset + values.length;
  for (int i=idx; i < upto; i++) {
    if (values.ints[i] != prev) {
      values.ints[idx++]=values.ints[i];
      prev=values.ints[i];
    }
  }
  values.length=idx - values.offset;
  encoder.encode(values,buf);
}
