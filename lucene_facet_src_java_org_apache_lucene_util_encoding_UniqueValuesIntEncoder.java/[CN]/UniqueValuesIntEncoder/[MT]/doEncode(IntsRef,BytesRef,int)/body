{
  int prev=values.ints[values.offset];
  int idx=values.offset + 1;
  for (int i=idx; i < upto; i++) {
    if (values.ints[i] != prev) {
      values.ints[idx++]=values.ints[i];
      prev=values.ints[i];
    }
  }
  values.length=idx - values.offset;
  encoder.doEncode(values,buf,idx);
}
