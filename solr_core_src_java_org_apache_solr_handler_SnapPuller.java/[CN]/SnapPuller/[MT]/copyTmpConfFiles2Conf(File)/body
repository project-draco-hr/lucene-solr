{
  File confDir=new File(solrCore.getResourceLoader().getConfigDir());
  for (  File file : makeTmpConfDirFileList(tmpconfDir,new ArrayList<File>())) {
    File oldFile=new File(confDir,file.getPath().substring(tmpconfDir.getPath().length(),file.getPath().length()));
    if (oldFile.exists()) {
      File backupFile=new File(oldFile.getPath() + "." + getDateAsStr(new Date(oldFile.lastModified())));
      boolean status=oldFile.renameTo(backupFile);
      if (!status) {
        throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to rename: " + oldFile + " to: "+ backupFile);
      }
    }
    boolean status=file.renameTo(oldFile);
    if (status) {
    }
 else {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to rename: " + file + " to: "+ oldFile);
    }
  }
}
