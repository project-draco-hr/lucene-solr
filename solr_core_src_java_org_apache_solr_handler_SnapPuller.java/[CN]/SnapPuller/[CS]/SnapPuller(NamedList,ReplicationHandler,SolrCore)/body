{
  solrCore=sc;
  String masterUrl=(String)initArgs.get(MASTER_URL);
  if (masterUrl == null)   throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"'masterUrl' is required for a slave");
  if (masterUrl.endsWith("/replication")) {
    masterUrl=masterUrl.substring(0,masterUrl.length() - 12);
    LOG.warn("'masterUrl' must be specified without the /replication suffix");
  }
  this.masterUrl=masterUrl;
  this.replicationHandler=handler;
  pollIntervalStr=(String)initArgs.get(POLL_INTERVAL);
  pollInterval=readInterval(pollIntervalStr);
  String compress=(String)initArgs.get(COMPRESSION);
  useInternal=INTERNAL.equals(compress);
  useExternal=EXTERNAL.equals(compress);
  String connTimeout=(String)initArgs.get(HttpClientUtil.PROP_CONNECTION_TIMEOUT);
  String readTimeout=(String)initArgs.get(HttpClientUtil.PROP_SO_TIMEOUT);
  String httpBasicAuthUser=(String)initArgs.get(HttpClientUtil.PROP_BASIC_AUTH_USER);
  String httpBasicAuthPassword=(String)initArgs.get(HttpClientUtil.PROP_BASIC_AUTH_PASS);
  myHttpClient=createHttpClient(solrCore,connTimeout,readTimeout,httpBasicAuthUser,httpBasicAuthPassword,useExternal);
  if (pollInterval != null && pollInterval > 0) {
    startExecutorService();
  }
 else {
    LOG.info(" No value set for 'pollInterval'. Timer Task not started.");
  }
}
