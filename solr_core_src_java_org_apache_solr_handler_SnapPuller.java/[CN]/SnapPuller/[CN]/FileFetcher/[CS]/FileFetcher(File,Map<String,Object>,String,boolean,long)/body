{
  this.copy2Dir=dir;
  this.fileName=(String)fileDetails.get(NAME);
  this.size=(Long)fileDetails.get(SIZE);
  this.isConf=isConf;
  this.saveAs=saveAs;
  if (fileDetails.get(LAST_MODIFIED) != null) {
    lastmodified=(Long)fileDetails.get(LAST_MODIFIED);
  }
  indexGen=latestGen;
  this.file=new File(copy2Dir,saveAs);
  File parentDir=this.file.getParentFile();
  if (!parentDir.exists()) {
    if (!parentDir.mkdirs()) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Failed to create (sub)directory for file: " + saveAs);
    }
  }
  this.fileOutputStream=new FileOutputStream(file);
  this.fileChannel=this.fileOutputStream.getChannel();
  if (includeChecksum)   checksum=new Adler32();
}
