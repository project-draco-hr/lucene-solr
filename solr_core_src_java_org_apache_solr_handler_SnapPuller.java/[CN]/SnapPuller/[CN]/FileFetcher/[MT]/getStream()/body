{
  post=new HttpPost(masterUrl);
  List<BasicNameValuePair> formparams=new ArrayList<BasicNameValuePair>();
  formparams.add(new BasicNameValuePair(COMMAND,CMD_GET_FILE));
  formparams.add(new BasicNameValuePair(GENERATION,indexGen.toString()));
  if (isConf) {
    formparams.add(new BasicNameValuePair(CONF_FILE_SHORT,fileName));
  }
 else {
    formparams.add(new BasicNameValuePair(FILE,fileName));
  }
  if (useInternal) {
    formparams.add(new BasicNameValuePair(COMPRESSION,"true"));
  }
  if (useExternal) {
    formparams.add(new BasicNameValuePair("Accept-Encoding","gzip,deflate"));
  }
  if (this.includeChecksum)   formparams.add(new BasicNameValuePair(CHECKSUM,"true"));
  formparams.add(new BasicNameValuePair("wt",FILE_STREAM));
  if (bytesDownloaded > 0) {
    formparams.add(new BasicNameValuePair(OFFSET,"" + bytesDownloaded));
  }
  UrlEncodedFormEntity entity=new UrlEncodedFormEntity(formparams,"UTF-8");
  post.setEntity(entity);
  HttpResponse response=myHttpClient.execute(post);
  InputStream is=response.getEntity().getContent();
  if (useInternal) {
    is=new InflaterInputStream(is);
  }
 else   if (useExternal) {
    is=checkCompressed(post,is);
  }
  return new FastInputStream(is);
}
