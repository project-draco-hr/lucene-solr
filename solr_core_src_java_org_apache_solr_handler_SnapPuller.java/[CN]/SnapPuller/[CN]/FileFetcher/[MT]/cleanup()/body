{
  try {
    fileOutputStream.close();
  }
 catch (  Exception e) {
    LOG.error("Error closing the file stream: " + this.saveAs,e);
  }
  try {
    post.releaseConnection();
  }
 catch (  Exception e) {
  }
  if (bytesDownloaded != size) {
    try {
      file.delete();
    }
 catch (    Exception e) {
      LOG.error("Error deleting file in cleanup" + e.getMessage());
    }
    if (!aborted)     throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to download " + fileName + " completely. Downloaded "+ bytesDownloaded+ "!="+ size);
  }
}
