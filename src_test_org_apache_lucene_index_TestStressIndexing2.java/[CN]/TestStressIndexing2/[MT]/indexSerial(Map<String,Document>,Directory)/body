{
  IndexWriter w=new IndexWriter(dir,new WhitespaceAnalyzer(TEST_VERSION_CURRENT),IndexWriter.MaxFieldLength.UNLIMITED);
  Iterator<Document> iter=docs.values().iterator();
  while (iter.hasNext()) {
    Document d=iter.next();
    ArrayList<Fieldable> fields=new ArrayList<Fieldable>();
    fields.addAll(d.getFields());
    Collections.sort(fields,fieldNameComparator);
    Document d1=new Document();
    d1.setBoost(d.getBoost());
    for (int i=0; i < fields.size(); i++) {
      d1.add(fields.get(i));
    }
    w.addDocument(d1);
  }
  w.close();
}
