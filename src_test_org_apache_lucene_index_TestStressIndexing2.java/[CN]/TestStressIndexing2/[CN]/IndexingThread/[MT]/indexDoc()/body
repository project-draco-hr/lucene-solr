{
  Document d=new Document();
  ArrayList fields=new ArrayList();
  int id=base + nextInt(range);
  String idString="" + id;
  Field idField=new Field("id",idString,Field.Store.YES,Field.Index.NO_NORMS);
  fields.add(idField);
  int nFields=nextInt(maxFields);
  for (int i=0; i < nFields; i++) {
switch (nextInt(4)) {
case 0:
      fields.add(new Field("f0",getString(1),Field.Store.YES,Field.Index.NO_NORMS));
    break;
case 1:
  fields.add(new Field("f1",getString(0),Field.Store.NO,Field.Index.TOKENIZED));
break;
case 2:
fields.add(new Field("f2",getString(0),Field.Store.YES,Field.Index.NO));
break;
case 3:
fields.add(new Field("f3",getString(bigFieldSize),Field.Store.YES,Field.Index.TOKENIZED));
break;
}
}
if (sameFieldOrder) {
Collections.sort(fields,fieldNameComparator);
}
 else {
Collections.swap(fields,nextInt(fields.size()),0);
}
for (int i=0; i < fields.size(); i++) {
d.add((Fieldable)fields.get(i));
}
w.updateDocument(idTerm.createTerm(idString),d);
docs.put(idString,d);
}
