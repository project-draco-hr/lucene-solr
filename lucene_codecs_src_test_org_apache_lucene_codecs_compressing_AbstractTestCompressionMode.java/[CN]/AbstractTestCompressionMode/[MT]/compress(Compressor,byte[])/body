{
  byte[] compressed=new byte[uncompressed.length * 2 + 16];
  ByteArrayDataOutput out=new ByteArrayDataOutput(compressed);
  compressor.compress(uncompressed,0,uncompressed.length,out);
  final int compressedLen=out.getPosition();
  return Arrays.copyOf(compressed,compressedLen);
}
