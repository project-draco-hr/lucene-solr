{
  final int iterations=atLeast(10);
  for (int i=0; i < iterations; ++i) {
    final byte[] decompressed=randomArray();
    final byte[] compressed=compress(decompressed);
    final int offset, length;
    if (decompressed.length == 0) {
      offset=length=0;
    }
 else {
      offset=random().nextInt(decompressed.length);
      length=random().nextInt(decompressed.length - offset);
    }
    final byte[] restored=decompress(compressed,offset,length);
    assertArrayEquals(Arrays.copyOfRange(decompressed,offset,offset + length),restored);
  }
}
