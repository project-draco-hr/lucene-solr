{
  final int iterations=atLeast(10);
  for (int i=0; i < iterations; ++i) {
    final byte[] uncompressed=randomArray();
    final byte[] compressed=compress(uncompressed);
    final int offset, length;
    if (uncompressed.length == 0) {
      offset=length=0;
    }
 else {
      offset=random().nextInt(uncompressed.length);
      length=random().nextInt(uncompressed.length - offset);
    }
    final byte[] restored=uncompress(compressed,offset,length);
    assertArrayEquals(Arrays.copyOfRange(uncompressed,offset,offset + length),restored);
  }
}
