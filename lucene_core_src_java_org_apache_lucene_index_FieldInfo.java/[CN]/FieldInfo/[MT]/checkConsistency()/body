{
  if (indexOptions != IndexOptions.NO) {
    if (indexOptions.compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS) < 0 && storePayloads) {
      throw new IllegalStateException("indexed field '" + name + "' cannot have payloads without positions");
    }
  }
 else {
    if (storeTermVector) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot store term vectors");
    }
    if (storePayloads) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot store payloads");
    }
    if (omitNorms) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot omit norms");
    }
  }
  if (dvGen != -1 && docValuesType == DocValuesType.NO) {
    throw new IllegalStateException("field '" + name + "' cannot have a docvalues update generation without having docvalues");
  }
  return true;
}
