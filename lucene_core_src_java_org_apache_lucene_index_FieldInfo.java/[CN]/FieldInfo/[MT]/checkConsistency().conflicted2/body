{
  if (indexed) {
    if (indexOptions == null) {
      throw new IllegalStateException("indexed field '" + name + "' must have index options");
    }
    if (omitNorms) {
      if (normType != null) {
        throw new IllegalStateException("indexed field '" + name + "' cannot both omit norms and have norms");
      }
    }
    if (indexOptions.compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS) < 0 && storePayloads) {
      throw new IllegalStateException("indexed field '" + name + "' cannot have payloads without positions");
    }
  }
 else {
    if (storeTermVector) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot store term vectors");
    }
    if (storePayloads) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot store payloads");
    }
    if (omitNorms) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot omit norms");
    }
    if (normType != null) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot have norms");
    }
    if (indexOptions != null) {
      throw new IllegalStateException("non-indexed field '" + name + "' cannot have index options");
    }
  }
  if (dvGen != -1 && docValueType == null) {
    throw new IllegalStateException("field '" + name + "' cannot have a docvalues update generation without having docvalues");
  }
  return true;
}
