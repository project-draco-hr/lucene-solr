{
  position+=token.getPositionIncrement();
  if (waitForPos == position) {
    waitForPos=-1;
  }
 else   if (waitForPos != -1) {
    return false;
  }
  WeightedSpanTerm wSpanTerm=spanScorer.getWeightedSpanTerm(new String(token.termBuffer(),0,token.termLength()));
  if (wSpanTerm != null) {
    List positionSpans=wSpanTerm.getPositionSpans();
    for (int i=0; i < positionSpans.size(); i++) {
      if (((PositionSpan)positionSpans.get(i)).start == position) {
        waitForPos=((PositionSpan)positionSpans.get(i)).end + 1;
        return true;
      }
    }
  }
  boolean isNewFrag=token.endOffset() >= (fragmentSize * currentNumFrags);
  if (isNewFrag) {
    currentNumFrags++;
  }
  return isNewFrag;
}
