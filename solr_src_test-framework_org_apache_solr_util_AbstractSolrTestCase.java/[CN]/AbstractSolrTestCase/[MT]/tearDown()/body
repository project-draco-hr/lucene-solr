{
  log.info("####TEARDOWN_START " + getName());
  if (factoryProp == null) {
    System.clearProperty("solr.directoryFactory");
  }
  if (h != null) {
    h.close();
  }
  SolrTestCaseJ4.closeDirectories();
  String skip=System.getProperty("solr.test.leavedatadir");
  if (null != skip && 0 != skip.trim().length()) {
    System.err.println("NOTE: per solr.test.leavedatadir, dataDir will not be removed: " + dataDir.getAbsolutePath());
  }
 else {
    if (!recurseDelete(dataDir)) {
      System.err.println("!!!! WARNING: best effort to remove " + dataDir.getAbsolutePath() + " FAILED !!!!!");
    }
  }
  resetExceptionIgnores();
  super.tearDown();
}
