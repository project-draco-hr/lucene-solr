{
  String vendor=Constants.JAVA_VENDOR;
  assumeTrue(vendor + " JRE not supported.",vendor.startsWith("Sun") || vendor.startsWith("IBM") || vendor.startsWith("Apple"));
  if (System.getProperty("tests.crashmode") == null) {
    for (int i=0; i < 10; i++) {
      forkTest();
      if (checkIndexes(tempDir))       return;
    }
  }
 else {
    final int crashTime=_TestUtil.nextInt(random,500,4000);
    Thread t=new Thread(){
      @Override public void run(){
        try {
          Thread.sleep(crashTime);
        }
 catch (        InterruptedException e) {
        }
        crashJRE();
      }
    }
;
    t.setPriority(Thread.MAX_PRIORITY);
    t.start();
    for (int i=0; i < 1000; i++) {
      super.testNRTThreads();
    }
  }
}
