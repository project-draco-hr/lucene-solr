{
  SolrParams params=req.getParams();
  boolean optimize=params.getBool(UpdateParams.OPTIMIZE,false);
  CommitUpdateCommand cmd=new CommitUpdateCommand(optimize);
  cmd.waitFlush=params.getBool(UpdateParams.WAIT_FLUSH,cmd.waitFlush);
  cmd.waitSearcher=params.getBool(UpdateParams.WAIT_SEARCHER,cmd.waitSearcher);
  SolrCore.getSolrCore().getUpdateHandler().commit(cmd);
  if (optimize) {
    rsp.add("optimize","true");
  }
 else {
    rsp.add("commit","true");
  }
}
