{
  if (activeSlices) {
    for (    Map.Entry<String,DocCollection> entry : clusterState.getCollectionsMap().entrySet()) {
      final Collection<Slice> activeCollectionSlices=entry.getValue().getActiveSlices();
      if (activeCollectionSlices != null) {
        slices.addAll(activeCollectionSlices);
      }
    }
  }
 else {
    for (    Map.Entry<String,DocCollection> entry : clusterState.getCollectionsMap().entrySet()) {
      final Collection<Slice> collectionSlices=entry.getValue().getSlices();
      if (collectionSlices != null) {
        slices.addAll(collectionSlices);
      }
    }
  }
}
