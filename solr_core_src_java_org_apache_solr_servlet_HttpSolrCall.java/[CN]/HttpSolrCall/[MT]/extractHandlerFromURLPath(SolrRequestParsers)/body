{
  if (handler == null && path.length() > 1) {
    handler=core.getRequestHandler(path);
    if (handler == null) {
      if (path.equals("/schema") || path.startsWith("/schema/")) {
        solrReq=parser.parse(core,path,req);
        SolrRequestInfo.setRequestInfo(new SolrRequestInfo(solrReq,new SolrQueryResponse()));
        if (path.equals(req.getServletPath())) {
          action=PASSTHROUGH;
          return;
        }
 else {
          action=FORWARD;
          return;
        }
      }
    }
    if (handler == null && parser.isHandleSelect()) {
      if ("/select".equals(path) || "/select/".equals(path)) {
        solrReq=parser.parse(core,path,req);
        invalidStates=checkStateIsValid(solrReq.getParams().get(CloudSolrClient.STATE_VERSION));
        String qt=solrReq.getParams().get(CommonParams.QT);
        handler=core.getRequestHandler(qt);
        if (handler == null) {
          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unknown handler: " + qt);
        }
        if (qt != null && qt.startsWith("/") && (handler instanceof ContentStreamHandlerBase)) {
          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Invalid Request Handler ('qt').  Do not use /select to access: " + qt);
        }
      }
    }
  }
}
