{
  if (allowDocsOutOfOrder && requiredScorers.size() == 0 && prohibitedScorers.size() < 32) {
    BooleanScorer bs=new BooleanScorer(getSimilarity(),minNrShouldMatch);
    Iterator si=optionalScorers.iterator();
    while (si.hasNext()) {
      bs.add((Scorer)si.next(),false,false);
    }
    si=prohibitedScorers.iterator();
    while (si.hasNext()) {
      bs.add((Scorer)si.next(),false,true);
    }
    bs.score(collector);
  }
 else {
    if (countingSumScorer == null) {
      initCountingSumScorer();
    }
    collector.setScorer(this);
    while (countingSumScorer.next()) {
      collector.collect(countingSumScorer.doc());
    }
  }
}
