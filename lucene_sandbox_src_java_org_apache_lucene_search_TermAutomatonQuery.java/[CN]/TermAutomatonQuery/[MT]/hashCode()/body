{
  if (det == null) {
    throw new IllegalStateException("please call finish first");
  }
  return super.hashCode() ^ termToID.hashCode() + det.toDot().hashCode();
}
