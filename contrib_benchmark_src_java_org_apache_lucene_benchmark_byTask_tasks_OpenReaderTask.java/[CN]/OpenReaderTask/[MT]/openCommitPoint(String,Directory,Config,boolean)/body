{
  IndexReader r=null;
  Collection commits=IndexReader.listCommits(dir);
  Iterator i=commits.iterator();
  while (i.hasNext()) {
    IndexCommit ic=(IndexCommit)i.next();
    Map map=ic.getUserData();
    String ud=null;
    if (map != null) {
      ud=(String)map.get(USER_DATA);
    }
    if (ud != null && ud.equals(userData)) {
      IndexDeletionPolicy indexDeletionPolicy=CreateIndexTask.getIndexDeletionPolicy(config);
      r=IndexReader.open(ic,indexDeletionPolicy,readOnly);
      break;
    }
  }
  if (r == null)   throw new IOException("cannot find commitPoint userData:" + userData);
  return r;
}
