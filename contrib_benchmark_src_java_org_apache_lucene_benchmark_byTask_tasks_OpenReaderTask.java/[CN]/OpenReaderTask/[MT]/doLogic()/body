{
  Directory dir=getRunData().getDirectory();
  Config config=getRunData().getConfig();
  IndexReader r=null;
  final IndexDeletionPolicy deletionPolicy;
  if (readOnly) {
    deletionPolicy=null;
  }
 else {
    deletionPolicy=CreateIndexTask.getIndexDeletionPolicy(config);
  }
  if (commitUserData != null) {
    r=IndexReader.open(OpenReaderTask.findIndexCommit(dir,commitUserData),deletionPolicy,readOnly);
  }
 else {
    r=IndexReader.open(dir,deletionPolicy,readOnly);
  }
  getRunData().setIndexReader(r);
  r.decRef();
  return 1;
}
