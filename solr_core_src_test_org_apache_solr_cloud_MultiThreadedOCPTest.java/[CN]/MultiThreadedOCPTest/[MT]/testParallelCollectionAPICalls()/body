{
  try (SolrClient client=createNewSolrClient("",getBaseUrl((HttpSolrClient)clients.get(0)))){
    for (int i=1; i <= NUM_COLLECTIONS; i++) {
      Create createCollectionRequest=new Create();
      createCollectionRequest.setCollectionName("ocptest" + i);
      createCollectionRequest.setNumShards(4);
      createCollectionRequest.setConfigName("conf1");
      createCollectionRequest.setAsyncId(String.valueOf(i));
      createCollectionRequest.process(client);
    }
    boolean pass=false;
    int counter=0;
    while (true) {
      int numRunningTasks=0;
      for (int i=1; i <= NUM_COLLECTIONS; i++)       if (getRequestState(i + "",client).equals("running"))       numRunningTasks++;
      if (numRunningTasks > 1) {
        pass=true;
        break;
      }
 else       if (counter++ > 100)       break;
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
      }
    }
    assertTrue("More than one tasks were supposed to be running in parallel but they weren't.",pass);
    for (int i=1; i <= NUM_COLLECTIONS; i++) {
      String state=getRequestStateAfterCompletion(i + "",REQUEST_STATUS_TIMEOUT,client);
      assertTrue("Task " + i + " did not complete, final state: "+ state,state.equals("completed"));
    }
  }
 }
