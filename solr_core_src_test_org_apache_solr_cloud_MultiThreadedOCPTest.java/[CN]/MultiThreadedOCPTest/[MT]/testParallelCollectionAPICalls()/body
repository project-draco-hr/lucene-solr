{
  SolrServer server=createNewSolrServer("",getBaseUrl((HttpSolrServer)clients.get(0)));
  for (int i=1; i <= NUM_COLLECTIONS; i++) {
    CollectionAdminRequest.createCollection("ocptest" + i,4,"conf1",server,i + "");
  }
  boolean pass=false;
  int counter=0;
  while (true) {
    int numRunningTasks=0;
    for (int i=1; i <= NUM_COLLECTIONS; i++)     if (getRequestState(i + "",server).equals("running"))     numRunningTasks++;
    if (numRunningTasks > 1) {
      pass=true;
      break;
    }
 else     if (counter++ > 100)     break;
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
    }
  }
  assertTrue("More than one tasks were supposed to be running in parallel but they weren't.",pass);
  for (int i=1; i <= NUM_COLLECTIONS; i++) {
    String state=getRequestStateAfterCompletion(i + "",30,server);
    assertTrue("Task " + i + " did not complete, final state: "+ state,state.equals("completed"));
  }
}
