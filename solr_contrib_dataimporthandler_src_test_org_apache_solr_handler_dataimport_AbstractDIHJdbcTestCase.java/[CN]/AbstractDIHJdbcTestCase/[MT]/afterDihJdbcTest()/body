{
  Connection conn=null;
  Statement s=null;
  try {
    if (dbToUse == Database.DERBY) {
      try {
        conn=DriverManager.getConnection("jdbc:derby:memory:derbyDB;drop=true;territory=en_US");
      }
 catch (      SQLException e) {
        if (!"08006".equals(e.getSQLState())) {
          throw e;
        }
      }
    }
 else     if (dbToUse == Database.HSQLDB) {
      conn=DriverManager.getConnection("jdbc:hsqldb:mem:.");
      s=conn.createStatement();
      s.executeUpdate("shutdown");
    }
  }
 catch (  SQLException e) {
    if (!skipThisTest) {
      throw e;
    }
  }
 finally {
    try {
      s.close();
    }
 catch (    Exception ex) {
    }
    try {
      conn.close();
    }
 catch (    Exception ex) {
    }
  }
}
