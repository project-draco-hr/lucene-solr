{
  Connection conn=null;
  try {
    if (dbToUse == Database.DERBY) {
      conn=DriverManager.getConnection("jdbc:derby:memory:derbyDB;create=true;territory=en_US");
    }
 else     if (dbToUse == Database.HSQLDB) {
      conn=DriverManager.getConnection("jdbc:hsqldb:mem:.");
    }
 else {
      throw new AssertionError("Invalid database to use: " + dbToUse);
    }
    populateData(conn);
  }
 catch (  SQLException sqe) {
    Throwable cause=sqe;
    while (cause.getCause() != null) {
      cause=cause.getCause();
    }
  }
 finally {
    try {
      conn.close();
    }
 catch (    Exception e1) {
    }
  }
}
