{
  if (idField == null) {
    cmd.allowDups=true;
    cmd.overwriteCommitted=false;
    cmd.overwritePending=false;
  }
  if (!cmd.allowDups && !cmd.overwritePending && !cmd.overwriteCommitted) {
    return addNoOverwriteNoDups(cmd);
  }
 else   if (!cmd.allowDups && !cmd.overwritePending && cmd.overwriteCommitted) {
    return addConditionally(cmd);
  }
 else   if (!cmd.allowDups && cmd.overwritePending && !cmd.overwriteCommitted) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unsupported param combo:" + cmd);
  }
 else   if (!cmd.allowDups && cmd.overwritePending && cmd.overwriteCommitted) {
    return overwriteBoth(cmd);
  }
 else   if (cmd.allowDups && !cmd.overwritePending && !cmd.overwriteCommitted) {
    return allowDups(cmd);
  }
 else   if (cmd.allowDups && !cmd.overwritePending && cmd.overwriteCommitted) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unsupported param combo:" + cmd);
  }
 else   if (cmd.allowDups && cmd.overwritePending && !cmd.overwriteCommitted) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unsupported param combo:" + cmd);
  }
 else   if (cmd.allowDups && cmd.overwritePending && cmd.overwriteCommitted) {
    return overwriteBoth(cmd);
  }
  throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unsupported param combo:" + cmd);
}
