{
  if (expected == val) {
    return true;
  }
  if (expected == null || val == null) {
    setErr("mismatch: '" + expected + "'!='"+ val+ "'");
    return false;
  }
  if (expected instanceof List) {
    return matchList();
  }
  if (expected instanceof Map) {
    return matchMap();
  }
  if (!expected.equals(val)) {
    if (expected instanceof Integer && val instanceof Long || expected instanceof Long && val instanceof Integer && ((Number)expected).longValue() == ((Number)val).longValue()) {
    }
 else     if (expected instanceof Float && val instanceof Double || expected instanceof Double && val instanceof Float && ((Number)expected).doubleValue() == ((Number)val).doubleValue()) {
    }
 else {
      setErr("mismatch: '" + expected + "'!='"+ val+ "'");
      return false;
    }
  }
  return true;
}
