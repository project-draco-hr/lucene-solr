{
  Header contentEncodingHeader=method.getResponseHeader("Content-Encoding");
  if (contentEncodingHeader != null) {
    String contentEncoding=contentEncodingHeader.getValue();
    if (contentEncoding.contains("gzip")) {
      respBody=new GZIPInputStream(respBody);
    }
 else     if (contentEncoding.contains("deflate")) {
      respBody=new InflaterInputStream(respBody);
    }
  }
 else {
    Header contentTypeHeader=method.getResponseHeader("Content-Type");
    if (contentTypeHeader != null) {
      String contentType=contentTypeHeader.getValue();
      if (contentType != null) {
        if (contentType.startsWith("application/x-gzip-compressed")) {
          respBody=new GZIPInputStream(respBody);
        }
 else         if (contentType.startsWith("application/x-deflate")) {
          respBody=new InflaterInputStream(respBody);
        }
      }
    }
  }
  return respBody;
}
