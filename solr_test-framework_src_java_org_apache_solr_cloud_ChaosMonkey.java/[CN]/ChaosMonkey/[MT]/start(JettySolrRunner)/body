{
  IpTables.unblockPort(jetty.getLocalPort());
  try {
    jetty.start();
  }
 catch (  Exception e) {
    jetty.stop();
    Thread.sleep(3000);
    try {
      jetty.start();
    }
 catch (    Exception e2) {
      jetty.stop();
      Thread.sleep(10000);
      try {
        jetty.start();
      }
 catch (      Exception e3) {
        jetty.stop();
        Thread.sleep(30000);
        try {
          jetty.start();
        }
 catch (        Exception e4) {
          log.error("Could not get the port to start jetty again",e4);
          jetty.stop();
          return false;
        }
      }
    }
  }
  FilterHolder filterHolder=jetty.getDispatchFilter();
  if (filterHolder != null) {
    Filter filter=filterHolder.getFilter();
    if (filter != null) {
      CoreContainer cores=((SolrDispatchFilter)filter).getCores();
      if (cores != null) {
        if (cores.isZooKeeperAware()) {
          int zklocalport=((InetSocketAddress)cores.getZkController().getZkClient().getSolrZooKeeper().getSocketAddress()).getPort();
          IpTables.unblockPort(zklocalport);
        }
      }
    }
  }
  return true;
}
