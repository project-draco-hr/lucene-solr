{
  int numActive=0;
  numActive=checkIfKillIsLegal(slice,numActive);
  if (numActive < 2) {
    monkeyLog("only one active node in shard - monkey cannot kill :(");
    return null;
  }
  int numRunning=0;
  for (  CloudJettyRunner cjetty : shardToJetty.get(slice)) {
    if (!deadPool.contains(cjetty)) {
      numRunning++;
    }
  }
  if (numRunning < 2) {
    monkeyLog("only one active node in shard - monkey cannot kill :(");
    return null;
  }
  Random random=LuceneTestCase.random();
  int chance=random.nextInt(10);
  CloudJettyRunner cjetty;
  if (chance <= 5 && aggressivelyKillLeaders) {
    cjetty=shardToLeaderJetty.get(slice);
  }
 else {
    List<CloudJettyRunner> jetties=shardToJetty.get(slice);
    int index=random.nextInt(jetties.size());
    cjetty=jetties.get(index);
    ZkNodeProps leader=null;
    try {
      leader=zkStateReader.getLeaderRetry(collection,slice);
    }
 catch (    Throwable t) {
      log.error("Could not get leader",t);
      return null;
    }
    boolean rtIsLeader;
    CoreContainer cc=cjetty.jetty.getCoreContainer();
    if (cc != null) {
      try (SolrCore core=cc.getCore(leader.getStr(ZkStateReader.CORE_NAME_PROP))){
        if (core == null) {
          monkeyLog("selected jetty not running correctly - skip");
          return null;
        }
        rtIsLeader=core.getCoreDescriptor().getCloudDescriptor().isLeader();
      }
     }
 else {
      return null;
    }
    boolean isLeader=leader.getStr(ZkStateReader.NODE_NAME_PROP).equals(jetties.get(index).nodeName) || rtIsLeader;
    if (!aggressivelyKillLeaders && isLeader) {
      monkeyLog("abort! I don't kill leaders");
      return null;
    }
  }
  if (cjetty.jetty.getLocalPort() == -1) {
    monkeyLog("abort! This guy is already dead");
    return null;
  }
  monkeyLog("chose a victim! " + cjetty.jetty.getLocalPort());
  return cjetty;
}
