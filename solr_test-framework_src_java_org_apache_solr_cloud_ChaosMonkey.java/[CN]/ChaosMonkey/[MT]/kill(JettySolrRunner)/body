{
  FilterHolder filterHolder=jetty.getDispatchFilter();
  if (filterHolder != null) {
    Filter filter=filterHolder.getFilter();
    if (filter != null) {
      CoreContainer cores=((SolrDispatchFilter)filter).getCores();
      if (cores != null) {
        int zklocalport=((InetSocketAddress)cores.getZkController().getZkClient().getSolrZooKeeper().getSocketAddress()).getPort();
        IpTables.blockPort(zklocalport);
      }
    }
  }
  IpTables.blockPort(jetty.getLocalPort());
  monkeyLog("kill shard! " + jetty.getLocalPort());
  jetty.stop();
  stop(jetty);
  if (!jetty.isStopped()) {
    throw new RuntimeException("could not kill jetty");
  }
}
