{
  Map<String,DocCollection> collections=solrj.getZkStateReader().getClusterState().getCollectionStates();
  if (collections.containsKey(collectionName)) {
    Map<String,Slice> slices=collections.get(collectionName).getSlicesMap();
    Iterator<Entry<String,Slice>> it=slices.entrySet().iterator();
    while (it.hasNext()) {
      Entry<String,Slice> sliceEntry=it.next();
      Map<String,Replica> sliceShards=sliceEntry.getValue().getReplicasMap();
      Iterator<Entry<String,Replica>> shardIt=sliceShards.entrySet().iterator();
      while (shardIt.hasNext()) {
        Entry<String,Replica> shardEntry=shardIt.next();
        ZkCoreNodeProps coreProps=new ZkCoreNodeProps(shardEntry.getValue());
        CoreAdminResponse mcr=CoreAdminRequest.getStatus(coreProps.getCoreName(),new HttpSolrServer(coreProps.getBaseUrl()));
        long before=mcr.getStartTime(coreProps.getCoreName()).getTime();
        urlToTime.put(coreProps.getCoreUrl(),before);
      }
    }
  }
 else {
    throw new IllegalArgumentException("Could not find collection in :" + collections.keySet());
  }
}
