{
  RTimer timer=new RTimer();
  long timeout=(long)timer.getTime() + waitMillis;
  ClusterState clusterState=getCommonCloudSolrClient().getZkStateReader().getClusterState();
  DocCollection dColl=clusterState.getCollection(DEFAULT_COLLECTION);
  long docTotal=-1;
  while (docTotal != expectedNumFound && timeout > (long)timer.getTime()) {
    docTotal=checkSlicesSameCounts(dColl);
    if (docTotal != expectedNumFound) {
      Thread.sleep(100);
    }
  }
  assertEquals(failureMessage,expectedNumFound,docTotal);
  for (  SolrClient client : clients) {
    assertEquals(failureMessage,expectedNumFound,client.query(new SolrQuery("*:*")).getResults().getNumFound());
  }
}
