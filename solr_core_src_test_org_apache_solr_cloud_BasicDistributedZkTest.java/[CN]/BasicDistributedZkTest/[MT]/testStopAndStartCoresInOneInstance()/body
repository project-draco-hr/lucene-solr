{
  SolrClient client=clients.get(0);
  String url3=getBaseUrl(client);
  try (final HttpSolrClient httpSolrClient=new HttpSolrClient(url3)){
    httpSolrClient.setConnectionTimeout(15000);
    httpSolrClient.setSoTimeout(60000);
    ThreadPoolExecutor executor=null;
    try {
      executor=new ExecutorUtil.MDCAwareThreadPoolExecutor(0,Integer.MAX_VALUE,5,TimeUnit.SECONDS,new SynchronousQueue<Runnable>(),new DefaultSolrThreadFactory("testExecutor"));
      int cnt=3;
      createCores(httpSolrClient,executor,"multiunload2",1,cnt);
    }
  finally {
      if (executor != null) {
        ExecutorUtil.shutdownAndAwaitTermination(executor);
      }
    }
  }
   ChaosMonkey.stop(cloudJettys.get(0).jetty);
  printLayout();
  Thread.sleep(5000);
  ChaosMonkey.start(cloudJettys.get(0).jetty);
  cloudClient.getZkStateReader().updateClusterState();
  try {
    cloudClient.getZkStateReader().getLeaderRetry("multiunload2","shard1",30000);
  }
 catch (  SolrException e) {
    printLayout();
    throw e;
  }
  printLayout();
}
