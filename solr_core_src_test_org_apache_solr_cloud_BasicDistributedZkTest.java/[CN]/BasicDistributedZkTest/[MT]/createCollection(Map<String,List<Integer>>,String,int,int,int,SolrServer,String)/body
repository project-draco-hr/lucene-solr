{
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("action",CollectionAction.CREATE.toString());
  params.set(OverseerCollectionProcessor.NUM_SLICES,numShards);
  params.set(OverseerCollectionProcessor.REPLICATION_FACTOR,numReplicas);
  params.set(OverseerCollectionProcessor.MAX_SHARDS_PER_NODE,maxShardsPerNode);
  if (createNodeSetStr != null)   params.set(OverseerCollectionProcessor.CREATE_NODE_SET,createNodeSetStr);
  int clientIndex=random().nextInt(2);
  List<Integer> list=new ArrayList<Integer>();
  list.add(numShards);
  list.add(numReplicas);
  collectionInfos.put(collectionName,list);
  params.set("name",collectionName);
  SolrRequest request=new QueryRequest(params);
  request.setPath("/admin/collections");
  if (client == null) {
    final String baseUrl=((HttpSolrServer)clients.get(clientIndex)).getBaseURL().substring(0,((HttpSolrServer)clients.get(clientIndex)).getBaseURL().length() - DEFAULT_COLLECTION.length() - 1);
    createNewSolrServer("",baseUrl).request(request);
  }
 else {
    client.request(request);
  }
}
