{
  long timeoutAt=System.currentTimeMillis() + 30000;
  boolean allTimesAreCorrect=false;
  while (System.currentTimeMillis() < timeoutAt) {
    Map<String,Long> urlToTimeAfter=new HashMap<String,Long>();
    collectStartTimes(collectionName,urlToTimeAfter);
    boolean retry=false;
    Set<Entry<String,Long>> entries=urlToTimeBefore.entrySet();
    for (    Entry<String,Long> entry : entries) {
      Long beforeTime=entry.getValue();
      Long afterTime=urlToTimeAfter.get(entry.getKey());
      assertNotNull(afterTime);
      if (afterTime <= beforeTime) {
        retry=true;
        break;
      }
    }
    if (!retry) {
      allTimesAreCorrect=true;
      break;
    }
  }
  return allTimesAreCorrect;
}
