{
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("action",CollectionAction.CREATE.toString());
  params.set("numReplicas",1);
  params.set("numShards",3);
  String collectionName="awholynewcollection";
  params.set("name",collectionName);
  SolrRequest request=new QueryRequest(params);
  request.setPath("/admin/collections");
  clients.get(0).request(request);
  String collectionName2="awholynewcollection2";
  params.set("name",collectionName2);
  params.set("numShards",2);
  clients.get(1).request(request);
  checkForCollection(collectionName,3);
  checkForCollection(collectionName2,2);
  SolrInputDocument doc=getDoc(id,6,i1,-600,tlong,600,t1,"humpty dumpy sat on a wall");
  int which=(doc.getField(id).toString().hashCode() & 0x7fffffff) % clients.size();
  SolrServer client=clients.get(which);
  client.add(doc);
  doc=getDoc(id,7,i1,123,tlong,123,t1,"humpty dumpy had a great fall");
  which=(doc.getField(id).toString().hashCode() & 0x7fffffff) % clients.size();
  client=clients.get(which);
  client.add(doc);
  doc=getDoc(id,8,i1,876,tlong,876,t1,"all the kings horses and all the kings men");
  which=(doc.getField(id).toString().hashCode() & 0x7fffffff) % clients.size();
  client=clients.get(which);
  client.add(doc);
  commit();
  params=new ModifiableSolrParams();
  params.set("action",CollectionAction.DELETE.toString());
  params.set("name",collectionName2);
  request=new QueryRequest(params);
  request.setPath("/admin/collections");
  clients.get(0).request(request);
  checkForMissingCollection(collectionName2);
  printLayout();
}
