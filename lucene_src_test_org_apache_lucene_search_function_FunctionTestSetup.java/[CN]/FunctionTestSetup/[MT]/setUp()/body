{
  super.setUp();
  super.setUp();
  dir=new RAMDirectory();
  anlzr=new MockAnalyzer();
  IndexWriter iw=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,anlzr));
  int remaining=N_DOCS;
  boolean done[]=new boolean[N_DOCS];
  int i=0;
  while (remaining > 0) {
    if (done[i]) {
      throw new Exception("to set this test correctly N_DOCS=" + N_DOCS + " must be primary and greater than 2!");
    }
    addDoc(iw,i);
    done[i]=true;
    i=(i + 4) % N_DOCS;
    if (doMultiSegment && remaining % 3 == 0) {
      iw.commit();
    }
    remaining--;
  }
  iw.close();
}
