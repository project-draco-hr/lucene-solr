{
  File dirFile=new File(TEMP_DIR,"testIndex");
  Directory dir=getDirectory();
  IndexWriter writer=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new WhitespaceAnalyzer(TEST_VERSION_CURRENT)));
  addDoc(writer,"test");
  writer.close();
  dir.close();
  _TestUtil.rmDir(dirFile);
  dir=getDirectory();
  writer=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new WhitespaceAnalyzer(TEST_VERSION_CURRENT)).setOpenMode(OpenMode.CREATE));
  addDoc(writer,"test");
  writer.close();
  dir.close();
  dir=getDirectory();
  IndexReader reader1=IndexReader.open(dir,false);
  reader1.close();
  dir.close();
  _TestUtil.rmDir(dirFile);
}
