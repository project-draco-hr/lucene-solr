{
  File dirFile=new File(TEMP_DIR,"testIndex");
  Directory dir=getDirectory();
  IndexWriter writer=new IndexWriter(dir,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer()));
  addDoc(writer,"test");
  writer.close();
  dir.close();
  _TestUtil.rmDir(dirFile);
  dir=getDirectory();
  writer=new IndexWriter(dir,newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer()).setOpenMode(OpenMode.CREATE));
  addDoc(writer,"test");
  writer.close();
  dir.close();
  dir=getDirectory();
  IndexReader reader1=IndexReader.open(dir,false);
  reader1.close();
  dir.close();
  _TestUtil.rmDir(dirFile);
}
