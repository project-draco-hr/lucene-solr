{
  IndexOutput out=null;
  IndexInput in=null;
  try {
synchronized (uncacheLock) {
      if (VERBOSE) {
        System.out.println("nrtdir.unCache name=" + fileName);
      }
      if (!cache.fileExists(fileName)) {
        return;
      }
      IOContext context=IOContext.DEFAULT;
      if (delegate.fileExists(fileName)) {
        throw new IOException("cannot uncache file=\"" + fileName + "\": it was separately also created in the delegate directory");
      }
      out=delegate.createOutput(fileName,context);
      in=cache.openInput(fileName,context);
      in.copyBytes(out,in.length());
synchronized (this) {
        cache.deleteFile(fileName);
      }
    }
  }
  finally {
    IOUtils.close(in,out);
  }
}
