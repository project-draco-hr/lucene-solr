{
  this.core=core;
  this.klass=klass;
  this.registry=needThreadSafety ? new ConcurrentHashMap<>() : new HashMap<>();
  this.immutableRegistry=Collections.unmodifiableMap(registry);
  meta=SolrConfig.classVsSolrPluginInfo.get(klass.getName());
  if (meta == null) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unknown Plugin : " + klass.getName());
  }
}
