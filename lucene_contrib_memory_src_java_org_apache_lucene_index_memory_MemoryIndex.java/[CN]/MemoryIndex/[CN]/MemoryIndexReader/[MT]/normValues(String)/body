{
  DocValues norms=cachedNormValues;
  SimilarityProvider sim=getSimilarityProvider();
  if (!field.equals(cachedFieldName) || sim != cachedSimilarity) {
    Info info=getInfo(field);
    Similarity fieldSim=sim.get(field);
    int numTokens=info != null ? info.numTokens : 0;
    int numOverlapTokens=info != null ? info.numOverlapTokens : 0;
    float boost=info != null ? info.getBoost() : 1.0f;
    FieldInvertState invertState=new FieldInvertState(0,numTokens,numOverlapTokens,0,boost);
    Norm norm=new Norm();
    fieldSim.computeNorm(invertState,norm);
    SingleValueSource singleByteSource=new SingleValueSource(norm);
    norms=new MemoryIndexNormDocValues(singleByteSource);
    cachedNormValues=norms;
    cachedFieldName=field;
    cachedSimilarity=sim;
    if (DEBUG)     System.err.println("MemoryIndexReader.norms: " + field + ":"+ norm+ ":"+ numTokens);
  }
  return norms;
}
