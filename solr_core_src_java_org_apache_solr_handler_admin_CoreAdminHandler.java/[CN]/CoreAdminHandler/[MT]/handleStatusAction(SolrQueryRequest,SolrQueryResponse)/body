{
  SolrParams params=req.getParams();
  String cname=params.get(CoreAdminParams.CORE);
  String indexInfo=params.get(CoreAdminParams.INDEX_INFO);
  boolean isIndexInfoNeeded=Boolean.parseBoolean(null == indexInfo ? "true" : indexInfo);
  boolean doPersist=false;
  NamedList<Object> status=new SimpleOrderedMap<Object>();
  Map<String,Exception> allFailures=coreContainer.getCoreInitFailures();
  try {
    if (cname == null) {
      rsp.add("defaultCoreName",coreContainer.getDefaultCoreName());
      for (      String name : coreContainer.getAllCoreNames()) {
        status.add(name,getCoreStatus(coreContainer,name,isIndexInfoNeeded));
      }
      rsp.add("initFailures",allFailures);
    }
 else {
      Map failures=allFailures.containsKey(cname) ? Collections.singletonMap(cname,allFailures.get(cname)) : Collections.emptyMap();
      rsp.add("initFailures",failures);
      status.add(cname,getCoreStatus(coreContainer,cname,isIndexInfoNeeded));
    }
    rsp.add("status",status);
  }
 catch (  Exception ex) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error handling 'status' action ",ex);
  }
}
