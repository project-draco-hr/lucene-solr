{
  SolrParams params=req.getParams();
  String cname=params.get(CoreAdminParams.CORE);
  String indexInfo=params.get(CoreAdminParams.INDEX_INFO);
  boolean isIndexInfoNeeded=Boolean.parseBoolean(null == indexInfo ? "true" : indexInfo);
  NamedList<Object> status=new SimpleOrderedMap<>();
  Map<String,Exception> failures=new HashMap<>();
  for (  Map.Entry<String,CoreContainer.CoreLoadFailure> failure : coreContainer.getCoreInitFailures().entrySet()) {
    failures.put(failure.getKey(),failure.getValue().exception);
  }
  try {
    if (cname == null) {
      for (      String name : coreContainer.getAllCoreNames()) {
        status.add(name,getCoreStatus(coreContainer,name,isIndexInfoNeeded));
      }
      rsp.add("initFailures",failures);
    }
 else {
      failures=failures.containsKey(cname) ? Collections.singletonMap(cname,failures.get(cname)) : Collections.<String,Exception>emptyMap();
      rsp.add("initFailures",failures);
      status.add(cname,getCoreStatus(coreContainer,cname,isIndexInfoNeeded));
    }
    rsp.add("status",status);
  }
 catch (  Exception ex) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Error handling 'status' action ",ex);
  }
}
