{
  SolrParams params=req.getParams();
  log.info("core create command {}",params);
  String coreName=params.required().get(CoreAdminParams.NAME);
  Map<String,String> coreParams=buildCoreParams(params);
  Path instancePath=coreContainer.getCoreRootDirectory().resolve(coreName);
  String instanceDir=req.getParams().get(CoreAdminParams.INSTANCE_DIR);
  if (instanceDir == null)   instanceDir=req.getParams().get("property.instanceDir");
  if (instanceDir != null) {
    instanceDir=PropertiesUtil.substituteProperty(instanceDir,coreContainer.getContainerProperties());
    instancePath=coreContainer.getCoreRootDirectory().resolve(instanceDir).normalize();
  }
  coreContainer.create(coreName,instancePath,coreParams);
  rsp.add("core",coreName);
}
