{
  Map<String,String> coreParams=new HashMap<>();
  for (  String param : paramToProp.keySet()) {
    String value=params.get(param,null);
    if (StringUtils.isNotEmpty(value)) {
      coreParams.put(paramToProp.get(param),value);
    }
  }
  Iterator<String> paramsIt=params.getParameterNamesIterator();
  while (paramsIt.hasNext()) {
    String param=paramsIt.next();
    if (param.startsWith(CoreAdminParams.PROPERTY_PREFIX)) {
      String propName=param.substring(CoreAdminParams.PROPERTY_PREFIX.length());
      String propValue=params.get(param);
      coreParams.put(propName,propValue);
    }
    if (param.startsWith(ZkController.COLLECTION_PARAM_PREFIX)) {
      coreParams.put(param,params.get(param));
    }
  }
  return coreParams;
}
