{
  Object fieldTypeName=params.get(QUERY_ANALYZER);
  if (fieldTypeName == null) {
    throw new IllegalArgumentException("Error in configuration: " + QUERY_ANALYZER + " parameter is mandatory");
  }
  FieldType ft=core.getLatestSchema().getFieldTypeByName(fieldTypeName.toString());
  if (ft == null) {
    throw new IllegalArgumentException("Error in configuration: " + fieldTypeName.toString() + " is not defined in the schema");
  }
  Analyzer indexAnalyzer=ft.getIndexAnalyzer();
  Analyzer queryAnalyzer=ft.getQueryAnalyzer();
  String indexPath=params.get(INDEX_PATH) != null ? params.get(INDEX_PATH).toString() : DEFAULT_INDEX_PATH;
  if (new File(indexPath).isAbsolute() == false) {
    indexPath=core.getDataDir() + File.separator + indexPath;
  }
  int minPrefixChars=params.get(MIN_PREFIX_CHARS) != null ? Integer.parseInt(params.get(MIN_PREFIX_CHARS).toString()) : AnalyzingInfixSuggester.DEFAULT_MIN_PREFIX_CHARS;
  BlenderType blenderType=getBlenderType(params.get(BLENDER_TYPE));
  int numFactor=params.get(NUM_FACTOR) != null ? Integer.parseInt(params.get(NUM_FACTOR).toString()) : BlendedInfixSuggester.DEFAULT_NUM_FACTOR;
  try {
    return new BlendedInfixSuggester(core.getSolrConfig().luceneMatchVersion,FSDirectory.open(new File(indexPath)),indexAnalyzer,queryAnalyzer,minPrefixChars,blenderType,numFactor,true);
  }
 catch (  IOException e) {
    throw new RuntimeException();
  }
}
