{
  RAMDirectory directory=new RAMDirectory();
  IndexWriter writer=new IndexWriter(directory,new SimpleAnalyzer(),true);
  Document doc=new Document();
  doc.add(new Field("field","the quick brown fox jumps over the lazy dog",Field.Store.NO,Field.Index.TOKENIZED));
  writer.addDocument(doc);
  writer.optimize();
  writer.close();
  IndexSearcher searcher=new IndexSearcher(directory);
  SpanRegexQuery srq=new SpanRegexQuery(new Term("field","q.[aeiou]c.*"));
  SpanTermQuery stq=new SpanTermQuery(new Term("field","dog"));
  SpanNearQuery query=new SpanNearQuery(new SpanQuery[]{srq,stq},6,true);
  Hits hits=searcher.search(query);
  assertEquals(1,hits.length());
}
