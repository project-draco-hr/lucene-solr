{
  String hostName="127.0.0.1";
  int port=jetty.getLocalPort();
  try (Socket socket=new Socket(hostName,port);OutputStream out=new BufferedOutputStream(socket.getOutputStream());InputStream in=socket.getInputStream()){
    byte[] body=getJsonDocs(100000).getBytes(StandardCharsets.UTF_8);
    int bodyLen=body.length;
    byte[] whitespace=whitespace(1000000);
    bodyLen+=whitespace.length;
    String headers="POST /solr/collection1/update HTTP/1.1\n" + "Host: localhost:" + port + "\n"+ "Accept: */*\n"+ "Content-type:application/json\n"+ "Content-Length: "+ bodyLen+ "\n"+ "Connection: Keep-Alive\n";
    out.write(headers.getBytes(StandardCharsets.US_ASCII));
    out.write('\n');
    out.write(body);
    out.flush();
    Thread.sleep(1000);
    out.write(whitespace);
    out.flush();
    String rbody=getResponse(in);
    log.info("RESPONSE BODY:" + rbody);
    assertTrue(rbody.contains("unknown_field"));
  }
 }
