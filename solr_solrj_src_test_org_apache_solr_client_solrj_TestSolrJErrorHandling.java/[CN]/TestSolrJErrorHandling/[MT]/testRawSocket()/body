{
  String hostName="127.0.0.1";
  int port=jetty.getLocalPort();
  Socket socket=new Socket(hostName,port);
  PrintWriter out=new PrintWriter(new OutputStreamWriter(socket.getOutputStream(),"UTF-8"),true);
  InputStream in=socket.getInputStream();
  String body=getJsonDocs(100000);
  int bodyLen=body.length();
  char[] whitespace=whitespace(1000000);
  bodyLen+=whitespace.length;
  String headers="POST /solr/collection1/update HTTP/1.1\n" + "Host: localhost:" + port + "\n"+ "Accept: */*\n"+ "Content-type:application/json\n"+ "Content-Length: "+ bodyLen+ "\n"+ "Connection: Keep-Alive\n";
  out.write(headers);
  out.write("\n");
  out.write(body);
  out.flush();
  Thread.sleep(1000);
  out.write(whitespace);
  out.flush();
  String rbody=getResponse(in);
  log.info("RESPONSE BODY:" + rbody);
  assertTrue(rbody.contains("unknown_field"));
  IOUtils.closeQuietly(out);
  IOUtils.closeQuietly(in);
  IOUtils.closeQuietly(socket);
}
