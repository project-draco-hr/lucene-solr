{
  final IntTrieTokenStream stream=new IntTrieTokenStream(value,precisionStep);
  stream.setUseNewAPI(true);
  final ShiftAttribute shiftAtt=(ShiftAttribute)stream.getAttribute(ShiftAttribute.class);
  assertNotNull("Has shift attribute",shiftAtt);
  final TermAttribute termAtt=(TermAttribute)stream.getAttribute(TermAttribute.class);
  assertNotNull("Has term attribute",termAtt);
  for (int shift=0; shift < 32; shift+=precisionStep) {
    assertTrue("New token is available",stream.incrementToken());
    assertEquals("Shift value",shift,shiftAtt.getShift());
    assertEquals("Term is correctly encoded",TrieUtils.intToPrefixCoded(value,shift),termAtt.term());
  }
  assertFalse("No more tokens available",stream.incrementToken());
}
