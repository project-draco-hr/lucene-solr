def setupSolr(config):
    'Sets up solr with the proper features for the test'
    conn = httplib.HTTPConnection(config['host'], config['port'])
    baseUrl = ('/solr/' + config['collection'])
    featureUrl = (baseUrl + '/schema/feature-store')
    conn.request('DELETE', (featureUrl + '/*'))
    r = conn.getresponse()
    msg = r.read()
    if ((r.status != httplib.OK) and (r.status != httplib.CREATED) and (r.status != httplib.ACCEPTED) and (r.status != httplib.NOT_FOUND)):
        raise Exception('Status: {0} {1}\nResponse: {2}'.format(r.status, r.reason, msg))
    headers = {'Content-type': 'application/json', }
    featuresBody = open(config['featuresFile'])
    conn.request('POST', featureUrl, featuresBody, headers)
    r = conn.getresponse()
    msg = r.read()
    if ((r.status != httplib.OK) and (r.status != httplib.ACCEPTED)):
        print r.status
        print ''
        print r.reason
        raise Exception('Status: {0} {1}\nResponse: {2}'.format(r.status, r.reason, msg))
    conn.close()
