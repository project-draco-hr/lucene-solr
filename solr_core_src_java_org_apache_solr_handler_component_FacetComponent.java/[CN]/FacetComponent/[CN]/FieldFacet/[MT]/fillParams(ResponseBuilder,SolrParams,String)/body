{
  this.field=field;
  this.ftype=rb.req.getSchema().getFieldTypeNoEx(this.field);
  this.offset=params.getFieldInt(field,FacetParams.FACET_OFFSET,0);
  this.limit=params.getFieldInt(field,FacetParams.FACET_LIMIT,100);
  Integer mincount=params.getFieldInt(field,FacetParams.FACET_MINCOUNT);
  if (mincount == null) {
    Boolean zeros=params.getFieldBool(field,FacetParams.FACET_ZEROS);
    mincount=(zeros != null && !zeros) ? 1 : 0;
  }
  this.minCount=mincount;
  this.missing=params.getFieldBool(field,FacetParams.FACET_MISSING,false);
  this.sort=params.getFieldParam(field,FacetParams.FACET_SORT,(limit > 0 ? FacetParams.FACET_SORT_COUNT : FacetParams.FACET_SORT_INDEX));
  if (this.sort.equals(FacetParams.FACET_SORT_COUNT_LEGACY)) {
    this.sort=FacetParams.FACET_SORT_COUNT;
  }
 else   if (this.sort.equals(FacetParams.FACET_SORT_INDEX_LEGACY)) {
    this.sort=FacetParams.FACET_SORT_INDEX;
  }
  this.prefix=params.getFieldParam(field,FacetParams.FACET_PREFIX);
}
