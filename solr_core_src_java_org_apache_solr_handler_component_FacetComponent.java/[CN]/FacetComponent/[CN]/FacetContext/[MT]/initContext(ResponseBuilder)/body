{
  List<RangeFacetRequest> facetRanges=null;
  List<FacetBase> facetQueries=null;
  String[] ranges=rb.req.getParams().getParams(FacetParams.FACET_RANGE);
  if (ranges != null) {
    facetRanges=new ArrayList<>(ranges.length);
    for (    String range : ranges) {
      RangeFacetRequest rangeFacetRequest=new RangeFacetRequest(rb,range);
      facetRanges.add(rangeFacetRequest);
    }
  }
  String[] queries=rb.req.getParams().getParams(FacetParams.FACET_QUERY);
  if (queries != null) {
    facetQueries=new ArrayList<>();
    for (    String query : queries) {
      facetQueries.add(new FacetBase(rb,FacetParams.FACET_QUERY,query));
    }
  }
  rb.req.getContext().put(FACET_CONTEXT_KEY,new FacetContext(facetRanges,facetQueries));
}
