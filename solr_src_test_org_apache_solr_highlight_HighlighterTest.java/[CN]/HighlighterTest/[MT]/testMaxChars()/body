{
  HashMap<String,String> args=new HashMap<String,String>();
  args.put("fl","id score");
  args.put("hl","true");
  args.put("hl.snippets","10");
  args.put("hl.fl","t_text");
  TestHarness.LocalRequestFactory sumLRF=h.getRequestFactory("standard",0,200,args);
  assertU(adoc("t_text",LONG_TEXT,"id","1"));
  assertU(commit());
  assertU(optimize());
  assertQ("token at start of text",sumLRF.makeRequest("t_text:disjoint"),"//lst[@name='highlighting']/lst[@name='1']","//lst[@name='1']/arr[count(str)=1]");
  args.put("hl.maxAnalyzedChars","20");
  sumLRF=h.getRequestFactory("standard",0,200,args);
  assertQ("token at end of text",sumLRF.makeRequest("t_text:disjoint"),"//lst[@name='highlighting']/lst[@name='1']","//lst[@name='1'][not(*)]");
  args.put("hl.maxAnalyzedChars","-1");
  sumLRF=h.getRequestFactory("standard",0,200,args);
  assertQ("token at start of text",sumLRF.makeRequest("t_text:disjoint"),"//lst[@name='highlighting']/lst[@name='1']","//lst[@name='1']/arr[count(str)=1]");
}
