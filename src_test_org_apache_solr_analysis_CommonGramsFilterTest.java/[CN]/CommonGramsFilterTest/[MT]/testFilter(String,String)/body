{
  TokenStream nsf;
  StringTokenStream ts=new StringTokenStream(in," .");
  if (type.equals("query")) {
    CommonGramsFilter cgf=new CommonGramsFilter(ts,commonWords);
    nsf=new CommonGramsQueryFilter(cgf);
  }
 else {
    nsf=new CommonGramsFilter(ts,commonWords);
  }
  StringBuffer outBuf=new StringBuffer();
  while (true) {
    Token t=nsf.next();
    if (t == null)     break;
    for (int i=0; i < t.getPositionIncrement(); i++)     outBuf.append('/');
    if (t.getPositionIncrement() == 0)     outBuf.append(',');
    outBuf.append(t.term());
  }
  String out=outBuf.toString();
  out=out.replaceAll(" ","");
  return out;
}
