{
  float boost=(float)dboost;
  FunctionQuery functionQuery=new FunctionQuery(valueSource);
  IndexReader r=DirectoryReader.open(dir);
  IndexSearcher s=newSearcher(r);
  BooleanQuery.Builder q1b=new BooleanQuery.Builder();
  q1b.add(new TermQuery(new Term(TEXT_FIELD,"first")),BooleanClause.Occur.SHOULD);
  q1b.add(new TermQuery(new Term(TEXT_FIELD,"aid")),BooleanClause.Occur.SHOULD);
  q1b.add(new TermQuery(new Term(TEXT_FIELD,"text")),BooleanClause.Occur.SHOULD);
  Query q1=q1b.build();
  log(q1);
  BooleanQuery.Builder q2CustomNeutralB=new BooleanQuery.Builder();
  q2CustomNeutralB.setDisableCoord(true);
  Query q2CustomNeutralInner=new CustomScoreQuery(q1);
  q2CustomNeutralInner.setBoost((float)Math.sqrt(dboost));
  q2CustomNeutralB.add(q2CustomNeutralInner,BooleanClause.Occur.SHOULD);
  Query q2CustomNeutral=q2CustomNeutralB.build();
  q2CustomNeutral.setBoost((float)Math.sqrt(dboost));
  log(q2CustomNeutral);
  CustomScoreQuery q3CustomMul=new CustomScoreQuery(q1,functionQuery);
  q3CustomMul.setStrict(true);
  q3CustomMul.setBoost(boost);
  log(q3CustomMul);
  CustomScoreQuery q4CustomAdd=new CustomAddQuery(q1,functionQuery);
  q4CustomAdd.setStrict(true);
  q4CustomAdd.setBoost(boost);
  log(q4CustomAdd);
  CustomScoreQuery q5CustomMulAdd=new CustomMulAddQuery(q1,functionQuery,functionQuery);
  q5CustomMulAdd.setStrict(true);
  q5CustomMulAdd.setBoost(boost);
  log(q5CustomMulAdd);
  TopDocs td1=s.search(q1,1000);
  TopDocs td2CustomNeutral=s.search(q2CustomNeutral,1000);
  TopDocs td3CustomMul=s.search(q3CustomMul,1000);
  TopDocs td4CustomAdd=s.search(q4CustomAdd,1000);
  TopDocs td5CustomMulAdd=s.search(q5CustomMulAdd,1000);
  Map<Integer,Float> h1=topDocsToMap(td1);
  Map<Integer,Float> h2CustomNeutral=topDocsToMap(td2CustomNeutral);
  Map<Integer,Float> h3CustomMul=topDocsToMap(td3CustomMul);
  Map<Integer,Float> h4CustomAdd=topDocsToMap(td4CustomAdd);
  Map<Integer,Float> h5CustomMulAdd=topDocsToMap(td5CustomMulAdd);
  verifyResults(boost,s,h1,h2CustomNeutral,h3CustomMul,h4CustomAdd,h5CustomMulAdd,q1,q2CustomNeutral,q3CustomMul,q4CustomAdd,q5CustomMulAdd);
  r.close();
}
