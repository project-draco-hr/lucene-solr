{
  FacetSearchParams res=super.searchParamsWithRequests(numResults,fip);
  for (  FacetRequest req : res.facetRequests) {
    if (random().nextBoolean()) {
      req.setResultMode(ResultMode.GLOBAL_FLAT);
    }
 else {
      req.setResultMode(ResultMode.PER_NODE_IN_TREE);
    }
  }
  return res;
}
