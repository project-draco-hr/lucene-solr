{
  final String holdElectionPath=context.electionPath + ELECTION_NODE;
  List<String> seqs=zkClient.getChildren(holdElectionPath,null,true);
  sortSeqs(seqs);
  List<Integer> intSeqs=getSeqs(seqs);
  if (seq <= intSeqs.get(0)) {
    try {
      zkClient.delete(context.leaderPath,-1,true);
    }
 catch (    Exception e) {
    }
    runIamLeaderProcess(context,replacement);
  }
 else {
    int i=1;
    for (; i < intSeqs.size(); i++) {
      int s=intSeqs.get(i);
      if (seq < s) {
        break;
      }
    }
    int index=i - 2;
    if (index < 0) {
      log.warn("Our node is no longer in line to be leader");
      return;
    }
    try {
      zkClient.getData(holdElectionPath + "/" + seqs.get(index),new Watcher(){
        @Override public void process(        WatchedEvent event){
          if (EventType.None.equals(event.getType())) {
            return;
          }
          try {
            checkIfIamLeader(seq,context,true);
          }
 catch (          InterruptedException e) {
            Thread.currentThread().interrupt();
            log.warn("",e);
          }
catch (          IOException e) {
            log.warn("",e);
          }
catch (          Exception e) {
            log.warn("",e);
          }
        }
      }
,null,true);
    }
 catch (    KeeperException.SessionExpiredException e) {
      throw e;
    }
catch (    KeeperException e) {
      SolrException.log(log,"Failed setting watch",e);
      checkIfIamLeader(seq,context,true);
    }
  }
}
