{
  long waitUntil=System.nanoTime() + TimeUnit.NANOSECONDS.convert(timeoutms,TimeUnit.MILLISECONDS);
  boolean deleted=false;
  while (System.nanoTime() < waitUntil) {
    Thread.sleep(100);
    deleted=zkStateReader.getClusterState().getCollection(collectionName).getSlice(shard).getReplica(replicaName) == null;
    if (deleted)     break;
  }
  return deleted;
}
