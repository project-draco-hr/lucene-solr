{
  List<String> nodeList;
  final String createNodeSetStr=message.getStr(CREATE_NODE_SET);
  final List<String> createNodeList=(createNodeSetStr == null) ? null : StrUtils.splitSmart((CREATE_NODE_SET_EMPTY.equals(createNodeSetStr) ? "" : createNodeSetStr),",",true);
  if (createNodeList != null) {
    nodeList=new ArrayList<>(createNodeList);
    nodeList.retainAll(liveNodes);
    if (message.getBool(CREATE_NODE_SET_SHUFFLE,CREATE_NODE_SET_SHUFFLE_DEFAULT)) {
      Collections.shuffle(nodeList,random);
    }
  }
 else {
    nodeList=new ArrayList<>(liveNodes);
    Collections.shuffle(nodeList,random);
  }
  return nodeList;
}
