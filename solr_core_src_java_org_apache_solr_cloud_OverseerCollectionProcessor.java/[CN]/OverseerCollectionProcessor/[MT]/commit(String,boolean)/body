{
  HttpSolrServer server=null;
  try {
    server=new HttpSolrServer(url);
    server.setConnectionTimeout(30000);
    server.setSoTimeout(60000);
    UpdateRequest ureq=new UpdateRequest();
    ureq.setParams(new ModifiableSolrParams());
    ureq.getParams().set(UpdateParams.OPEN_SEARCHER,openSearcher);
    ureq.setAction(AbstractUpdateRequest.ACTION.COMMIT,false,true);
    return ureq.process(server);
  }
  finally {
    if (server != null) {
      server.shutdown();
    }
  }
}
