{
  String configName=message.getStr(OverseerCollectionProcessor.COLL_CONF);
  if (configName == null) {
    List<String> configNames=null;
    try {
      configNames=zkStateReader.getZkClient().getChildren(ZkController.CONFIGS_ZKNODE,null,true);
      if (configNames != null && configNames.size() == 1) {
        configName=configNames.get(0);
        log.info("Only one config set found in zk - using it:" + configName);
      }
    }
 catch (    KeeperException.NoNodeException e) {
    }
  }
  if (configName != null) {
    log.info("creating collections conf node {} ",ZkStateReader.COLLECTIONS_ZKNODE + "/" + coll);
    zkStateReader.getZkClient().makePath(ZkStateReader.COLLECTIONS_ZKNODE + "/" + coll,ZkStateReader.toJSON(ZkNodeProps.makeMap(ZkController.CONFIGNAME_PROP,configName)),true);
  }
 else {
    if (isLegacyCloud) {
      log.warn("Could not obtain config name");
    }
 else {
      throw new SolrException(ErrorCode.BAD_REQUEST,"Unable to get config name");
    }
  }
  return configName;
}
