{
  Directory dir=newDirectory();
  IndexWriterConfig iwc=newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  iwc.setMergePolicy(newLogMergePolicy());
  RandomIndexWriter writer=new RandomIndexWriter(random(),dir,iwc);
  writer.commit();
  writer.close();
  IndexReader ir=DirectoryReader.open(dir);
  Set<SortField> sortFields=new HashSet<SortField>();
  sortFields.add(new SortField(WEIGHT_FIELD_NAME_1,SortField.Type.LONG));
  sortFields.add(new SortField(WEIGHT_FIELD_NAME_2,SortField.Type.LONG));
  sortFields.add(new SortField(WEIGHT_FIELD_NAME_3,SortField.Type.LONG));
  Dictionary dictionary=new DocumentExpressionDictionary(ir,FIELD_NAME,"((w1 + w2) - w3)",sortFields,PAYLOAD_FIELD_NAME);
  InputIterator inputIterator=(InputIterator)dictionary.getWordsIterator();
  assertNull(inputIterator.next());
  assertEquals(inputIterator.weight(),0);
  assertNull(inputIterator.payload());
  ir.close();
  dir.close();
}
