{
  Reader reader=new StringReader("dogs cats Cats");
  Tokenizer tokenizer=new MockTokenizer(reader,MockTokenizer.WHITESPACE,false);
  KeywordMarkerFilterFactory factory=new KeywordMarkerFilterFactory();
  Map<String,String> args=new HashMap<String,String>();
  ResourceLoader loader=new StringMockResourceLoader("cats");
  args.put("protected","protwords.txt");
  args.put("ignoreCase","true");
  factory.setLuceneMatchVersion(TEST_VERSION_CURRENT);
  factory.init(args);
  factory.inform(loader);
  TokenStream ts=new PorterStemFilter(factory.create(tokenizer));
  assertTokenStreamContents(ts,new String[]{"dog","cats","Cats"});
  reader=new StringReader("dogs cats Cats");
  tokenizer=new MockTokenizer(reader,MockTokenizer.WHITESPACE,false);
  factory=new KeywordMarkerFilterFactory();
  args=new HashMap<String,String>();
  args.put("pattern","Cats");
  args.put("ignoreCase","true");
  factory.setLuceneMatchVersion(TEST_VERSION_CURRENT);
  factory.init(args);
  factory.inform(null);
  ts=new PorterStemFilter(factory.create(tokenizer));
  assertTokenStreamContents(ts,new String[]{"dog","cats","Cats"});
}
