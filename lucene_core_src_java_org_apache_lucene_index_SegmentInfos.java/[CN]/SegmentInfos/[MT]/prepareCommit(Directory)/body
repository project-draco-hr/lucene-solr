{
  if (pendingCommit) {
    throw new IllegalStateException("prepareCommit was already called");
  }
  write(dir);
}
