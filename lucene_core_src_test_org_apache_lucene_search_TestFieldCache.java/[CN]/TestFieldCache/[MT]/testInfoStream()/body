{
  try {
    FieldCache cache=FieldCache.DEFAULT;
    ByteArrayOutputStream bos=new ByteArrayOutputStream(1024);
    cache.setInfoStream(new PrintStream(bos,false,IOUtils.UTF_8));
    cache.getDoubles(reader,"theDouble",false);
    cache.getFloats(reader,"theDouble",new FieldCache.FloatParser(){
      @Override public TermsEnum termsEnum(      Terms terms) throws IOException {
        return NumericUtils.filterPrefixCodedLongs(terms.iterator(null));
      }
      @Override public float parseFloat(      BytesRef term){
        return NumericUtils.sortableIntToFloat((int)NumericUtils.prefixCodedToLong(term));
      }
    }
,false);
    assertTrue(bos.toString(IOUtils.UTF_8).indexOf("WARNING") != -1);
  }
  finally {
    FieldCache.DEFAULT.setInfoStream(null);
    FieldCache.DEFAULT.purgeAllCaches();
  }
}
