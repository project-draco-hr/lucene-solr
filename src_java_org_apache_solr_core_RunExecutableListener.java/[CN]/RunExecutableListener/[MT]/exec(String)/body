{
  int ret=0;
  try {
    boolean doLog=log.isLoggable(Level.FINE);
    if (doLog) {
      log.fine("About to exec " + cmd[0]);
    }
    Process proc=Runtime.getRuntime().exec(cmd,envp,dir);
    if (wait) {
      try {
        ret=proc.waitFor();
      }
 catch (      InterruptedException e) {
        SolrException.log(log,e);
      }
    }
    if (wait && doLog) {
      log.fine("Executable " + cmd[0] + " returned "+ ret);
    }
  }
 catch (  IOException e) {
    SolrException.log(log,e);
  }
  return ret;
}
