{
  String hdfsZipName=UUID.randomUUID().toString() + '.' + ZIP_FILE_BASE_NAME;
  Configuration jobConf=job.getConfiguration();
  jobConf.set(ZIP_NAME,hdfsZipName);
  Path zipPath=new Path("/tmp",getZipName(jobConf));
  FileSystem fs=FileSystem.get(jobConf);
  fs.copyFromLocalFile(new Path(solrHomeZip.toString()),zipPath);
  final URI baseZipUrl=fs.getUri().resolve(zipPath.toString() + '#' + getZipName(jobConf));
  DistributedCache.addCacheArchive(baseZipUrl,jobConf);
  LOG.debug("Set Solr distributed cache: {}",Arrays.asList(job.getCacheArchives()));
  LOG.debug("Set zipPath: {}",zipPath);
  jobConf.set(SETUP_OK,zipPath.toString());
}
