{
  CommitUpdateCommand cmd=new CommitUpdateCommand(false);
  cmd.waitFlush=true;
  cmd.waitSearcher=true;
  solrCore.getUpdateHandler().commit(cmd);
  if (solrCore.getUpdateHandler() instanceof DirectUpdateHandler2) {
    LOG.info("Force open index writer to make sure older index files get deleted");
    DirectUpdateHandler2 handler=(DirectUpdateHandler2)solrCore.getUpdateHandler();
    handler.forceOpenWriter();
  }
 else {
    LOG.warn("The update handler is not an instance or sub-class of DirectUpdateHandler2. " + "ReplicationHandler may not be able to cleanup un-used index files.");
  }
}
