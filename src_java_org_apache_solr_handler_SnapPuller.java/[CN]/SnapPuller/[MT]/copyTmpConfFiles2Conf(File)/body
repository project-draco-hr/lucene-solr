{
  File confDir=new File(solrCore.getResourceLoader().getConfigDir());
  try {
    for (    File file : tmpconfDir.listFiles()) {
      File oldFile=new File(confDir,file.getName());
      if (oldFile.exists()) {
        File backupFile=new File(confDir,oldFile.getName() + "." + getDateAsStr(new Date(oldFile.lastModified())));
        boolean status=oldFile.renameTo(backupFile);
        if (!status) {
          throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to rename: " + oldFile + " to: "+ backupFile);
        }
      }
      boolean status=file.renameTo(oldFile);
      if (status) {
        FileUtils.sync(oldFile);
      }
 else {
        throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Unable to rename: " + file + " to: "+ oldFile);
      }
    }
  }
  finally {
    delTree(tmpconfDir);
  }
}
