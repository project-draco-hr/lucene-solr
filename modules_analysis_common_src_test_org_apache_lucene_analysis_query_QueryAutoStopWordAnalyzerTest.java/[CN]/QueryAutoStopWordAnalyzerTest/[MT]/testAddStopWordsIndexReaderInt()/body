{
  protectedAnalyzer.addStopWords(reader,1f / 2f);
  int numHits=search(protectedAnalyzer,"repetitiveField:boring");
  assertEquals("A filter on terms in > one half of docs remove boring docs",0,numHits);
  numHits=search(protectedAnalyzer,"repetitiveField:vaguelyboring");
  assertTrue("A filter on terms in > half of docs should not remove vaguelyBoring docs",numHits > 1);
  protectedAnalyzer.addStopWords(reader,1f / 4f);
  numHits=search(protectedAnalyzer,"repetitiveField:vaguelyboring");
  assertEquals("A filter on terms in > quarter of docs should remove vaguelyBoring docs",0,numHits);
}
