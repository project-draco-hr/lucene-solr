{
  info("version " + VERSION_OF_THIS_TOOL);
  if (args.length < 2) {
    fatal("This command requires at least two arguments:\n" + "The destination url and the names of one or more XML files to POST to Solr." + "\n\texample: " + DEFAULT_POST_URL + " somefile.xml otherfile.xml");
  }
  URL solrUrl=null;
  try {
    solrUrl=new URL(args[0]);
  }
 catch (  MalformedURLException e) {
    fatal("First argument is not a valid URL: " + args[0]);
  }
  try {
    final SimplePostTool t=new SimplePostTool(solrUrl);
    info("POSTing files to " + solrUrl + "..");
    final int posted=t.postFiles(args,1);
    if (posted > 0) {
      info("COMMITting Solr index changes..");
      final StringWriter sw=new StringWriter();
      t.commit(sw);
      warnIfNotExpectedResponse(sw.toString(),SOLR_OK_RESPONSE_EXCERPT);
    }
    info(posted + " files POSTed to " + solrUrl);
  }
 catch (  IOException ioe) {
    fatal("Unexpected IOException " + ioe);
  }
}
