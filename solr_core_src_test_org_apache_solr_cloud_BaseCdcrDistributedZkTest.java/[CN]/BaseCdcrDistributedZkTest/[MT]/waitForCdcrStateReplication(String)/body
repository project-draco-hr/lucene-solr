{
  log.info("Wait for CDCR state to replicate - collection: " + collection);
  int cnt=30;
  while (cnt > 0) {
    NamedList status=null;
    boolean allEquals=true;
    for (    CloudJettyRunner jetty : cloudJettys.get(collection)) {
      NamedList rsp=invokeCdcrAction(jetty,CdcrParams.CdcrAction.STATUS);
      if (status == null) {
        status=(NamedList)rsp.get(CdcrParams.CdcrAction.STATUS.toLower());
        continue;
      }
      allEquals&=status.equals(rsp.get(CdcrParams.CdcrAction.STATUS.toLower()));
    }
    if (allEquals) {
      break;
    }
 else {
      if (cnt == 0) {
        throw new RuntimeException("Timeout waiting for CDCR state to replicate: collection=" + collection);
      }
      cnt--;
      Thread.sleep(500);
    }
  }
  log.info("CDCR state is identical across nodes - collection: " + collection);
}
