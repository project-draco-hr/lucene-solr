{
  loadFeature("match",SolrFeature.class.getCanonicalName(),"test4","{\"q\":\"{!terms f=title}different\"}");
  loadFeature("c4",ValueFeature.class.getCanonicalName(),"test4","{\"value\":1.0}");
  loadModel("sum4",LinearModel.class.getCanonicalName(),new String[]{"match"},"test4","{\"weights\":{\"match\":1.0}}");
  final SolrQuery query=new SolrQuery();
  query.setQuery("title:bloomberg");
  query.add("rows","10");
  query.add("fl","*,score,fv:[fv store=test4 fvwt=json]");
  query.add("rq","{!ltr reRankDocs=10 model=sum4}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=={'match':1.0,'c4':1.0}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=={'c4':1.0}");
  query.remove("fl");
  query.add("fl","*,score,fv:[fv store=test4 format=sparse fvwt=json]");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=={'match':1.0,'c4':1.0}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=={'c4':1.0}");
  query.remove("fl");
  query.add("fl","*,score,fv:[fv store=test4 format=dense fvwt=json]");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=={'match':1.0,'c4':1.0}");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=={'match':0.0,'c4':1.0}");
  query.remove("fl");
  query.add("fl","*,score,fv:[fv store=test4 fvwt=csv]");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=='match:1.0;c4:1.0'");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=='c4:1.0'");
  query.remove("fl");
  query.add("fl","*,score,fv:[fv store=test4 format=sparse fvwt=csv]");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=='match:1.0;c4:1.0'");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=='c4:1.0'");
  query.remove("fl");
  query.add("fl","*,score,fv:[fv store=test4 format=dense fvwt=csv]");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[0]/fv/=='match:1.0;c4:1.0'");
  assertJQ("/query" + query.toQueryString(),"/response/docs/[1]/fv/=='match:0.0;c4:1.0'");
}
