{
  File indexDir=new File(System.getProperty("tempDir"),"otherfiles");
  Directory dir=new FSDirectory(indexDir,null);
  try {
    IndexOutput out=dir.createOutput("myrandomfile");
    out.writeByte((byte)42);
    out.close();
    new IndexWriter(dir,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED).close();
    assertTrue(dir.fileExists("myrandomfile"));
    Directory dir2=new RAMDirectory(dir);
    assertTrue(!dir2.fileExists("myrandomfile"));
  }
  finally {
    dir.close();
    _TestUtil.rmDir(indexDir);
  }
}
