{
  RAMDirectory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  writer.flush();
  writer.close();
  IndexReader reader=IndexReader.open(dir,true);
  assertEquals(0,reader.maxDoc());
  assertEquals(0,reader.numDocs());
  reader.close();
  writer=new IndexWriter(dir,new WhitespaceAnalyzer(),false,IndexWriter.MaxFieldLength.LIMITED);
  writer.flush();
  writer.close();
  reader=IndexReader.open(dir,true);
  assertEquals(0,reader.maxDoc());
  assertEquals(0,reader.numDocs());
  reader.close();
}
