{
  Directory dir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(TEST_VERSION_CURRENT),new IndexWriter.MaxFieldLength(100000));
  Document doc=new Document();
  StringBuilder b=new StringBuilder();
  for (int i=0; i < 10000; i++)   b.append(" a");
  b.append(" x");
  doc.add(new Field("field",b.toString(),Field.Store.NO,Field.Index.ANALYZED));
  writer.addDocument(doc);
  writer.close();
  IndexReader reader=IndexReader.open(dir,true);
  Term t=new Term("field","x");
  assertEquals(1,reader.docFreq(t));
  reader.close();
  dir.close();
}
