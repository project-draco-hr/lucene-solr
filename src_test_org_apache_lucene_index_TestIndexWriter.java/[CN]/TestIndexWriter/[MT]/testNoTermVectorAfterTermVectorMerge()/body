{
  MockRAMDirectory dir=new MockRAMDirectory();
  IndexWriter iw=new IndexWriter(dir,new StandardAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  Document document=new Document();
  document.add(new Field("tvtest","a b c",Field.Store.NO,Field.Index.TOKENIZED,Field.TermVector.YES));
  iw.addDocument(document);
  iw.flush();
  document=new Document();
  document.add(new Field("tvtest","x y z",Field.Store.NO,Field.Index.TOKENIZED,Field.TermVector.NO));
  iw.addDocument(document);
  iw.flush();
  iw.optimize();
  document.add(new Field("tvtest","a b c",Field.Store.NO,Field.Index.TOKENIZED,Field.TermVector.YES));
  iw.addDocument(document);
  iw.flush();
  iw.optimize();
  iw.close();
  dir.close();
}
