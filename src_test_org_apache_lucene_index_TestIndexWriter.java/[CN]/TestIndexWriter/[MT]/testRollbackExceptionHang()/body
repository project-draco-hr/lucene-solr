{
  MockRAMDirectory dir=new MockRAMDirectory();
  MockIndexWriter4 w=new MockIndexWriter4(dir,false,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  addDoc(w);
  w.doFail=true;
  try {
    w.rollback();
    fail("did not hit intentional RuntimeException");
  }
 catch (  RuntimeException re) {
  }
  w.doFail=false;
  w.rollback();
}
