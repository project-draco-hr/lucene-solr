{
  RAMDirectory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  writer.setRAMBufferSizeMB(0.000001);
  int lastNumFile=dir.list().length;
  for (int j=0; j < 9; j++) {
    Document doc=new Document();
    doc.add(new Field("field","aaa" + j,Field.Store.YES,Field.Index.TOKENIZED));
    writer.addDocument(doc);
    int numFile=dir.list().length;
    assertTrue(numFile > lastNumFile);
    lastNumFile=numFile;
  }
  writer.close();
  dir.close();
}
