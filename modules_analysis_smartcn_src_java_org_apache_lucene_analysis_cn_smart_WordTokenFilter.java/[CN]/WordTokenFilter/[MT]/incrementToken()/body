{
  if (tokenIter == null || !tokenIter.hasNext()) {
    if (input.incrementToken()) {
      tokStart=offsetAtt.startOffset();
      tokEnd=offsetAtt.endOffset();
      hasIllegalOffsets=(tokStart + termAtt.length()) != tokEnd;
      tokenBuffer=wordSegmenter.segmentSentence(termAtt.toString(),offsetAtt.startOffset());
      tokenIter=tokenBuffer.iterator();
      if (!tokenIter.hasNext())       return false;
    }
 else {
      return false;
    }
  }
  clearAttributes();
  SegToken nextWord=tokenIter.next();
  termAtt.copyBuffer(nextWord.charArray,0,nextWord.charArray.length);
  if (hasIllegalOffsets) {
    offsetAtt.setOffset(tokStart,tokEnd);
  }
 else {
    offsetAtt.setOffset(nextWord.startOffset,nextWord.endOffset);
  }
  typeAtt.setType("word");
  return true;
}
