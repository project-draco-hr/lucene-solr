{
  if (instanceDir == null) {
    this.instanceDir=SolrResourceLoader.locateSolrHome();
    log.info("new SolrResourceLoader for deduced Solr Home: '{}'",this.instanceDir);
  }
 else {
    this.instanceDir=normalizeDir(instanceDir);
    log.info("new SolrResourceLoader for directory: '{}'",this.instanceDir);
  }
  this.classLoader=createClassLoader(null,parent);
  if (!this.instanceDir.equals(SolrResourceLoader.locateSolrHome())) {
    addToClassLoader("./lib/",null,true);
    reloadLuceneSPI();
  }
  this.coreProperties=coreProperties;
}
