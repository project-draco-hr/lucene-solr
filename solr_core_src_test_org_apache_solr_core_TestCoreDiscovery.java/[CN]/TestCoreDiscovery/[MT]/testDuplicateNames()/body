{
  setMeUp();
  addCoreWithProps("core1",makeCorePropFile("core1",false,true));
  addCoreWithProps("core2",makeCorePropFile("core2",false,false,"name=core1"));
  CoreContainer cc=null;
  try {
    cc=init();
    fail("Should have thrown exception in testDuplicateNames");
  }
 catch (  SolrException se) {
    Throwable cause=se.getCause();
    String message=cause.getMessage();
    assertTrue("Should have seen an exception because two cores had the same name",message.indexOf("Core core1 defined more than once") != -1);
    assertTrue("/core1 should have been mentioned in the message",message.indexOf("/core1") != -1);
    assertTrue("/core2 should have been mentioned in the message",message.indexOf("/core2") != -1);
  }
 finally {
    if (cc != null) {
      cc.shutdown();
    }
  }
}
