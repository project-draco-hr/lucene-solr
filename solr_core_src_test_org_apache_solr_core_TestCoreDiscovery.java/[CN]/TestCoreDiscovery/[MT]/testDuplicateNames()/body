{
  setMeUp();
  addCoreWithProps("core1",makeCorePropFile("core1",false,true));
  addCoreWithProps("core2",makeCorePropFile("core2",false,false,"name=core1"));
  CoreContainer cc=null;
  try {
    cc=init();
    fail("Should have thrown exception in testDuplicateNames");
  }
 catch (  SolrException se) {
    String message=se.getMessage();
    assertTrue("Wrong exception thrown on duplicate core names",message.indexOf("Found multiple cores with the name [core1]") != -1);
    assertTrue(File.separator + "core1 should have been mentioned in the message: " + message,message.indexOf(File.separator + "core1") != -1);
    assertTrue(File.separator + "core2 should have been mentioned in the message:" + message,message.indexOf(File.separator + "core2") != -1);
  }
 finally {
    if (cc != null) {
      cc.shutdown();
    }
  }
}
