{
  File noCoreDir=new File(TEMP_DIR,"noCoreDir");
  if (noCoreDir.exists())   FileUtils.deleteDirectory(noCoreDir);
  noCoreDir.mkdirs();
  setMeUp(noCoreDir.getAbsolutePath());
  addCoreWithProps(makeCorePropFile("core1",false,true),new File(noCoreDir,"core1" + File.separator + SolrCoreDiscoverer.CORE_PROP_FILE));
  addCoreWithProps(makeCorePropFile("core2",false,false),new File(noCoreDir,"core2" + File.separator + SolrCoreDiscoverer.CORE_PROP_FILE));
  CoreContainer cc=init();
  try {
    SolrCore core1=cc.getCore("core1");
    SolrCore core2=cc.getCore("core2");
    assertNotNull(core1);
    assertNotNull(core2);
    core1.close();
    core2.close();
  }
  finally {
    cc.shutdown();
    if (noCoreDir.exists())     FileUtils.deleteDirectory(noCoreDir);
  }
}
