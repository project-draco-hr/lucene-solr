{
  File homeDir=solrHomeDirectory;
  setMeUp(homeDir.getAbsolutePath());
  addCoreWithProps(makeCorePropFile("core1",false,true),new File(homeDir,"core1" + File.separator + CorePropertiesLocator.PROPERTIES_FILENAME));
  homeDir.setReadable(false,false);
  CoreContainer cc=null;
  try {
    cc=init();
  }
 catch (  Exception ex) {
    String eoe=ex.getMessage();
    assertTrue("Should have had a runtime exception here",0 < ex.getMessage().indexOf("doesn't have read permissions"));
  }
 finally {
    if (cc != null) {
      cc.shutdown();
    }
  }
  homeDir.setReadable(true,false);
}
