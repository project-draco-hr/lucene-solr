{
  File homeDir=solrHomeDirectory;
  setMeUp(homeDir.getAbsolutePath());
  addCoreWithProps(makeCorePropFile("core1",false,true),new File(homeDir,"core1" + File.separator + CorePropertiesLocator.PROPERTIES_FILENAME));
  assumeTrue("Cannot make " + homeDir + " non-readable. Test aborted.",homeDir.setReadable(false,false));
  CoreContainer cc=null;
  try {
    cc=init();
    fail("Should have thrown an exception here");
  }
 catch (  Exception ex) {
    assertThat(ex.getMessage(),containsString("Error reading core root directory"));
  }
 finally {
    if (cc != null) {
      cc.shutdown();
    }
  }
  homeDir.setReadable(true,false);
}
