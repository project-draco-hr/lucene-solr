{
  DoubleMetaphoneFilterFactory factory=new DoubleMetaphoneFilterFactory();
  Map<String,String> parameters=new HashMap<String,String>();
  parameters.put("inject","false");
  parameters.put("maxCodeLength","8");
  factory.init(parameters);
  TokenStream inputStream=new IterTokenStream("international");
  TokenStream filteredStream=factory.create(inputStream);
  assertEquals(DoubleMetaphoneFilter.class,filteredStream.getClass());
  Token token=filteredStream.next(new Token());
  assertEquals(8,token.termLength());
  assertEquals("ANTRNXNL",new String(token.termBuffer(),0,token.termLength()));
  assertNull(filteredStream.next(new Token()));
}
