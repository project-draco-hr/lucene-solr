{
  if (snapshot != null)   snapshot=null;
 else   throw new IllegalStateException("snapshot was not set; please call snapshot() first");
}
