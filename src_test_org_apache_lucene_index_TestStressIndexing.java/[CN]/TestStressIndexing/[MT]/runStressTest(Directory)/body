{
  IndexModifier modifier=new IndexModifier(directory,ANALYZER,true);
  IndexerThread indexerThread=new IndexerThread(modifier);
  indexerThread.start();
  SearcherThread searcherThread1=new SearcherThread(directory);
  searcherThread1.start();
  SearcherThread searcherThread2=new SearcherThread(directory);
  searcherThread2.start();
  indexerThread.join();
  searcherThread1.join();
  searcherThread2.join();
  assertTrue("hit unexpected exception in indexer",!indexerThread.failed);
  assertTrue("hit unexpected exception in search1",!searcherThread1.failed);
  assertTrue("hit unexpected exception in search2",!searcherThread2.failed);
}
