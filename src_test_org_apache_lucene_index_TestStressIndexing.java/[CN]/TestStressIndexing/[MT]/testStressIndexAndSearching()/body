{
  RANDOM=newRandom();
  Directory directory=new MockRAMDirectory();
  runStressTest(directory,true,null);
  directory.close();
  String tempDir=System.getProperty("java.io.tmpdir");
  File dirPath=new File(tempDir,"lucene.test.stress");
  directory=FSDirectory.open(dirPath);
  runStressTest(directory,true,null);
  directory.close();
  directory=new MockRAMDirectory();
  runStressTest(directory,true,new ConcurrentMergeScheduler());
  directory.close();
  directory=FSDirectory.open(dirPath);
  runStressTest(directory,true,new ConcurrentMergeScheduler());
  directory.close();
  directory=new MockRAMDirectory();
  runStressTest(directory,false,new ConcurrentMergeScheduler());
  directory.close();
  directory=FSDirectory.open(dirPath);
  runStressTest(directory,false,new ConcurrentMergeScheduler());
  directory.close();
  _TestUtil.rmDir(dirPath);
}
