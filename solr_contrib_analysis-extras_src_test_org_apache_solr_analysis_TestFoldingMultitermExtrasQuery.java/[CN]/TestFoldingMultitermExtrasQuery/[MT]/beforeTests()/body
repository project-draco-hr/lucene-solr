{
  File testHome=createTempDir().toFile();
  FileUtils.copyDirectory(getFile("analysis-extras/solr"),testHome);
  initCore("solrconfig-icucollate.xml","schema-folding-extra.xml",testHome.getAbsolutePath());
  int idx=1;
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","BadMagicICUFolding"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","Ru??"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","??????????"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","??????????"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","r??sum??"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","re\u0301sume\u0301"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","EL??F"));
  assertU(adoc("id",Integer.toString(idx++),"content_icufolding","eli\u0307f"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","BadMagicICUFolding"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","Ru??"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","??????????"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","??????????"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","r??sum??"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","re\u0301sume\u0301"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","EL??F"));
  assertU(adoc("id",Integer.toString(idx++),"content_icunormalizer2","eli\u0307f"));
  assertU(adoc("id",Integer.toString(idx++),"content_icutransform","????????????????????"));
  assertU(commit());
}
