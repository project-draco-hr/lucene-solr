{
  parsed=true;
  SolrParams solrParams=SolrParams.wrapDefaults(localParams,params);
  queryFields=parseQueryFields(req.getSchema(),solrParams);
  BooleanQuery.Builder query=new BooleanQuery.Builder();
  query.setDisableCoord(true);
  boolean notBlank=addMainQuery(query,solrParams);
  if (!notBlank)   return null;
  addBoostQuery(query,solrParams);
  addBoostFunctions(query,solrParams);
  return query.build();
}
