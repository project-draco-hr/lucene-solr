{
  for (int i=0; i < DocHelper.fields.length; i++) {
    Fieldable f=DocHelper.fields[i];
    if (f.isIndexed()) {
      assertEquals(reader.hasNorms(f.name()),!f.getOmitNorms());
      assertEquals(reader.hasNorms(f.name()),!DocHelper.noNorms.containsKey(f.name()));
      if (!reader.hasNorms(f.name())) {
        byte[] norms=reader.norms(f.name());
        byte norm1=DefaultSimilarity.encodeNorm(1.0f);
        if (reader.getDisableFakeNorms())         assertNull(norms);
 else {
          assertEquals(norms.length,reader.maxDoc());
          for (int j=0; j < reader.maxDoc(); j++) {
            assertEquals(norms[j],norm1);
          }
        }
        norms=new byte[reader.maxDoc()];
        reader.norms(f.name(),norms,0);
        for (int j=0; j < reader.maxDoc(); j++) {
          assertEquals(norms[j],norm1);
        }
      }
    }
  }
}
