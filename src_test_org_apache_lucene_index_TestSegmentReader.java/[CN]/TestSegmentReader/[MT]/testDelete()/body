{
  Document docToDelete=new Document();
  DocHelper.setupDoc(docToDelete);
  DocHelper.writeDoc(dir,"seg-to-delete",docToDelete);
  try {
    SegmentReader deleteReader=new SegmentReader(new SegmentInfo("seg-to-delete",1,dir));
    assertTrue(deleteReader != null);
    assertTrue(deleteReader.numDocs() == 1);
    deleteReader.delete(0);
    assertTrue(deleteReader.isDeleted(0) == true);
    assertTrue(deleteReader.hasDeletions() == true);
    assertTrue(deleteReader.numDocs() == 0);
    try {
      Document test=deleteReader.document(0);
      assertTrue(false);
    }
 catch (    IllegalArgumentException e) {
      assertTrue(true);
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
    assertTrue(false);
  }
}
