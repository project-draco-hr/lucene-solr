{
  Document docToDelete=new Document();
  DocHelper.setupDoc(docToDelete);
  SegmentInfo info=DocHelper.writeDoc(dir,docToDelete);
  SegmentReader deleteReader=SegmentReader.get(info);
  assertTrue(deleteReader != null);
  assertTrue(deleteReader.numDocs() == 1);
  deleteReader.deleteDocument(0);
  assertTrue(deleteReader.isDeleted(0) == true);
  assertTrue(deleteReader.hasDeletions() == true);
  assertTrue(deleteReader.numDocs() == 0);
  try {
    deleteReader.document(0);
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}
