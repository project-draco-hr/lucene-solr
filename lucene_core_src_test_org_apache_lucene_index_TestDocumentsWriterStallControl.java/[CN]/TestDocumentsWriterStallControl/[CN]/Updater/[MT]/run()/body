{
  try {
    SimpleMemCtrl memCtrl=new SimpleMemCtrl();
    memCtrl.limit=1000;
    memCtrl.netBytes=release ? 1 : 2000;
    while (!stop.get()) {
      int internalIters=release && random().nextBoolean() ? atLeast(5) : 1;
      for (int i=0; i < internalIters; i++) {
        ctrl.updateStalled(memCtrl);
      }
      if (checkPoint.get()) {
        CountDownLatch join=latches[0];
        CountDownLatch wait=latches[1];
        join.countDown();
        try {
          wait.await();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
      }
      Thread.yield();
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
    exceptions.add(e);
  }
}
