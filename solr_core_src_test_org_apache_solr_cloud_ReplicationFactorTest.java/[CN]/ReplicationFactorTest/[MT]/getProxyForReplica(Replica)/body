{
  String replicaBaseUrl=replica.getStr(ZkStateReader.BASE_URL_PROP);
  assertNotNull(replicaBaseUrl);
  URL baseUrl=new URL(replicaBaseUrl);
  SocketProxy proxy=proxies.get(baseUrl.toURI());
  if (proxy == null && !baseUrl.toExternalForm().endsWith("/")) {
    baseUrl=new URL(baseUrl.toExternalForm() + "/");
    proxy=proxies.get(baseUrl.toURI());
  }
  assertNotNull("No proxy found for " + baseUrl + "!",proxy);
  return proxy;
}
