{
  this.assertState(SOURCE_COLLECTION,CdcrParams.ProcessState.STOPPED,CdcrParams.BufferState.ENABLED);
  NamedList rsp=invokeCdcrAction(shardToLeaderJetty.get(SOURCE_COLLECTION).get(SHARD1),CdcrParams.CdcrAction.DISABLEBUFFER);
  NamedList status=(NamedList)rsp.get(CdcrParams.CdcrAction.STATUS.toLower());
  assertEquals(CdcrParams.BufferState.DISABLED.toLower(),status.get(CdcrParams.BufferState.getParam()));
  this.assertState(SOURCE_COLLECTION,CdcrParams.ProcessState.STOPPED,CdcrParams.BufferState.DISABLED);
  this.restartServer(shardToLeaderJetty.get(SOURCE_COLLECTION).get(SHARD1));
  this.assertState(SOURCE_COLLECTION,CdcrParams.ProcessState.STOPPED,CdcrParams.BufferState.DISABLED);
  rsp=invokeCdcrAction(shardToLeaderJetty.get(SOURCE_COLLECTION).get(SHARD2),CdcrParams.CdcrAction.ENABLEBUFFER);
  status=(NamedList)rsp.get(CdcrParams.CdcrAction.STATUS.toLower());
  assertEquals(CdcrParams.BufferState.ENABLED.toLower(),status.get(CdcrParams.BufferState.getParam()));
  this.assertState(SOURCE_COLLECTION,CdcrParams.ProcessState.STOPPED,CdcrParams.BufferState.ENABLED);
}
