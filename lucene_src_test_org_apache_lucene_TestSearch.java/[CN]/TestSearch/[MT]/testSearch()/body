{
  Random random=newRandom();
  StringWriter sw=new StringWriter();
  PrintWriter pw=new PrintWriter(sw,true);
  doTestSearch(random,pw,false);
  pw.close();
  sw.close();
  String multiFileOutput=sw.getBuffer().toString();
  sw=new StringWriter();
  pw=new PrintWriter(sw,true);
  doTestSearch(random,pw,true);
  pw.close();
  sw.close();
  String singleFileOutput=sw.getBuffer().toString();
  assertEquals(multiFileOutput,singleFileOutput);
}
