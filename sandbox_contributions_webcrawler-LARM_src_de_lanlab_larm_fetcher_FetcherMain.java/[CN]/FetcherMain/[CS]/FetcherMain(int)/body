{
  messageHandler=new MessageHandler();
  SimpleLogger storeLog=new SimpleLogger("store",false);
  SimpleLogger linksLog=new SimpleLogger("links",false);
  this.storage=new LogStorage(storeLog,true,"logs/pagefile");
  urlScopeFilter=new URLScopeFilter();
  urlVisitedFilter=new URLVisitedFilter(100000,linksLog);
  hostManager=new HostManager(1000);
  reFilter=new RobotExclusionFilter(hostManager);
  fetcher=new Fetcher(nrThreads,storage,hostManager);
  knownPathsFilter=new KnownPathsFilter();
  urlLengthFilter=new URLLengthFilter(255);
  HTTPConnection.setDefaultAllowUserInteraction(false);
  HTTPConnection.removeDefaultModule(HTTPClient.ContentEncodingModule.class);
  fetcher.init();
  monitor=new ThreadMonitor(urlLengthFilter,urlVisitedFilter,urlScopeFilter,reFilter,messageHandler,fetcher.getThreadPool(),hostManager,5000);
  messageHandler.addListener(urlLengthFilter);
  messageHandler.addListener(urlScopeFilter);
  messageHandler.addListener(reFilter);
  messageHandler.addListener(urlVisitedFilter);
  messageHandler.addListener(knownPathsFilter);
  messageHandler.addListener(fetcher);
}
