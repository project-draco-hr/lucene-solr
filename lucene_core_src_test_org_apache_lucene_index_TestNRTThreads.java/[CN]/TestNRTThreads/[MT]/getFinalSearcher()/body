{
  final IndexReader r2;
  if (random().nextBoolean()) {
    r2=writer.getReader();
  }
 else {
    writer.commit();
    r2=IndexReader.open(dir);
  }
  return newSearcher(r2);
}
