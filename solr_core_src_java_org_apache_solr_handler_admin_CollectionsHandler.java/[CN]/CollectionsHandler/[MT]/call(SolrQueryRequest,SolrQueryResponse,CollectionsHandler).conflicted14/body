{
  String name=req.getParams().required().get(COLLECTION_PROP);
  String shard=req.getParams().get(SHARD_ID_PROP);
  String rangesStr=req.getParams().get(CoreAdminParams.RANGES);
  String splitKey=req.getParams().get("split.key");
  if (splitKey == null && shard == null) {
    throw new SolrException(ErrorCode.BAD_REQUEST,"Missing required parameter: shard");
  }
  if (splitKey != null && shard != null) {
    throw new SolrException(ErrorCode.BAD_REQUEST,"Only one of 'shard' or 'split.key' should be specified");
  }
  if (splitKey != null && rangesStr != null) {
    throw new SolrException(ErrorCode.BAD_REQUEST,"Only one of 'ranges' or 'split.key' should be specified");
  }
  Map<String,Object> map=req.getParams().getAll(null,COLLECTION_PROP,SHARD_ID_PROP,"split.key",CoreAdminParams.RANGES);
  return copyPropertiesWithPrefix(req.getParams(),map,COLL_PROP_PREFIX);
}
