{
  log.info("Syncing shard : " + req.getParamString());
  String collection=req.getParams().required().get("collection");
  String shard=req.getParams().required().get("shard");
  ClusterState clusterState=coreContainer.getZkController().getClusterState();
  ZkNodeProps leaderProps=clusterState.getLeader(collection,shard);
  ZkCoreNodeProps nodeProps=new ZkCoreNodeProps(leaderProps);
  HttpSolrClient server=new HttpSolrClient(nodeProps.getBaseUrl());
  try {
    server.setConnectionTimeout(15000);
    server.setSoTimeout(60000);
    RequestSyncShard reqSyncShard=new CoreAdminRequest.RequestSyncShard();
    reqSyncShard.setCollection(collection);
    reqSyncShard.setShard(shard);
    reqSyncShard.setCoreName(nodeProps.getCoreName());
    server.request(reqSyncShard);
  }
  finally {
    server.shutdown();
  }
}
