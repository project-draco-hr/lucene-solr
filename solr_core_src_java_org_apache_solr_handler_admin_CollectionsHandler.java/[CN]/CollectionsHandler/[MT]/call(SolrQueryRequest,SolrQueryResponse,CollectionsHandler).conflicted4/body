{
  Map<String,Object> map=req.getParams().required().getAll(null,COLLECTION_PROP,PROPERTY_PROP);
  Boolean shardUnique=Boolean.parseBoolean(req.getParams().get(SHARD_UNIQUE));
  String prop=req.getParams().get(PROPERTY_PROP).toLowerCase(Locale.ROOT);
  if (!StringUtils.startsWith(prop,COLL_PROP_PREFIX)) {
    prop=COLL_PROP_PREFIX + prop;
  }
  if (!shardUnique && !SliceMutator.SLICE_UNIQUE_BOOLEAN_PROPERTIES.contains(prop)) {
    throw new SolrException(ErrorCode.BAD_REQUEST,"Balancing properties amongst replicas in a slice requires that" + " the property be pre-defined as a unique property (e.g. 'preferredLeader') or that 'shardUnique' be set to 'true'. " + " Property: " + prop + " shardUnique: "+ Boolean.toString(shardUnique));
  }
  return req.getParams().getAll(map,ONLY_ACTIVE_NODES,SHARD_UNIQUE);
}
