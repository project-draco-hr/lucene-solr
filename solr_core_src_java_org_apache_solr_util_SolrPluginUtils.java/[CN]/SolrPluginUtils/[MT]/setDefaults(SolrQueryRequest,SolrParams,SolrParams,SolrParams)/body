{
  String useParams=req.getParams().get("useParam");
  if (useParams != null) {
    for (    String name : StrUtils.splitSmart(useParams,',')) {
      InitParams initParams=req.getCore().getSolrConfig().getInitParams().get(name);
      if (initParams != null) {
        if (initParams.defaults != null)         defaults=SolrParams.wrapDefaults(SolrParams.toSolrParams(initParams.defaults),defaults);
        if (initParams.invariants != null)         invariants=SolrParams.wrapDefaults(invariants,SolrParams.toSolrParams(initParams.invariants));
        if (initParams.appends != null)         appends=SolrParams.wrapAppended(appends,SolrParams.toSolrParams(initParams.appends));
      }
    }
  }
  SolrParams p=req.getParams();
  p=SolrParams.wrapDefaults(p,defaults);
  p=SolrParams.wrapAppended(p,appends);
  p=SolrParams.wrapDefaults(invariants,p);
  req.setParams(p);
}
