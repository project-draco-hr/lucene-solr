{
  List<String> names=new ArrayList<String>(oldNames.length + oldOptimizedNames.length);
  names.addAll(Arrays.asList(oldNames));
  names.addAll(Arrays.asList(oldOptimizedNames));
  for (  String name : names) {
    if (VERBOSE) {
      System.out.println("testUpgradeOldIndex: index=" + name);
    }
    File oldIndxeDir=_TestUtil.getTempDir(name);
    _TestUtil.unzip(getDataFile("index." + name + ".zip"),oldIndxeDir);
    Directory dir=newFSDirectory(oldIndxeDir);
    new IndexUpgrader(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,null),VERBOSE ? System.out : null,false).upgrade();
    checkAllSegmentsUpgraded(dir);
    dir.close();
    _TestUtil.rmDir(oldIndxeDir);
  }
}
