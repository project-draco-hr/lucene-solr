{
  Random rand=newRandom();
  for (int i=0; i < oldNames.length; i++) {
    unzip(getDataFile("index." + oldNames[i] + ".zip"),oldNames[i]);
    String fullPath=fullDir(oldNames[i]);
    Directory dir=FSDirectory.open(new File(fullPath));
    FlexTestUtil.verifyFlexVsPreFlex(rand,dir);
    IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer()));
    w.optimize();
    FlexTestUtil.verifyFlexVsPreFlex(rand,w);
    w.close();
    _TestUtil.checkIndex(dir);
    dir.close();
    rmDir(oldNames[i]);
  }
}
