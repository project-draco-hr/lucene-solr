{
  final int maxDoc=reader.maxDoc();
  DocIdSet docIdSet=docids.getDocIDs();
  final FixedBitSet complement;
  if (docIdSet instanceof FixedBitSet) {
    complement=((FixedBitSet)docIdSet).clone();
  }
 else {
    complement=new FixedBitSet(maxDoc);
    DocIdSetIterator iter=docIdSet.iterator();
    int doc;
    while ((doc=iter.nextDoc()) < maxDoc) {
      complement.set(doc);
    }
  }
  complement.flip(0,maxDoc);
  clearDeleted(reader,complement);
  return createScoredDocIds(complement,maxDoc);
}
