{
  Analyzer analyzer=new StandardAnalyzer();
  Directory directory=new RAMDirectory();
  IndexWriter iwriter=new IndexWriter(directory,analyzer,true,new IndexWriter.MaxFieldLength(25000));
  Document doc=new Document();
  String text="This is the text to be indexed.";
  doc.add(new Field("fieldname",text,Field.Store.YES,Field.Index.TOKENIZED));
  iwriter.addDocument(doc);
  iwriter.close();
  IndexSearcher isearcher=new IndexSearcher(directory);
  QueryParser parser=new QueryParser("fieldname",analyzer);
  Query query=parser.parse("text");
  Hits hits=isearcher.search(query);
  assertEquals(1,hits.length());
  for (int i=0; i < hits.length(); i++) {
    Document hitDoc=hits.doc(i);
    assertEquals("This is the text to be indexed.",hitDoc.get("fieldname"));
  }
  isearcher.close();
  directory.close();
}
