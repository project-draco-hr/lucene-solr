{
  super.setUp();
  createTempDir();
  dataDir2=TestUtil.createTempDir(LuceneTestCase.getTestClass().getSimpleName());
  home=ExternalPaths.EXAMPLE_MULTICORE_HOME;
  System.setProperty("solr.solr.home",home);
  System.setProperty("solr.core0.data.dir",dataDir.getCanonicalPath());
  System.setProperty("solr.core1.data.dir",dataDir2.getCanonicalPath());
  zkDir=dataDir.getAbsolutePath() + File.separator + "zookeeper/server1/data";
  zkServer=new ZkTestServer(zkDir);
  zkServer.run();
  SolrZkClient zkClient=new SolrZkClient(zkServer.getZkHost(),AbstractZkTestCase.TIMEOUT);
  zkClient.makePath("/solr",false,true);
  zkClient.close();
  System.setProperty("zkHost",zkServer.getZkAddress());
}
