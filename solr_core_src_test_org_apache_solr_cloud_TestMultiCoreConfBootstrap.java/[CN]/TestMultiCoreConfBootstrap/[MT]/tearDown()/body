{
  System.clearProperty("bootstrap_confdir");
  System.clearProperty("zkHost");
  System.clearProperty("solr.solr.home");
  if (cores != null)   cores.shutdown();
  zkServer.shutdown();
  File dataDir1=new File(home + File.separator + "core0","data");
  File dataDir2=new File(home + File.separator + "core1","data");
  String skip=System.getProperty("solr.test.leavedatadir");
  if (null != skip && 0 != skip.trim().length()) {
    log.info("NOTE: per solr.test.leavedatadir, dataDir will not be removed: " + dataDir.getAbsolutePath());
  }
 else {
    if (!AbstractSolrTestCase.recurseDelete(dataDir1)) {
      log.warn("!!!! WARNING: best effort to remove " + dataDir.getAbsolutePath() + " FAILED !!!!!");
    }
    if (!AbstractSolrTestCase.recurseDelete(dataDir2)) {
      log.warn("!!!! WARNING: best effort to remove " + dataDir.getAbsolutePath() + " FAILED !!!!!");
    }
  }
  super.tearDown();
}
