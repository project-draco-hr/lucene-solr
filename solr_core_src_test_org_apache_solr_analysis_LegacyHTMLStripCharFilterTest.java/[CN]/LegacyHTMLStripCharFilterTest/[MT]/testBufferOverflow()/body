{
  StringBuilder testBuilder=new StringBuilder(LegacyHTMLStripCharFilter.DEFAULT_READ_AHEAD + 50);
  testBuilder.append("ah<?> ??????");
  appendChars(testBuilder,LegacyHTMLStripCharFilter.DEFAULT_READ_AHEAD + 500);
  processBuffer(testBuilder.toString(),"Failed on pseudo proc. instr.");
  testBuilder.setLength(0);
  testBuilder.append("<!--");
  appendChars(testBuilder,3 * LegacyHTMLStripCharFilter.DEFAULT_READ_AHEAD + 500);
  testBuilder.append("-->foo");
  processBuffer(testBuilder.toString(),"Failed w/ comment");
  testBuilder.setLength(0);
  testBuilder.append("<?");
  appendChars(testBuilder,LegacyHTMLStripCharFilter.DEFAULT_READ_AHEAD + 500);
  testBuilder.append("?>");
  processBuffer(testBuilder.toString(),"Failed with proc. instr.");
  testBuilder.setLength(0);
  testBuilder.append("<b ");
  appendChars(testBuilder,LegacyHTMLStripCharFilter.DEFAULT_READ_AHEAD + 500);
  testBuilder.append("/>");
  processBuffer(testBuilder.toString(),"Failed on tag");
}
