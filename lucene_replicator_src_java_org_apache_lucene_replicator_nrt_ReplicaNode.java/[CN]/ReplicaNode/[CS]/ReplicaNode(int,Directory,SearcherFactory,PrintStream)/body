{
  super(id,dir,searcherFactory,printStream);
  if (dir instanceof FSDirectory && ((FSDirectory)dir).checkPendingDeletions()) {
    throw new IllegalArgumentException("Directory " + dir + " still has pending deleted files; cannot initialize IndexWriter");
  }
  boolean success=false;
  try {
    message("top: init replica dir=" + dir);
    writeFileLock=dir.obtainLock(IndexWriter.WRITE_LOCK_NAME);
    state="init";
    deleter=new ReplicaFileDeleter(this,dir);
  }
 catch (  Throwable t) {
    message("exc on init:");
    t.printStackTrace(printStream);
    throw t;
  }
 finally {
    if (success == false) {
      IOUtils.closeWhileHandlingException(this);
    }
  }
}
