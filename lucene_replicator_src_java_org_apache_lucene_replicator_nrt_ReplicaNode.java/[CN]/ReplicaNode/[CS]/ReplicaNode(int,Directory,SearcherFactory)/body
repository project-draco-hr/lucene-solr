{
  super(id,dir,searcherFactory);
  boolean success=false;
  try {
    message("top: init replica dir=" + dir);
    writeFileLock=dir.obtainLock(IndexWriter.WRITE_LOCK_NAME);
    state="init";
    deleter=new ReplicaFileDeleter(this,dir);
  }
 catch (  Throwable t) {
    message("exc on init:");
    t.printStackTrace(System.out);
    throw t;
  }
 finally {
    if (success == false) {
      IOUtils.closeWhileHandlingException(this);
    }
  }
}
