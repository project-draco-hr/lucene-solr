{
  final String abcD=block("abcD").asXML();
  log.info(abcD);
  assertBlockU(abcD);
  Document docToFail=DocumentHelper.createDocument();
  Element root=docToFail.addElement("add");
  Element doc1=root.addElement("doc");
  attachField(doc1,"id",id());
  attachField(doc1,parent,"Y");
  attachField(doc1,"sample_i","notanumber/ignore_exception");
  Element subDoc1=doc1.addElement("doc");
  attachField(subDoc1,"id",id());
  attachField(subDoc1,child,"x");
  Element doc2=root.addElement("doc");
  attachField(doc2,"id",id());
  attachField(doc2,parent,"W");
  assertFailedBlockU(docToFail.asXML());
  assertBlockU(block("efgH").asXML());
  assertBlockU(commit());
  final SolrIndexSearcher searcher=getSearcher();
  assertQ(req("q","*:*","indent","true","fl","id,parent_s,child_s"),"//*[@numFound='" + "abcDefgH".length() + "']");
  assertSingleParentOf(searcher,one("abc"),"D");
  assertSingleParentOf(searcher,one("efg"),"H");
  assertQ(req(child + ":x"),"//*[@numFound='0']");
  assertQ(req(parent + ":Y"),"//*[@numFound='0']");
  assertQ(req(parent + ":W"),"//*[@numFound='0']");
}
