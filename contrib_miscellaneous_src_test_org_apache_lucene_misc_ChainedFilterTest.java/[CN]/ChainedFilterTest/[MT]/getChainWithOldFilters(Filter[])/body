{
  Filter[] oldFilters=new Filter[chain.length];
  for (int i=0; i < chain.length; i++) {
    final Filter f=chain[i];
    oldFilters[i]=new Filter(){
      public BitSet bits(      IndexReader reader) throws IOException {
        BitSet bits=new BitSet(reader.maxDoc());
        DocIdSetIterator it=f.getDocIdSet(reader).iterator();
        while (it.next()) {
          bits.set(it.doc());
        }
        return bits;
      }
    }
;
  }
  return oldFilters;
}
