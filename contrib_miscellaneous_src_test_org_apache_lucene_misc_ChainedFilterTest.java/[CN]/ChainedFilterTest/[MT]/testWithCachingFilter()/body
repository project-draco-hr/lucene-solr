{
  for (int mode=0; mode < 2; mode++) {
    boolean old=(mode == 0);
    Directory dir=new RAMDirectory();
    Analyzer analyzer=new WhitespaceAnalyzer();
    IndexWriter writer=new IndexWriter(dir,analyzer,true,MaxFieldLength.LIMITED);
    writer.close();
    Searcher searcher=new IndexSearcher(dir);
    Query query=new TermQuery(new Term("none","none"));
    QueryWrapperFilter queryFilter=new QueryWrapperFilter(query);
    CachingWrapperFilter cachingFilter=new CachingWrapperFilter(queryFilter);
    searcher.search(query,cachingFilter,1);
    CachingWrapperFilter cachingFilter2=new CachingWrapperFilter(queryFilter);
    Filter[] chain=new Filter[2];
    chain[0]=cachingFilter;
    chain[1]=cachingFilter2;
    ChainedFilter cf=new ChainedFilter(chain);
    searcher.search(new MatchAllDocsQuery(),cf,1);
  }
}
