{
  MockRAMDirectory dir=new MockRAMDirectory();
  IndexWriter indexWriter=new IndexWriter(dir,new IndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer()));
  for (int i=0; i < 20; i++) {
    Document document=new Document();
    assembleDocument(document,i);
    indexWriter.addDocument(document);
  }
  indexWriter.close();
  IndexReader ir=IndexReader.open(dir,false);
  InstantiatedIndex ii=new InstantiatedIndex(ir);
  ir.close();
  testEqualBehaviour(dir,ii);
}
