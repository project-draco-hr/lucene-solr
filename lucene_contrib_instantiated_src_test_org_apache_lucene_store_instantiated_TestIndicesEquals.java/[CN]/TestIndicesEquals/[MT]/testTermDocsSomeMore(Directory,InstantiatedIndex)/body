{
  IndexReader aprioriReader=IndexReader.open(aprioriIndex,false);
  IndexReader testReader=testIndex.indexReaderFactory();
  Term t=new Term("c","danny");
  TermsEnum aprioriTermEnum=MultiFields.getTerms(aprioriReader,t.field()).iterator();
  aprioriTermEnum.seekCeil(new BytesRef(t.text()));
  TermsEnum testTermEnum=MultiFields.getTerms(testReader,t.field()).iterator();
  testTermEnum.seekCeil(new BytesRef(t.text()));
  assertEquals(aprioriTermEnum.term(),testTermEnum.term());
  DocsEnum aprioriTermDocs=aprioriTermEnum.docs(MultiFields.getDeletedDocs(aprioriReader),null);
  DocsEnum testTermDocs=testTermEnum.docs(MultiFields.getDeletedDocs(testReader),null);
  assertEquals(aprioriTermDocs.nextDoc(),testTermDocs.nextDoc());
  assertEquals(aprioriTermDocs.freq(),testTermDocs.freq());
  if (aprioriTermDocs.advance(4) != DocsEnum.NO_MORE_DOCS) {
    assertTrue(testTermDocs.advance(4) != DocsEnum.NO_MORE_DOCS);
    assertEquals(aprioriTermDocs.freq(),testTermDocs.freq());
    assertEquals(aprioriTermDocs.docID(),testTermDocs.docID());
  }
 else {
    assertEquals(DocsEnum.NO_MORE_DOCS,testTermDocs.advance(4));
  }
  if (aprioriTermDocs.nextDoc() != DocsEnum.NO_MORE_DOCS) {
    assertTrue(testTermDocs.nextDoc() != DocsEnum.NO_MORE_DOCS);
    assertEquals(aprioriTermDocs.freq(),testTermDocs.freq());
    assertEquals(aprioriTermDocs.docID(),testTermDocs.docID());
  }
 else {
    assertEquals(DocsEnum.NO_MORE_DOCS,testTermDocs.nextDoc());
  }
  if (aprioriTermDocs.advance(100) != DocsEnum.NO_MORE_DOCS) {
    assertTrue(testTermDocs.advance(100) != DocsEnum.NO_MORE_DOCS);
    assertEquals(aprioriTermDocs.freq(),testTermDocs.freq());
    assertEquals(aprioriTermDocs.docID(),testTermDocs.docID());
  }
 else {
    assertEquals(DocsEnum.NO_MORE_DOCS,testTermDocs.advance(100));
  }
  t=new Term("","");
  FieldsEnum apFieldsEnum=MultiFields.getFields(aprioriReader).iterator();
  String apFirstField=apFieldsEnum.next();
  FieldsEnum testFieldsEnum=MultiFields.getFields(testReader).iterator();
  String testFirstField=testFieldsEnum.next();
  assertEquals(apFirstField,testFirstField);
  aprioriTermEnum=apFieldsEnum.terms();
  testTermEnum=testFieldsEnum.terms();
  assertEquals(aprioriTermEnum.next(),testTermEnum.next());
  aprioriTermDocs=aprioriTermEnum.docs(MultiFields.getDeletedDocs(aprioriReader),aprioriTermDocs);
  testTermDocs=testTermEnum.docs(MultiFields.getDeletedDocs(testReader),testTermDocs);
  while (aprioriTermDocs.nextDoc() != DocsEnum.NO_MORE_DOCS) {
    assertTrue(testTermDocs.nextDoc() != DocsEnum.NO_MORE_DOCS);
    assertEquals(aprioriTermDocs.freq(),testTermDocs.freq());
    assertEquals(aprioriTermDocs.docID(),testTermDocs.docID());
  }
  assertEquals(DocsEnum.NO_MORE_DOCS,testTermDocs.nextDoc());
  aprioriReader.close();
  testReader.close();
}
