{
  SolrInputDocument doc=new SolrInputDocument();
  doc.setField("id","42");
  doc.setField("teststop","terma stopworda stopwordb stopwordc");
  UpdateRequest up=new UpdateRequest();
  up.setAction(ACTION.COMMIT,true,true);
  up.add(doc);
  up.process(getSolrCore());
  SolrQuery q=new SolrQuery();
  QueryRequest r=new QueryRequest(q);
  q.setQuery("teststop:terma");
  assertEquals(1,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopworda");
  assertEquals(0,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopwordb");
  assertEquals(0,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopwordc");
  assertEquals(1,r.process(getSolrCore()).getResults().size());
  overwriteStopwords("stopwordc\n");
  SolrServer coreadmin=getSolrAdmin();
  CoreAdminRequest.reloadCore(collection,coreadmin);
  up.process(getSolrCore());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:terma");
  assertEquals(1,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopworda");
  assertEquals(1,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopwordb");
  assertEquals(1,r.process(getSolrCore()).getResults().size());
  q=new SolrQuery();
  r=new QueryRequest(q);
  q.setQuery("teststop:stopwordc");
  assertEquals(0,r.process(getSolrCore()).getResults().size());
}
