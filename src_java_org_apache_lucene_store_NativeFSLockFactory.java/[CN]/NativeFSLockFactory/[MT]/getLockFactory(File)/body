{
  lockDir=new File(lockDir.getCanonicalPath());
  NativeFSLockFactory f;
synchronized (LOCK_FACTORIES) {
    f=(NativeFSLockFactory)LOCK_FACTORIES.get(lockDir);
    if (f == null) {
      f=new NativeFSLockFactory(lockDir);
      LOCK_FACTORIES.put(lockDir,f);
    }
  }
  return f;
}
