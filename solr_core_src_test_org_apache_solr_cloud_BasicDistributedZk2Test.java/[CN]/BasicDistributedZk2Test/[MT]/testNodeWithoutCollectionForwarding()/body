{
  try {
    final String baseUrl=((HttpSolrServer)clients.get(0)).getBaseURL().substring(0,((HttpSolrServer)clients.get(0)).getBaseURL().length() - DEFAULT_COLLECTION.length() - 1);
    HttpSolrServer server=new HttpSolrServer(baseUrl);
    server.setConnectionTimeout(15000);
    server.setSoTimeout(30000);
    Create createCmd=new Create();
    createCmd.setRoles("none");
    createCmd.setCoreName(ONE_NODE_COLLECTION + "core");
    createCmd.setCollection(ONE_NODE_COLLECTION);
    createCmd.setNumShards(1);
    createCmd.setDataDir(dataDir.getAbsolutePath() + File.separator + ONE_NODE_COLLECTION);
    server.request(createCmd);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  waitForRecoveriesToFinish(ONE_NODE_COLLECTION,cloudClient.getZkStateReader(),false);
  final String baseUrl2=((HttpSolrServer)clients.get(1)).getBaseURL().substring(0,((HttpSolrServer)clients.get(1)).getBaseURL().length() - DEFAULT_COLLECTION.length() - 1);
  HttpSolrServer qclient=new HttpSolrServer(baseUrl2 + "/onenodecollection" + "core");
  SolrInputDocument doc=new SolrInputDocument();
  doc.addField("id","1");
  qclient.add(doc);
  qclient.commit();
  SolrQuery query=new SolrQuery("*:*");
  QueryResponse results=qclient.query(query);
  assertEquals(1,results.getResults().getNumFound());
  qclient=new HttpSolrServer(baseUrl2 + "/onenodecollection");
  results=qclient.query(query);
  assertEquals(1,results.getResults().getNumFound());
}
