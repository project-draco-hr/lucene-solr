{
  try {
    final String baseUrl=getBaseUrl((HttpSolrServer)clients.get(0));
    HttpSolrServer server=new HttpSolrServer(baseUrl);
    server.setConnectionTimeout(30000);
    Create createCmd=new Create();
    createCmd.setRoles("none");
    createCmd.setCoreName(ONE_NODE_COLLECTION + "core");
    createCmd.setCollection(ONE_NODE_COLLECTION);
    createCmd.setNumShards(1);
    createCmd.setDataDir(getDataDir(createTempDir(ONE_NODE_COLLECTION).getAbsolutePath()));
    server.request(createCmd);
    server.shutdown();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
  waitForCollection(cloudClient.getZkStateReader(),ONE_NODE_COLLECTION,1);
  waitForRecoveriesToFinish(ONE_NODE_COLLECTION,cloudClient.getZkStateReader(),false);
  cloudClient.getZkStateReader().getLeaderRetry(ONE_NODE_COLLECTION,SHARD1,30000);
  int docs=2;
  for (  SolrServer client : clients) {
    final String baseUrl=getBaseUrl((HttpSolrServer)client);
    addAndQueryDocs(baseUrl,docs);
    docs+=2;
  }
}
