{
  try {
    final String baseUrl=getBaseUrl((HttpSolrClient)clients.get(0));
    HttpSolrClient client=new HttpSolrClient(baseUrl);
    client.setConnectionTimeout(30000);
    Create createCmd=new Create();
    createCmd.setRoles("none");
    createCmd.setCoreName(ONE_NODE_COLLECTION + "core");
    createCmd.setCollection(ONE_NODE_COLLECTION);
    createCmd.setNumShards(1);
    createCmd.setDataDir(getDataDir(createTempDir(ONE_NODE_COLLECTION).toFile().getAbsolutePath()));
    client.request(createCmd);
    client.shutdown();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
  waitForCollection(cloudClient.getZkStateReader(),ONE_NODE_COLLECTION,1);
  waitForRecoveriesToFinish(ONE_NODE_COLLECTION,cloudClient.getZkStateReader(),false);
  cloudClient.getZkStateReader().getLeaderRetry(ONE_NODE_COLLECTION,SHARD1,30000);
  int docs=2;
  for (  SolrClient client : clients) {
    final String baseUrl=getBaseUrl((HttpSolrClient)client);
    addAndQueryDocs(baseUrl,docs);
    docs+=2;
  }
}
