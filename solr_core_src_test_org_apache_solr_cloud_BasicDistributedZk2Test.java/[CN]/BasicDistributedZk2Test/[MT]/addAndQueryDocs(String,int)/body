{
  HttpSolrClient qclient=new HttpSolrClient(baseUrl + "/onenodecollection" + "core");
  waitForNon403or404or503(qclient);
  SolrInputDocument doc=new SolrInputDocument();
  doc.addField("id",docs);
  qclient.add(doc);
  qclient.commit();
  SolrQuery query=new SolrQuery("*:*");
  QueryResponse results=qclient.query(query);
  assertEquals(docs - 1,results.getResults().getNumFound());
  qclient.shutdown();
  qclient=new HttpSolrClient(baseUrl + "/onenodecollection");
  results=qclient.query(query);
  assertEquals(docs - 1,results.getResults().getNumFound());
  doc=new SolrInputDocument();
  doc.addField("id",docs + 1);
  qclient.add(doc);
  qclient.commit();
  query=new SolrQuery("*:*");
  query.set("rows",0);
  results=qclient.query(query);
  assertEquals(docs,results.getResults().getNumFound());
  qclient.shutdown();
}
