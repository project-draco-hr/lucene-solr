{
  Directory dir=new RAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(TEST_VERSION_CURRENT),MaxFieldLength.UNLIMITED);
  Document doc=new Document();
  doc.add(new Field("c","val",Store.NO,Index.NOT_ANALYZED_NO_NORMS));
  writer.addDocument(doc);
  writer.close();
  IndexSearcher searcher=new IndexSearcher(dir,true);
  Assert.assertEquals(1,searcher.search(new MatchAllDocsQuery(),10).totalHits);
  Filter f=new Filter(){
    @Override public DocIdSet getDocIdSet(    IndexReader reader) throws IOException {
      return null;
    }
  }
;
  Assert.assertEquals(0,searcher.search(new MatchAllDocsQuery(),f,10).totalHits);
  searcher.close();
}
