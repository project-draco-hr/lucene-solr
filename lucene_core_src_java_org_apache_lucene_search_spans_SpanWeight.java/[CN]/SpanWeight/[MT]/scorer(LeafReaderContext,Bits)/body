{
  if (stats == null) {
    return null;
  }
  Terms terms=context.reader().terms(query.getField());
  if (terms != null && terms.hasPositions() == false) {
    throw new IllegalStateException("field \"" + query.getField() + "\" was indexed without position data; cannot run SpanQuery (query="+ query+ ")");
  }
  Spans spans=query.getSpans(context,acceptDocs,termContexts,collectorFactory.newCollector());
  return (spans == null) ? null : new SpanScorer(spans,this,similarity.simScorer(stats,context));
}
