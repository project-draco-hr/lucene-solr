{
  List<StorableField> fields=sfield.createFields(val,boost);
  if (!fields.isEmpty()) {
    if (!sfield.multiValued()) {
      String oldValue=map.put(sfield.getName(),val);
      if (oldValue != null) {
        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"ERROR: multiple values encountered for non multiValued field " + sfield.getName() + ": first='"+ oldValue+ "' second='"+ val+ "'");
      }
    }
    for (    StorableField field : fields) {
      doc.add((Field)field);
    }
  }
}
