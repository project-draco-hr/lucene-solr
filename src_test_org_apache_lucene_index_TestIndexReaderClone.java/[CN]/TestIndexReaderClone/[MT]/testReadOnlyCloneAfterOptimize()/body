{
  final Directory dir1=new MockRAMDirectory();
  TestIndexReaderReopen.createIndex(dir1,true);
  IndexReader reader1=IndexReader.open(dir1,false);
  IndexWriter w=new IndexWriter(dir1,new SimpleAnalyzer(TEST_VERSION_CURRENT),IndexWriter.MaxFieldLength.LIMITED);
  w.optimize();
  w.close();
  IndexReader reader2=reader1.clone(true);
  assertTrue(isReadOnly(reader2));
  reader1.close();
  reader2.close();
  dir1.close();
}
