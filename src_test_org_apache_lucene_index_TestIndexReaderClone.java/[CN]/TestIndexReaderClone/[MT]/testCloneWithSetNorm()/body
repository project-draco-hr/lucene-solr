{
  final Directory dir1=new MockRAMDirectory();
  TestIndexReaderReopen.createIndex(dir1,false);
  SegmentReader orig=(SegmentReader)IndexReader.open(dir1);
  orig.setNorm(1,"field1",17.0f);
  final byte encoded=Similarity.encodeNorm(17.0f);
  assertEquals(encoded,orig.norms("field1")[1]);
  SegmentReader clonedSegmentReader=(SegmentReader)orig.clone();
  orig.close();
  clonedSegmentReader.close();
  SegmentReader r=(SegmentReader)IndexReader.open(dir1);
  assertEquals(encoded,r.norms("field1")[1]);
  r.close();
  dir1.close();
}
