{
  String tempDir=System.getProperty("java.io.tmpdir");
  if (tempDir == null)   throw new IOException("java.io.tmpdir undefined, cannot run test");
  File indexDir2=new File(tempDir,"FSDirIndexReaderClone");
  Directory dir1=FSDirectory.getDirectory(indexDir2);
  TestIndexReaderReopen.createIndex(dir1,false);
  IndexReader reader=IndexReader.open(indexDir2);
  IndexReader readOnlyReader=(IndexReader)reader.clone();
  reader.close();
  readOnlyReader.close();
  dir1.close();
  try {
    dir1.listAll();
    fail("did not hit AlreadyClosedException");
  }
 catch (  AlreadyClosedException ace) {
  }
}
