{
  final Directory dir1=new MockRAMDirectory();
  TestIndexReaderReopen.createIndex(dir1,false);
  SegmentReader origSegmentReader=(SegmentReader)IndexReader.open(dir1);
  origSegmentReader.deleteDocument(1);
  origSegmentReader.setNorm(4,"field1",0.5f);
  SegmentReader clonedSegmentReader=(SegmentReader)origSegmentReader.clone();
  assertDelDocsRefCountEquals(2,origSegmentReader);
  origSegmentReader.close();
  assertDelDocsRefCountEquals(1,origSegmentReader);
  Norm norm=(Norm)clonedSegmentReader.norms.get("field1");
  assertEquals(1,norm.bytesRef().refCount());
  clonedSegmentReader.close();
  dir1.close();
}
