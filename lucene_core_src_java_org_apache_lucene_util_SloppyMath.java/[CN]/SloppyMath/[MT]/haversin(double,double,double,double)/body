{
  double x1=lat1 * TO_RADIANS;
  double x2=lat2 * TO_RADIANS;
  double h1=(1 - cos(x1 - x2)) / 2;
  double h2=(1 - cos((lon1 - lon2) * TO_RADIANS)) / 2;
  double h=h1 + cos(x1) * cos(x2) * h2;
  return TO_KILOMETERS * 2 * asin(Math.min(1,Math.sqrt(h)));
}
