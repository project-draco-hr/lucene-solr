{
  return new Lock(){
    public boolean obtain() throws IOException {
synchronized (files) {
        if (!fileExists(name)) {
          createOutput(name).close();
          return true;
        }
        return false;
      }
    }
    public void release(){
      deleteFile(name);
    }
    public boolean isLocked(){
      return fileExists(name);
    }
  }
;
}
