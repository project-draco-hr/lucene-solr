{
  int numDocs=random.nextInt(10000) + 150;
  CachingCollector cc=new CachingCollector(new NoOpCollector(false),true,8 * ONE_BYTE * numDocs);
  cc.setScorer(new MockScorer());
  for (int i=0; i < numDocs; i++)   cc.collect(i);
  assertTrue(cc.isCached());
  cc.collect(numDocs);
  assertFalse(cc.isCached());
}
