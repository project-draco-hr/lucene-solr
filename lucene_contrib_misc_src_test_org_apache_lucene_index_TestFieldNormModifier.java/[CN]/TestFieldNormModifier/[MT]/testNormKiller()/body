{
  IndexReader r=IndexReader.open(store,false);
  byte[] oldNorms=MultiNorms.norms(r,"untokfield");
  r.close();
  FieldNormModifier fnm=new FieldNormModifier(store,s);
  fnm.reSetNorms("untokfield");
  r=IndexReader.open(store,false);
  byte[] newNorms=MultiNorms.norms(r,"untokfield");
  r.close();
  assertFalse(Arrays.equals(oldNorms,newNorms));
  IndexReader reader=IndexReader.open(store);
  IndexSearcher searcher=new IndexSearcher(reader);
  final float[] scores=new float[NUM_DOCS];
  float lastScore=0.0f;
  searcher.search(new TermQuery(new Term("untokfield","20061212")),new Collector(){
    private int docBase=0;
    private Scorer scorer;
    @Override public final void collect(    int doc) throws IOException {
      scores[doc + docBase]=scorer.score();
    }
    @Override public void setNextReader(    AtomicReaderContext context){
      docBase=context.docBase;
    }
    @Override public void setScorer(    Scorer scorer) throws IOException {
      this.scorer=scorer;
    }
    @Override public boolean acceptsDocsOutOfOrder(){
      return true;
    }
  }
);
  searcher.close();
  reader.close();
  lastScore=scores[0];
  for (int i=0; i < NUM_DOCS; i++) {
    String msg="i=" + i + ", "+ scores[i]+ " == "+ lastScore;
    assertTrue(msg,scores[i] == lastScore);
    lastScore=scores[i];
  }
}
