{
  doTestDgaps(1,0,1);
  doTestDgaps(10,0,1);
  doTestDgaps(100,0,1);
  doTestDgaps(1000,4,7);
  doTestDgaps(10000,40,43);
  doTestDgaps(100000,415,418);
  doTestDgaps(1000000,3123,3126);
  MockDirectoryWrapper d=new MockDirectoryWrapper(random(),new RAMDirectory());
  d.setPreventDoubleWrite(false);
  BitVector bv=new BitVector(10000);
  bv.set(0);
  for (int i=8; i < 16; i++) {
    bv.set(i);
  }
  for (int i=32; i < 40; i++) {
    bv.set(i);
  }
  for (int i=40; i < 10000; i++) {
    if (random().nextInt(1000) == 0) {
      bv.set(i);
    }
  }
  bv.write(d,"TESTBV",newIOContext(random()));
  BitVector compare=new BitVector(d,"TESTBV",newIOContext(random()));
  assertTrue(doCompare(bv,compare));
}
