def find_branch_type():
    output = subprocess.check_output('git status', shell=True)
    for line in output.split('\n'):
        if line.startswith('On branch '):
            branchName = line.split(' ')[(-1)]
            break
    else:
        raise Exception('git status missing branch name')
    if (branchName == 'master'):
        return BranchType.major
    if re.match('branch_(\\d+)x', branchName.decode('UTF-8')):
        return BranchType.stable
    if re.match('branch_(\\d+)_(\\d+)', branchName.decode('UTF-8')):
        return BranchType.release
    raise Exception('Cannot run bumpVersion.py on feature branch')
