{
  SynonymMap synMap;
  BaseTokenizerFactory tf=new NGramTokenizerFactory();
  Map<String,String> args=new HashMap<String,String>();
  args.put("minGramSize","2");
  args.put("maxGramSize","2");
  tf.init(args);
  List<String> rules=new ArrayList<String>();
  rules.add("abcd=>efgh");
  synMap=new SynonymMap(true);
  SynonymFilterFactory.parseRules(rules,synMap,"=>",",",true,tf);
  assertEquals(1,synMap.submap.size());
  assertEquals(1,getSubSynonymMap(synMap,"ab").submap.size());
  assertEquals(1,getSubSynonymMap(getSubSynonymMap(synMap,"ab"),"bc").submap.size());
  assertTokIncludes(getSubSynonymMap(getSubSynonymMap(synMap,"ab"),"bc"),"cd","ef");
  assertTokIncludes(getSubSynonymMap(getSubSynonymMap(synMap,"ab"),"bc"),"cd","fg");
  assertTokIncludes(getSubSynonymMap(getSubSynonymMap(synMap,"ab"),"bc"),"cd","gh");
}
