{
  Object declaredComponents=initArgs.get(INIT_COMPONENTS);
  List<String> first=(List<String>)initArgs.get(INIT_FIRST_COMPONENTS);
  List<String> last=(List<String>)initArgs.get(INIT_LAST_COMPONENTS);
  List<String> list=null;
  boolean makeDebugLast=true;
  if (declaredComponents == null) {
    list=getDefaultComponents();
    if (first != null) {
      List<String> clist=first;
      clist.addAll(list);
      list=clist;
    }
    if (last != null) {
      list.addAll(last);
    }
  }
 else {
    list=(List<String>)declaredComponents;
    if (first != null || last != null) {
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"First/Last components only valid if you do not declare 'components'");
    }
    makeDebugLast=false;
  }
  components=new ArrayList<SearchComponent>(list.size());
  DebugComponent dbgCmp=null;
  for (  String c : list) {
    SearchComponent comp=core.getSearchComponent(c);
    if (comp instanceof DebugComponent && makeDebugLast == true) {
      dbgCmp=(DebugComponent)comp;
    }
 else {
      components.add(comp);
      log.info("Adding  component:" + comp);
    }
  }
  if (makeDebugLast == true && dbgCmp != null) {
    components.add(dbgCmp);
    log.info("Adding  debug component:" + dbgCmp);
  }
  Object co=initArgs.get(INIT_CONNECTION_TIMEOUT);
  if (co != null) {
    connectionTimeout=(Integer)co;
    log.info("Setting shard-connection-timeout to: " + connectionTimeout);
  }
  Object so=initArgs.get(INIT_SO_TIMEOUT);
  if (so != null) {
    soTimeout=(Integer)so;
    log.info("Setting shard-socket-timeout to: " + soTimeout);
  }
}
