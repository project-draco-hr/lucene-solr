{
  Directory dir=new MockRAMDirectory();
  IndexWriter writer=new IndexWriter(dir,new WhitespaceAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
  addDoc(writer,"aaa");
  writer.close();
  IndexReader reader=IndexReader.open(dir);
  try {
    reader.deleteDocument(1);
    fail("did not hit exception when deleting an invalid doc number");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
  reader.close();
  if (IndexReader.isLocked(dir)) {
    fail("write lock is still held after close");
  }
  reader=IndexReader.open(dir);
  try {
    reader.setNorm(1,"content",(float)2.0);
    fail("did not hit exception when calling setNorm on an invalid doc number");
  }
 catch (  ArrayIndexOutOfBoundsException e) {
  }
  reader.close();
  if (IndexReader.isLocked(dir)) {
    fail("write lock is still held after close");
  }
  dir.close();
}
