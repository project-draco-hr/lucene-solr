{
  Set<Term> terms=new TreeSet<Term>();
  int nterms=atLeast(10000);
  for (int i=0; i < nterms; i++) {
    Term term=new Term(_TestUtil.randomUnicodeString(random(),2),_TestUtil.randomUnicodeString(random()));
    terms.add(term);
  }
  PrefixCodedTerms.Builder b=new PrefixCodedTerms.Builder();
  for (  Term ref : terms) {
    b.add(ref);
  }
  PrefixCodedTerms pb=b.finish();
  Iterator<Term> expected=terms.iterator();
  for (  Term t : pb) {
    assertTrue(expected.hasNext());
    assertEquals(expected.next(),t);
  }
  assertFalse(expected.hasNext());
}
