{
  acceptableOverheadRatio=Math.max(COMPACT,acceptableOverheadRatio);
  acceptableOverheadRatio=Math.min(FASTEST,acceptableOverheadRatio);
  float acceptableOverheadPerValue=acceptableOverheadRatio * bitsPerValue;
  int maxBitsPerValue=bitsPerValue + (int)acceptableOverheadPerValue;
  int byteAlign=(bitsPerValue + 7) & 0xF8;
  if (byteAlign <= maxBitsPerValue) {
    return byteAlign;
  }
  int nibbleAlign=(bitsPerValue + 3) & 0xFC;
  if (bitsPerValue < 32 && nibbleAlign <= maxBitsPerValue) {
    return nibbleAlign;
  }
  return bitsPerValue;
}
