{
  final String baseUrl=solrCluster.getJettySolrRunners().get(0).getBaseUrl().toString();
  final SolrClient solrClient=getHttpSolrClient(baseUrl);
  final File configDir=getFile("solr").toPath().resolve("configsets/configset-2/conf").toFile();
  final File tmpConfigDir=createTempDir().toFile();
  tmpConfigDir.deleteOnExit();
  FileUtils.copyDirectory(configDir,tmpConfigDir);
  FileUtils.write(new File(tmpConfigDir,"configsetprops.json"),getConfigSetProps(ImmutableMap.<String,String>of("immutable","true")));
  solrCluster.uploadConfigDir(tmpConfigDir,"configSet");
  DeleteNoErrorChecking delete=new DeleteNoErrorChecking();
  verifyException(solrClient,delete,NAME);
  delete.setConfigSetName("configSetBogus");
  verifyException(solrClient,delete,"ConfigSet does not exist");
  delete.setConfigSetName("configSet");
  verifyException(solrClient,delete,"Requested delete of immutable ConfigSet");
  solrClient.close();
}
