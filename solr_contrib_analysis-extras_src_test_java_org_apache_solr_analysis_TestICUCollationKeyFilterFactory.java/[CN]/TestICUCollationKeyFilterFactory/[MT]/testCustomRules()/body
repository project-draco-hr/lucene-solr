{
  RuleBasedCollator baseCollator=(RuleBasedCollator)Collator.getInstance(new ULocale("de_DE"));
  String DIN5007_2_tailorings="& ae , a\u0308 & AE , A\u0308" + "& oe , o\u0308 & OE , O\u0308" + "& ue , u\u0308 & UE , u\u0308";
  RuleBasedCollator tailoredCollator=new RuleBasedCollator(baseCollator.getRules() + DIN5007_2_tailorings);
  String tailoredRules=tailoredCollator.getRules();
  String germanUmlaut="T??ne";
  String germanOE="Toene";
  ICUCollationKeyFilterFactory factory=new ICUCollationKeyFilterFactory();
  Map<String,String> args=new HashMap<String,String>();
  args.put("custom","rules.txt");
  args.put("strength","primary");
  factory.init(args);
  factory.inform(new StringMockSolrResourceLoader(tailoredRules));
  TokenStream tsUmlaut=factory.create(new KeywordTokenizer(new StringReader(germanUmlaut)));
  TokenStream tsOE=factory.create(new KeywordTokenizer(new StringReader(germanOE)));
  assertCollatesToSame(tsUmlaut,tsOE);
}
