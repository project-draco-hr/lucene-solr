{
  int oldMaxEdits=maxEdits;
  boolean termAfter=bottomTerm == null || (lastTerm != null && termComparator.compare(lastTerm,bottomTerm) >= 0);
  while (maxEdits > 0 && (termAfter ? bottom >= calculateMaxBoost(maxEdits) : bottom > calculateMaxBoost(maxEdits)))   maxEdits--;
  if (oldMaxEdits != maxEdits || init) {
    TermsEnum newEnum=getAutomatonEnum(maxEdits,lastTerm);
    if (newEnum != null) {
      setEnum(newEnum);
    }
 else     if (init) {
      setEnum(new LinearFuzzyTermsEnum());
    }
  }
}
