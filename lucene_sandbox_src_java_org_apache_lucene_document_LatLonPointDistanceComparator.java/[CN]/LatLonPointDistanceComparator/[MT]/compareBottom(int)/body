{
  currentDocs.setDocument(doc);
  int numValues=currentDocs.count();
  if (numValues == 0) {
    return Double.compare(bottom,Double.POSITIVE_INFINITY);
  }
  int cmp=-1;
  for (int i=0; i < numValues; i++) {
    long encoded=currentDocs.valueAt(i);
    int latitudeBits=(int)(encoded >> 32);
    if (latitudeBits < minLat || latitudeBits > maxLat) {
      continue;
    }
    int longitudeBits=(int)(encoded & 0xFFFFFFFF);
    if ((longitudeBits < minLon || longitudeBits > maxLon) && (longitudeBits < minLon2)) {
      continue;
    }
    double docLatitude=decodeLatitude(latitudeBits);
    double docLongitude=decodeLongitude(longitudeBits);
    cmp=Math.max(cmp,Double.compare(bottom,SloppyMath.haversinSortKey(latitude,longitude,docLatitude,docLongitude)));
    if (cmp > 0) {
      return cmp;
    }
  }
  return cmp;
}
