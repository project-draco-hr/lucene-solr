{
  SuggesterResult result=new SuggesterResult();
  Set<String> allTokens=new HashSet<>();
  for (  SuggesterResult shardResult : suggesterResults) {
    allTokens.addAll(shardResult.getTokens());
  }
  for (  String token : allTokens) {
    Lookup.LookupPriorityQueue resultQueue=new Lookup.LookupPriorityQueue(count);
    for (    SuggesterResult shardResult : suggesterResults) {
      List<LookupResult> suggests=shardResult.getLookupResult(token);
      if (suggests == null) {
        continue;
      }
      for (      LookupResult res : suggests) {
        resultQueue.insertWithOverflow(res);
      }
    }
    List<LookupResult> sortedSuggests=new LinkedList<>();
    Collections.addAll(sortedSuggests,resultQueue.getResults());
    result.add(token,sortedSuggests);
  }
  return result;
}
