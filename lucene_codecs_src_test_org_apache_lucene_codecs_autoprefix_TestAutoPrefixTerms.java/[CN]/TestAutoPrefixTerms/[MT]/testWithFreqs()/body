{
  Directory dir=newDirectory();
  IndexWriterConfig iwc=new IndexWriterConfig(new MockAnalyzer(random()));
  iwc.setCodec(codec);
  IndexWriter w=new IndexWriter(dir,iwc);
  FieldType ft=new FieldType(StringField.TYPE_NOT_STORED);
  ft.setIndexOptions(IndexOptions.DOCS_AND_FREQS);
  Document doc=new Document();
  doc.add(new Field("foo","bar bar",ft));
  w.addDocument(doc);
  try {
    w.commit();
  }
 catch (  IllegalStateException ise) {
    assertEquals("ranges can only be indexed with IndexOptions.DOCS (field: foo)",ise.getMessage());
  }
  w.close();
  dir.close();
}
