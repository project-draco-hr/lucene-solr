{
  StandardAnalyzer analyzer=new StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRENT);
  Directory index=new MockRAMDirectory();
  IndexWriter w=new IndexWriter(index,analyzer,true,IndexWriter.MaxFieldLength.UNLIMITED);
  addDoc("Lucene in Action",w);
  addDoc("Lucene for Dummies",w);
  addDoc("Giga byte",w);
  addDoc("ManagingGigabytesManagingGigabyte",w);
  addDoc("ManagingGigabytesManagingGigabytes",w);
  addDoc("The Art of Computer Science",w);
  addDoc("J. K. Rowling",w);
  addDoc("JK Rowling",w);
  addDoc("Joanne K Roling",w);
  addDoc("Bruce Willis",w);
  addDoc("Willis bruce",w);
  addDoc("Brute willis",w);
  addDoc("B. willis",w);
  IndexReader r=w.getReader();
  w.close();
  Query q=new QueryParser("field",analyzer).parse("giga~0.9");
  IndexSearcher searcher=new IndexSearcher(r);
  ScoreDoc[] hits=searcher.search(q,10).scoreDocs;
  assertEquals(1,hits.length);
  assertEquals("Giga byte",searcher.doc(hits[0].doc).get("field"));
  r.close();
}
