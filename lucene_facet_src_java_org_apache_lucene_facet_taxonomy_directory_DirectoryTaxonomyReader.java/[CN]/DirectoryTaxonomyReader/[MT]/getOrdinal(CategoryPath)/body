{
  ensureOpen();
  if (categoryPath.length() == 0) {
    return ROOT_ORDINAL;
  }
  String path=categoryPath.toString(delimiter);
synchronized (ordinalCache) {
    Integer res=ordinalCache.get(path);
    if (res != null) {
      if (res.intValue() < indexReader.maxDoc()) {
        return res.intValue();
      }
 else {
        return TaxonomyReader.INVALID_ORDINAL;
      }
    }
  }
  int ret=TaxonomyReader.INVALID_ORDINAL;
  DocsEnum docs=MultiFields.getTermDocsEnum(indexReader,null,Consts.FULL,new BytesRef(path),0);
  if (docs != null && docs.nextDoc() != DocIdSetIterator.NO_MORE_DOCS) {
    ret=docs.docID();
synchronized (ordinalCache) {
      ordinalCache.put(path,Integer.valueOf(ret));
    }
  }
  return ret;
}
