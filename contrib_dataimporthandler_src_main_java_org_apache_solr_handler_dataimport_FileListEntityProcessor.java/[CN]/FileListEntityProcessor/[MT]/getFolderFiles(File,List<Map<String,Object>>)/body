{
  dir.list(new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      if (fileNamePattern == null) {
        addDetails(fileDetails,dir,name);
        return false;
      }
      if (fileNamePattern.matcher(name).find()) {
        if (excludesPattern != null && excludesPattern.matcher(name).find())         return false;
        addDetails(fileDetails,dir,name);
      }
      return false;
    }
  }
);
}
