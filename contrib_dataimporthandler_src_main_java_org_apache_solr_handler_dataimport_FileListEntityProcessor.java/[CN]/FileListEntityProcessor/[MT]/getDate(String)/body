{
  if (dateStr == null)   return null;
  Matcher m=PLACE_HOLDER_PATTERN.matcher(dateStr);
  if (m.find()) {
    return (Date)resolver.resolve(dateStr);
  }
  m=EvaluatorBag.IN_SINGLE_QUOTES.matcher(dateStr);
  if (m.find()) {
    String expr=null;
    expr=m.group(1).replaceAll("NOW","");
    try {
      return EvaluatorBag.dateMathParser.parseMath(expr);
    }
 catch (    ParseException exp) {
      throw new DataImportHandlerException(DataImportHandlerException.SEVERE,"Invalid expression for date",exp);
    }
  }
  try {
    return DataImporter.DATE_TIME_FORMAT.get().parse(dateStr);
  }
 catch (  ParseException exp) {
    throw new DataImportHandlerException(DataImportHandlerException.SEVERE,"Invalid expression for date",exp);
  }
}
