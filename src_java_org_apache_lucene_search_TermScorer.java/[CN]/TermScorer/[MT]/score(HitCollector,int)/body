{
  int d=doc;
  while (d < end) {
    final int f=freqs[pointer];
    float score=f < SCORE_CACHE_SIZE ? scoreCache[f] : Similarity.tf(f) * weight;
    score*=Similarity.decodeNorm(norms[d]);
    c.collect(d,score);
    if (++pointer == pointerMax) {
      pointerMax=termDocs.read(docs,freqs);
      if (pointerMax != 0) {
        pointer=0;
      }
 else {
        termDocs.close();
        doc=Integer.MAX_VALUE;
        return;
      }
    }
    d=docs[pointer];
  }
  doc=d;
}
