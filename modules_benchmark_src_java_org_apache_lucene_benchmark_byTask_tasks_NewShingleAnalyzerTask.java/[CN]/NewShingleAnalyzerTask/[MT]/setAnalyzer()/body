{
  Class<? extends Analyzer> clazz=null;
  Analyzer wrappedAnalyzer;
  try {
    if (analyzerClassName == null || analyzerClassName.equals("")) {
      analyzerClassName="org.apache.lucene.analysis.standard.StandardAnalyzer";
    }
    if (analyzerClassName.indexOf(".") == -1 || analyzerClassName.startsWith("standard.")) {
      analyzerClassName="org.apache.lucene.analysis." + analyzerClassName;
    }
    clazz=Class.forName(analyzerClassName).asSubclass(Analyzer.class);
    Constructor<? extends Analyzer> ctor=clazz.getConstructor(Version.class);
    wrappedAnalyzer=ctor.newInstance(Version.LUCENE_CURRENT);
  }
 catch (  NoSuchMethodException e) {
    wrappedAnalyzer=clazz.newInstance();
  }
  ShingleAnalyzerWrapper analyzer=new ShingleAnalyzerWrapper(wrappedAnalyzer,maxShingleSize);
  analyzer.setOutputUnigrams(outputUnigrams);
  getRunData().setAnalyzer(analyzer);
}
