{
  if (ignoreCase)   for (int i=0; i < key.length; i++)   key[i]=Character.toLowerCase(key[i]);
  int slot=getSlot(key,0,key.length);
  if (keys[slot] == null)   count++;
  Object prev=values[slot];
  keys[slot]=key;
  values[slot]=val;
  if (count + (count >> 2) >= keys.length) {
    rehash();
  }
  return (V)prev;
}
