{
  StringBuilder fragment=new StringBuilder();
  final int s=fragInfo.startOffset;
  String src=getFragmentSource(buffer,index,values,s,fragInfo.endOffset);
  int srcIndex=0;
  for (  SubInfo subInfo : fragInfo.subInfos) {
    for (    Toffs to : subInfo.termsOffsets) {
      fragment.append(src.substring(srcIndex,to.startOffset - s)).append(getPreTag(subInfo.seqnum)).append(src.substring(to.startOffset - s,to.endOffset - s)).append(getPostTag(subInfo.seqnum));
      srcIndex=to.endOffset - s;
    }
  }
  fragment.append(src.substring(srcIndex));
  return fragment.toString();
}
