{
  final int numFields=numFieldData;
  fdtLocal.writeVInt(numStoredFields);
  if (tvx != null)   Arrays.sort(fieldDataArray,0,numFields);
  for (int i=0; i < numFields; i++)   fieldDataArray[i].processField(analyzer);
  if (ramBufferSize != IndexWriter.DISABLE_AUTO_FLUSH && numBytesUsed > 0.95 * ramBufferSize)   balanceRAM();
}
