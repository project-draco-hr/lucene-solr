{
  if (!hasDeletes())   return false;
  if (infoStream != null)   message("apply " + deletesFlushed.numTerms + " buffered deleted terms and "+ deletesFlushed.docIDs.size()+ " deleted docIDs and "+ deletesFlushed.queries.size()+ " deleted queries on "+ +infos.size()+ " segments.");
  final int infosEnd=infos.size();
  int docStart=0;
  boolean any=false;
  for (int i=0; i < infosEnd; i++) {
    IndexReader reader=SegmentReader.get(infos.info(i),false);
    boolean success=false;
    try {
      any|=applyDeletes(reader,docStart);
      docStart+=reader.maxDoc();
      success=true;
    }
  finally {
      if (reader != null) {
        try {
          if (success)           reader.commit();
        }
  finally {
          reader.hasChanges=false;
          reader.close();
        }
      }
    }
  }
  deletesFlushed.clear();
  return any;
}
