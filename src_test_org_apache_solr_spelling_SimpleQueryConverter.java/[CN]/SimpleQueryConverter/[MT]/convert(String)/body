{
  Collection<Token> result=new HashSet<Token>();
  WhitespaceAnalyzer analyzer=new WhitespaceAnalyzer();
  TokenStream ts=analyzer.tokenStream("",new StringReader(origQuery));
  TermAttribute termAtt=(TermAttribute)ts.addAttribute(TermAttribute.class);
  OffsetAttribute offsetAtt=(OffsetAttribute)ts.addAttribute(OffsetAttribute.class);
  TypeAttribute typeAtt=(TypeAttribute)ts.addAttribute(TypeAttribute.class);
  FlagsAttribute flagsAtt=(FlagsAttribute)ts.addAttribute(FlagsAttribute.class);
  PayloadAttribute payloadAtt=(PayloadAttribute)ts.addAttribute(PayloadAttribute.class);
  PositionIncrementAttribute posIncAtt=(PositionIncrementAttribute)ts.addAttribute(PositionIncrementAttribute.class);
  try {
    ts.reset();
    while (ts.incrementToken()) {
      Token tok=new Token();
      tok.setTermBuffer(termAtt.termBuffer(),0,termAtt.termLength());
      tok.setOffset(offsetAtt.startOffset(),offsetAtt.endOffset());
      tok.setFlags(flagsAtt.getFlags());
      tok.setPayload(payloadAtt.getPayload());
      tok.setPositionIncrement(posIncAtt.getPositionIncrement());
      tok.setType(typeAtt.type());
      result.add(tok);
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  return result;
}
