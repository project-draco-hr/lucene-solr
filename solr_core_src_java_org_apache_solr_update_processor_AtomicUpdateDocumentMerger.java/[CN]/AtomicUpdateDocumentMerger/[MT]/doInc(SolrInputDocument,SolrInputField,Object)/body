{
  SolrInputField numericField=toDoc.get(sif.getName());
  if (numericField == null) {
    toDoc.setField(sif.getName(),fieldVal,sif.getBoost());
  }
 else {
    String oldValS=numericField.getFirstValue().toString();
    SchemaField sf=schema.getField(sif.getName());
    BytesRefBuilder term=new BytesRefBuilder();
    sf.getType().readableToIndexed(oldValS,term);
    Object oldVal=sf.getType().toObject(sf,term.get());
    String fieldValS=fieldVal.toString();
    Number result;
    if (oldVal instanceof Long) {
      result=((Long)oldVal).longValue() + Long.parseLong(fieldValS);
    }
 else     if (oldVal instanceof Float) {
      result=((Float)oldVal).floatValue() + Float.parseFloat(fieldValS);
    }
 else     if (oldVal instanceof Double) {
      result=((Double)oldVal).doubleValue() + Double.parseDouble(fieldValS);
    }
 else {
      result=((Integer)oldVal).intValue() + Integer.parseInt(fieldValS);
    }
    toDoc.setField(sif.getName(),result,sif.getBoost());
  }
}
