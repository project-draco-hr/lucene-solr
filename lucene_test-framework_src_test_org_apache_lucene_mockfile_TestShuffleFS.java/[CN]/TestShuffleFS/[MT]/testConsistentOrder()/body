{
  Path raw=createTempDir();
  for (int i=0; i < 100; i++) {
    Files.createFile(raw.resolve("file" + i));
  }
  long seed=random().nextLong();
  Path dirExpected=wrap(raw,seed);
  List<String> expected=new ArrayList<>();
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(dirExpected)){
    for (    Path path : stream) {
      expected.add(path.getFileName().toString());
    }
  }
   for (int i=0; i < 100; i++) {
    Path scrambled=wrap(raw,random().nextLong());
    Path ordered=wrap(scrambled,seed);
    List<String> seen=new ArrayList<>();
    try (DirectoryStream<Path> stream=Files.newDirectoryStream(ordered)){
      for (      Path path : stream) {
        seen.add(path.getFileName().toString());
      }
    }
     assertEquals(expected,seen);
  }
}
