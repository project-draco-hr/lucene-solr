{
  IndexReader indexReader=DirectoryReader.open(indexDir);
  Term term=DrillDown.term(indexingParams,new CategoryPath("genre","software"));
  EnhancementsPayloadIterator iterator=new EnhancementsPayloadIterator(indexingParams.getCategoryEnhancements(),indexReader,term);
  assertTrue("Unexpected failure of init()",iterator.init());
  assertFalse("Unexpected payload for genre/computing in doc 0",iterator.setdoc(0));
  assertTrue("Missing instance of genre/computing in doc 1",iterator.setdoc(1));
  float assoc=Float.intBitsToFloat((Integer)iterator.getCategoryData(associationEnhancement));
  assertEquals("Unexpected association value for genre/computing in doc 1",0.34f,assoc,0.001);
  indexReader.close();
}
