{
  SolrParams params=rb.req.getParams();
  String[] fldLst=params.getParams(TermVectorParams.FIELDS);
  if (null == fldLst || 0 == fldLst.length || (1 == fldLst.length && 0 == fldLst[0].length())) {
    ReturnFields rf=new SolrReturnFields(params.getParams(CommonParams.FL),rb.req);
    if (rf.wantsAllFields()) {
      return null;
    }
    Set<String> fieldNames=rf.getLuceneFieldNames();
    return (null != fieldNames) ? fieldNames : Collections.<String>emptySet();
  }
  Set<String> fieldNames=new LinkedHashSet<String>();
  for (  String fl : fldLst) {
    fieldNames.addAll(Arrays.asList(SolrPluginUtils.split(fl)));
  }
  return fieldNames;
}
