{
  if (!(query instanceof ToParentBlockJoinQuery)) {
    if (query instanceof BooleanQuery) {
      List<BooleanClause> clauses=((BooleanQuery)query).clauses();
      for (      BooleanClause clause : clauses) {
        if (clause.getQuery() instanceof ToParentBlockJoinQuery) {
          return;
        }
      }
    }
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,NO_TO_PARENT_BJQ_MESSAGE);
  }
}
