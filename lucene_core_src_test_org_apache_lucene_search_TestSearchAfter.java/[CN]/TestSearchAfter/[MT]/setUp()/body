{
  super.setUp();
  dir=newDirectory();
  RandomIndexWriter iw=new RandomIndexWriter(random(),dir);
  int numDocs=atLeast(200);
  for (int i=0; i < numDocs; i++) {
    List<Field> fields=new ArrayList<Field>();
    fields.add(newTextField("english",English.intToEnglish(i),Field.Store.NO));
    fields.add(newTextField("oddeven",(i % 2 == 0) ? "even" : "odd",Field.Store.NO));
    fields.add(newStringField("byte","" + ((byte)random().nextInt()),Field.Store.NO));
    fields.add(newStringField("short","" + ((short)random().nextInt()),Field.Store.NO));
    fields.add(new IntField("int",random().nextInt(),Field.Store.NO));
    fields.add(new LongField("long",random().nextLong(),Field.Store.NO));
    fields.add(new FloatField("float",random().nextFloat(),Field.Store.NO));
    fields.add(new DoubleField("double",random().nextDouble(),Field.Store.NO));
    fields.add(newStringField("bytes",_TestUtil.randomRealisticUnicodeString(random()),Field.Store.NO));
    fields.add(newStringField("bytesval",_TestUtil.randomRealisticUnicodeString(random()),Field.Store.NO));
    fields.add(new DoubleField("double",random().nextDouble(),Field.Store.NO));
    fields.add(new NumericDocValuesField("intdocvalues",random().nextInt()));
    fields.add(new FloatDocValuesField("floatdocvalues",random().nextFloat()));
    fields.add(new SortedDocValuesField("sortedbytesdocvalues",new BytesRef(_TestUtil.randomRealisticUnicodeString(random()))));
    fields.add(new SortedDocValuesField("sortedbytesdocvaluesval",new BytesRef(_TestUtil.randomRealisticUnicodeString(random()))));
    fields.add(new BinaryDocValuesField("straightbytesdocvalues",new BytesRef(_TestUtil.randomRealisticUnicodeString(random()))));
    Document document=new Document();
    document.add(new StoredField("id","" + i));
    if (VERBOSE) {
      System.out.println("  add doc id=" + i);
    }
    for (    Field field : fields) {
      if (random().nextInt(5) != 4) {
        document.add(field);
        if (VERBOSE) {
          System.out.println("    " + field);
        }
      }
    }
    iw.addDocument(document);
  }
  reader=iw.getReader();
  iw.close();
  searcher=newSearcher(reader);
  if (VERBOSE) {
    System.out.println("  searcher=" + searcher);
  }
}
