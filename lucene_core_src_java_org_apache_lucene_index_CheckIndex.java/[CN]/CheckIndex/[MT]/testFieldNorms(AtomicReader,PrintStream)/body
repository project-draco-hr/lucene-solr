{
  final Status.FieldNormStatus status=new Status.FieldNormStatus();
  try {
    if (infoStream != null) {
      infoStream.print("    test: field norms.........");
    }
    for (    FieldInfo info : reader.getFieldInfos()) {
      if (info.hasNorms()) {
        DocValues dv=reader.normValues(info.name);
        checkDocValues(dv,info.name,info.getNormType(),reader.maxDoc());
        checkSimpleNorms(info,reader,infoStream);
        ++status.totFields;
      }
 else {
        if (reader.normValues(info.name) != null) {
          throw new RuntimeException("field: " + info.name + " should omit norms but has them!");
        }
      }
    }
    msg(infoStream,"OK [" + status.totFields + " fields]");
  }
 catch (  Throwable e) {
    msg(infoStream,"ERROR [" + String.valueOf(e.getMessage()) + "]");
    status.error=e;
    if (infoStream != null) {
      e.printStackTrace(infoStream);
    }
  }
  return status;
}
