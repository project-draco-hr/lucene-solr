{
  Status.TermIndexStatus status;
  final int maxDoc=reader.maxDoc();
  final Bits liveDocs=reader.getLiveDocs();
  final IndexSearcher is=new IndexSearcher(reader);
  try {
    if (infoStream != null) {
      infoStream.print("    test: terms, freq, prox...");
    }
    final InvertedFields fields=reader.fields();
    status=checkFields(fields,liveDocs,maxDoc,fieldInfos,is);
    if (liveDocs != null) {
      if (infoStream != null) {
        infoStream.print("    test (ignoring deletes): terms, freq, prox...");
      }
      checkFields(fields,null,maxDoc,fieldInfos,null);
    }
  }
 catch (  Throwable e) {
    msg("ERROR: " + e);
    status=new Status.TermIndexStatus();
    status.error=e;
    if (infoStream != null) {
      e.printStackTrace(infoStream);
    }
  }
  return status;
}
