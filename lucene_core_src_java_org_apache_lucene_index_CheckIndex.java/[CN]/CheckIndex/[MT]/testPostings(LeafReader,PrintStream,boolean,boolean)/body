{
  Status.TermIndexStatus status;
  final int maxDoc=reader.maxDoc();
  final Bits liveDocs=reader.getLiveDocs();
  try {
    if (infoStream != null) {
      infoStream.print("    test: terms, freq, prox...");
    }
    final Fields fields=reader.fields();
    final FieldInfos fieldInfos=reader.getFieldInfos();
    status=checkFields(fields,liveDocs,maxDoc,fieldInfos,true,false,infoStream,verbose);
    if (liveDocs != null) {
      if (infoStream != null) {
        infoStream.print("    test (ignoring deletes): terms, freq, prox...");
      }
      checkFields(fields,null,maxDoc,fieldInfos,true,false,infoStream,verbose);
    }
  }
 catch (  Throwable e) {
    if (failFast) {
      IOUtils.reThrow(e);
    }
    msg(infoStream,"ERROR: " + e);
    status=new Status.TermIndexStatus();
    status.error=e;
    if (infoStream != null) {
      e.printStackTrace(infoStream);
    }
  }
  return status;
}
