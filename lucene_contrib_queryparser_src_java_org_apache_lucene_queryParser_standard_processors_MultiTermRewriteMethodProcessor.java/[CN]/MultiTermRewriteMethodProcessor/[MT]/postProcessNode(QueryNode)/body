{
  if (node instanceof WildcardQueryNode || node instanceof ParametricRangeQueryNode || node instanceof RegexpQueryNode) {
    if (!getQueryConfigHandler().hasAttribute(MultiTermRewriteMethodAttribute.class)) {
      throw new IllegalArgumentException("MultiTermRewriteMethodAttribute should be set on the QueryConfigHandler");
    }
    MultiTermQuery.RewriteMethod rewriteMethod=getQueryConfigHandler().getAttribute(MultiTermRewriteMethodAttribute.class).getMultiTermRewriteMethod();
    node.setTag(MultiTermRewriteMethodAttribute.TAG_ID,rewriteMethod);
  }
  return node;
}
