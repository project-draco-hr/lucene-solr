{
  DelegationTokenRequest.Get getRequest=new DelegationTokenRequest.Get();
  DelegationTokenResponse.Get getResponse=new DelegationTokenResponse.Get();
  try {
    delegationTokenResponse(getRequest,getResponse,"");
    getResponse.getDelegationToken();
    fail("Expected SolrException");
  }
 catch (  SolrException se) {
  }
  final String someToken="someToken";
  delegationTokenResponse(getRequest,getResponse,getNestedMapJson("NotToken","urlString",someToken));
  assertNull(getResponse.getDelegationToken());
  try {
    delegationTokenResponse(getRequest,getResponse,getMapJson("Token",someToken));
    getResponse.getDelegationToken();
    fail("Expected SolrException");
  }
 catch (  SolrException se) {
  }
  delegationTokenResponse(getRequest,getResponse,getNestedMapJson("Token","notUrlString",someToken));
  assertNull(getResponse.getDelegationToken());
  delegationTokenResponse(getRequest,getResponse,getNestedMapJson("Token","urlString",someToken));
  assertEquals(someToken,getResponse.getDelegationToken());
}
