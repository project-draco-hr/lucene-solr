{
  org.apache.lucene.benchmark.byTask.feeds.demohtml.HTMLParser p=new org.apache.lucene.benchmark.byTask.feeds.demohtml.HTMLParser(reader);
  if (title == null) {
    title=p.getTitle();
  }
  Properties props=p.getMetaTags();
  Reader r=p.getReader();
  char c[]=new char[1024];
  StringBuilder bodyBuf=new StringBuilder();
  int n;
  while ((n=r.read(c)) >= 0) {
    if (n > 0) {
      bodyBuf.append(c,0,n);
    }
  }
  r.close();
  if (date == null && props.getProperty("date") != null) {
    try {
      date=dateFormat.parse(props.getProperty("date").trim());
    }
 catch (    ParseException e) {
      System.out.println("ignoring date parse exception (assigning 'now') for: " + props.getProperty("date"));
      date=new Date();
    }
  }
  docData.clear();
  docData.setName(name);
  docData.setBody(bodyBuf.toString());
  docData.setTitle(title);
  docData.setProps(props);
  docData.setDate(date);
  return docData;
}
