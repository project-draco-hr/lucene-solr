{
  int oldMaxEdits=maxEdits;
  boolean termAfter=bottomTerm == null || (lastTerm != null && lastTerm.compareTo(bottomTerm) >= 0);
  while (maxEdits > 0) {
    float maxBoost=1.0f - ((float)maxEdits / (float)termLength);
    if (bottom < maxBoost || (bottom == maxBoost && termAfter == false)) {
      break;
    }
    maxEdits--;
  }
  if (oldMaxEdits != maxEdits || lastTerm == null) {
    actualEnum=getAutomatonEnum(maxEdits,lastTerm);
  }
}
