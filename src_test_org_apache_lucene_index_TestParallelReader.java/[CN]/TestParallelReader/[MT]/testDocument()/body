{
  Directory dir1=getDir1();
  Directory dir2=getDir2();
  ParallelReader pr=new ParallelReader();
  pr.add(IndexReader.open(dir1));
  pr.add(IndexReader.open(dir2));
  Document doc11=pr.document(0,new MapFieldSelector(new String[]{"f1"}));
  Document doc24=pr.document(1,new MapFieldSelector(Arrays.asList(new String[]{"f4"})));
  Document doc223=pr.document(1,new MapFieldSelector(new String[]{"f2","f3"}));
  assertEquals(1,numFields(doc11));
  assertEquals(1,numFields(doc24));
  assertEquals(2,numFields(doc223));
  assertEquals("v1",doc11.get("f1"));
  assertEquals("v2",doc24.get("f4"));
  assertEquals("v2",doc223.get("f2"));
  assertEquals("v2",doc223.get("f3"));
}
