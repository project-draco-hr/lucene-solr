{
  Directory dir1=new RAMDirectory();
  IndexWriter w1=new IndexWriter(dir1,new StandardAnalyzer(),true);
  Document d1=new Document();
  d1.add(new Field("f1","v1",Field.Store.YES,Field.Index.TOKENIZED));
  d1.add(new Field("f2","v1",Field.Store.YES,Field.Index.TOKENIZED));
  w1.addDocument(d1);
  Document d2=new Document();
  d2.add(new Field("f1","v2",Field.Store.YES,Field.Index.TOKENIZED));
  d2.add(new Field("f2","v2",Field.Store.YES,Field.Index.TOKENIZED));
  w1.addDocument(d2);
  w1.close();
  Directory dir2=new RAMDirectory();
  IndexWriter w2=new IndexWriter(dir2,new StandardAnalyzer(),true);
  Document d3=new Document();
  d3.add(new Field("f3","v1",Field.Store.YES,Field.Index.TOKENIZED));
  d3.add(new Field("f4","v1",Field.Store.YES,Field.Index.TOKENIZED));
  w2.addDocument(d3);
  Document d4=new Document();
  d4.add(new Field("f3","v2",Field.Store.YES,Field.Index.TOKENIZED));
  d4.add(new Field("f4","v2",Field.Store.YES,Field.Index.TOKENIZED));
  w2.addDocument(d4);
  w2.close();
  ParallelReader pr=new ParallelReader();
  pr.add(IndexReader.open(dir1));
  pr.add(IndexReader.open(dir2));
  return new IndexSearcher(pr);
}
