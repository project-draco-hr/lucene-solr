{
  Directory dir=newDirectory();
  Analyzer a=new MockAnalyzer(random,MockTokenizer.SIMPLE,true,MockTokenFilter.ENGLISH_STOPSET,true);
  IndexWriter w=new IndexWriter(dir,newIndexWriterConfig(TEST_VERSION_CURRENT,a));
  Document doc=new Document();
  doc.add(newField("f","the wizard of ozzy",Field.Store.NO,Field.Index.ANALYZED));
  w.addDocument(doc);
  IndexReader r=IndexReader.open(w,true);
  w.close();
  IndexSearcher s=newSearcher(r);
  QueryParser qp=new QueryParser(TEST_VERSION_CURRENT,"f",a);
  Query q=qp.parse("\"wizard of ozzy\"");
  assertEquals(1,s.search(q,1).totalHits);
  s.close();
  r.close();
  dir.close();
}
