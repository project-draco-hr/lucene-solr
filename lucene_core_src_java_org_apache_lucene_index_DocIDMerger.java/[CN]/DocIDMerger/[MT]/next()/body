{
  if (queue != null) {
    T top=queue.top();
    if (top == null) {
      return null;
    }
    if (first == false) {
      while (true) {
        int docID=top.nextDoc();
        if (docID == NO_MORE_DOCS) {
          queue.pop();
          top=queue.top();
          break;
        }
        int mappedDocID=top.docMap.get(docID);
        if (mappedDocID == -1) {
          continue;
        }
 else {
          top.mappedDocID=mappedDocID;
          top=queue.updateTop();
          break;
        }
      }
    }
    first=false;
    return top;
  }
 else {
    while (true) {
      if (current == null) {
        return null;
      }
      int docID=current.nextDoc();
      if (docID == NO_MORE_DOCS) {
        if (nextIndex == subs.size()) {
          current=null;
          return null;
        }
        current=subs.get(nextIndex);
        nextIndex++;
        continue;
      }
      int mappedDocID=current.docMap.get(docID);
      if (mappedDocID == -1) {
        continue;
      }
      current.mappedDocID=mappedDocID;
      return current;
    }
  }
}
