{
  final Bits docsWithField=DocValues.getDocsWithField(context.reader(),field);
  if (negate) {
    if (docsWithField instanceof MatchAllBits) {
      return null;
    }
    return new DocValuesDocIdSet(context.reader().maxDoc(),acceptDocs){
      @Override protected final boolean matchDoc(      int doc){
        return !docsWithField.get(doc);
      }
    }
;
  }
 else {
    if (docsWithField instanceof MatchNoBits) {
      return null;
    }
    if (docsWithField instanceof BitSet) {
      return BitsFilteredDocIdSet.wrap(new BitDocIdSet((BitSet)docsWithField),acceptDocs);
    }
    return new DocValuesDocIdSet(context.reader().maxDoc(),acceptDocs){
      @Override protected final boolean matchDoc(      int doc){
        return docsWithField.get(doc);
      }
    }
;
  }
}
