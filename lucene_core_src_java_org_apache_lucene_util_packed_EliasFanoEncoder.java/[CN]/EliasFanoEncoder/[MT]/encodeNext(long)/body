{
  if (numEncoded >= numValues) {
    throw new IllegalStateException("encodeNext called more than " + numValues + " times.");
  }
  if (lastEncoded > x) {
    throw new IllegalArgumentException(x + " smaller than previous " + lastEncoded);
  }
  if (x > upperBound) {
    throw new IllegalArgumentException(x + " larger than upperBound " + upperBound);
  }
  encodeUpperBits(x >>> numLowBits);
  encodeLowerBits(x & lowerBitsMask);
  numEncoded++;
  lastEncoded=x;
}
