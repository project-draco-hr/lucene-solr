{
  if (json instanceof Map) {
    String resourceId=ManagedEndpoint.resolveResourceId(endpoint.getRequest());
    Map<String,String> info=(Map<String,String>)json;
    info.put("resourceId",resourceId);
    storeManagedData(applyUpdatesToManagedData(json));
  }
 else {
    throw new ResourceException(Status.CLIENT_ERROR_BAD_REQUEST,"Expected Map to create a new ManagedResource but received a " + json.getClass().getName());
  }
}
