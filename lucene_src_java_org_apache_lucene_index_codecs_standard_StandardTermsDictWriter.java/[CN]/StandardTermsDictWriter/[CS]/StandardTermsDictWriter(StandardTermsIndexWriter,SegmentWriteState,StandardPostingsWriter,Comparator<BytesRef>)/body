{
  final String termsFileName=IndexFileNames.segmentFileName(state.segmentName,"",StandardCodec.TERMS_EXTENSION);
  this.termsIndexWriter=termsIndexWriter;
  this.termComp=termComp;
  out=state.directory.createOutput(termsFileName);
  termsIndexWriter.setTermsOutput(out);
  state.flushedFiles.add(termsFileName);
  fieldInfos=state.fieldInfos;
  CodecUtil.writeHeader(out,CODEC_NAME,VERSION_CURRENT);
  out.writeLong(0);
  termWriter=new DeltaBytesWriter(out);
  currentField=null;
  this.postingsWriter=postingsWriter;
  postingsWriter.start(out);
}
