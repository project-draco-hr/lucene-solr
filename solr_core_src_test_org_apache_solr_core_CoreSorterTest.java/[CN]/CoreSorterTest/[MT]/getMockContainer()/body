{
  CoreContainer mockCC=createMock(CoreContainer.class);
  ZkController mockZKC=createMock(ZkController.class);
  ClusterState mockClusterState=createMock(ClusterState.class);
  reset(mockCC,mockZKC,mockClusterState);
  expect(mockCC.isZooKeeperAware()).andReturn(Boolean.TRUE).anyTimes();
  expect(mockCC.getZkController()).andReturn(mockZKC).anyTimes();
  expect(mockClusterState.getLiveNodes()).andReturn(liveNodes).anyTimes();
  expect(mockZKC.getClusterState()).andReturn(mockClusterState).anyTimes();
  replay(mockCC,mockZKC,mockClusterState);
  return mockCC;
}
