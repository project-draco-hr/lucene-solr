{
  IndexWriter w=new IndexWriter(dir1,LuceneTestCase.newIndexWriterConfig(random,TEST_VERSION_CURRENT,new MockAnalyzer(random)).setMergePolicy(new LogDocMergePolicy()));
  for (int i=0; i < 100; i++) {
    w.addDocument(createDocument(i,indexName,4));
    if (multiSegment && (i % 10) == 0) {
    }
  }
  if (!multiSegment) {
    w.optimize();
  }
  w.close();
}
