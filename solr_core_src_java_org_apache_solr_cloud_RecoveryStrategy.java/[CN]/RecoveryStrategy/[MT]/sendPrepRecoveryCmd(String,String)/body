{
  HttpSolrServer server=new HttpSolrServer(leaderBaseUrl);
  try {
    server.setConnectionTimeout(45000);
    server.setSoTimeout(120000);
    WaitForState prepCmd=new WaitForState();
    prepCmd.setCoreName(leaderCoreName);
    prepCmd.setNodeName(zkController.getNodeName());
    prepCmd.setCoreNodeName(coreZkNodeName);
    prepCmd.setState(ZkStateReader.RECOVERING);
    prepCmd.setCheckLive(true);
    prepCmd.setOnlyIfLeader(true);
    server.request(prepCmd);
  }
  finally {
    server.shutdown();
  }
}
