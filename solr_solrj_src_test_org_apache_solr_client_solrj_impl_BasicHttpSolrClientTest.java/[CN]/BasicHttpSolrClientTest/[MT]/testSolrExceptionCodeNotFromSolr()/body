{
  final int status=527;
  assertEquals(status + " didn't generate an UNKNOWN error code, someone modified the list of valid ErrorCode's w/o changing this test to work a different way",ErrorCode.UNKNOWN,ErrorCode.getErrorCode(status));
  try (HttpSolrClient client=new HttpSolrClient(jetty.getBaseUrl().toString() + "/debug/foo")){
    DebugServlet.setErrorCode(status);
    try {
      SolrQuery q=new SolrQuery("foo");
      client.query(q,METHOD.GET);
      fail("Didn't get excepted exception from oversided request");
    }
 catch (    SolrException e) {
      assertEquals("Unexpected exception status code",status,e.code());
    }
  }
  finally {
    DebugServlet.clear();
  }
}
