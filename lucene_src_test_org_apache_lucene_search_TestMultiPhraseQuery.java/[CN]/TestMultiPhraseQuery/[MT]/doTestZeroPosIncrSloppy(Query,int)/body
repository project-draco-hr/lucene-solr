{
  Directory dir=newDirectory();
  IndexWriterConfig cfg=newIndexWriterConfig(TEST_VERSION_CURRENT,new CannedAnalyzer(INCR_0_DOC_TOKENS));
  IndexWriter writer=new IndexWriter(dir,cfg);
  Document doc=new Document();
  doc.add(new TextField("field",""));
  writer.addDocument(doc);
  IndexReader r=IndexReader.open(writer,false);
  writer.close();
  IndexSearcher s=new IndexSearcher(r);
  if (VERBOSE) {
    System.out.println("QUERY=" + q);
  }
  TopDocs hits=s.search(q,1);
  assertEquals("wrong number of results",nExpected,hits.totalHits);
  if (VERBOSE) {
    for (int hit=0; hit < hits.totalHits; hit++) {
      ScoreDoc sd=hits.scoreDocs[hit];
      System.out.println("  hit doc=" + sd.doc + " score="+ sd.score);
    }
  }
  r.close();
  dir.close();
}
