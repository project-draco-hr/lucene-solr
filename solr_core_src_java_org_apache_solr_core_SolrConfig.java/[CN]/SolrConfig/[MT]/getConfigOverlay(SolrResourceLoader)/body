{
  InputStream in=null;
  InputStreamReader isr=null;
  try {
    try {
      in=loader.openResource(ConfigOverlay.RESOURCE_NAME);
    }
 catch (    IOException e) {
      return new ConfigOverlay(Collections.EMPTY_MAP,-1);
    }
    int version=0;
    if (in instanceof ZkSolrResourceLoader.ZkByteArrayInputStream) {
      version=((ZkSolrResourceLoader.ZkByteArrayInputStream)in).getStat().getVersion();
      log.info("config overlay loaded . version : {} ",version);
    }
    isr=new InputStreamReader(in,StandardCharsets.UTF_8);
    Map m=(Map)ObjectBuilder.getVal(new JSONParser(isr));
    return new ConfigOverlay(m,version);
  }
 catch (  Exception e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error reading config overlay",e);
  }
 finally {
    IOUtils.closeQuietly(isr);
    IOUtils.closeQuietly(in);
  }
}
