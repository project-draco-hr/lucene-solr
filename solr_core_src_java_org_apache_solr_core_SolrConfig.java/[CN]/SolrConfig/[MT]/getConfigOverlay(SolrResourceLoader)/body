{
  InputStream in=null;
  try {
    in=loader.openResource(ConfigOverlay.RESOURCE_NAME);
  }
 catch (  IOException e) {
    return new ConfigOverlay(Collections.EMPTY_MAP,0);
  }
  try {
    int version=0;
    if (in instanceof ZkSolrResourceLoader.ZkByteArrayInputStream) {
      version=((ZkSolrResourceLoader.ZkByteArrayInputStream)in).getStat().getVersion();
    }
    Map m=(Map)ObjectBuilder.getVal(new JSONParser(new InputStreamReader(in,StandardCharsets.UTF_8)));
    return new ConfigOverlay(m,version);
  }
 catch (  Exception e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error reading config overlay",e);
  }
}
