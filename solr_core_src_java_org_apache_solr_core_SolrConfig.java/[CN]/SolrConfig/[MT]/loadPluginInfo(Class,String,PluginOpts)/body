{
  EnumSet<PluginOpts> options=EnumSet.<PluginOpts>of(NOOP,opts);
  boolean requireName=options.contains(REQUIRE_NAME);
  boolean requireClass=options.contains(REQUIRE_CLASS);
  List<PluginInfo> result=readPluginInfos(tag,requireName,requireClass);
  if (1 < result.size() && !options.contains(MULTI_OK)) {
    throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,"Found " + result.size() + " configuration sections when at most "+ "1 is allowed matching expression: "+ tag);
  }
  if (!result.isEmpty())   pluginStore.put(clazz.getName(),result);
}
