{
  int numPositiveScores=0;
  for (int i=0; i < scores.length; i++) {
    if (scores[i] > 0) {
      ++numPositiveScores;
    }
  }
  Directory directory=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random,directory);
  writer.commit();
  IndexReader ir=writer.getReader();
  writer.close();
  IndexSearcher searcher=new IndexSearcher(ir);
  Weight fake=new TermQuery(new Term("fake","weight")).createWeight(searcher);
  Scorer s=new SimpleScorer(fake);
  TopDocsCollector<ScoreDoc> tdc=TopScoreDocCollector.create(scores.length,true);
  Collector c=new PositiveScoresOnlyCollector(tdc);
  c.setScorer(s);
  while (s.nextDoc() != DocIdSetIterator.NO_MORE_DOCS) {
    c.collect(0);
  }
  TopDocs td=tdc.topDocs();
  ScoreDoc[] sd=td.scoreDocs;
  assertEquals(numPositiveScores,td.totalHits);
  for (int i=0; i < sd.length; i++) {
    assertTrue("only positive scores should return: " + sd[i].score,sd[i].score > 0);
  }
  searcher.close();
  ir.close();
  directory.close();
}
