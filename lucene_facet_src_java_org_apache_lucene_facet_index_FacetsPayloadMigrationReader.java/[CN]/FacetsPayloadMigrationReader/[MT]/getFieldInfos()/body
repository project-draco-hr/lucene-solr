{
  FieldInfos innerInfos=super.getFieldInfos();
  ArrayList<FieldInfo> infos=new ArrayList<FieldInfo>(innerInfos.size());
  HashSet<String> leftoverFields=new HashSet<String>(fieldTerms.keySet());
  int number=-1;
  for (  FieldInfo info : innerInfos) {
    if (fieldTerms.containsKey(info.name)) {
      infos.add(new FieldInfo(info.name,true,info.number,info.hasVectors(),info.omitsNorms(),info.hasPayloads(),info.getIndexOptions(),Type.BYTES_VAR_STRAIGHT,info.getNormType(),info.attributes()));
      leftoverFields.remove(info.name);
    }
 else {
      infos.add(info);
    }
    number=Math.max(number,info.number);
  }
  for (  String field : leftoverFields) {
    infos.add(new FieldInfo(field,false,++number,false,false,false,null,Type.BYTES_VAR_STRAIGHT,null,null));
  }
  return new FieldInfos(infos.toArray(new FieldInfo[infos.size()]));
}
