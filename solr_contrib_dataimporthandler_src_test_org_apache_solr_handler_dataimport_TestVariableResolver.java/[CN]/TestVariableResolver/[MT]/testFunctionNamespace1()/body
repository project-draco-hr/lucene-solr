{
  VariableResolver resolver=new VariableResolver();
  final List<Map<String,String>> l=new ArrayList<Map<String,String>>();
  Map<String,String> m=new HashMap<String,String>();
  m.put("name","test");
  m.put("class",E.class.getName());
  l.add(m);
  resolver.setEvaluators(new DataImporter().getEvaluators(l));
  ContextImpl context=new ContextImpl(null,resolver,null,Context.FULL_DUMP,Collections.EMPTY_MAP,null,null);
  SimpleDateFormat format=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'",Locale.ROOT);
  format.setTimeZone(TimeZone.getTimeZone("UTC"));
  DateMathParser dmp=new DateMathParser(TimeZone.getDefault(),Locale.getDefault());
  String s=resolver.replaceTokens("${dataimporter.functions.formatDate('NOW/DAY','yyyy-MM-dd HH:mm')}");
  assertEquals(new SimpleDateFormat("yyyy-MM-dd HH:mm",Locale.ROOT).format(dmp.parseMath("/DAY")),s);
  assertEquals("Hello World",resolver.replaceTokens("${dataimporter.functions.test('TEST')}"));
}
