{
  if (dataDir == null)   return getDefaultDataDir();
  String absolutePath=new File(dataDir).getAbsolutePath();
  if (absolutePath.equals(dataDir) || (absolutePath + File.separator).equals(dataDir))   return dataDir;
  return dataDir.endsWith(File.separator) ? instanceDir + dataDir : instanceDir + dataDir + File.separator;
}
