{
  if (visitable == null)   throw new IllegalArgumentException("visitable must not be null");
  Scope scope=visitable.getClass().getAnnotation(Scope.class);
  if (scope == null)   throw new RegistryException("Visitable has not Scope");
  if (LOG.isInfoEnabled())   LOG.info("Register scope visitable -- " + visitable.getClass());
  if (scope.scope() == Scope.ScopeType.REQUEST && this.requestVisitable == null)   this.requestVisitable=visitable;
 else   if (scope.scope() == Scope.ScopeType.SESSION && this.sessionVisitable == null)   this.sessionVisitable=visitable;
 else   if (scope.scope() == Scope.ScopeType.CONTEXT && this.contextVisitable == null)   this.sessionVisitable=visitable;
  if (!this.visitorBuffer.isEmpty()) {
    List<ScopeVisitor> tempList=this.visitorBuffer;
    this.visitorBuffer=new ArrayList<ScopeVisitor>(5);
    for (    ScopeVisitor visitor : tempList) {
      registerScopeVisitor(visitor);
    }
    tempList.clear();
  }
}
