{
  if (localName.equals("dependency") && insideDependenciesTag()) {
    String org=attributes.getValue("org");
    boolean foundAllAttributes=true;
    if (null == org) {
      log("MISSING 'org' attribute on <dependency> in " + ivyXmlFile.getPath(),Project.MSG_ERR);
      fail=true;
      foundAllAttributes=false;
    }
    String name=attributes.getValue("name");
    if (null == name) {
      log("MISSING 'name' attribute on <dependency> in " + ivyXmlFile.getPath(),Project.MSG_ERR);
      fail=true;
      foundAllAttributes=false;
    }
    String rev=attributes.getValue("rev");
    if (null == rev) {
      log("MISSING 'rev' attribute on <dependency> in " + ivyXmlFile.getPath(),Project.MSG_ERR);
      fail=true;
      foundAllAttributes=false;
    }
    if (foundAllAttributes) {
      String coordinateKey="/" + org + '/'+ name;
      String expectedRev="${" + coordinateKey + '}';
      if (!rev.equals(expectedRev)) {
        log("BAD <dependency> 'rev' attribute value '" + rev + "' - expected '"+ expectedRev+ "'"+ " in "+ ivyXmlFile.getPath(),Project.MSG_ERR);
        fail=true;
      }
      if (!referencedCoordinateKeys.containsKey(coordinateKey)) {
        log("MISSING key '" + coordinateKey + "' in "+ centralizedVersionsFile.getPath(),Project.MSG_ERR);
        fail=true;
      }
      referencedCoordinateKeys.put(coordinateKey,true);
    }
  }
  tags.push(localName);
}
