{
  super.setUp();
  random=newRandom();
  directory=newDirectory(random);
  RandomIndexWriter writer=new RandomIndexWriter(random,directory);
  long theLong=Long.MAX_VALUE;
  double theDouble=Double.MAX_VALUE;
  byte theByte=Byte.MAX_VALUE;
  short theShort=Short.MAX_VALUE;
  int theInt=Integer.MAX_VALUE;
  float theFloat=Float.MAX_VALUE;
  unicodeStrings=new String[NUM_DOCS];
  for (int i=0; i < NUM_DOCS; i++) {
    Document doc=new Document();
    doc.add(new Field("theLong",String.valueOf(theLong--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("theDouble",String.valueOf(theDouble--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("theByte",String.valueOf(theByte--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("theShort",String.valueOf(theShort--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("theInt",String.valueOf(theInt--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    doc.add(new Field("theFloat",String.valueOf(theFloat--),Field.Store.NO,Field.Index.NOT_ANALYZED));
    if (random.nextInt(40) != 17) {
      String s=null;
      if (i > 0 && random.nextInt(3) == 1) {
        for (int iter=0; iter < 10 && s == null; iter++) {
          s=unicodeStrings[random.nextInt(i)];
        }
        if (s == null) {
          s=_TestUtil.randomUnicodeString(random,250);
        }
      }
 else {
        s=_TestUtil.randomUnicodeString(random,250);
      }
      unicodeStrings[i]=s;
      doc.add(new Field("theRandomUnicodeString",unicodeStrings[i],Field.Store.YES,Field.Index.NOT_ANALYZED_NO_NORMS));
    }
    writer.addDocument(doc);
  }
  reader=writer.getReader();
  writer.close();
}
