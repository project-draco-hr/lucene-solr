{
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("action",CollectionParams.CollectionAction.SPLITSHARD.toString());
  params.set("collection",collection);
  if (shardId != null) {
    params.set("shard",shardId);
  }
  if (subRanges != null) {
    StringBuilder ranges=new StringBuilder();
    for (int i=0; i < subRanges.size(); i++) {
      DocRouter.Range subRange=subRanges.get(i);
      ranges.append(subRange.toString());
      if (i < subRanges.size() - 1)       ranges.append(",");
    }
    params.set("ranges",ranges.toString());
  }
  if (splitKey != null) {
    params.set("split.key",splitKey);
  }
  SolrRequest request=new QueryRequest(params);
  request.setPath("/admin/collections");
  String baseUrl=((HttpSolrServer)shardToJetty.get(SHARD1).get(0).client.solrClient).getBaseURL();
  baseUrl=baseUrl.substring(0,baseUrl.length() - "collection1".length());
  HttpSolrServer baseServer=new HttpSolrServer(baseUrl);
  baseServer.setConnectionTimeout(30000);
  baseServer.setSoTimeout(60000 * 5);
  baseServer.request(request);
  baseServer.shutdown();
}
