{
  waitForThingsToLevelOut(15);
  if (usually()) {
    log.info("Using legacyCloud=false for cluster");
    CollectionsAPIDistributedZkTest.setClusterProp(cloudClient,"legacyCloud","false");
  }
  log.info("Starting testSplitShardWithRule");
  String collectionName="shardSplitWithRule";
  CollectionAdminRequest.Create createRequest=new CollectionAdminRequest.Create().setCollectionName(collectionName).setNumShards(1).setReplicationFactor(2).setRule("shard:*,replica:<2,node:*");
  CollectionAdminResponse response=createRequest.process(cloudClient);
  assertEquals(0,response.getStatus());
  CollectionAdminRequest.SplitShard splitShardRequest=new CollectionAdminRequest.SplitShard().setCollectionName(collectionName).setShardName("shard1");
  response=splitShardRequest.process(cloudClient);
  assertEquals(String.valueOf(response.getErrorMessages()),0,response.getStatus());
}
