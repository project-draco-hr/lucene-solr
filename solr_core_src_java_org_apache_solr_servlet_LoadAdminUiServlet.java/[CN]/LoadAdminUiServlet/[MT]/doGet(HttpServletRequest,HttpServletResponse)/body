{
  response.setCharacterEncoding("UTF-8");
  response.setContentType("text/html");
  PrintWriter out=response.getWriter();
  InputStream in=getServletContext().getResourceAsStream("/admin.html");
  if (in != null) {
    try {
      CoreContainer cores=(CoreContainer)request.getAttribute("org.apache.solr.CoreContainer");
      String html=IOUtils.toString(in,"UTF-8");
      String[] search=new String[]{"${contextPath}","${adminPath}"};
      String[] replace=new String[]{StringEscapeUtils.escapeJavaScript(request.getContextPath()),StringEscapeUtils.escapeJavaScript(cores.getAdminPath())};
      out.println(StringUtils.replaceEach(html,search,replace));
    }
  finally {
      IOUtils.closeQuietly(in);
    }
  }
 else {
    out.println("solr");
  }
}
