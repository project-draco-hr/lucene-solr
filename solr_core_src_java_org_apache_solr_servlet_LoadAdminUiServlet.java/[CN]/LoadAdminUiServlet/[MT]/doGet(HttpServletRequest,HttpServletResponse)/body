{
  CoreContainer cores=(CoreContainer)request.getAttribute("org.apache.solr.CoreContainer");
  InputStream in=getServletContext().getResourceAsStream("/admin.html");
  if (in != null && cores != null) {
    try {
      response.setCharacterEncoding("UTF-8");
      response.setContentType("text/html");
      Writer out=new OutputStreamWriter(response.getOutputStream(),"UTF-8");
      String html=IOUtils.toString(in,"UTF-8");
      String[] search=new String[]{"${contextPath}","${adminPath}"};
      String[] replace=new String[]{StringEscapeUtils.escapeJavaScript(request.getContextPath()),StringEscapeUtils.escapeJavaScript(cores.getAdminPath())};
      out.write(StringUtils.replaceEach(html,search,replace));
      out.flush();
    }
  finally {
      IOUtils.closeQuietly(in);
    }
  }
 else {
    response.sendError(404);
  }
}
