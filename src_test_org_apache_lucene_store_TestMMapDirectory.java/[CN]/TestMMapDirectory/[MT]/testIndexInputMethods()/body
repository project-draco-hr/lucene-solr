{
  Class FSDirectory=Class.forName("org.apache.lucene.store.FSDirectory");
  Class IndexInput=Class.forName("org.apache.lucene.store.IndexInput");
  Class MMapDirectory=Class.forName("org.apache.lucene.store.MMapDirectory");
  Method[] methods=FSDirectory.getDeclaredMethods();
  for (int i=0; i < methods.length; i++) {
    Method method=methods[i];
    if (IndexInput.isAssignableFrom(method.getReturnType())) {
      try {
        Method m=MMapDirectory.getMethod(method.getName(),method.getParameterTypes());
        if (m.getDeclaringClass() != MMapDirectory) {
          fail("FSDirectory has method " + method + " but MMapDirectory does not override");
        }
      }
 catch (      NoSuchMethodException e) {
        fail("unexpected NoSuchMethodException");
      }
    }
  }
}
