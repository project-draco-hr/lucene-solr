{
synchronized (this) {
    if (info != null) {
      info.write(state);
      info=null;
    }
    if (wrappedConsumer != null) {
      wrappedConsumer.close();
    }
  }
}
