{
  if (account == null)   throw new StorageException("can not store account -- is null");
  if (account.getName() == null)   throw new StorageException("can not store account -- name is null");
  if (account.getPassword() == null)   throw new StorageException("can not store account -- password is null");
  try {
    getAccount(account.getName());
    throw new IllegalStateException("account with accountname: " + account.getName() + " already exists");
  }
 catch (  IllegalStateException e) {
    throw new StorageException("Account already exists");
  }
catch (  StorageException e) {
    if (LOG.isDebugEnabled())     LOG.debug("checked account for existence -- does not exist -- store account");
  }
  try {
    this.container.set(account);
    this.container.commit();
  }
 catch (  Exception e) {
    LOG.error("Error occured on persisting changes -- rollback changes");
    this.container.rollback();
    throw new StorageException("Can not persist changes -- " + e.getMessage(),e);
  }
  if (LOG.isInfoEnabled())   LOG.info("Stored account: " + account);
}
