{
  if (isSingleton()) {
    State p=new State();
    initial=p;
    for (int i=0, cp=0; i < singleton.length(); i+=Character.charCount(cp)) {
      State q=new State();
      p.addTransition(new Transition(cp=singleton.codePointAt(i),q));
      p=q;
    }
    p.accept=true;
    deterministic=true;
    singleton=null;
  }
}
