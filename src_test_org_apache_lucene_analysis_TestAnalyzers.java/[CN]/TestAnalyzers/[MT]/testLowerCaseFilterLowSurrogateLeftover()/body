{
  WhitespaceTokenizer tokenizer=new WhitespaceTokenizer(new StringReader("BogustermBogusterm\udc16"));
  LowerCaseFilter filter=new LowerCaseFilter(Version.LUCENE_CURRENT,tokenizer);
  assertTokenStreamContents(filter,new String[]{"bogustermbogusterm\udc16"});
  filter.reset();
  String highSurEndingUpper="BogustermBoguster\ud801";
  String highSurEndingLower="bogustermboguster\ud801";
  tokenizer.reset(new StringReader(highSurEndingUpper));
  assertTokenStreamContents(filter,new String[]{highSurEndingLower});
  assertTrue(filter.hasAttribute(TermAttribute.class));
  char[] termBuffer=filter.getAttribute(TermAttribute.class).termBuffer();
  int length=highSurEndingLower.length();
  assertEquals('\ud801',termBuffer[length - 1]);
  assertEquals('\udc3e',termBuffer[length]);
}
