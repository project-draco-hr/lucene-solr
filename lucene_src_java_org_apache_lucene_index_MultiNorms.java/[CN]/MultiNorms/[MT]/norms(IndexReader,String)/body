{
  final IndexReader[] subs=r.getSequentialSubReaders();
  if (subs == null) {
    return r.norms(field);
  }
 else   if (subs.length == 0 || !r.hasNorms(field)) {
    return null;
  }
 else   if (subs.length == 1) {
    return norms(subs[0],field);
  }
 else {
    byte norms[]=new byte[r.maxDoc()];
    final List<IndexReader> leaves=new ArrayList<IndexReader>();
    ReaderUtil.gatherSubReaders(leaves,r);
    int end=0;
    for (    IndexReader leaf : leaves) {
      int start=end;
      leaf.norms(field,norms,start);
      end+=leaf.maxDoc();
    }
    return norms;
  }
}
