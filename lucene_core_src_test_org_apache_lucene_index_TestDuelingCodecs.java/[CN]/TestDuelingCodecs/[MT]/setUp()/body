{
  super.setUp();
  leftCodec=Codec.forName("SimpleText");
  rightCodec=new RandomCodec(random());
  leftDir=newDirectory();
  rightDir=newDirectory();
  long seed=random().nextLong();
  int maxTermLength=TestUtil.nextInt(random(),1,IndexWriter.MAX_TERM_LENGTH);
  MockAnalyzer leftAnalyzer=new MockAnalyzer(new Random(seed));
  leftAnalyzer.setMaxTokenLength(maxTermLength);
  MockAnalyzer rightAnalyzer=new MockAnalyzer(new Random(seed));
  rightAnalyzer.setMaxTokenLength(maxTermLength);
  IndexWriterConfig leftConfig=newIndexWriterConfig(TEST_VERSION_CURRENT,leftAnalyzer);
  leftConfig.setCodec(leftCodec);
  leftConfig.setMergePolicy(newLogMergePolicy());
  IndexWriterConfig rightConfig=newIndexWriterConfig(TEST_VERSION_CURRENT,rightAnalyzer);
  rightConfig.setCodec(rightCodec);
  rightConfig.setMergePolicy(newLogMergePolicy());
  RandomIndexWriter leftWriter=new RandomIndexWriter(new Random(seed),leftDir,leftConfig);
  RandomIndexWriter rightWriter=new RandomIndexWriter(new Random(seed),rightDir,rightConfig);
  int numdocs=atLeast(100);
  createRandomIndex(numdocs,leftWriter,seed);
  createRandomIndex(numdocs,rightWriter,seed);
  leftReader=maybeWrapReader(leftWriter.getReader());
  leftWriter.close();
  rightReader=maybeWrapReader(rightWriter.getReader());
  rightWriter.close();
  TestUtil.checkReader(leftReader);
  TestUtil.checkReader(rightReader);
  info="left: " + leftCodec.toString() + " / right: "+ rightCodec.toString();
}
