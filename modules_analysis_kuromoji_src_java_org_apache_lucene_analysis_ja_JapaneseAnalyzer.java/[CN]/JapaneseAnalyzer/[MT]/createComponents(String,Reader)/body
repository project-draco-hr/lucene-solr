{
  Tokenizer tokenizer=new JapaneseTokenizer(reader,userDict,true,mode);
  TokenStream stream=new JapaneseBaseFormFilter(tokenizer);
  stream=new JapanesePartOfSpeechStopFilter(true,stream,stoptags);
  stream=new CJKWidthFilter(stream);
  stream=new StopFilter(matchVersion,stream,stopwords);
  stream=new JapaneseKatakanaStemFilter(stream);
  stream=new LowerCaseFilter(matchVersion,stream);
  return new TokenStreamComponents(tokenizer,stream);
}
