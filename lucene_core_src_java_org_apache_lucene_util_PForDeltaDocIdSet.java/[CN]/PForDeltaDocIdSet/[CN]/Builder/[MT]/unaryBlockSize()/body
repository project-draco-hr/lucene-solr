{
  int deltaSum=0;
  for (int i=0; i < BLOCK_SIZE; ++i) {
    deltaSum+=1 + buffer[i];
  }
  int blockSize=(deltaSum + 0x07) >>> 3;
  ++blockSize;
  if (bufferSize < BLOCK_SIZE) {
    blockSize+=1;
  }
  return blockSize;
}
