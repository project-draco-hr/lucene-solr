{
  final PackedInts.Format format=PackedInts.Format.PACKED;
  long blockSize=1 + format.byteCount(PackedInts.VERSION_CURRENT,BLOCK_SIZE,bitsPerValue);
  if (numExceptions > 0) {
    blockSize+=2 + numExceptions + format.byteCount(PackedInts.VERSION_CURRENT,numExceptions,bitsPerException);
  }
  if (bufferSize < BLOCK_SIZE) {
    blockSize+=1;
  }
  return (int)blockSize;
}
