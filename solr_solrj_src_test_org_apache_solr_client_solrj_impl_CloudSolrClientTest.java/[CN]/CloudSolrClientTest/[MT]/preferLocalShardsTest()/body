{
  String collectionName="localShardsTestColl";
  int liveNodes=cluster.getJettySolrRunners().size();
  CollectionAdminRequest.createCollection(collectionName,"conf",liveNodes,liveNodes).setMaxShardsPerNode(liveNodes).processAndWait(cluster.getSolrClient(),TIMEOUT);
  AbstractDistribZkTestBase.waitForRecoveriesToFinish(collectionName,cluster.getSolrClient().getZkStateReader(),false,true,TIMEOUT);
  new UpdateRequest().add(id,"0","a_t","hello1").add(id,"2","a_t","hello2").add(id,"3","a_t","hello2").commit(cluster.getSolrClient(),collectionName);
  queryWithPreferLocalShards(cluster.getSolrClient(),true,collectionName);
}
