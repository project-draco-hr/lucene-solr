{
  if (node instanceof FieldQueryNode && !(node.getParent() instanceof RangeQueryNode)) {
    QueryConfigHandler config=getQueryConfigHandler();
    if (config != null) {
      FieldQueryNode fieldNode=(FieldQueryNode)node;
      FieldConfig fieldConfig=config.getFieldConfig(fieldNode.getFieldAsString());
      if (fieldConfig != null) {
        NumericConfig numericConfig=fieldConfig.get(ConfigurationKeys.NUMERIC_CONFIG);
        if (numericConfig != null) {
          NumberFormat numberFormat=numericConfig.getNumberFormat();
          String text=fieldNode.getTextAsString();
          Number number=null;
          if (text.length() > 0) {
            try {
              number=numberFormat.parse(text);
            }
 catch (            ParseException e) {
              throw new QueryNodeParseException(new MessageImpl(QueryParserMessages.COULD_NOT_PARSE_NUMBER,fieldNode.getTextAsString(),numberFormat.getClass().getCanonicalName()),e);
            }
switch (numericConfig.getType()) {
case LONG:
              number=number.longValue();
            break;
case INT:
          number=number.intValue();
        break;
case DOUBLE:
      number=number.doubleValue();
    break;
case FLOAT:
  number=number.floatValue();
}
}
 else {
throw new QueryNodeParseException(new MessageImpl(QueryParserMessages.NUMERIC_CANNOT_BE_EMPTY,fieldNode.getFieldAsString()));
}
NumericQueryNode lowerNode=new NumericQueryNode(fieldNode.getField(),number,numberFormat);
NumericQueryNode upperNode=new NumericQueryNode(fieldNode.getField(),number,numberFormat);
return new NumericRangeQueryNode(lowerNode,upperNode,true,true,numericConfig);
}
}
}
}
return node;
}
