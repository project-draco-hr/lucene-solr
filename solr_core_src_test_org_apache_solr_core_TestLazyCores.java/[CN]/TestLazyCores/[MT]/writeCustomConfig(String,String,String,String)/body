{
  File coreRoot=new File(solrHomeDirectory,coreName);
  File subHome=new File(coreRoot,"conf");
  if (!coreRoot.exists()) {
    assertTrue("Failed to make subdirectory ",coreRoot.mkdirs());
  }
  FileUtils.writeStringToFile(new File(coreRoot,"core.properties"),"name=" + coreName + System.getProperty("line.separator")+ "transient=true"+ System.getProperty("line.separator")+ "loadOnStartup=true",Charsets.UTF_8.toString());
  FileUtils.writeStringToFile(new File(subHome,"solrconfig.snippet.randomindexconfig.xml"),rand_snip);
  FileUtils.writeStringToFile(new File(subHome,"solrconfig.xml"),config,Charsets.UTF_8.toString());
  FileUtils.writeStringToFile(new File(subHome,"schema.xml"),schema,Charsets.UTF_8.toString());
}
