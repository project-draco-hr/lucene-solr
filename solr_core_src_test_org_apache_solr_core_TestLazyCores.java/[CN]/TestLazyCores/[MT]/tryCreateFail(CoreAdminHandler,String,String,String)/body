{
  try {
    SolrQueryResponse resp=new SolrQueryResponse();
    SolrQueryRequest request=req(CoreAdminParams.ACTION,CoreAdminParams.CoreAdminAction.CREATE.toString(),CoreAdminParams.DATA_DIR,dataDir,CoreAdminParams.NAME,name,"schema","schema.xml","config","solrconfig.xml");
    admin.handleRequestBody(request,resp);
    fail("Should have thrown an error");
  }
 catch (  SolrException se) {
    assertEquals("Exception code should be 500",500,se.code());
    for (    String err : errs) {
      assertTrue("Should have seen an exception containing the an error",se.getMessage().contains(err));
    }
  }
}
