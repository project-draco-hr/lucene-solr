{
  SchemaField field=h.getCore().getLatestSchema().getField("content_charfilter");
  Analyzer analyzer=((TextField)field.getType()).getMultiTermAnalyzer();
  assertTrue(analyzer instanceof TokenizerChain);
  assertTrue(((TokenizerChain)analyzer).getTokenizerFactory() instanceof KeywordTokenizerFactory);
  TokenizerChain tc=(TokenizerChain)analyzer;
  for (  TokenFilterFactory factory : tc.getTokenFilterFactories()) {
    assertTrue(factory instanceof LowerCaseFilterFactory);
  }
  assertTrue(tc.getCharFilterFactories().length == 1);
  assertTrue(tc.getCharFilterFactories()[0] instanceof MappingCharFilterFactory);
}
