{
  int i=0;
  while ((i < truncated.length()) && matchingChar(truncated.charAt(i))) {
    i++;
  }
  prefix=truncated.substring(0,i);
  prefixRef=new BytesRef(prefix);
  StringBuilder re=new StringBuilder();
  while (i < truncated.length()) {
    appendRegExpForChar(truncated.charAt(i),re);
    i++;
  }
  pattern=Pattern.compile(re.toString());
}
