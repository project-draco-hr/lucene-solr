{
  Set correct=new TreeSet();
  for (int i=0; i < results.length; i++) {
    correct.add(new Integer(results[i]));
  }
  final Set actual=new TreeSet();
  searcher.search(query,new Collector(){
    private int base=0;
    public void setScorer(    Scorer scorer) throws IOException {
    }
    public void collect(    int doc){
      actual.add(new Integer(doc + base));
    }
    public void setNextReader(    IndexReader reader,    int docBase){
      base=docBase;
    }
    public boolean acceptsDocsOutOfOrder(){
      return true;
    }
  }
);
  Assert.assertEquals(query.toString(defaultFieldName),correct,actual);
  QueryUtils.check(query,searcher);
}
