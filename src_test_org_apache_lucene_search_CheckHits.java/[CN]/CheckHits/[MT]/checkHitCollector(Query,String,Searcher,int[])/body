{
  Set correct=new TreeSet();
  for (int i=0; i < results.length; i++) {
    correct.add(new Integer(results[i]));
  }
  final Set actual=new TreeSet();
  searcher.search(query,new MultiReaderHitCollector(){
    private int base=-1;
    public void collect(    int doc,    float score){
      actual.add(new Integer(doc + base));
    }
    public void setNextReader(    IndexReader reader,    int docBase){
      base=docBase;
    }
  }
);
  TestCase.assertEquals(query.toString(defaultFieldName),correct,actual);
  QueryUtils.check(query,searcher);
}
