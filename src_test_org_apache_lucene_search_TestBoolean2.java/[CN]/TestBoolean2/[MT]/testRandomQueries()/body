{
  Random rnd=newRandom();
  String[] vals={"w1","w2","w3","w4","w5","xx","yy","zzz"};
  int tot=0;
  BooleanQuery q1=null;
  try {
    for (int i=0; i < 1000; i++) {
      int level=rnd.nextInt(3);
      q1=randBoolQuery(new Random(rnd.nextLong()),level,field,vals,null);
      Sort sort=Sort.INDEXORDER;
      BooleanQuery.setAllowDocsOutOfOrder(false);
      QueryUtils.check(q1,searcher);
      ScoreDoc[] hits1=searcher.search(q1,null,1000,sort).scoreDocs;
      BooleanQuery.setAllowDocsOutOfOrder(true);
      ScoreDoc[] hits2=searcher.search(q1,null,1000,sort).scoreDocs;
      tot+=hits2.length;
      CheckHits.checkEqual(q1,hits1,hits2);
    }
  }
 catch (  Exception e) {
    System.out.println("failed query: " + q1);
    throw e;
  }
 finally {
    BooleanQuery.setAllowDocsOutOfOrder(false);
  }
}
