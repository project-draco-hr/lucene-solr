{
  this.subReaders=subReaders;
  this.subReadersList=Collections.unmodifiableList(Arrays.asList(subReaders));
  starts=new int[subReaders.length + 1];
  int maxDoc=0, numDocs=0;
  for (int i=0; i < subReaders.length; i++) {
    starts[i]=maxDoc;
    final IndexReader r=subReaders[i];
    maxDoc+=r.maxDoc();
    if (maxDoc < 0 || maxDoc > IndexWriter.getActualMaxDocs()) {
      throw new IllegalArgumentException("Too many documents, composite IndexReaders cannot exceed " + IndexWriter.getActualMaxDocs());
    }
    numDocs+=r.numDocs();
    r.registerParentReader(this);
  }
  starts[subReaders.length]=maxDoc;
  this.maxDoc=maxDoc;
  this.numDocs=numDocs;
}
