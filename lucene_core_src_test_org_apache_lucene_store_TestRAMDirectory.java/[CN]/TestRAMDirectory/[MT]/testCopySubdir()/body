{
  File path=createTempDir("testsubdir");
  Directory fsDir=null;
  try {
    path.mkdirs();
    new File(path,"subdir").mkdirs();
    fsDir=newFSDirectory(path);
    assertEquals(0,new RAMDirectory(fsDir,newIOContext(random())).listAll().length);
  }
  finally {
    IOUtils.close(fsDir);
    IOUtils.rm(path);
  }
}
