{
  Path path=createTempDir("testsubdir");
  FSDirectory fsDir=null;
  try {
    Files.createDirectory(path.resolve("subdir"));
    fsDir=new SimpleFSDirectory(path);
    RAMDirectory ramDir=new RAMDirectory(fsDir,newIOContext(random()));
    List<String> files=Arrays.asList(ramDir.listAll());
    assertFalse(files.contains("subdir"));
  }
  finally {
    IOUtils.close(fsDir);
  }
}
