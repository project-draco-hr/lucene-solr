{
  int maxPermits=Math.max(16,numHosts * 16);
  if (maxPermits != semaphore.getMaxPermits()) {
    semaphore.setMaxPermits(maxPermits);
  }
  this.updateShardHandler=updateShardHandler;
  completionService=new ExecutorCompletionService<Request>(updateShardHandler.getCmdDistribExecutor());
  pending=new HashSet<Future<Request>>();
}
