{
  int maxPermits=Math.max(8,(numHosts - 1) * 8);
  if (maxPermits != semaphore.getMaxPermits()) {
    semaphore.setMaxPermits(maxPermits);
  }
  completionService=new ExecutorCompletionService<Request>(executor);
  pending=new HashSet<Future<Request>>();
}
