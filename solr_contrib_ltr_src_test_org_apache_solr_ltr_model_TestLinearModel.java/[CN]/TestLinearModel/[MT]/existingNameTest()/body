{
  final SolrException expectedException=new SolrException(SolrException.ErrorCode.BAD_REQUEST,ModelException.class.getCanonicalName() + ": model 'test3' already exists. Please use a different name");
  try {
    final List<Feature> features=getFeatures(new String[]{"constant1","constant5"});
    final List<Normalizer> norms=new ArrayList<Normalizer>(Collections.nCopies(features.size(),IdentityNormalizer.INSTANCE));
    final Map<String,Object> weights=new HashMap<>();
    weights.put("constant1",1d);
    weights.put("constant5",1d);
    Map<String,Object> params=new HashMap<String,Object>();
    params.put("weights",weights);
    final LTRScoringModel ltrScoringModel=createLinearModel("test3",features,norms,"test",fstore.getFeatures(),params);
    store.addModel(ltrScoringModel);
    final LTRScoringModel m=store.getModel("test3");
    assertEquals(ltrScoringModel,m);
    store.addModel(ltrScoringModel);
    fail("unexpectedly got here instead of catching " + expectedException);
  }
 catch (  SolrException actualException) {
    assertEquals(expectedException.toString(),actualException.toString());
  }
}
