{
  final ModelException expectedException=new ModelException("Model test5 lacks weight(s) for [constant5]");
  try {
    final List<Feature> features=getFeatures(new String[]{"constant1","constant5"});
    final List<Normalizer> norms=new ArrayList<Normalizer>(Collections.nCopies(features.size(),IdentityNormalizer.INSTANCE));
    final Map<String,Object> weights=new HashMap<>();
    weights.put("constant1",1d);
    weights.put("constant5missing",1d);
    Map<String,Object> params=new HashMap<String,Object>();
    params.put("weights",weights);
    createLinearModel("test5",features,norms,"test",fstore.getFeatures(),params);
    fail("unexpectedly got here instead of catching " + expectedException);
  }
 catch (  ModelException actualException) {
    assertEquals(expectedException.toString(),actualException.toString());
  }
}
