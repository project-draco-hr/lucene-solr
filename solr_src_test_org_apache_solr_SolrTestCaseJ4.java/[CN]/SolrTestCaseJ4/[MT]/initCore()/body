{
  log.info("####initCore");
  ignoreException("ignore_exception");
  factoryProp=System.getProperty("solr.directoryFactory");
  if (factoryProp == null) {
    System.setProperty("solr.directoryFactory","solr.RAMDirectoryFactory");
  }
  if (dataDir == null) {
    createTempDir();
  }
  System.setProperty("solr.test.sys.prop1","propone");
  System.setProperty("solr.test.sys.prop2","proptwo");
  String configFile=getSolrConfigFile();
  if (configFile != null) {
    solrConfig=h.createConfig(getSolrConfigFile());
    h=new TestHarness(dataDir.getAbsolutePath(),solrConfig,getSchemaFile());
    lrf=h.getRequestFactory("standard",0,20,"version","2.2");
  }
  log.info("####initCore end");
  RefCounted<SolrIndexSearcher> holder=h.getCore().getSearcher();
  log.info("START SEARCHER REFCOUNT=" + (holder.getRefcount() - 1) + " instance="+ holder.get());
  holder.decref();
}
