{
  try {
    String m=(null == message) ? "" : message + " ";
    if (shouldSucceed) {
      String res=h.validateUpdate(update);
      if (res != null)       fail(m + "update was not successful: " + res);
    }
 else {
      String res=h.validateErrorUpdate(update);
      if (res != null)       fail(m + "update succeeded, but should have failed: " + res);
    }
  }
 catch (  SAXException e) {
    throw new RuntimeException("Invalid XML",e);
  }
}
