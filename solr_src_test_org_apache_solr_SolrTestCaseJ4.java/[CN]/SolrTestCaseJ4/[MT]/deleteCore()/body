{
  log.info("###deleteCore");
  if (h != null) {
    h.close();
  }
  if (dataDir != null) {
    String skip=System.getProperty("solr.test.leavedatadir");
    if (null != skip && 0 != skip.trim().length()) {
      System.err.println("NOTE: per solr.test.leavedatadir, dataDir will not be removed: " + dataDir.getAbsolutePath());
    }
 else {
      if (!recurseDelete(dataDir)) {
        System.err.println("!!!! WARNING: best effort to remove " + dataDir.getAbsolutePath() + " FAILED !!!!!");
      }
    }
  }
  dataDir=null;
  solrConfig=null;
  h=null;
  lrf=null;
  configString=schemaString=null;
}
