{
  if (node instanceof FieldQueryNode || node instanceof FuzzyQueryNode) {
    FieldQueryNode fqn=(FieldQueryNode)node;
    CharSequence text=fqn.getText();
    if (fqn.getParent() instanceof TermRangeQueryNode || fqn instanceof QuotedFieldQueryNode || text.length() <= 0) {
      return node;
    }
    if (isWildcard(text)) {
      Analyzer analyzer=getQueryConfigHandler().get(ConfigurationKeys.ANALYZER);
      if (analyzer != null) {
        text=analyzeWildcard(analyzer,fqn.getFieldAsString(),text.toString());
      }
      if (isPrefixWildcard(text)) {
        return new PrefixWildcardQueryNode(fqn.getField(),text,fqn.getBegin(),fqn.getEnd());
      }
 else {
        return new WildcardQueryNode(fqn.getField(),text,fqn.getBegin(),fqn.getEnd());
      }
    }
  }
  return node;
}
