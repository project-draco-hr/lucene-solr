{
  Query query=paB.parse("AA AND BCD OR EFGH");
  FieldQuery fq=new FieldQuery(query,true,true);
  Set<Query> flatQueries=new HashSet<Query>();
  fq.flatten(query,flatQueries);
  assertCollectionQueries(flatQueries,tq("AA"),pqF("BC","CD"),pqF("EF","FG","GH"));
}
