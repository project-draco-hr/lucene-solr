{
  BooleanQuery booleanQuery=new BooleanQuery();
  booleanQuery.add(new TermQuery(new Term(F,"A")),Occur.MUST);
  PhraseQuery phraseQuery=new PhraseQuery();
  phraseQuery.add(new Term(F,"B"));
  phraseQuery.add(new Term(F,"C"));
  booleanQuery.add(phraseQuery,Occur.MUST);
  FieldQuery fq=new FieldQuery(booleanQuery,true,true);
  Set<Query> flatQueries=new HashSet<Query>();
  fq.flatten(booleanQuery,flatQueries);
  assertCollectionQueries(flatQueries,tq("A"),pqF("B","C"));
}
