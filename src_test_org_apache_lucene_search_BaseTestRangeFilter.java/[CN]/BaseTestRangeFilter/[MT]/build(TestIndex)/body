{
  try {
    IndexWriter writer=new IndexWriter(index.index,new IndexWriterConfig(TEST_VERSION_CURRENT).setAnalyzer(new SimpleAnalyzer(TEST_VERSION_CURRENT)).setOpenMode(OpenMode.CREATE));
    for (int d=minId; d <= maxId; d++) {
      Document doc=new Document();
      doc.add(new Field("id",pad(d),Field.Store.YES,Field.Index.NOT_ANALYZED));
      int r=index.allowNegativeRandomInts ? rand.nextInt() : rand.nextInt(Integer.MAX_VALUE);
      if (index.maxR < r) {
        index.maxR=r;
      }
      if (r < index.minR) {
        index.minR=r;
      }
      doc.add(new Field("rand",pad(r),Field.Store.YES,Field.Index.NOT_ANALYZED));
      doc.add(new Field("body","body",Field.Store.YES,Field.Index.NOT_ANALYZED));
      writer.addDocument(doc);
    }
    writer.optimize();
    writer.close();
  }
 catch (  Exception e) {
    throw new RuntimeException("can't build index",e);
  }
}
