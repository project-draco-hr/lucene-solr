{
  if (this == o)   return true;
  if (o == null || getClass() != o.getClass())   return false;
  PerSegCacheKey that=(PerSegCacheKey)o;
  if (docId != that.docId)   return false;
  Object segCoreKey=segCoreKeyRef.get();
  if (segCoreKey == null) {
    return false;
  }
  return segCoreKey.equals(that.segCoreKeyRef.get());
}
