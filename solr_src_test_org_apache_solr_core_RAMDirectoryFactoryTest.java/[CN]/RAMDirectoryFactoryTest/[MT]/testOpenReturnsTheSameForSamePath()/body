{
  final Directory directory=new RefCntRamDirectory();
  RAMDirectoryFactory factory=new RAMDirectoryFactory(){
    @Override Directory openNew(    String path) throws IOException {
      return directory;
    }
  }
;
  String path="/fake/path";
  Directory dir1=factory.open(path);
  Directory dir2=factory.open(path);
  assertEquals("RAMDirectoryFactory should not create new instance of RefCntRamDirectory " + "every time open() is called for the same path",directory,dir1);
  assertEquals("RAMDirectoryFactory should not create new instance of RefCntRamDirectory " + "every time open() is called for the same path",directory,dir2);
  dir1.close();
  dir2.close();
}
