{
  TokenStream filter=new ShingleFilter(new TestTokenStream(tokensToShingle),maxSize);
  int i=0;
  final Token reusableToken=new Token();
  for (Token nextToken=filter.next(reusableToken); nextToken != null; nextToken=filter.next(reusableToken)) {
    String termText=nextToken.term();
    String goldText=tokensToCompare[i].term();
    assertEquals("Wrong termText",goldText,termText);
    assertEquals("Wrong startOffset for token \"" + termText + "\"",tokensToCompare[i].startOffset(),nextToken.startOffset());
    assertEquals("Wrong endOffset for token \"" + termText + "\"",tokensToCompare[i].endOffset(),nextToken.endOffset());
    assertEquals("Wrong positionIncrement for token \"" + termText + "\"",positionIncrements[i],nextToken.getPositionIncrement());
    assertEquals("Wrong type for token \"" + termText + "\"",types[i],nextToken.type());
    i++;
  }
}
