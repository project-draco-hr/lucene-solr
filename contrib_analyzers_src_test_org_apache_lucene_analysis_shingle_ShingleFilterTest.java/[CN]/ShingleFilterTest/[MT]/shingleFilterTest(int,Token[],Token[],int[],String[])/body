{
  TokenStream filter=new ShingleFilter(new TestTokenStream(tokensToShingle),maxSize);
  Token token;
  int i=0;
  while ((token=filter.next()) != null) {
    String termText=new String(token.termBuffer(),0,token.termLength());
    String goldText=new String(tokensToCompare[i].termBuffer(),0,tokensToCompare[i].termLength());
    assertEquals("Wrong termText",goldText,termText);
    assertEquals("Wrong startOffset for token \"" + termText + "\"",tokensToCompare[i].startOffset(),token.startOffset());
    assertEquals("Wrong endOffset for token \"" + termText + "\"",tokensToCompare[i].endOffset(),token.endOffset());
    assertEquals("Wrong positionIncrement for token \"" + termText + "\"",positionIncrements[i],token.getPositionIncrement());
    assertEquals("Wrong type for token \"" + termText + "\"",types[i],token.type());
    i++;
  }
}
