{
  super();
  this.filter=new CachingWrapperFilter(filter,FilterCachingPolicy.ALWAYS_CACHE){
    @Override protected BitDocIdSet docIdSetToCache(    DocIdSet docIdSet,    LeafReader reader) throws IOException {
      if (docIdSet == null || docIdSet instanceof BitDocIdSet) {
        return (BitDocIdSet)docIdSet;
      }
      final DocIdSetIterator it=docIdSet.iterator();
      if (it == null) {
        return null;
      }
      BitDocIdSet.Builder builder=new BitDocIdSet.Builder(reader.maxDoc());
      builder.or(it);
      return builder.build();
    }
  }
;
}
