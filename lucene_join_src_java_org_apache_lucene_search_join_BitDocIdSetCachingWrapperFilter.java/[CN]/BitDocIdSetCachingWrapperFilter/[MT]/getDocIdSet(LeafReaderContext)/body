{
  final LeafReader reader=context.reader();
  final Object key=reader.getCoreCacheKey();
  DocIdSet docIdSet=cache.get(key);
  if (docIdSet == null) {
    docIdSet=filter.getDocIdSet(context,null);
    docIdSet=docIdSetToCache(docIdSet,reader);
    if (docIdSet == null) {
      docIdSet=DocIdSet.EMPTY;
    }
    cache.put(key,docIdSet);
  }
  return docIdSet == DocIdSet.EMPTY ? null : (BitDocIdSet)docIdSet;
}
