{
  Scorer scorer=weight.scorer(reader);
  if (scorer == null)   return;
  if (filter == null) {
    scorer.score(results);
    return;
  }
  DocIdSetIterator docIdSetIterator=filter.getDocIdSet(reader).iterator();
  boolean more=docIdSetIterator.next() && scorer.skipTo(docIdSetIterator.doc());
  while (more) {
    int filterDocId=docIdSetIterator.doc();
    if (filterDocId > scorer.doc() && !scorer.skipTo(filterDocId)) {
      more=false;
    }
 else {
      int scorerDocId=scorer.doc();
      if (scorerDocId == filterDocId) {
        results.collect(scorerDocId,scorer.score());
        more=docIdSetIterator.next();
      }
 else {
        more=docIdSetIterator.skipTo(scorerDocId);
      }
    }
  }
}
