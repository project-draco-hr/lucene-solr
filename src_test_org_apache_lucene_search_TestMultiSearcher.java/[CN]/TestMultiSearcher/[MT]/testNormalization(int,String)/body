{
  Query query=new TermQuery(new Term("contents","doc0"));
  RAMDirectory ramDirectory1;
  IndexSearcher indexSearcher1;
  Hits hits;
  ramDirectory1=new RAMDirectory();
  initIndex(ramDirectory1,nDocs,true,null);
  initIndex(ramDirectory1,nDocs,false,"x");
  indexSearcher1=new IndexSearcher(ramDirectory1);
  hits=indexSearcher1.search(query);
  assertEquals(message,2,hits.length());
  assertEquals(message,1,hits.score(0),1e-6);
  float[] scores={hits.score(0),hits.score(1)};
  assertTrue(message,scores[0] > scores[1]);
  indexSearcher1.close();
  ramDirectory1.close();
  hits=null;
  RAMDirectory ramDirectory2;
  IndexSearcher indexSearcher2;
  ramDirectory1=new RAMDirectory();
  ramDirectory2=new RAMDirectory();
  initIndex(ramDirectory1,nDocs,true,null);
  initIndex(ramDirectory2,nDocs,true,"x");
  indexSearcher1=new IndexSearcher(ramDirectory1);
  indexSearcher2=new IndexSearcher(ramDirectory2);
  Searcher searcher=getMultiSearcherInstance(new Searcher[]{indexSearcher1,indexSearcher2});
  hits=searcher.search(query);
  assertEquals(message,2,hits.length());
  assertEquals(message,scores[0],hits.score(0),1e-6);
  assertEquals(message,scores[1],hits.score(1),1e-6);
  hits=searcher.search(query,Sort.RELEVANCE);
  assertEquals(message,2,hits.length());
  assertEquals(message,scores[0],hits.score(0),1e-6);
  assertEquals(message,scores[1],hits.score(1),1e-6);
  searcher.close();
  ramDirectory1.close();
  ramDirectory2.close();
}
