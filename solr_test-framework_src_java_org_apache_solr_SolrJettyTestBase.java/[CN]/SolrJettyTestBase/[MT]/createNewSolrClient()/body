{
  if (jetty != null) {
    try {
      String url=jetty.getBaseUrl().toString() + "/" + "collection1";
      HttpSolrClient client=new HttpSolrClient(url);
      client.setConnectionTimeout(DEFAULT_CONNECTION_TIMEOUT);
      client.setDefaultMaxConnectionsPerHost(100);
      client.setMaxTotalConnections(100);
      return client;
    }
 catch (    Exception ex) {
      throw new RuntimeException(ex);
    }
  }
 else {
    return new EmbeddedSolrServer(h.getCoreContainer(),"collection1");
  }
}
