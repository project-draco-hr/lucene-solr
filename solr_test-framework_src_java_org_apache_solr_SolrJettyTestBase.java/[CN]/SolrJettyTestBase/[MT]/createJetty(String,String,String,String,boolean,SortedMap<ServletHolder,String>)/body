{
  context=context == null ? "/solr" : context;
  SolrJettyTestBase.context=context;
  JettyConfig jettyConfig=JettyConfig.builder().setContext(context).stopAtShutdown(stopAtShutdown).withServlets(extraServlets).withSSLConfig(sslConfig).build();
  Properties nodeProps=new Properties();
  if (configFile != null)   nodeProps.setProperty("solrconfig",configFile);
  if (schemaFile != null)   nodeProps.setProperty("schema",schemaFile);
  if (System.getProperty("solr.data.dir") == null && System.getProperty("solr.hdfs.home") == null) {
    nodeProps.setProperty("solr.data.dir",createTempDir().toFile().getCanonicalPath());
  }
  return createJetty(solrHome,nodeProps,jettyConfig);
}
