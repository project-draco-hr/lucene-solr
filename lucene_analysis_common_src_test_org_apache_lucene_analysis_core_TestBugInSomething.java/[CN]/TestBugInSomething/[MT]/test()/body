{
  final CharArraySet cas=new CharArraySet(TEST_VERSION_CURRENT,3,false);
  cas.add("jjp");
  cas.add("wlmwoknt");
  cas.add("tcgyreo");
  final NormalizeCharMap.Builder builder=new NormalizeCharMap.Builder();
  builder.add("mtqlpi","");
  builder.add("mwoknt","jjp");
  builder.add("tcgyreo","zpfpajyws");
  final NormalizeCharMap map=builder.build();
  Analyzer a=new Analyzer(){
    @Override protected TokenStreamComponents createComponents(    String fieldName,    Reader reader){
      Tokenizer t=new MockTokenizer(new TestRandomChains.CheckThatYouDidntReadAnythingReaderWrapper(reader),MockTokenFilter.ENGLISH_STOPSET,false,-65);
      TokenFilter f=new CommonGramsFilter(TEST_VERSION_CURRENT,t,cas);
      return new TokenStreamComponents(t,f);
    }
    @Override protected Reader initReader(    String fieldName,    Reader reader){
      reader=new MockCharFilter(reader,0);
      reader=new MappingCharFilter(map,reader);
      return reader;
    }
  }
;
  checkAnalysisConsistency(random(),a,false,"wmgddzunizdomqyj");
}
