{
  File tempDir=createTempDir(LuceneTestCase.getTestClass().getSimpleName());
  File lockFile=new File(tempDir,"test.lock");
  lockFile.createNewFile();
  Lock l=new NativeFSLockFactory(tempDir).makeLock("test.lock");
  assertTrue("failed to obtain lock",l.obtain());
  l.close();
  assertFalse("failed to release lock",l.isLocked());
  Files.deleteIfExists(lockFile.toPath());
}
