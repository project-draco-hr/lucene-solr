{
  log.info("Deleting the snapshot named {} for core {}",name,solrCore.getName());
  SnapshotMetaData result=nameToDetailsMapping.remove(Objects.requireNonNull(name));
  if (result != null) {
    boolean success=false;
    try {
      persist();
      success=true;
    }
  finally {
      if (!success) {
        nameToDetailsMapping.put(name,result);
      }
    }
  }
  return Optional.ofNullable(result);
}
