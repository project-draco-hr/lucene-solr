{
  RAMDirectory indexStore=new RAMDirectory();
  IndexWriter writer=new IndexWriter(indexStore,new SimpleAnalyzer(),true);
  Document doc1=new Document();
  Document doc2=new Document();
  doc1.add(Field.Text("body","metal"));
  doc2.add(Field.Text("body","metals"));
  writer.addDocument(doc1);
  writer.addDocument(doc2);
  writer.optimize();
  writer.close();
  IndexSearcher searcher=new IndexSearcher(indexStore);
  Query query1=new TermQuery(new Term("body","metal"));
  Query query2=new WildcardQuery(new Term("body","metal*"));
  Query query3=new WildcardQuery(new Term("body","m*tal"));
  Query query4=new WildcardQuery(new Term("body","m*tal*"));
  Query query5=new WildcardQuery(new Term("body","m*tals"));
  BooleanQuery query6=new BooleanQuery();
  query6.add(query5,false,false);
  BooleanQuery query7=new BooleanQuery();
  query7.add(query3,false,false);
  query7.add(query5,false,false);
  Hits result;
  result=searcher.search(query1);
  assertEquals(1,result.length());
  result=searcher.search(query2);
  assertEquals(2,result.length());
  result=searcher.search(query3);
  assertEquals(1,result.length());
  result=searcher.search(query4);
  assertEquals(2,result.length());
  result=searcher.search(query5);
  assertEquals(1,result.length());
  result=searcher.search(query6);
  assertEquals(1,result.length());
  result=searcher.search(query7);
  assertEquals(2,result.length());
}
