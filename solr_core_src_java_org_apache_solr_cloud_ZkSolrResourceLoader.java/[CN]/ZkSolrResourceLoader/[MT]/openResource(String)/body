{
  InputStream is=null;
  String file=collectionZkPath + "/" + resource;
  try {
    if (zkController.pathExists(file)) {
      Stat stat=new Stat();
      byte[] bytes=zkController.getZkClient().getData(file,null,stat,true);
      return new ZkByteArrayInputStream(bytes,stat);
    }
  }
 catch (  Exception e) {
    throw new IOException("Error opening " + file,e);
  }
  try {
    is=classLoader.getResourceAsStream(resource.replace(File.separatorChar,'/'));
  }
 catch (  Exception e) {
    throw new IOException("Error opening " + resource,e);
  }
  if (is == null) {
    throw new IOException("Can't find resource '" + resource + "' in classpath or '"+ collectionZkPath+ "', cwd="+ System.getProperty("user.dir"));
  }
  return is;
}
