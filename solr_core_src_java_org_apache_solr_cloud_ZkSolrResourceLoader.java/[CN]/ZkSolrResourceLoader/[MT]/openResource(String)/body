{
  InputStream is=null;
  String file=collectionZkPath + "/" + resource;
  try {
    if (zkController.pathExists(file)) {
      byte[] bytes=zkController.getZkClient().getData(collectionZkPath + "/" + resource,null,null,true);
      return new ByteArrayInputStream(bytes);
    }
  }
 catch (  Exception e) {
    throw new IOException("Error opening " + file,e);
  }
  try {
    is=classLoader.getResourceAsStream(resource);
  }
 catch (  Exception e) {
    throw new IOException("Error opening " + resource,e);
  }
  if (is == null) {
    throw new IOException("Can't find resource '" + resource + "' in classpath or '"+ collectionZkPath+ "', cwd="+ System.getProperty("user.dir"));
  }
  return is;
}
