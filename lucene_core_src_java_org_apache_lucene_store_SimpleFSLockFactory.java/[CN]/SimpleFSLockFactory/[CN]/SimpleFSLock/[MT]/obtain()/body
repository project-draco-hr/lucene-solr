{
  if (obtained) {
    throw new LockObtainFailedException("this lock instance was already obtained");
  }
  try {
    Files.createDirectories(lockDir);
    Files.createFile(lockFile);
    obtained=true;
  }
 catch (  IOException ioe) {
    failureReason=ioe;
  }
  return obtained;
}
