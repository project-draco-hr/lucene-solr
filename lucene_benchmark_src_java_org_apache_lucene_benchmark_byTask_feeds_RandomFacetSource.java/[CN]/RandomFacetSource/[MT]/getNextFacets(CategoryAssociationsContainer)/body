{
  if (facets == null) {
    facets=new CategoryAssociationsContainer();
  }
 else {
    facets.clear();
  }
  int numFacets=1 + random.nextInt(maxDocFacets - 1);
  for (int i=0; i < numFacets; i++) {
    int depth=1 + random.nextInt(maxFacetDepth - 1);
    String[] components=new String[depth];
    for (int k=0; k < depth; k++) {
      components[k]=Integer.toString(random.nextInt(maxValue));
      addItem();
    }
    CategoryPath cp=new CategoryPath(components);
    facets.setAssociation(cp,null);
    addBytes(cp.toString().length());
  }
  return facets;
}
