{
  String withAccents="r??sum??";
  String withoutAccents="resume";
  String withAccentsUpperCase="R??sum??";
  String withoutAccentsUpperCase="Resume";
  ICUCollationKeyFilterFactory factory=new ICUCollationKeyFilterFactory();
  Map<String,String> args=new HashMap<String,String>();
  args.put("locale","en");
  args.put("strength","primary");
  args.put("caseLevel","true");
  factory.init(args);
  factory.inform(new StringMockSolrResourceLoader(""));
  TokenStream tsWithAccents=factory.create(new KeywordTokenizer(new StringReader(withAccents)));
  TokenStream tsWithoutAccents=factory.create(new KeywordTokenizer(new StringReader(withoutAccents)));
  assertCollatesToSame(tsWithAccents,tsWithoutAccents);
  TokenStream tsWithAccentsUpperCase=factory.create(new KeywordTokenizer(new StringReader(withAccentsUpperCase)));
  TokenStream tsWithoutAccentsUpperCase=factory.create(new KeywordTokenizer(new StringReader(withoutAccentsUpperCase)));
  assertCollatesToSame(tsWithAccentsUpperCase,tsWithoutAccentsUpperCase);
  TokenStream tsLower=factory.create(new KeywordTokenizer(new StringReader(withoutAccents)));
  TokenStream tsUpper=factory.create(new KeywordTokenizer(new StringReader(withoutAccentsUpperCase)));
  assertCollation(tsLower,tsUpper,-1);
}
