{
  super.setUp();
  String codecName=Codec.getDefault().getName();
  assumeTrue("Codec does not support offsets: " + codecName,codecName.equals("SimpleText") || codecName.equals("Lucene40"));
  iwc=newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  if (codecName.equals("Lucene40")) {
switch (random().nextInt(4)) {
case 0:
      iwc.setCodec(_TestUtil.alwaysPostingsFormat(new Lucene40PostingsFormat()));
    break;
case 1:
  iwc.setCodec(_TestUtil.alwaysPostingsFormat(new MemoryPostingsFormat()));
break;
case 2:
iwc.setCodec(_TestUtil.alwaysPostingsFormat(new Pulsing40PostingsFormat(_TestUtil.nextInt(random(),1,3))));
break;
case 3:
iwc.setCodec(_TestUtil.alwaysPostingsFormat(new NestedPulsingPostingsFormat()));
break;
}
}
}
