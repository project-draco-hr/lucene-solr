{
  Directory dir=newDirectory();
  RandomIndexWriter iw=new RandomIndexWriter(random,dir);
  Document doc=new Document();
  doc.add(newField("foo","bar",TextField.TYPE_UNSTORED));
  iw.addDocument(doc);
  IndexReader ir=iw.getReader();
  iw.close();
  IndexSearcher is=newSearcher(ir);
  for (  SimilarityProvider simProvider : simProviders) {
    is.setSimilarityProvider(simProvider);
    BooleanQuery query=new BooleanQuery(true);
    query.add(new TermQuery(new Term("foo","bar")),BooleanClause.Occur.SHOULD);
    query.add(new TermQuery(new Term("foo","baz")),BooleanClause.Occur.SHOULD);
    assertEquals(1,is.search(query,10).totalHits);
  }
  is.close();
  ir.close();
  dir.close();
}
