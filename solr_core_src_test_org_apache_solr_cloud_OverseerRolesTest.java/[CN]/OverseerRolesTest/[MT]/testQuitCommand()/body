{
  String collectionName="testOverseerQuit";
  createCollection(collectionName,client);
  waitForRecoveriesToFinish(collectionName,false);
  SolrZkClient zk=client.getZkStateReader().getZkClient();
  byte[] data=new byte[0];
  data=zk.getData("/overseer_elect/leader",null,new Stat(),true);
  Map m=(Map)ZkStateReader.fromJSON(data);
  String s=(String)m.get("id");
  String leader=LeaderElector.getNodeName(s);
  Overseer.getInQueue(zk).offer(ZkStateReader.toJSON(new ZkNodeProps(Overseer.QUEUE_OPERATION,Overseer.QUIT)));
  long timeout=System.currentTimeMillis() + 5000;
  String newLeader=null;
  for (; System.currentTimeMillis() < timeout; ) {
    newLeader=OverseerCollectionProcessor.getLeaderNode(zk);
    if (!newLeader.equals(leader))     break;
    Thread.sleep(100);
  }
  assertNotSame("Leader not changed yet",newLeader,leader);
  assertTrue("The old leader should have rejoined election ",OverseerCollectionProcessor.getSortedOverseerNodeNames(zk).contains(leader));
}
