{
  SolrParams params=req.getParams();
  String fieldName=schemaField.getName();
  SolrFragmentsBuilder solrFb=getSolrFragmentsBuilder(fieldName,params);
  String[] snippets=highlighter.getBestFragments(fieldQuery,reader,docId,fieldName,params.getFieldInt(fieldName,HighlightParams.FRAGSIZE,100),params.getFieldInt(fieldName,HighlightParams.SNIPPETS,1),getFragListBuilder(fieldName,params),getFragmentsBuilder(fieldName,params),solrFb.getPreTags(params,fieldName),solrFb.getPostTags(params,fieldName),getEncoder(fieldName,params));
  if (snippets != null && snippets.length > 0)   return snippets;
  return null;
}
