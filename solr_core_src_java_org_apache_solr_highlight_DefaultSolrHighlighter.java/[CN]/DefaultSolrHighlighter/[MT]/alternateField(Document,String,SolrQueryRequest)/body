{
  SolrParams params=req.getParams();
  String alternateField=params.getFieldParam(fieldName,HighlightParams.ALTERNATE_FIELD);
  if (alternateField == null || alternateField.length() == 0) {
    return null;
  }
  IndexableField[] docFields=doc.getFields(alternateField);
  if (docFields.length == 0) {
    docFields=doc.getFields(fieldName);
  }
  List<String> listFields=new ArrayList<>();
  for (  IndexableField field : docFields) {
    if (field.binaryValue() == null)     listFields.add(field.stringValue());
  }
  if (listFields.isEmpty()) {
    return null;
  }
  String[] altTexts=listFields.toArray(new String[listFields.size()]);
  Encoder encoder=getEncoder(fieldName,params);
  int alternateFieldLen=params.getFieldInt(fieldName,HighlightParams.ALTERNATE_FIELD_LENGTH,0);
  List<String> altList=new ArrayList<>();
  int len=0;
  for (  String altText : altTexts) {
    if (alternateFieldLen <= 0) {
      altList.add(encoder.encodeText(altText));
    }
 else {
      altList.add(len + altText.length() > alternateFieldLen ? encoder.encodeText(new String(altText.substring(0,alternateFieldLen - len))) : encoder.encodeText(altText));
      len+=altText.length();
      if (len >= alternateFieldLen)       break;
    }
  }
  return altList;
}
