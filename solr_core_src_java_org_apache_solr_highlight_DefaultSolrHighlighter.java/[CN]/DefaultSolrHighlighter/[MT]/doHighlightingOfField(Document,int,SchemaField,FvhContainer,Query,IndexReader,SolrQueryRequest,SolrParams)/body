{
  Object fieldHighlights;
  if (schemaField == null) {
    fieldHighlights=null;
  }
 else   if (schemaField.getType() instanceof org.apache.solr.schema.TrieField) {
    fieldHighlights=null;
  }
 else   if (useFastVectorHighlighter(params,schemaField)) {
    if (fvhContainer.fieldQuery == null) {
      FastVectorHighlighter fvh=new FastVectorHighlighter(params.getBool(HighlightParams.USE_PHRASE_HIGHLIGHTER,true),params.getBool(HighlightParams.FIELD_MATCH,false));
      fvh.setPhraseLimit(params.getInt(HighlightParams.PHRASE_LIMIT,SolrHighlighter.DEFAULT_PHRASE_LIMIT));
      fvhContainer.fvh=fvh;
      fvhContainer.fieldQuery=fvh.getFieldQuery(query,reader);
    }
    fieldHighlights=doHighlightingByFastVectorHighlighter(doc,docId,schemaField,fvhContainer,reader,req);
  }
 else {
    fieldHighlights=doHighlightingByHighlighter(doc,docId,schemaField,query,reader,req);
  }
  return fieldHighlights;
}
