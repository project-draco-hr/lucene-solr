{
  String fieldName="field1";
  Directory rd1=newDirectory();
  RandomIndexWriter w1=new RandomIndexWriter(random,rd1);
  Document doc=new Document();
  doc.add(newField(fieldName,"content1",StringField.TYPE_STORED));
  w1.addDocument(doc);
  IndexReader reader1=w1.getReader();
  w1.close();
  fieldName="field2";
  Directory rd2=newDirectory();
  RandomIndexWriter w2=new RandomIndexWriter(random,rd2);
  doc=new Document();
  doc.add(newField(fieldName,"content2",StringField.TYPE_STORED));
  w2.addDocument(doc);
  IndexReader reader2=w2.getReader();
  w2.close();
  TermsFilter tf=new TermsFilter();
  tf.addTerm(new Term(fieldName,"content1"));
  MultiReader multi=new MultiReader(reader1,reader2);
  for (  IndexReader.AtomicReaderContext context : ReaderUtil.leaves(multi.getTopReaderContext())) {
    FixedBitSet bits=(FixedBitSet)tf.getDocIdSet(context,context.reader.getLiveDocs());
    assertTrue("Must be >= 0",bits.cardinality() >= 0);
  }
  multi.close();
  reader1.close();
  reader2.close();
  rd1.close();
  rd2.close();
}
