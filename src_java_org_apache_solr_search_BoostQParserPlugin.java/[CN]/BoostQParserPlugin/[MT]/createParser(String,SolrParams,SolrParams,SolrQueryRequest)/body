{
  return new QParser(qstr,localParams,params,req){
    QParser baseParser;
    ValueSource vs;
    String b;
    public Query parse() throws ParseException {
      b=localParams.get(BOOSTFUNC);
      baseParser=subQuery(localParams.get(QueryParsing.V),null);
      Query q=baseParser.parse();
      if (b == null)       return q;
      Query bq=subQuery(b,FunctionQParserPlugin.NAME).parse();
      if (bq instanceof FunctionQuery) {
        vs=((FunctionQuery)bq).getValueSource();
      }
 else {
        vs=new QueryValueSource(bq,0.0f);
      }
      return new BoostedQuery(q,vs);
    }
    public String[] getDefaultHighlightFields(){
      return baseParser.getDefaultHighlightFields();
    }
    public Query getHighlightQuery() throws ParseException {
      return baseParser.getHighlightQuery();
    }
    public void addDebugInfo(    NamedList<Object> debugInfo){
      baseParser.addDebugInfo(debugInfo);
      debugInfo.add("boost_str",b);
      debugInfo.add("boost_parsed",vs);
    }
  }
;
}
