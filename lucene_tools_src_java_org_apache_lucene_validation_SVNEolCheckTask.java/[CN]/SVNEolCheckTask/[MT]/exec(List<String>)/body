{
  ProcessBuilder pb=new ProcessBuilder(cmd);
  pb.redirectErrorStream(true);
  BufferedReader r=null;
  StringBuilder sb=new StringBuilder();
  try {
    Process p=pb.start();
    InputStream is=p.getInputStream();
    r=new BufferedReader(new InputStreamReader(is,Charset.defaultCharset()));
    int ch;
    while ((ch=r.read()) > 0) {
      sb.append((char)ch);
    }
    p.waitFor();
    return sb.toString();
  }
 catch (  Exception e) {
    throw new BuildException(e);
  }
 finally {
    if (r != null) {
      try {
        r.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
