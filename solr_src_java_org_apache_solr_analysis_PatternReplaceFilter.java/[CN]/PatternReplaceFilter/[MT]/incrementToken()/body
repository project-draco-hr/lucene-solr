{
  if (!input.incrementToken())   return false;
  CharSequence text=CharBuffer.wrap(termAtt.termBuffer(),0,termAtt.termLength());
  Matcher m=p.matcher(text);
  if (all) {
    termAtt.setTermBuffer(m.replaceAll(replacement));
  }
 else {
    termAtt.setTermBuffer(m.replaceFirst(replacement));
  }
  return true;
}
