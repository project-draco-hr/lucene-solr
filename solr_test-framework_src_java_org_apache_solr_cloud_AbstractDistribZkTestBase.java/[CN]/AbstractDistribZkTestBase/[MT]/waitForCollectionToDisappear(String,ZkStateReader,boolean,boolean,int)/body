{
  log.info("Wait for collection to disappear - collection: " + collection + " failOnTimeout:"+ failOnTimeout+ " timeout (sec):"+ timeoutSeconds);
  boolean cont=true;
  int cnt=0;
  while (cont) {
    if (verbose)     System.out.println("-");
    ClusterState clusterState=zkStateReader.getClusterState();
    if (!clusterState.hasCollection(collection))     break;
    if (cnt == timeoutSeconds) {
      if (verbose)       System.out.println("Gave up waiting for " + collection + " to disappear..");
      if (failOnTimeout) {
        Diagnostics.logThreadDumps("Gave up waiting for " + collection + " to disappear.  THREAD DUMP:");
        zkStateReader.getZkClient().printLayoutToStdOut();
        fail("The collection (" + collection + ") is still present - waited for "+ timeoutSeconds+ " seconds");
        return;
      }
      cont=false;
    }
 else {
      Thread.sleep(1000);
    }
    cnt++;
  }
  log.info("Collection has disappeared - collection: " + collection);
}
