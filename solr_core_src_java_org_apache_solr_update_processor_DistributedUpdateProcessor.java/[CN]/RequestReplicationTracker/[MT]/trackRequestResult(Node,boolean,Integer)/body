{
  String shardId=node.getShardId();
  if (log.isDebugEnabled())   log.debug("trackRequestResult(" + node + "): success? "+ success+ " rf="+ rf+ ", shardId="+ shardId+ " onLeaderShardId="+ onLeaderShardId);
  if (onLeaderShardId == null || !onLeaderShardId.equals(shardId)) {
synchronized (otherLeaderRf) {
      otherLeaderRf.put(shardId,rf != null ? rf : new Integer(1));
    }
    return;
  }
  if (onLeaderShardId != null) {
    String nodeUrl=node.getUrl();
    AtomicInteger nodeErrors=null;
synchronized (nodeErrorTracker) {
      nodeErrors=nodeErrorTracker.get(nodeUrl);
      if (nodeErrors == null) {
        nodeErrors=new AtomicInteger(0);
        nodeErrorTracker.put(nodeUrl,nodeErrors);
      }
    }
    if (!success)     nodeErrors.incrementAndGet();
  }
}
