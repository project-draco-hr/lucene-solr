{
  setMeUp();
  addSolrPropertiesFile();
  addCoreWithProps(makeCorePropFile("core1",false,true));
  addCoreWithProps(makeCorePropFile("core2",false,false));
  addCoreWithProps(makeCorePropFile("lazy1",true,true));
  addCoreWithProps(makeCorePropFile("lazy2",false,true));
  CoreContainer cc=init();
  SolrCore coreC1=cc.getCore("core1");
  addCoreProps(coreC1,"addedPropC1=addedC1","addedPropC1B=foo","addedPropC1C=bar");
  SolrCore coreC2=cc.getCore("core2");
  addCoreProps(coreC2,"addedPropC2=addedC2","addedPropC2B=foo","addedPropC2C=bar");
  SolrCore coreL1=cc.getCore("lazy1");
  addCoreProps(coreL1,"addedPropL1=addedL1","addedPropL1B=foo","addedPropL1C=bar");
  SolrCore coreL2=cc.getCore("lazy2");
  addCoreProps(coreL2,"addedPropL2=addedL2","addedPropL2B=foo","addedPropL2C=bar");
  try {
    cc.persist();
    checkSolrProperties(cc);
    checkCoreProps(makeCorePropFile("core1",false,true));
    checkCoreProps(makeCorePropFile("core2",false,false));
    checkCoreProps(makeCorePropFile("lazy1",true,true));
    checkCoreProps(makeCorePropFile("lazy2",false,true));
    coreC1.close();
    coreC2.close();
    coreL1.close();
    coreL2.close();
  }
  finally {
    cc.shutdown();
  }
}
