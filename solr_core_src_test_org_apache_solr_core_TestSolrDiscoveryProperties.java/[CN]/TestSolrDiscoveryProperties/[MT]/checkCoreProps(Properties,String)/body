{
  Properties props=new Properties();
  File propParent=new File(solrHomeDirectory,orig.getProperty(CoreDescriptor.CORE_NAME));
  FileInputStream in=new FileInputStream(new File(propParent,SolrProperties.CORE_PROP_FILE));
  try {
    props.load(in);
  }
  finally {
    in.close();
  }
  Set<String> propSet=props.stringPropertyNames();
  assertEquals("Persisted properties should NOT contain extra properties",propSet.size(),orig.size());
  for (  String prop : orig.stringPropertyNames()) {
    assertEquals("Original and new properties should be equal for " + prop,props.getProperty(prop),orig.getProperty(prop));
  }
  for (  String prop : extraProps) {
    String[] pair=prop.split("=");
    assertNull("Modified parameters should not be present for " + prop,props.getProperty(pair[0]));
  }
}
