{
  setMeUp();
  addSolrPropertiesFile();
  addCoreWithProps(makeCorePropFile("core1",false,true));
  addCoreWithProps(makeCorePropFile("core2",false,false));
  addCoreWithProps(makeCorePropFile("lazy1",true,false));
  CoreContainer cc=init();
  try {
    Properties props=cc.containerProperties;
    assertEquals("/admin/cores/props",props.getProperty("cores.adminPath"));
    assertEquals("/admin/cores/props",cc.getAdminPath());
    assertEquals("defcore",props.getProperty("cores.defaultCoreName"));
    assertEquals("defcore",cc.getDefaultCoreName());
    assertEquals("222.333.444.555",props.getProperty("host"));
    assertEquals("6000",props.getProperty("port"));
    assertEquals("/solrprop",props.getProperty("cores.hostContext"));
    assertEquals("20",props.getProperty("cores.zkClientTimeout"));
    TestLazyCores.checkInCores(cc,"core1");
    TestLazyCores.checkNotInCores(cc,"lazy1","core2","collection1");
    SolrCore core1=cc.getCore("core1");
    CoreDescriptor desc=core1.getCoreDescriptor();
    assertEquals("core1",desc.getProperty("solr.core.name"));
    assertNotNull(desc.getProperty("solr.core.instanceDir"));
    assertEquals("stuffandnonsense",desc.getProperty("solr.core.dataDir"));
    assertEquals("solrconfig-minimal.xml",desc.getProperty("solr.core.configName"));
    assertEquals("schema-tiny.xml",desc.getProperty("solr.core.schemaName"));
    SolrCore core2=cc.getCore("core2");
    SolrCore lazy1=cc.getCore("lazy1");
    TestLazyCores.checkInCores(cc,"core1","core2","lazy1");
    core1.close();
    core2.close();
    lazy1.close();
  }
  finally {
    cc.shutdown();
  }
}
