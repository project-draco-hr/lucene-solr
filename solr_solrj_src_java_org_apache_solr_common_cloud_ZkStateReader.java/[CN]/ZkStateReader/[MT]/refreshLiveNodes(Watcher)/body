{
  Set<String> newLiveNodes;
  try {
    List<String> nodeList=zkClient.getChildren(LIVE_NODES_ZKNODE,watcher,true);
    newLiveNodes=new HashSet<>(nodeList);
  }
 catch (  KeeperException.NoNodeException e) {
    newLiveNodes=emptySet();
  }
  Set<String> oldLiveNodes;
synchronized (getUpdateLock()) {
    oldLiveNodes=this.liveNodes;
    this.liveNodes=newLiveNodes;
    if (clusterState != null) {
      clusterState.setLiveNodes(newLiveNodes);
    }
  }
  LOG.info("Updated live nodes from ZooKeeper... ({}) -> ({})",oldLiveNodes.size(),newLiveNodes.size());
  if (LOG.isDebugEnabled()) {
    LOG.debug("Updated live nodes from ZooKeeper... {} -> {}",new TreeSet<>(oldLiveNodes),new TreeSet<>(newLiveNodes));
  }
}
