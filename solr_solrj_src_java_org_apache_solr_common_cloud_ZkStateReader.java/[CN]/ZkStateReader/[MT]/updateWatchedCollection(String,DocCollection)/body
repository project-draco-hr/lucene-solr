{
  if (newState == null) {
    log.info("Deleting data for {}",coll);
    watchedCollectionStates.remove(coll);
    return;
  }
  log.info("Updating data for {} to ver {} ",coll,newState.getZNodeVersion());
  while (true) {
    DocCollection oldState=watchedCollectionStates.get(coll);
    if (oldState == null) {
      if (watchedCollectionStates.putIfAbsent(coll,newState) == null) {
        break;
      }
    }
 else {
      if (oldState.getZNodeVersion() >= newState.getZNodeVersion()) {
        return;
      }
      if (watchedCollectionStates.replace(coll,oldState,newState)) {
        break;
      }
    }
  }
}
