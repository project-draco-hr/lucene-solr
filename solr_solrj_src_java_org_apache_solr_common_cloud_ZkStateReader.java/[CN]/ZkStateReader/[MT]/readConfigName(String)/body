{
  String configName=null;
  String path=COLLECTIONS_ZKNODE + "/" + collection;
  if (log.isInfoEnabled()) {
    log.info("Load collection config from:" + path);
  }
  try {
    byte[] data=zkClient.getData(path,null,null,true);
    if (data != null) {
      ZkNodeProps props=ZkNodeProps.load(data);
      configName=props.getStr(CONFIGNAME_PROP);
    }
    if (configName != null) {
      if (!zkClient.exists(CONFIGS_ZKNODE + "/" + configName,true)) {
        log.error("Specified config does not exist in ZooKeeper:" + configName);
        throw new ZooKeeperException(ErrorCode.SERVER_ERROR,"Specified config does not exist in ZooKeeper:" + configName);
      }
 else       if (log.isInfoEnabled()) {
        log.info("path={} {}={} specified config exists in ZooKeeper",new Object[]{path,CONFIGNAME_PROP,configName});
      }
    }
 else {
      throw new ZooKeeperException(ErrorCode.INVALID_STATE,"No config data found at path: " + path);
    }
  }
 catch (  KeeperException e) {
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error loading config name for collection " + collection,e);
  }
catch (  InterruptedException e) {
    Thread.interrupted();
    throw new SolrException(ErrorCode.SERVER_ERROR,"Error loading config name for collection " + collection,e);
  }
  return configName;
}
