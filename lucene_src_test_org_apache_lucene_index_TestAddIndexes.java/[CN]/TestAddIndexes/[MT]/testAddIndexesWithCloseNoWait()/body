{
  final int NUM_COPY=50;
  CommitAndAddIndexes3 c=new CommitAndAddIndexes3(NUM_COPY);
  if (VERBOSE) {
    c.writer2.setInfoStream(System.out);
  }
  c.launchThreads(-1);
  Thread.sleep(500);
  if (VERBOSE) {
    System.out.println("TEST: now close(false)");
  }
  c.close(false);
  c.joinThreads();
  if (VERBOSE) {
    System.out.println("TEST: done join threads");
  }
  _TestUtil.checkIndex(c.dir2);
  c.closeDir();
  assertTrue(c.failures.size() == 0);
}
