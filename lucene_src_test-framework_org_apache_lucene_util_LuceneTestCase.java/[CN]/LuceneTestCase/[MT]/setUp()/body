{
  seed="random".equals(TEST_SEED) ? seedRand.nextLong() : TwoLongs.fromString(TEST_SEED).l2;
  random.setSeed(seed);
  if (!testsFailed) {
    assertTrue("ensure your tearDown() calls super.tearDown()!!!",(state == State.INITIAL || state == State.TEARDOWN));
  }
  state=State.SETUP;
  savedUncaughtExceptionHandler=Thread.getDefaultUncaughtExceptionHandler();
  Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler(){
    public void uncaughtException(    Thread t,    Throwable e){
      testsFailed=true;
      uncaughtExceptions.add(new UncaughtExceptionEntry(t,e));
      if (savedUncaughtExceptionHandler != null)       savedUncaughtExceptionHandler.uncaughtException(t,e);
    }
  }
);
  savedBoolMaxClauseCount=BooleanQuery.getMaxClauseCount();
}
