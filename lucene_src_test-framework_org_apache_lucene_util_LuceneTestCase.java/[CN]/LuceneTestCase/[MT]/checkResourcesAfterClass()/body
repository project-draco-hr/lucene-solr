{
  for (  MockDirectoryWrapper d : stores.keySet()) {
    if (d.isOpen()) {
      StackTraceElement elements[]=stores.get(d);
      StackTraceElement element=null;
      for (int i=2; i < elements.length; i++) {
        StackTraceElement ste=elements[i];
        if (ste.getClassName().indexOf("LuceneTestCase") == -1) {
          element=ste;
          break;
        }
      }
      fail("directory of test was not closed, opened from: " + element);
    }
  }
}
