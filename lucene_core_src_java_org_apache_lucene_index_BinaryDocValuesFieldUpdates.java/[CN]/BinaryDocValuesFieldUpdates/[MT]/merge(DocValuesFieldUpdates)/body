{
  BinaryDocValuesFieldUpdates otherUpdates=(BinaryDocValuesFieldUpdates)other;
  int newSize=size + otherUpdates.size;
  if (newSize > Integer.MAX_VALUE) {
    throw new IllegalStateException("cannot support more than Integer.MAX_VALUE doc/value entries; size=" + size + " other.size="+ otherUpdates.size);
  }
  docs=docs.grow(newSize);
  offsets=offsets.grow(newSize);
  lengths=lengths.grow(newSize);
  docsWithField=FixedBitSet.ensureCapacity(docsWithField,(int)docs.size());
  for (int i=0; i < otherUpdates.size; i++) {
    int doc=(int)otherUpdates.docs.get(i);
    if (otherUpdates.docsWithField.get(i)) {
      docsWithField.set(size);
    }
    docs.set(size,doc);
    offsets.set(size,values.length + otherUpdates.offsets.get(i));
    lengths.set(size,otherUpdates.lengths.get(i));
    ++size;
  }
  int newLen=values.length + otherUpdates.values.length;
  if (values.bytes.length < newLen) {
    values.bytes=ArrayUtil.grow(values.bytes,newLen);
  }
  System.arraycopy(otherUpdates.values.bytes,otherUpdates.values.offset,values.bytes,values.length,otherUpdates.values.length);
  values.length=newLen;
}
