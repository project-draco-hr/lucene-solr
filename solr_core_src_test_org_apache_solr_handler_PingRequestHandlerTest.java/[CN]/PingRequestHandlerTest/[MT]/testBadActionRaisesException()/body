{
  SolrQueryRequest req=req("action","badaction");
  SolrQueryResponse rsp=new SolrQueryResponse();
  try {
    handler.handleRequestBody(req,rsp);
    fail("Should have thrown a SolrException for the bad action");
  }
 catch (  SolrException se) {
    assertEquals(SolrException.ErrorCode.BAD_REQUEST.code,se.code());
  }
  req.close();
}
