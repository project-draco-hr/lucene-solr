{
  assertTrue(!healthcheckFile.exists());
  try {
    makeRequest(handler,req());
    fail("Should have thrown a SolrException because not enabled yet");
  }
 catch (  SolrException se) {
    assertEquals(SolrException.ErrorCode.SERVICE_UNAVAILABLE.code,se.code());
  }
  makeRequest(handler,req("action","enable"));
  assertTrue(healthcheckFile.exists());
  assertNotNull(FileUtils.readFileToString(healthcheckFile),"UTF-8");
  SolrQueryResponse rsp=makeRequest(handler,req());
  assertEquals("OK",rsp.getValues().get("status"));
  makeRequest(handler,req("action","enable"));
  assertTrue(healthcheckFile.exists());
}
