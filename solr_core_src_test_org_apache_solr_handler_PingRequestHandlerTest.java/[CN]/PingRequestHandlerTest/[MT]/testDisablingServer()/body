{
  assertTrue(!healthcheckFile.exists());
  healthcheckFile.createNewFile();
  SolrQueryResponse rsp=makeRequest(handler,req());
  assertEquals("OK",rsp.getValues().get("status"));
  makeRequest(handler,req("action","disable"));
  assertFalse(healthcheckFile.exists());
  SolrQueryResponse sqr=makeRequest(handler,req());
  SolrException se=(SolrException)sqr.getException();
  assertEquals("Response should have been replaced with a 503 SolrException.",se.code(),SolrException.ErrorCode.SERVICE_UNAVAILABLE.code);
  makeRequest(handler,req("action","disable"));
  assertFalse(healthcheckFile.exists());
}
