{
  this.analyzer=analyzer;
  this.parser=parser;
  queryFactory=new QueryBuilderFactory();
  queryFactory.addBuilder("TermQuery",new TermQueryBuilder());
  queryFactory.addBuilder("TermsQuery",new TermsQueryBuilder(analyzer));
  queryFactory.addBuilder("MatchAllDocsQuery",new MatchAllDocsQueryBuilder());
  queryFactory.addBuilder("BooleanQuery",new BooleanQueryBuilder(queryFactory));
  queryFactory.addBuilder("NumericRangeQuery",new NumericRangeQueryBuilder());
  queryFactory.addBuilder("RangeQuery",new RangeQueryBuilder());
  queryFactory.addBuilder("DisjunctionMaxQuery",new DisjunctionMaxQueryBuilder(queryFactory));
  if (parser != null) {
    queryFactory.addBuilder("UserQuery",new UserInputQueryBuilder(parser));
  }
 else {
    queryFactory.addBuilder("UserQuery",new UserInputQueryBuilder(defaultField,analyzer));
  }
  queryFactory.addBuilder("ConstantScoreQuery",new ConstantScoreQueryBuilder(queryFactory));
  SpanQueryBuilderFactory sqof=new SpanQueryBuilderFactory();
  SpanNearBuilder snb=new SpanNearBuilder(sqof);
  sqof.addBuilder("SpanNear",snb);
  queryFactory.addBuilder("SpanNear",snb);
  BoostingTermBuilder btb=new BoostingTermBuilder();
  sqof.addBuilder("BoostingTermQuery",btb);
  queryFactory.addBuilder("BoostingTermQuery",btb);
  SpanTermBuilder snt=new SpanTermBuilder();
  sqof.addBuilder("SpanTerm",snt);
  queryFactory.addBuilder("SpanTerm",snt);
  SpanOrBuilder sot=new SpanOrBuilder(sqof);
  sqof.addBuilder("SpanOr",sot);
  queryFactory.addBuilder("SpanOr",sot);
  SpanOrTermsBuilder sots=new SpanOrTermsBuilder(analyzer);
  sqof.addBuilder("SpanOrTerms",sots);
  queryFactory.addBuilder("SpanOrTerms",sots);
  SpanFirstBuilder sft=new SpanFirstBuilder(sqof);
  sqof.addBuilder("SpanFirst",sft);
  queryFactory.addBuilder("SpanFirst",sft);
  SpanNotBuilder snot=new SpanNotBuilder(sqof);
  sqof.addBuilder("SpanNot",snot);
  queryFactory.addBuilder("SpanNot",snot);
}
