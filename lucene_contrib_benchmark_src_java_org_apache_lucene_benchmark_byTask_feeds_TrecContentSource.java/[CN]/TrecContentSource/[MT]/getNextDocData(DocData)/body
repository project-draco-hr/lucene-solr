{
  String dateStr=null, name=null;
  Reader r=null;
synchronized (lock) {
    if (reader == null) {
      openNextFile();
    }
    StringBuilder docBuf=getDocBuffer();
    docBuf.setLength(0);
    read(docBuf,DOC,false,false,null);
    docBuf.setLength(0);
    read(docBuf,DOCNO,true,false,null);
    name=docBuf.substring(DOCNO.length(),docBuf.indexOf(TERMINATING_DOCNO,DOCNO.length()));
    if (!excludeDocnameIteration)     name=name + "_" + iteration;
    docBuf.setLength(0);
    read(docBuf,DOCHDR,false,false,null);
    boolean findTerminatingDocHdr=false;
    docBuf.setLength(0);
    read(docBuf,DATE,true,false,TERMINATING_DOCHDR);
    if (docBuf.length() != 0) {
      dateStr=docBuf.substring(DATE.length());
      findTerminatingDocHdr=true;
    }
    if (findTerminatingDocHdr) {
      docBuf.setLength(0);
      read(docBuf,TERMINATING_DOCHDR,false,false,null);
    }
    docBuf.setLength(0);
    read(docBuf,TERMINATING_DOC,false,true,null);
    r=getTrecDocReader(docBuf);
    r.reset();
    addBytes(docBuf.length());
  }
  Date date=dateStr != null ? parseDate(dateStr) : null;
  try {
    docData=htmlParser.parse(docData,name,date,r,null);
    addDoc();
  }
 catch (  InterruptedException ie) {
    throw new ThreadInterruptedException(ie);
  }
  return docData;
}
