{
  Term term=new Term(DOCS_ENUM_FIELD,DOCS_ENUM_TERM);
  DocsEnum docs=reader.termDocsEnum(term);
  Bits mappedLiveDocs=reader.getLiveDocs();
  int doc;
  int prev=-1;
  while ((doc=docs.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {
    if (mappedLiveDocs != null) {
      assertTrue("document " + doc + " marked as deleted",mappedLiveDocs.get(doc));
    }
    assertEquals("incorrect value; doc " + doc,sortedValues[doc].intValue(),Integer.parseInt(reader.document(doc).get(ID_FIELD)));
    while (++prev < doc) {
      assertFalse("document " + prev + " not marked as deleted",mappedLiveDocs.get(prev));
    }
  }
  docs=reader.termDocsEnum(term);
  doc=0;
  prev=-1;
  while ((doc=docs.advance(doc)) != DocIdSetIterator.NO_MORE_DOCS) {
    if (mappedLiveDocs != null) {
      assertTrue("document " + doc + " marked as deleted",mappedLiveDocs.get(doc));
    }
    assertEquals("incorrect value; doc " + doc,sortedValues[doc].intValue(),Integer.parseInt(reader.document(doc).get(ID_FIELD)));
    while (++prev < doc) {
      assertFalse("document " + prev + " not marked as deleted",mappedLiveDocs.get(prev));
    }
  }
}
