{
  if (domain == null || domain.size() == 0 && !freq.processEmpty) {
    return;
  }
  for (  Map.Entry<String,FacetRequest> sub : freq.getSubFacets().entrySet()) {
    FacetContext subContext=fcontext.sub(filter,domain);
    FacetProcessor subProcessor=sub.getValue().createFacetProcessor(subContext);
    if (fcontext.getDebugInfo() != null) {
      FacetDebugInfo fdebug=new FacetDebugInfo();
      subContext.setDebugInfo(fdebug);
      fcontext.getDebugInfo().addChild(fdebug);
      fdebug.setReqDescription(sub.getValue().getFacetDescription());
      fdebug.setProcessor(subProcessor.getClass().getSimpleName());
      if (subContext.filter != null)       fdebug.setFilter(subContext.filter.toString());
      final RTimer timer=new RTimer();
      subProcessor.process();
      long timeElapsed=(long)timer.getTime();
      fdebug.setElapse(timeElapsed);
    }
 else {
      subProcessor.process();
    }
    response.add(sub.getKey(),subProcessor.getResponse());
  }
}
