{
  while (currentDocId < docCount) {
    currentDocId++;
    if (liveDocs != null && !liveDocs.get(currentDocId)) {
      continue;
    }
    StoredDocument doc=reader.document(currentDocId,relevantFields);
    if (hasPayloads) {
      StorableField payload=doc.getField(payloadField);
      if (payload == null) {
        throw new IllegalArgumentException(payloadField + " does not exist");
      }
 else       if (payload.binaryValue() == null) {
        throw new IllegalArgumentException(payloadField + " does not have binary value");
      }
      currentPayload=payload.binaryValue();
    }
    StorableField weight=doc.getField(weightField);
    if (weight == null) {
      throw new IllegalArgumentException(weightField + " does not exist");
    }
 else     if (weight.numericValue() == null) {
      throw new IllegalArgumentException(weightField + " does not have numeric value");
    }
    currentWeight=weight.numericValue().longValue();
    StorableField fieldVal=doc.getField(field);
    if (fieldVal == null) {
      throw new IllegalArgumentException(field + " does not exist");
    }
 else     if (fieldVal.stringValue() == null) {
      throw new IllegalArgumentException(field + " does not have string value");
    }
    return new BytesRef(fieldVal.stringValue());
  }
  return null;
}
