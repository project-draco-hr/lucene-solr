{
  while (currentDocId < docCount) {
    currentDocId++;
    if (liveDocs != null && !liveDocs.get(currentDocId)) {
      continue;
    }
    StoredDocument doc=reader.document(currentDocId,relevantFields);
    BytesRef tempPayload=null;
    BytesRef tempTerm=null;
    Set<BytesRef> tempContexts=new HashSet<>();
    if (hasPayloads) {
      StorableField payload=doc.getField(payloadField);
      if (payload == null || (payload.binaryValue() == null && payload.stringValue() == null)) {
        continue;
      }
      tempPayload=(payload.binaryValue() != null) ? payload.binaryValue() : new BytesRef(payload.stringValue());
    }
    if (hasContexts) {
      final StorableField[] contextFields=doc.getFields(contextsField);
      for (      StorableField contextField : contextFields) {
        if (contextField.binaryValue() == null && contextField.stringValue() == null) {
          continue;
        }
 else {
          tempContexts.add((contextField.binaryValue() != null) ? contextField.binaryValue() : new BytesRef(contextField.stringValue()));
        }
      }
    }
    StorableField fieldVal=doc.getField(field);
    if (fieldVal == null || (fieldVal.binaryValue() == null && fieldVal.stringValue() == null)) {
      continue;
    }
    tempTerm=(fieldVal.stringValue() != null) ? new BytesRef(fieldVal.stringValue()) : fieldVal.binaryValue();
    currentPayload=tempPayload;
    currentContexts=tempContexts;
    currentWeight=getWeight(doc,currentDocId);
    return tempTerm;
  }
  return null;
}
