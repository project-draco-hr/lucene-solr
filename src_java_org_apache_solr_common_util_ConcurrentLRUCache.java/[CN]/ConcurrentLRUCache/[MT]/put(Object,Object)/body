{
  if (val == null)   return null;
  CacheEntry e=new CacheEntry(key,val,stats.accessCounter.incrementAndGet());
  CacheEntry oldCacheEntry=map.put(key,e);
  stats.size.incrementAndGet();
  if (islive) {
    stats.putCounter.incrementAndGet();
  }
 else {
    stats.nonLivePutCounter.incrementAndGet();
  }
  if (stats.size.get() > upperWaterMark) {
    if (newThreadForCleanup) {
      if (!markAndSweepLock.isLocked()) {
        new Thread(){
          public void run(){
            markAndSweep();
          }
        }
.start();
      }
    }
 else {
      markAndSweep();
    }
  }
  return oldCacheEntry == null ? null : oldCacheEntry.value;
}
