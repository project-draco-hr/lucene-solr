{
  final Bits skipDocs;
synchronized (reader) {
    if (isCacheable()) {
      skipDocs=null;
    }
 else {
      skipDocs=MultiFields.getDeletedDocs(reader);
    }
  }
  final int maxDoc=reader.maxDoc();
  return new DocIdSetIterator(){
    private int doc=-1;
    @Override public int docID(){
      return doc;
    }
    @Override public int nextDoc(){
      try {
        do {
          doc++;
        }
 while ((skipDocs != null && doc < maxDoc && skipDocs.get(doc)) || !matchDoc(doc));
        return doc;
      }
 catch (      ArrayIndexOutOfBoundsException e) {
        return doc=NO_MORE_DOCS;
      }
    }
    @Override public int advance(    int target){
      try {
        doc=target;
        while (!matchDoc(doc)) {
          doc++;
        }
        return doc;
      }
 catch (      ArrayIndexOutOfBoundsException e) {
        return doc=NO_MORE_DOCS;
      }
    }
  }
;
}
