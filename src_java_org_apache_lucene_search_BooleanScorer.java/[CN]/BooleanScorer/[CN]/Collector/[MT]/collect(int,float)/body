{
  final BucketTable table=bucketTable;
  final int i=doc & BucketTable.MASK;
  Bucket bucket=table.buckets[i];
  if (bucket == null)   table.buckets[i]=bucket=new Bucket();
  if (bucket.doc != doc) {
    bucket.doc=doc;
    bucket.score=score;
    bucket.bits=mask;
    bucket.coord=1;
    bucket.next=table.first;
    table.first=bucket;
  }
 else {
    bucket.score+=score;
    bucket.bits|=mask;
    bucket.coord++;
  }
}
