{
  int mask=0;
  if (required || prohibited) {
    if (nextMask == 0) {
      throw new IndexOutOfBoundsException("More than 32 required/prohibited clauses in query.");
    }
    mask=nextMask;
    nextMask=nextMask << 1;
  }
  if (!prohibited) {
    maxCoord++;
    if (required) {
      requiredMask|=mask;
    }
  }
 else {
    prohibitedMask|=mask;
  }
  scorers=new SubScorer(scorer,required,prohibited,bucketTable.newCollector(mask),scorers);
}
