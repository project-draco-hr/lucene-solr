{
  int mask=0;
  if (required || prohibited) {
    if (nextMask == 0)     throw new IndexOutOfBoundsException("More than 32 required/prohibited clauses in query.");
    mask=nextMask;
    nextMask=nextMask << 1;
  }
 else   mask=0;
  if (!prohibited)   maxCoord++;
  if (prohibited)   prohibitedMask|=mask;
 else   if (required)   requiredMask|=mask;
  scorers=new SubScorer(scorer,required,prohibited,bucketTable.newCollector(mask),scorers);
}
