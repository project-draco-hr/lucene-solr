{
  Directory indexDir=newDirectory();
  TaxonomyWriter tw=new LuceneTaxonomyWriter(indexDir);
  tw.commit();
  TaxonomyReader tr=new LuceneTaxonomyReader(indexDir);
  CategoryPath author=new CategoryPath("Author");
  assertEquals(1,tr.getSize());
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  tw.addCategory(author);
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  tr.refresh();
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  tw.commit();
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  tr.refresh();
  assertEquals(1,tr.getOrdinal(author));
  assertEquals(2,tr.getSize());
  tw.close();
  tr.close();
  indexDir.close();
}
