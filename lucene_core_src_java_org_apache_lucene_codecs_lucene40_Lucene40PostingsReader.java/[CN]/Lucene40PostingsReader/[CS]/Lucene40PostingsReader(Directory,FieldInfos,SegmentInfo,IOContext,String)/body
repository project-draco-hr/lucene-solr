{
  boolean success=false;
  IndexInput freqIn=null;
  IndexInput proxIn=null;
  try {
    freqIn=dir.openInput(IndexFileNames.segmentFileName(segmentInfo.name,segmentSuffix,Lucene40PostingsFormat.FREQ_EXTENSION),ioContext);
    CodecUtil.checkHeader(freqIn,FRQ_CODEC,VERSION_START,VERSION_CURRENT);
    if (fieldInfos.hasProx()) {
      proxIn=dir.openInput(IndexFileNames.segmentFileName(segmentInfo.name,segmentSuffix,Lucene40PostingsFormat.PROX_EXTENSION),ioContext);
      CodecUtil.checkHeader(proxIn,PRX_CODEC,VERSION_START,VERSION_CURRENT);
    }
 else {
      proxIn=null;
    }
    this.freqIn=freqIn;
    this.proxIn=proxIn;
    success=true;
  }
  finally {
    if (!success) {
      IOUtils.closeWhileHandlingException(freqIn,proxIn);
    }
  }
}
