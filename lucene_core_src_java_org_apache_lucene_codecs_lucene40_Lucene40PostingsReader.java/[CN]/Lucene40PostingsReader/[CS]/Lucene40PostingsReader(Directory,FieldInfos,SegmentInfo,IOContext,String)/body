{
  boolean success=false;
  IndexInput freqIn=null;
  IndexInput proxIn=null;
  try {
    freqIn=dir.openInput(IndexFileNames.segmentFileName(segmentInfo.name,segmentSuffix,Lucene40PostingsFormat.FREQ_EXTENSION),ioContext);
    CodecUtil.checkHeader(freqIn,Lucene40PostingsWriter.FRQ_CODEC,Lucene40PostingsWriter.VERSION_START,Lucene40PostingsWriter.VERSION_START);
    if (fieldInfos.hasProx()) {
      proxIn=dir.openInput(IndexFileNames.segmentFileName(segmentInfo.name,segmentSuffix,Lucene40PostingsFormat.PROX_EXTENSION),ioContext);
      CodecUtil.checkHeader(proxIn,Lucene40PostingsWriter.PRX_CODEC,Lucene40PostingsWriter.VERSION_START,Lucene40PostingsWriter.VERSION_START);
    }
 else {
      proxIn=null;
    }
    this.freqIn=freqIn;
    this.proxIn=proxIn;
    success=true;
  }
  finally {
    if (!success) {
      IOUtils.closeWhileHandlingException(freqIn,proxIn);
    }
  }
}
