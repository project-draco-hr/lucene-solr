{
  InputStream stream=null;
  try {
    if (dictFile != null)     dictionary=getWordSet(loader,dictFile,false);
    stream=loader.openResource(hypFile);
    final InputSource is=new InputSource(stream);
    is.setEncoding(encoding);
    is.setSystemId(hypFile);
    if (luceneMatchVersion.onOrAfter(Version.LUCENE_4_4_0)) {
      hyphenator=HyphenationCompoundWordTokenFilter.getHyphenationTree(is);
    }
 else {
      hyphenator=Lucene43HyphenationCompoundWordTokenFilter.getHyphenationTree(is);
    }
  }
  finally {
    IOUtils.closeWhileHandlingException(stream);
  }
}
