{
  if (query instanceof ConstantScoreQuery) {
    ConstantScoreQuery csq=(ConstantScoreQuery)query;
    Filter filter=csq.getFilter();
    if (filter != null) {
      return filter;
    }
 else {
      return getFilter(csq.getQuery());
    }
  }
 else {
    return null;
  }
}
