{
  final String shardsElectZkPath=electionPath + LeaderElector.ELECTION_NODE;
  Slice slices=zkController.getClusterState().getSlice(collection,shardId);
  if (slices != null) {
    int found=0;
    try {
      found=zkClient.getChildren(shardsElectZkPath,null,true).size();
    }
 catch (    KeeperException e) {
      if (e instanceof KeeperException.SessionExpiredException) {
        throw new SolrException(ErrorCode.SERVER_ERROR,"ZK session expired - cancelling election for " + collection + " "+ shardId);
      }
      SolrException.log(log,"Error checking for the number of election participants",e);
    }
    if (found >= slices.getReplicasMap().size()) {
      log.debug("All replicas are ready to participate in election.");
      return true;
    }
  }
 else {
    log.warn("Shard not found: " + shardId + " for collection "+ collection);
    return false;
  }
  return false;
}
