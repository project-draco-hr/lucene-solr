{
  ByteArrayOutputStream bos=new ByteArrayOutputStream(1024);
  CheckIndex checker=new CheckIndex(dir);
  checker.setInfoStream(new PrintStream(bos),false);
  CheckIndex.Status indexStatus=checker.checkIndex(null,codecs);
  if (indexStatus == null || indexStatus.clean == false) {
    System.out.println("CheckIndex failed");
    System.out.println(bos.toString());
    throw new RuntimeException("CheckIndex failed");
  }
 else {
    return indexStatus;
  }
}
