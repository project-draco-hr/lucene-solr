{
  FixedBitSet obs=new FixedBitSet(maxDoc);
  int[] a=new int[n];
  for (int i=0; i < n; i++) {
    for (; ; ) {
      int idx=rand.nextInt(maxDoc);
      if (obs.getAndSet(idx))       continue;
      a[i]=idx;
      break;
    }
  }
  if (n <= smallSetCuttoff) {
    if (smallSetType == 0) {
      Arrays.sort(a);
      return new SortedIntDocSet(a);
    }
 else     if (smallSetType == 1) {
      Arrays.sort(a);
      return loadfactor != 0 ? new HashDocSet(a,0,n,1 / loadfactor) : new HashDocSet(a,0,n);
    }
  }
  return new BitDocSet(obs,n);
}
