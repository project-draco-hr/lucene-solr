{
  if (last == null && first == null) {
    first=last=newBlock();
    queueBlocks.addFirst(first);
    numBlocks++;
  }
  if (last == null && first != null) {
    System.err.println("Error in CachingQueue: last!=first==null");
  }
  if (first.size() >= blockSize) {
    QueueBlock newBlock=newBlock();
    numBlocks++;
    if (last != first) {
      first.store();
    }
    queueBlocks.addFirst(newBlock);
    first=newBlock;
  }
  first.insert(o);
  size++;
}
