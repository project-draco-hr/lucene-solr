{
  final String tmpSolrHomePath=createTempDir().getAbsolutePath();
  tmpSolrHome=new File(tmpSolrHomePath).getAbsoluteFile();
  tmpConfDir=new File(tmpSolrHome,confDir);
  File testHomeConfDir=new File(TEST_HOME(),confDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"solrconfig-managed-schema.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"solrconfig-basic.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"solrconfig.snippet.randomindexconfig.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"schema-one-field-no-dynamic-field.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"schema-one-field-no-dynamic-field-unique-key.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"schema-minimal.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"schema_codec.xml"),tmpConfDir);
  FileUtils.copyFileToDirectory(new File(testHomeConfDir,"schema-bm25.xml"),tmpConfDir);
  System.setProperty("managed.schema.mutable","false");
  System.setProperty("enable.update.log","false");
  initCore("solrconfig-managed-schema.xml","schema-minimal.xml",tmpSolrHome.getPath());
}
