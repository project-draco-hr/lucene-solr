{
  Reader reader=new StringReader("this is a test");
  Map<String,String> args=new HashMap<String,String>();
  args.put("tokenSeparator","=BLAH=");
  args.put("outputUnigrams","false");
  ShingleFilterFactory factory=new ShingleFilterFactory();
  factory.init(args);
  TokenStream stream=factory.create(new MockTokenizer(reader,MockTokenizer.WHITESPACE,false));
  assertTokenStreamContents(stream,new String[]{"this=BLAH=is","is=BLAH=a","a=BLAH=test"});
}
