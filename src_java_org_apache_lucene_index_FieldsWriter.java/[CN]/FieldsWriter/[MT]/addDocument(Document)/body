{
  indexStream.writeLong(fieldsStream.getFilePointer());
  int storedCount=0;
  Iterator fieldIterator=doc.getFields().iterator();
  while (fieldIterator.hasNext()) {
    Fieldable field=(Fieldable)fieldIterator.next();
    if (field.isStored())     storedCount++;
  }
  fieldsStream.writeVInt(storedCount);
  fieldIterator=doc.getFields().iterator();
  while (fieldIterator.hasNext()) {
    Fieldable field=(Fieldable)fieldIterator.next();
    if (field.isStored())     writeField(fieldInfos.fieldInfo(field.name()),field);
  }
}
