{
  ArrayList<String> lines=null;
  while (profilesEnum.hasMoreElements()) {
    if (lines != null) {
      lines.clear();
    }
 else {
      lines=new ArrayList<String>();
    }
    final URL url=profilesEnum.nextElement();
    try {
      final InputStream in=url.openStream();
      IOException priorE=null;
      try {
        final BufferedReader reader=new BufferedReader(new InputStreamReader(in,IOUtils.CHARSET_UTF_8));
        String line;
        while ((line=reader.readLine()) != null) {
          final int pos=line.indexOf('#');
          if (pos >= 0) {
            line=line.substring(0,pos);
          }
          line=line.trim();
          if (line.length() > 0) {
            lines.add(line);
          }
        }
      }
 catch (      IOException ioe) {
        priorE=ioe;
      }
 finally {
        IOUtils.closeWhileHandlingException(priorE,in);
      }
    }
 catch (    IOException ioe) {
      throw new ServiceConfigurationError("Error loading SPI class list from URL: " + url,ioe);
    }
    if (!lines.isEmpty()) {
      this.linesIterator=lines.iterator();
      return true;
    }
  }
  return false;
}
