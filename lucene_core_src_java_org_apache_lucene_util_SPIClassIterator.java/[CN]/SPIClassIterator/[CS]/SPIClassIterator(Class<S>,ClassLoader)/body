{
  if (loader == null)   throw new IllegalArgumentException("You must provide a ClassLoader.");
  this.clazz=clazz;
  this.loader=loader;
  try {
    this.profilesEnum=loader.getResources(META_INF_SERVICES + clazz.getName());
  }
 catch (  IOException ioe) {
    throw new ServiceConfigurationError("Error loading SPI profiles for type " + clazz.getName() + " from classpath",ioe);
  }
  this.linesIterator=Collections.<String>emptySet().iterator();
}
