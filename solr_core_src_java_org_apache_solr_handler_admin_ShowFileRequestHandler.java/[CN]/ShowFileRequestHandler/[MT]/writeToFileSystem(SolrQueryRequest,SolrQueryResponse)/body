{
  ContentStream stream=getOneInputStream(req,rsp);
  if (stream == null) {
    return;
  }
  File adminFile=getAdminFileFromFileSystem(req,rsp);
  if (adminFile == null || adminFile.isDirectory()) {
    String fname=req.getParams().get("file",null);
    if (adminFile == null) {
      log.error("File " + fname + " was not found.");
      rsp.setException(new SolrException(ErrorCode.BAD_REQUEST,"File " + fname + " was not found."));
      return;
    }
    log.error("File " + fname + " is a directory.");
    rsp.setException(new SolrException(ErrorCode.BAD_REQUEST,"File " + fname + " is a directory."));
    return;
  }
  FileUtils.copyInputStreamToFile(stream.getStream(),adminFile);
  log.info("Successfully saved file " + adminFile.getAbsolutePath() + " locally");
}
