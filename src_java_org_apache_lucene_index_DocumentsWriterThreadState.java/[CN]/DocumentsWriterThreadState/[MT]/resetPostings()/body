{
  fieldGen=0;
  maxPostingsVectors=0;
  doFlushAfter=false;
  if (localFieldsWriter != null) {
    localFieldsWriter.close();
    localFieldsWriter=null;
  }
  postingsPool.reset();
  charPool.reset();
  docWriter.recyclePostings(postingsFreeList,postingsFreeCount);
  postingsFreeCount=0;
  for (int i=0; i < numAllFieldData; i++) {
    DocumentsWriterFieldData fp=allFieldDataArray[i];
    fp.lastGen=-1;
    if (fp.numPostings > 0)     fp.resetPostingArrays();
  }
}
