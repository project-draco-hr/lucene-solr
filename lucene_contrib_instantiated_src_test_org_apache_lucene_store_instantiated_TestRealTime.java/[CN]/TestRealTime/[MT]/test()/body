{
  InstantiatedIndex index=new InstantiatedIndex();
  InstantiatedIndexReader reader=new InstantiatedIndexReader(index);
  IndexSearcher searcher=newSearcher(reader,false);
  InstantiatedIndexWriter writer=new InstantiatedIndexWriter(index);
  Document doc;
  Collector collector;
  doc=new Document();
  doc.add(new StringField("f","a"));
  writer.addDocument(doc);
  writer.commit();
  collector=new Collector();
  searcher.search(new TermQuery(new Term("f","a")),collector);
  assertEquals(1,collector.hits);
  doc=new Document();
  doc.add(new StringField("f","a"));
  writer.addDocument(doc);
  writer.commit();
  collector=new Collector();
  searcher.search(new TermQuery(new Term("f","a")),collector);
  assertEquals(2,collector.hits);
}
