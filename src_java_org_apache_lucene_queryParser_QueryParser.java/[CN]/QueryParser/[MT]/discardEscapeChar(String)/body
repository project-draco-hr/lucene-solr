{
  char[] output=new char[input.length()];
  int length=0;
  boolean lastCharWasEscapeChar=false;
  for (int i=0; i < input.length(); i++) {
    char curChar=input.charAt(i);
    if (lastCharWasEscapeChar) {
      output[length]=curChar;
      length++;
      lastCharWasEscapeChar=false;
    }
 else {
      if (curChar == '\\') {
        lastCharWasEscapeChar=true;
      }
 else {
        output[length]=curChar;
        length++;
      }
    }
  }
  if (lastCharWasEscapeChar) {
    throw new ParseException("Term can not end with escape character.");
  }
  return new String(output,0,length);
}
