{
  ignoreException(Pattern.quote(errString));
  try {
    if (null == solrHome) {
      initCore(solrconfigFile,schemaFile);
    }
 else {
      initCore(solrconfigFile,schemaFile,solrHome);
    }
  }
 catch (  Exception e) {
    for (Throwable t=e; t != null; t=t.getCause()) {
      if (t.getMessage() != null && -1 != t.getMessage().indexOf(errString))       return;
    }
    throw new SolrException(ErrorCode.SERVER_ERROR,"Unexpected error, expected error matching: " + errString,e);
  }
 finally {
    deleteCore();
    resetExceptionIgnores();
  }
  fail("Did not encounter any exception from: " + solrconfigFile + " using "+ schemaFile);
}
