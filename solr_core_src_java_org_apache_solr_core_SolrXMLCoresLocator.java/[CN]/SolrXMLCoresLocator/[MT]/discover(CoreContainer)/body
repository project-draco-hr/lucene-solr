{
  ImmutableList.Builder<CoreDescriptor> listBuilder=ImmutableList.builder();
  for (  String coreName : cfg.getAllCoreNames()) {
    String name=cfg.getProperty(coreName,CoreDescriptor.CORE_NAME,DEFAULT_CORE_NAME);
    String instanceDir=cfg.getProperty(coreName,CoreDescriptor.CORE_INSTDIR,"");
    Properties coreProperties=new Properties();
    for (    String propName : CoreDescriptor.standardPropNames) {
      String propValue=cfg.getProperty(coreName,propName,"");
      if (StringUtils.isNotEmpty(propValue))       coreProperties.setProperty(propName,propValue);
    }
    coreProperties.putAll(cfg.getCoreProperties(coreName));
    listBuilder.add(new CoreDescriptor(cc,name,instanceDir,coreProperties));
  }
  return listBuilder.build();
}
