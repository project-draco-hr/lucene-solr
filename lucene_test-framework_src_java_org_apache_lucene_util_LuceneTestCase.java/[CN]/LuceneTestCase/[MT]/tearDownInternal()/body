{
  Throwable problem=null;
  BooleanQuery.setMaxClauseCount(savedBoolMaxClauseCount);
  checkRogueThreadsAfter();
  Thread.setDefaultUncaughtExceptionHandler(savedUncaughtExceptionHandler);
  try {
    checkUncaughtExceptionsAfter();
  }
 catch (  Throwable t) {
    if (problem == null)     problem=t;
  }
  try {
    assertSaneFieldCaches(getTestLabel());
  }
 catch (  Throwable t) {
    if (problem == null)     problem=t;
  }
  purgeFieldCache(FieldCache.DEFAULT);
  if (problem != null) {
    reportAdditionalFailureInfo();
    throw new RuntimeException(problem);
  }
}
