{
  List<MBeanServer> servers=MBeanServerFactory.findMBeanServer(null);
  log.info("Servers in testJmxRegistration: " + servers);
  assertNotNull("MBeanServers were null",servers);
  assertFalse("No MBeanServer was found",servers.isEmpty());
  MBeanServer mbeanServer=servers.get(0);
  assertTrue("No MBeans found in server",mbeanServer.getMBeanCount() > 0);
  Set<ObjectInstance> objects=mbeanServer.queryMBeans(null,null);
  assertFalse("No SolrInfoMBean objects found in mbean server",objects.isEmpty());
  for (  ObjectInstance o : objects) {
    MBeanInfo mbeanInfo=mbeanServer.getMBeanInfo(o.getObjectName());
    if (mbeanInfo.getClassName().endsWith(SolrDynamicMBean.class.getName())) {
      assertTrue("No Attributes found for mbean: " + mbeanInfo,mbeanInfo.getAttributes().length > 0);
    }
  }
}
