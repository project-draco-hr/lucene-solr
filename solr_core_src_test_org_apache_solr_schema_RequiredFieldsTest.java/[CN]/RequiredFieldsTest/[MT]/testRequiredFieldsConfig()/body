{
  SolrCore core=h.getCore();
  IndexSchema schema=core.getSchema();
  SchemaField uniqueKey=schema.getUniqueKeyField();
  assertTrue(uniqueKey.isRequired());
  assertTrue(schema.getRequiredFields().contains(uniqueKey));
  Collection<SchemaField> requiredFields=schema.getRequiredFields();
  int numDefaultFields=schema.getFieldsWithDefaultValue().size();
  assertEquals(numDefaultFields + 1 + 1,requiredFields.size());
}
