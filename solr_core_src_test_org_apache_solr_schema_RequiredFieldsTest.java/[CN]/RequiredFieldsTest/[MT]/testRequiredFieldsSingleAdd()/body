{
  SolrCore core=h.getCore();
  assertU("adding document",adoc("id","529","name","document with id, name, and subject","field_t","what's inside?","subject","info"));
  assertU(commit());
  assertQ("should find one",req("id:529"),"//result[@numFound=1]");
  assertU("adding a doc without field w/ configured default",adoc("id","530","name","document with id and name","field_t","what's inside?"));
  assertU(commit());
  String subjectDefault=core.getSchema().getField("subject").getDefaultValue();
  assertNotNull("subject has no default value",subjectDefault);
  assertQ("should find one with subject=" + subjectDefault,req("id:530 subject:" + subjectDefault),"//result[@numFound=1]");
  assertNull(core.getSchema().getField("name").getDefaultValue());
  ignoreException("missing required field");
  assertFailedU("adding doc without required field",adoc("id","531","subject","no name document","field_t","what's inside?"));
  resetExceptionIgnores();
  assertU(commit());
  assertQ("should not find any",req("id:531"),"//result[@numFound=0]");
}
