{
  schema.addSchemaField(null);
  assertEquals(0,schema.getFields().size());
  IndexSchemaField f=new IndexSchemaField();
  f.setName(IndexDocument.FIELD_ENTRY_ID);
  schema.addSchemaField(f);
  assertEquals(0,schema.getFields().size());
  f.setName(IndexDocument.FIELD_FEED_ID);
  schema.addSchemaField(f);
  assertEquals(0,schema.getFields().size());
  f.setName("some");
  schema.addSchemaField(f);
  assertEquals(1,schema.getFields().size());
  assertEquals(StandardAnalyzer.class,schema.getServiceAnalyzer().getClass());
  assertEquals(StandardAnalyzer.class,schema.getSchemaAnalyzer().getClass());
  f.setName("someOther");
  f.setAnalyzerClass(StopAnalyzer.class);
  schema.addSchemaField(f);
  assertEquals(2,schema.getFields().size());
  assertEquals(PerFieldAnalyzerWrapper.class,schema.getSchemaAnalyzer().getClass());
  schema.addSchemaField(f);
  assertEquals(3,schema.getFields().size());
}
