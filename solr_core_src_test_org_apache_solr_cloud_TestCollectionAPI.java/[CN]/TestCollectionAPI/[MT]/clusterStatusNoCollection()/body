{
  try (CloudSolrClient client=createCloudClient(null)){
    ModifiableSolrParams params=new ModifiableSolrParams();
    params.set("action",CollectionParams.CollectionAction.CLUSTERSTATUS.toString());
    SolrRequest request=new QueryRequest(params);
    request.setPath("/admin/collections");
    NamedList<Object> rsp=client.request(request);
    NamedList<Object> cluster=(NamedList<Object>)rsp.get("cluster");
    assertNotNull("Cluster state should not be null",cluster);
    NamedList<Object> collections=(NamedList<Object>)cluster.get("collections");
    assertNotNull("Collections should not be null in cluster state",collections);
    assertNotNull(collections.get(COLLECTION_NAME1));
    assertEquals(4,collections.size());
    List<String> liveNodes=(List<String>)cluster.get("live_nodes");
    assertNotNull("Live nodes should not be null",liveNodes);
    assertFalse(liveNodes.isEmpty());
  }
 }
