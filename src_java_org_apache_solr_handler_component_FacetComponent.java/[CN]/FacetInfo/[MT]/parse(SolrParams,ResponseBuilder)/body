{
  queryFacets=new LinkedHashMap<String,Long>();
  topFacets=new LinkedHashMap<String,DistribFieldFacet>();
  listFacets=new LinkedHashMap<String,DistribFieldFacet>();
  String[] facetQs=params.getParams(FacetParams.FACET_QUERY);
  if (facetQs != null) {
    for (    String query : facetQs) {
      queryFacets.put(query,0L);
    }
  }
  String[] facetFs=params.getParams(FacetParams.FACET_FIELD);
  if (facetFs != null) {
    for (    String field : facetFs) {
      DistribFieldFacet ff=new DistribFieldFacet(rb,field);
      ff.fillParams(params,field);
      if (ff.sort) {
        topFacets.put(field,ff);
      }
 else {
        listFacets.put(field,ff);
      }
    }
  }
}
