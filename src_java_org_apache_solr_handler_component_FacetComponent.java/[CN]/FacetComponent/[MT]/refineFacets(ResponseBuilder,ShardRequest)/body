{
  FacetInfo fi=rb._facetInfo;
  for (  ShardResponse srsp : sreq.responses) {
    NamedList facet_counts=(NamedList)srsp.getSolrResponse().getResponse().get("facet_counts");
    NamedList facet_queries=(NamedList)facet_counts.get("facet_queries");
    for (int i=0; i < facet_queries.size(); i++) {
      try {
        String facet_q=(String)facet_queries.getName(i);
        long count=((Number)facet_queries.getVal(i)).longValue();
        SolrParams qparams=QueryParsing.getLocalParams(facet_q,null);
        if (qparams == null)         continue;
        String field=qparams.get(QueryParsing.F);
        String val=qparams.get(QueryParsing.V);
        DistribFieldFacet dff=fi.facets.get(field);
        if (dff == null)         continue;
        ShardFacetCount sfc=dff.counts.get(val);
        if (sfc == null) {
          continue;
        }
        sfc.count+=count;
      }
 catch (      ParseException e) {
        throw new SolrException(SolrException.ErrorCode.SERVER_ERROR,e);
      }
    }
  }
}
