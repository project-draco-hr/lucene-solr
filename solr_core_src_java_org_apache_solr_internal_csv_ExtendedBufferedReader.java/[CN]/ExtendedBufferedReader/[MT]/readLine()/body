{
  if (lookaheadChar == UNDEFINED) {
    lookaheadChar=super.read();
  }
  line.clear();
  if (lookaheadChar == END_OF_STREAM) {
    return null;
  }
  char laChar=(char)lookaheadChar;
  if (laChar == '\n' || laChar == '\r') {
    lastChar=lookaheadChar;
    lookaheadChar=super.read();
    if ((char)lookaheadChar == '\n') {
      lastChar=lookaheadChar;
      lookaheadChar=super.read();
    }
    lineCounter++;
    return line.toString();
  }
  line.append(laChar);
  String restOfLine=super.readLine();
  lastChar=lookaheadChar;
  lookaheadChar=super.read();
  if (restOfLine != null) {
    line.append(restOfLine);
  }
  lineCounter++;
  return line.toString();
}
