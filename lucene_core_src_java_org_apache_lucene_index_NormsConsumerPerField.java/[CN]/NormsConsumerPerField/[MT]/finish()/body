{
  if (fieldInfo.isIndexed() && !fieldInfo.omitsNorms()) {
    similarity.computeNorm(fieldState,norm);
    if (norm.type() != null) {
      StorableField field=norm.field();
      DocValuesConsumer consumer=getConsumer(norm.type());
      consumer.add(docState.docID,field);
    }
    long norm=similarity.computeSimpleNorm(fieldState);
    if (norm != -1) {
      simpleNormsWriter.addValue(docState.docID,norm);
    }
  }
}
