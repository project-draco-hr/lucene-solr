{
  SynonymMap.Builder builder=new SynonymMap.Builder(true);
  builder.add(new CharsRef("mykeyword"),new CharsRef("mysynonym"),true);
  Tokenizer tokenizer=new MockTokenizer(MockTokenizer.WHITESPACE,true);
  tokenizer.setReader(new StringReader("mykeyword"));
  SynonymFilter filter=new SynonymFilter(tokenizer,builder.build(),true);
  CompletionTokenStream completionTokenStream=new CompletionTokenStream(filter);
  BytesRef payload=new BytesRef("payload");
  completionTokenStream.setPayload(payload);
  PayloadAttrToTypeAttrFilter stream=new PayloadAttrToTypeAttrFilter(completionTokenStream);
  assertTokenStreamContents(stream,new String[]{"mykeyword","mysynonym"},null,null,new String[]{payload.utf8ToString(),payload.utf8ToString()},new int[]{1,1},null,null);
}
