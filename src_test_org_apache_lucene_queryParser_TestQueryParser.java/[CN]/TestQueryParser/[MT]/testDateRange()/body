{
  String startDate=getLocalizedDate(2002,1,1);
  String endDate=getLocalizedDate(2002,1,4);
  Calendar endDateExpected=new GregorianCalendar();
  endDateExpected.clear();
  endDateExpected.set(2002,1,4,23,59,59);
  endDateExpected.set(Calendar.MILLISECOND,999);
  final String defaultField="default";
  final String monthField="month";
  final String hourField="hour";
  QueryParser qp=new QueryParser(Version.LUCENE_CURRENT,"field",new SimpleAnalyzer(Version.LUCENE_CURRENT));
  assertDateRangeQueryEquals(qp,defaultField,startDate,endDate,endDateExpected.getTime(),null);
  qp.setDateResolution(monthField,DateTools.Resolution.MONTH);
  assertDateRangeQueryEquals(qp,defaultField,startDate,endDate,endDateExpected.getTime(),null);
  qp.setDateResolution(DateTools.Resolution.MILLISECOND);
  qp.setDateResolution(hourField,DateTools.Resolution.HOUR);
  assertDateRangeQueryEquals(qp,defaultField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MILLISECOND);
  assertDateRangeQueryEquals(qp,monthField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MONTH);
  assertDateRangeQueryEquals(qp,hourField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.HOUR);
}
