{
  if (className.contains(".")) {
    try {
      return Class.forName(className).asSubclass(expectedType);
    }
 catch (    ClassNotFoundException e) {
      try {
        return Class.forName(LUCENE_ANALYSIS_PACKAGE_PREFIX + className).asSubclass(expectedType);
      }
 catch (      ClassNotFoundException e1) {
        throw new ClassNotFoundException("Can't find class '" + className + "' or '"+ LUCENE_ANALYSIS_PACKAGE_PREFIX+ className+ "'");
      }
    }
  }
  final String analysisComponentName=ANALYSIS_COMPONENT_SUFFIX_PATTERN.matcher(className).replaceFirst("");
  if (CharFilterFactory.class.isAssignableFrom(expectedType)) {
    return CharFilterFactory.lookupClass(analysisComponentName).asSubclass(expectedType);
  }
 else   if (TokenizerFactory.class.isAssignableFrom(expectedType)) {
    return TokenizerFactory.lookupClass(analysisComponentName).asSubclass(expectedType);
  }
 else   if (TokenFilterFactory.class.isAssignableFrom(expectedType)) {
    return TokenFilterFactory.lookupClass(analysisComponentName).asSubclass(expectedType);
  }
  throw new ClassNotFoundException("Can't find class '" + className + "'");
}
