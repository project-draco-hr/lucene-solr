{
  super(core);
  if (updateHandler instanceof DirectUpdateHandler2) {
    this.indexWriterProvider=((DirectUpdateHandler2)updateHandler).indexWriterProvider;
  }
 else {
    updateHandler.decref();
    indexWriterProvider=new DefaultIndexWriterProvider(core);
  }
  UpdateHandlerInfo updateHandlerInfo=core.getSolrConfig().getUpdateHandlerInfo();
  int docsUpperBound=updateHandlerInfo.autoCommmitMaxDocs;
  int timeUpperBound=updateHandlerInfo.autoCommmitMaxTime;
  commitTracker=new CommitTracker(core,docsUpperBound,timeUpperBound,true,false);
  int softCommitDocsUpperBound=updateHandlerInfo.autoSoftCommmitMaxDocs;
  int softCommitTimeUpperBound=updateHandlerInfo.autoSoftCommmitMaxTime;
  softCommitTracker=new CommitTracker(core,softCommitDocsUpperBound,softCommitTimeUpperBound,true,true);
}
