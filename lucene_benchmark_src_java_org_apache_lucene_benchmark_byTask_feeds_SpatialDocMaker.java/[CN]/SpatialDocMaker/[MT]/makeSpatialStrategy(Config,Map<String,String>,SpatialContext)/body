{
  SpatialPrefixTree grid=SpatialPrefixTreeFactory.makeSPT(configMap,null,ctx);
  RecursivePrefixTreeStrategy strategy=new RecursivePrefixTreeStrategy(grid,SPATIAL_FIELD);
  strategy.setPointsOnly(config.get("spatial.docPointsOnly",false));
  strategy.setPruneLeafyBranches(config.get("spatial.pruneLeafyBranches",true));
  int prefixGridScanLevel=config.get("query.spatial.prefixGridScanLevel",-4);
  if (prefixGridScanLevel < 0)   prefixGridScanLevel=grid.getMaxLevels() + prefixGridScanLevel;
  strategy.setPrefixGridScanLevel(prefixGridScanLevel);
  double distErrPct=config.get("spatial.distErrPct",.025);
  strategy.setDistErrPct(distErrPct);
  return strategy;
}
