{
  boolean success=false;
  try {
    if (infoStream != null) {
      message("docWriter: abort");
    }
    Iterator<ThreadState> threadsIterator=perThreadPool.getActivePerThreadsIterator();
    while (threadsIterator.hasNext()) {
      ThreadState perThread=threadsIterator.next();
      perThread.lock();
      try {
        perThread.perThread.abort();
      }
  finally {
        perThread.unlock();
      }
    }
    success=true;
  }
  finally {
    notifyAll();
    if (infoStream != null) {
      message("docWriter: done abort; abortedFiles=" + abortedFiles + " success="+ success);
    }
  }
}
