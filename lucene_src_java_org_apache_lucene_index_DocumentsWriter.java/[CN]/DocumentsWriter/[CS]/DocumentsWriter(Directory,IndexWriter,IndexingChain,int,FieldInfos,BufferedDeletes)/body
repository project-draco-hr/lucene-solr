{
  this.directory=directory;
  this.writer=writer;
  this.similarity=writer.getConfig().getSimilarity();
  this.maxThreadStates=maxThreadStates;
  this.fieldInfos=fieldInfos;
  this.bufferedDeletes=bufferedDeletes;
  flushControl=writer.flushControl;
  consumer=indexingChain.getChain(this);
  if (consumer instanceof DocFieldProcessor) {
    docFieldProcessor=(DocFieldProcessor)consumer;
  }
}
