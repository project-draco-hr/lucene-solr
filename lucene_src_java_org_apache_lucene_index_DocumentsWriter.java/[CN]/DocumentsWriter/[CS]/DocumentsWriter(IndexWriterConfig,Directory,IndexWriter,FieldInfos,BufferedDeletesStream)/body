{
  this.directory=directory;
  this.writer=writer;
  this.similarityProvider=writer.getConfig().getSimilarityProvider();
  this.maxThreadStates=config.getMaxThreadStates();
  this.fieldInfos=fieldInfos;
  this.bufferedDeletesStream=bufferedDeletesStream;
  flushControl=writer.flushControl;
  consumer=config.getIndexingChain().getChain(this);
  this.config=config;
}
