{
  this.directory=directory;
  this.writer=writer;
  this.similarityProvider=writer.getConfig().getSimilarityProvider();
  this.maxThreadStates=maxThreadStates;
  this.fieldInfos=fieldInfos;
  this.bufferedDeletesStream=bufferedDeletesStream;
  flushControl=writer.flushControl;
  consumer=indexingChain.getChain(this);
}
