{
  final CategoryListIterator cli=clp.createCategoryListIterator(0);
  if (!cli.setNextReader(matchingDocs.context)) {
    return;
  }
  final int length=matchingDocs.bits.length();
  final int[] counts=facetArrays.getIntArray();
  int doc=0;
  while (doc < length && (doc=matchingDocs.bits.nextSetBit(doc)) != -1) {
    cli.getOrdinals(doc,ordinals);
    final int upto=ordinals.offset + ordinals.length;
    for (int i=ordinals.offset; i < upto; i++) {
      ++counts[ordinals.ints[i]];
    }
    ++doc;
  }
}
