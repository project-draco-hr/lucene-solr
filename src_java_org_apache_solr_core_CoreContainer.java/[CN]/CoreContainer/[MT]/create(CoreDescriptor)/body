{
  File idir=new File(dcore.getInstanceDir());
  if (!idir.isAbsolute()) {
    idir=new File(loader.getInstanceDir(),dcore.getInstanceDir());
  }
  String instanceDir=idir.getPath();
  SolrResourceLoader solrLoader=new SolrResourceLoader(instanceDir,libLoader);
  SolrConfig config=new SolrConfig(solrLoader,dcore.getConfigName(),null);
  IndexSchema schema=new IndexSchema(config,dcore.getSchemaName(),null);
  SolrCore core=new SolrCore(dcore.getName(),null,config,schema,dcore);
  return core;
}
