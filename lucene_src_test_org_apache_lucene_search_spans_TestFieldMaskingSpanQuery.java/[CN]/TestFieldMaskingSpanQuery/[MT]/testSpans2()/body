{
  SpanQuery qA1=new SpanTermQuery(new Term("gender","female"));
  SpanQuery qA2=new SpanTermQuery(new Term("first","james"));
  SpanQuery qA=new SpanOrQuery(qA1,new FieldMaskingSpanQuery(qA2,"gender"));
  SpanQuery qB=new SpanTermQuery(new Term("last","jones"));
  SpanQuery q=new SpanNearQuery(new SpanQuery[]{new FieldMaskingSpanQuery(qA,"id"),new FieldMaskingSpanQuery(qB,"id")},-1,false);
  check(q,new int[]{0,1,2,3});
  Spans span=MultiSpansWrapper.wrap(searcher.getTopReaderContext(),q);
  assertEquals(true,span.next());
  assertEquals(s(0,0,1),s(span));
  assertEquals(true,span.next());
  assertEquals(s(1,1,2),s(span));
  assertEquals(true,span.next());
  assertEquals(s(2,0,1),s(span));
  assertEquals(true,span.next());
  assertEquals(s(2,2,3),s(span));
  assertEquals(true,span.next());
  assertEquals(s(3,0,1),s(span));
  assertEquals(false,span.next());
}
