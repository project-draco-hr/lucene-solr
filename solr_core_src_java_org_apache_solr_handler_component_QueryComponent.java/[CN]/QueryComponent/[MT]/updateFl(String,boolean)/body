{
  if (includeScoreIfMissing && !scorePattern.matcher(originalFields).find()) {
    return originalFields + ",score";
  }
 else {
    return originalFields;
  }
}
