{
  System.setProperty("collection","control_collection");
  String numShards=System.getProperty(ZkStateReader.NUM_SHARDS_PROP);
  System.clearProperty(ZkStateReader.NUM_SHARDS_PROP);
  File controlJettyDir=new File(TEMP_DIR,getClass().getName() + "-controljetty-" + System.currentTimeMillis());
  org.apache.commons.io.FileUtils.copyDirectory(new File(getSolrHome()),controlJettyDir);
  controlJetty=createJetty(controlJettyDir,testDir + "/control/data","control_shard");
  System.clearProperty("collection");
  if (numShards != null) {
    System.setProperty(ZkStateReader.NUM_SHARDS_PROP,numShards);
  }
  controlClient=createNewSolrServer(controlJetty.getLocalPort());
  createJettys(numServers,true);
}
