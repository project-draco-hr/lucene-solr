{
  SolrParams q;
  SolrDocumentList controlDocList;
  SolrDocumentList cloudDocList;
  q=params("q","*:*","rows","100000","fl","id","tests","checkShardConsistency(vsControl)/getIds");
  controlDocList=controlClient.query(q).getResults();
  if (controlDocs != controlDocList.getNumFound()) {
    log.error("Something changed! control now " + controlDocList.getNumFound());
  }
  ;
  cloudDocList=cloudClient.query(q).getResults();
  if (cloudClientDocs != cloudDocList.getNumFound()) {
    log.error("Something changed! cloudClient now " + cloudDocList.getNumFound());
  }
  ;
  Set<Map> differences=showDiff(controlDocList,cloudDocList,"controlDocList","cloudDocList");
  boolean foundId=false;
  StringBuilder ids=new StringBuilder("id:(");
  for (  Map doc : differences) {
    ids.append(" " + doc.get("id"));
    foundId=true;
  }
  ids.append(")");
  if (foundId) {
    q=params("q",ids.toString(),"rows","100000","fl","id,_version_","sort","id asc","tests","checkShardConsistency(vsControl)/getVers");
    SolrDocumentList a=controlClient.query(q).getResults();
    SolrDocumentList b=cloudClient.query(q).getResults();
    log.error("controlClient :" + a + "\n\tcloudClient :"+ b);
  }
}
