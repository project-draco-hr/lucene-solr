{
  String path=SolrResourceLoader.normalizeDir(new File(".").getAbsolutePath());
  String base=new File(solrHome.getPath()).getAbsolutePath();
  if (base.startsWith(".")) {
    base=base.replaceFirst("\\.",new File(".").getName());
  }
  if (path.endsWith(File.separator + ".")) {
    path=path.substring(0,path.length() - 2);
  }
  int splits=path.split("\\" + File.separator).length;
  StringBuilder p=new StringBuilder();
  for (int i=0; i < splits - 2; i++) {
    p.append("..").append(File.separator);
  }
  String prefix=FilenameUtils.getPrefix(path);
  if (base.startsWith(prefix)) {
    base=base.substring(prefix.length());
  }
  solrHome=new File(p.toString() + base);
  return solrHome;
}
