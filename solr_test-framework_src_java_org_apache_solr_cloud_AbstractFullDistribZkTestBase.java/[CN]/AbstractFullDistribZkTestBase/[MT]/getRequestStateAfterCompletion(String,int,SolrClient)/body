{
  RequestStatusState state=null;
  final TimeOut timeout=new TimeOut(waitForSeconds,TimeUnit.SECONDS);
  while (!timeout.hasTimedOut()) {
    state=getRequestState(requestId,client);
    if (state == RequestStatusState.COMPLETED || state == RequestStatusState.FAILED) {
      return state;
    }
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException e) {
    }
  }
  return state;
}
