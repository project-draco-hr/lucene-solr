{
synchronized (this) {
    if (commonCloudSolrClient == null) {
      boolean updatesToLeaders=random().nextBoolean();
      boolean parallelUpdates=random().nextBoolean();
      commonCloudSolrClient=new CloudSolrClient(zkServer.getZkAddress(),updatesToLeaders);
      commonCloudSolrClient.getLbClient().setConnectionTimeout(5000);
      commonCloudSolrClient.getLbClient().setSoTimeout(120000);
      commonCloudSolrClient.setParallelUpdates(parallelUpdates);
      commonCloudSolrClient.setDefaultCollection(DEFAULT_COLLECTION);
      commonCloudSolrClient.connect();
      log.info("Created commonCloudSolrClient with updatesToLeaders={} and parallelUpdates={}",updatesToLeaders,parallelUpdates);
    }
  }
  return commonCloudSolrClient;
}
