{
  ClusterState clusterState=getCommonCloudSolrClient().getZkStateReader().getClusterState();
  int expectedSlices=numShardsNumReplicaList.get(0);
  int expectedShardsPerSlice=numShardsNumReplicaList.get(1);
  int expectedTotalShards=expectedSlices * expectedShardsPerSlice;
  if (clusterState.hasCollection(collectionName)) {
    Map<String,Slice> slices=clusterState.getCollection(collectionName).getSlicesMap();
    if (slices.size() != expectedSlices) {
      return "Found new collection " + collectionName + ", but mismatch on number of slices. Expected: "+ expectedSlices+ ", actual: "+ slices.size();
    }
    int totalShards=0;
    for (    String sliceName : slices.keySet()) {
      for (      Replica replica : slices.get(sliceName).getReplicas()) {
        if (nodesAllowedToRunShards != null && !nodesAllowedToRunShards.contains(replica.getStr(ZkStateReader.NODE_NAME_PROP))) {
          return "Shard " + replica.getName() + " created on node "+ replica.getNodeName()+ " not allowed to run shards for the created collection "+ collectionName;
        }
      }
      totalShards+=slices.get(sliceName).getReplicas().size();
    }
    if (totalShards != expectedTotalShards) {
      return "Found new collection " + collectionName + " with correct number of slices, but mismatch on number of shards. Expected: "+ expectedTotalShards+ ", actual: "+ totalShards;
    }
    return null;
  }
 else {
    return "Could not find new collection " + collectionName;
  }
}
