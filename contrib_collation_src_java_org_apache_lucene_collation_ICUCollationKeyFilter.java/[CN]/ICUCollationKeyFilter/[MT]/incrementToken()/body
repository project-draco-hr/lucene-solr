{
  if (input.incrementToken()) {
    char[] termBuffer=termAtt.termBuffer();
    String termText=new String(termBuffer,0,termAtt.termLength());
    collator.getRawCollationKey(termText,reusableKey);
    ByteBuffer collationKeyBuf=ByteBuffer.wrap(reusableKey.bytes,0,reusableKey.size);
    int encodedLength=IndexableBinaryStringTools.getEncodedLength(collationKeyBuf);
    if (encodedLength > termBuffer.length) {
      termAtt.resizeTermBuffer(encodedLength);
    }
    termAtt.setTermLength(encodedLength);
    CharBuffer wrappedTermBuffer=CharBuffer.wrap(termAtt.termBuffer());
    IndexableBinaryStringTools.encode(collationKeyBuf,wrappedTermBuffer);
    return true;
  }
 else {
    return false;
  }
}
