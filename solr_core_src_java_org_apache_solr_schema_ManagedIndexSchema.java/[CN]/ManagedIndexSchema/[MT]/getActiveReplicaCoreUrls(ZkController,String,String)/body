{
  List<String> activeReplicaCoreUrls=new ArrayList<>();
  ZkStateReader zkStateReader=zkController.getZkStateReader();
  ClusterState clusterState=zkStateReader.getClusterState();
  Set<String> liveNodes=clusterState.getLiveNodes();
  Collection<Slice> activeSlices=clusterState.getActiveSlices(collection);
  if (activeSlices != null && activeSlices.size() > 0) {
    for (    Slice next : activeSlices) {
      Map<String,Replica> replicasMap=next.getReplicasMap();
      if (replicasMap != null) {
        for (        Map.Entry<String,Replica> entry : replicasMap.entrySet()) {
          Replica replica=entry.getValue();
          if (!localCoreNodeName.equals(replica.getName()) && replica.getState() == Replica.State.ACTIVE && liveNodes.contains(replica.getNodeName())) {
            ZkCoreNodeProps replicaCoreProps=new ZkCoreNodeProps(replica);
            activeReplicaCoreUrls.add(replicaCoreProps.getCoreUrl());
          }
        }
      }
    }
  }
  return activeReplicaCoreUrls;
}
