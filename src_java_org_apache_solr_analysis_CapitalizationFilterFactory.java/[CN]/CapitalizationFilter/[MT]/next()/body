{
  Token t=input.next();
  if (t != null) {
    String s=t.termText();
    if (s.length() < factory.maxTokenLength) {
      int wordCount=0;
      StringBuilder word=new StringBuilder(s.length());
      StringBuilder text=new StringBuilder(s.length());
      for (      char c : s.toCharArray()) {
        if (c <= ' ' || c == '.') {
          if (word.length() > 0) {
            text.append(factory.processWord(word.toString(),wordCount++));
            word.setLength(0);
          }
          text.append(c);
        }
 else {
          word.append(c);
        }
      }
      if (word.length() > 0) {
        text.append(factory.processWord(word.toString(),wordCount++));
      }
      if (wordCount <= factory.maxWordCount) {
        t.setTermText(text.toString());
      }
    }
  }
  return t;
}
