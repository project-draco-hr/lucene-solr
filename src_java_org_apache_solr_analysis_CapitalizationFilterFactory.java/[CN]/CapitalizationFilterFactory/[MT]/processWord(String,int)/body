{
  if (w.length() < 1) {
    return w;
  }
  if (onlyFirstWord && wordCount > 0) {
    return w.toLowerCase();
  }
  String k=keep.get(w.toUpperCase());
  if (k != null) {
    if (wordCount == 0 && forceFirstLetter && Character.isLowerCase(k.charAt(0))) {
      return Character.toUpperCase(k.charAt(0)) + k.substring(1);
    }
    return k;
  }
  if (w.length() < minWordLength) {
    return w;
  }
  for (  String prefix : okPrefix) {
    if (w.startsWith(prefix)) {
      return w;
    }
  }
  char[] chars=w.toCharArray();
  StringBuilder word=new StringBuilder(w.length());
  word.append(Character.toUpperCase(chars[0]));
  for (int i=1; i < chars.length; i++) {
    word.append(Character.toLowerCase(chars[i]));
  }
  return word.toString();
}
