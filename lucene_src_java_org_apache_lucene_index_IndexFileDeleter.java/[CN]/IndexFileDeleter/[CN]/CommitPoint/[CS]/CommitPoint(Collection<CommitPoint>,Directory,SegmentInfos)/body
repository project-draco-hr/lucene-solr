{
  this.directory=directory;
  this.commitsToDelete=commitsToDelete;
  userData=segmentInfos.getUserData();
  segmentsFileName=segmentInfos.getCurrentSegmentFileName();
  version=segmentInfos.getVersion();
  generation=segmentInfos.getGeneration();
  files=Collections.unmodifiableCollection(segmentInfos.files(directory,true));
  gen=segmentInfos.getGeneration();
  isOptimized=segmentInfos.size() == 1 && !segmentInfos.info(0).hasDeletions();
}
