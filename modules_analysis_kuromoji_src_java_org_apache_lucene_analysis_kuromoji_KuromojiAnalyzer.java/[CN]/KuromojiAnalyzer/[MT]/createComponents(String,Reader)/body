{
  Tokenizer tokenizer=new KuromojiTokenizer(reader,userDict,true,mode);
  TokenStream stream=new KuromojiBaseFormFilter(tokenizer);
  stream=new KuromojiPartOfSpeechStopFilter(true,stream,stoptags);
  stream=new CJKWidthFilter(stream);
  stream=new StopFilter(matchVersion,stream,stopwords);
  stream=new LowerCaseFilter(matchVersion,stream);
  return new TokenStreamComponents(tokenizer,stream);
}
