{
  long mem=RamUsageEstimator.shallowSizeOf(this);
  if (searcher != null) {
    for (    AtomicReaderContext context : searcher.getIndexReader().leaves()) {
      AtomicReader reader=FilterAtomicReader.unwrap(context.reader());
      if (reader instanceof SegmentReader) {
        mem+=((SegmentReader)context.reader()).ramBytesUsed();
      }
    }
  }
  return mem;
}
