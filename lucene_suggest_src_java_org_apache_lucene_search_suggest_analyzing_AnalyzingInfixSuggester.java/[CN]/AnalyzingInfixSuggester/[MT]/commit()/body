{
  if (writer == null) {
    throw new IllegalStateException("Cannot commit on an closed writer. Add documents first");
  }
  writer.commit();
}
