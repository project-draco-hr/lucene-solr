{
  Query filteredquery=new FilteredQuery(query,filter);
  Hits hits=searcher.search(filteredquery);
  assertEquals(hits.length(),1);
  assertEquals(hits.id(0),1);
  hits=searcher.search(filteredquery,new Sort("sorter"));
  assertEquals(hits.length(),1);
  assertEquals(hits.id(0),1);
  filteredquery=new FilteredQuery(new TermQuery(new Term("field","one")),filter);
  hits=searcher.search(filteredquery);
  assertEquals(hits.length(),2);
  filteredquery=new FilteredQuery(new TermQuery(new Term("field","x")),filter);
  hits=searcher.search(filteredquery);
  assertEquals(hits.length(),1);
  assertEquals(hits.id(0),3);
  filteredquery=new FilteredQuery(new TermQuery(new Term("field","y")),filter);
  hits=searcher.search(filteredquery);
  assertEquals(hits.length(),0);
}
