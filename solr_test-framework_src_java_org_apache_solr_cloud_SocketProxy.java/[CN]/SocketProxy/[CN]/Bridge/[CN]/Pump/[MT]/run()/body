{
  byte[] buf=new byte[1024];
  try {
    InputStream in=src.getInputStream();
    OutputStream out=destination.getOutputStream();
    while (true) {
      int len=in.read(buf);
      if (len == -1) {
        log.debug("read eof from:" + src);
        break;
      }
      pause.get().await();
      out.write(buf,0,len);
    }
  }
 catch (  Exception e) {
    log.debug("read/write failed, reason: " + e.getLocalizedMessage());
    try {
      if (!receiveSocket.isClosed()) {
        close();
      }
    }
 catch (    Exception ignore) {
    }
  }
}
