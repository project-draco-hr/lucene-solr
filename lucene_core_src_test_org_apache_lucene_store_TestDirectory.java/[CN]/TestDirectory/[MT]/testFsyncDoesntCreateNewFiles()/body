{
  File path=createTempDir("nocreate");
  System.out.println(path.getAbsolutePath());
  Directory fsdir=new SimpleFSDirectory(path);
  IndexOutput out=fsdir.createOutput("afile",newIOContext(random()));
  out.writeString("boo");
  out.close();
  assertTrue(new File(path,"afile").delete());
  assertEquals(0,fsdir.listAll().length);
  try {
    fsdir.sync(Collections.singleton("afile"));
    fail("didn't get expected exception, instead fsync created new files: " + Arrays.asList(fsdir.listAll()));
  }
 catch (  FileNotFoundException|NoSuchFileException expected) {
  }
  assertEquals(0,fsdir.listAll().length);
  fsdir.close();
}
