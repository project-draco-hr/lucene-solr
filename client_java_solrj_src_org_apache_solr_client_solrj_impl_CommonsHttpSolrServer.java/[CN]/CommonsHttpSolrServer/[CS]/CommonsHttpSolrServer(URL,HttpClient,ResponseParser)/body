{
  _baseURL=baseURL.toExternalForm();
  if (_baseURL.endsWith("/")) {
    _baseURL=_baseURL.substring(0,_baseURL.length() - 1);
  }
  if (_baseURL.indexOf('?') >= 0) {
    throw new RuntimeException("Invalid base url for solrj.  The base URL must not contain parameters: " + _baseURL);
  }
  _httpClient=(client == null) ? new HttpClient(new MultiThreadedHttpConnectionManager()) : client;
  if (client == null) {
    this.setDefaultMaxConnectionsPerHost(32);
    this.setMaxTotalConnections(128);
  }
  _parser=parser;
}
