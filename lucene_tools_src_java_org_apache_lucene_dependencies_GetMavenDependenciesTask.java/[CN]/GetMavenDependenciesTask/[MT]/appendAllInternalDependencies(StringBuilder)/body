{
  for (  String artifactId : internalCompileScopeDependencies.keySet()) {
    List<String> exclusions=new ArrayList<>();
    exclusions.addAll(internalCompileScopeDependencies.get(artifactId));
    SortedSet<ExternalDependency> extDeps=allExternalDependencies.get(artifactId);
    if (null != extDeps) {
      for (      ExternalDependency externalDependency : extDeps) {
        if (!externalDependency.isTestDependency && !externalDependency.isOptional) {
          exclusions.add(externalDependency.groupId + ':' + externalDependency.artifactId);
        }
      }
    }
    String groupId="org.apache." + artifactId.substring(0,artifactId.indexOf('-'));
    appendDependencyXml(builder,groupId,artifactId,"      ","${project.version}",false,false,null,exclusions);
  }
}
