{
  final SolrQuery query=new SolrQuery();
  query.setQuery("{!edismax qf='description^1' boost='sum(product(pow(normHits, 0.7), 1600), .1)' v='apple'}");
  int numRows=100;
  query.add("rows",(new Integer(numRows)).toString());
  query.add("wt","json");
  query.add("fq","popularity:201");
  query.add("fl","*, score,id,normHits,description,fv:[features store='feature-store-6' format='dense' efi.user_text='apple']");
  String res=restTestHarness.query("/query" + query.toQueryString());
  Map<String,Object> resultJson=(Map<String,Object>)ObjectBuilder.fromJSON(res);
  List<Map<String,Object>> docs=(List<Map<String,Object>>)((Map<String,Object>)resultJson.get("response")).get("docs");
  int passCount=0;
  for (  final Map<String,Object> doc : docs) {
    String features=(String)doc.get("fv");
    assert(features.length() > 0);
    ++passCount;
  }
  assert(passCount == numRows);
}
