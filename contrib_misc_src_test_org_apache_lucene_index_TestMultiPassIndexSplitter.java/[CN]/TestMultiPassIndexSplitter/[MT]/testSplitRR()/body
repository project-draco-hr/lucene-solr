{
  MultiPassIndexSplitter splitter=new MultiPassIndexSplitter();
  Directory[] dirs=new Directory[]{new RAMDirectory(),new RAMDirectory(),new RAMDirectory()};
  splitter.split(input,dirs,false);
  IndexReader ir;
  ir=IndexReader.open(dirs[0],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  Document doc=ir.document(0);
  assertEquals("0",doc.get("id"));
  Term t;
  TermEnum te;
  t=new Term("id","1");
  te=ir.terms(t);
  assertNotSame(t,te.term());
  ir.close();
  ir=IndexReader.open(dirs[1],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals("1",doc.get("id"));
  t=new Term("id","0");
  te=ir.terms(t);
  assertNotSame(t,te.term());
  ir.close();
  ir=IndexReader.open(dirs[2],true);
  assertTrue(ir.numDocs() - NUM_DOCS / 3 <= 1);
  doc=ir.document(0);
  assertEquals("2",doc.get("id"));
  t=new Term("id","1");
  te=ir.terms(t);
  assertNotSame(t,te.term());
  t=new Term("id","0");
  te=ir.terms(t);
  assertNotSame(t,te.term());
}
