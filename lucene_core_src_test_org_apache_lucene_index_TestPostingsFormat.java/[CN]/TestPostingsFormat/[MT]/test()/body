{
  Directory dir=newDirectory();
  boolean indexPayloads=random().nextBoolean();
  FieldsProducer fieldsProducer=buildIndex(dir,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,indexPayloads);
  testTerms(fieldsProducer,EnumSet.of(Option.TERM_STATE,Option.PAYLOADS,Option.PARTIAL_DOC_CONSUME,Option.PARTIAL_POS_CONSUME,Option.SKIPPING),IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
  fieldsProducer.close();
  dir.close();
}
