{
  Directory dir=newFSDirectory(_TestUtil.getTempDir("testPostingsFormat"));
  boolean indexPayloads=random().nextBoolean();
  FieldsProducer fieldsProducer=buildIndex(dir,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,indexPayloads);
  testFields(fieldsProducer);
  testTerms(fieldsProducer,EnumSet.allOf(Option.class),IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
  fieldsProducer.close();
  dir.close();
}
