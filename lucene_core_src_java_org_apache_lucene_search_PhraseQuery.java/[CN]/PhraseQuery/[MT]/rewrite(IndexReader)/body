{
  if (terms.length == 0) {
    MatchNoDocsQuery q=new MatchNoDocsQuery();
    q.setBoost(getBoost());
    return q;
  }
 else   if (terms.length == 1) {
    TermQuery tq=new TermQuery(terms[0]);
    tq.setBoost(getBoost());
    return tq;
  }
 else   if (positions[0] != 0) {
    int[] newPositions=new int[positions.length];
    for (int i=0; i < positions.length; ++i) {
      newPositions[i]=positions[i] - positions[0];
    }
    PhraseQuery rewritten=new PhraseQuery(slop,terms,newPositions);
    rewritten.setBoost(getBoost());
    return rewritten;
  }
 else {
    return super.rewrite(reader);
  }
}
