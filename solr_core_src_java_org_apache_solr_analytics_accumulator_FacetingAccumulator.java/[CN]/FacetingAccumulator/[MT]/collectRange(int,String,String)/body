{
  Map<String,StatsCollector[]> map=rangeFacetCollectors.get(facetField);
  StatsCollector[] statsCollectors=map.get(range);
  if (statsCollectors == null) {
    statsCollectors=statsCollectorArraySupplier.get();
    map.put(range,statsCollectors);
    rangeFacetExpressions.get(facetField).put(range,makeExpressions(statsCollectors));
    for (    StatsCollector statsCollector : statsCollectors) {
      statsCollector.setNextReader(context);
    }
  }
  for (  StatsCollector statsCollector : statsCollectors) {
    statsCollector.collect(doc);
  }
}
