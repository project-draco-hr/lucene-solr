{
  if (name == null)   return;
  if (Context.SCOPE_ENTITY.equals(scope)) {
    if (entitySession == null)     entitySession=new ConcurrentHashMap<String,Object>();
    putVal(name,val,entitySession);
  }
 else   if (Context.SCOPE_GLOBAL.equals(scope)) {
    if (globalSession != null) {
      putVal(name,val,globalSession);
    }
  }
 else   if (Context.SCOPE_DOC.equals(scope)) {
    DocBuilder.DocWrapper doc=getDocument();
    if (doc != null)     doc.setSessionAttribute(name,val);
  }
 else   if (SCOPE_SOLR_CORE.equals(scope)) {
    if (dataImporter != null) {
      putVal(name,val,dataImporter.getCoreScopeSession());
    }
  }
}
