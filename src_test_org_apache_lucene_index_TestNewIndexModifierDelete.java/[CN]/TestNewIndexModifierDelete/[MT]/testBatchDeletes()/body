{
  Directory dir=new RAMDirectory();
  NewIndexModifier modifier=new NewIndexModifier(dir,new WhitespaceAnalyzer(),true);
  modifier.setMaxBufferedDocs(2);
  modifier.setMaxBufferedDeleteTerms(2);
  int id=0;
  int value=100;
  for (int i=0; i < 7; i++) {
    addDoc(modifier,++id,value);
  }
  modifier.flush();
  IndexReader reader=IndexReader.open(dir);
  assertEquals(7,reader.numDocs());
  reader.close();
  id=0;
  modifier.deleteDocuments(new Term("id",String.valueOf(++id)));
  modifier.deleteDocuments(new Term("id",String.valueOf(++id)));
  reader=IndexReader.open(dir);
  assertEquals(5,reader.numDocs());
  reader.close();
  Term[] terms=new Term[3];
  for (int i=0; i < terms.length; i++) {
    terms[i]=new Term("id",String.valueOf(++id));
  }
  modifier.deleteDocuments(terms);
  reader=IndexReader.open(dir);
  assertEquals(2,reader.numDocs());
  reader.close();
  modifier.close();
}
