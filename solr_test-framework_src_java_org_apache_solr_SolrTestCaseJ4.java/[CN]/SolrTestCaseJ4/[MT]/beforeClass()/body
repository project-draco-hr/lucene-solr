{
  System.setProperty("jetty.testMode","true");
  System.setProperty("enable.update.log",usually() ? "true" : "false");
  System.setProperty("tests.shardhandler.randomSeed",Long.toString(random().nextLong()));
  System.setProperty("solr.clustering.enabled","false");
  setupLogging();
  startTrackingSearchers();
  startTrackingZkClients();
  ignoreException("ignore_exception");
  newRandomConfig();
  sslConfig=getSSLConfig();
  if (sslConfig != null && sslConfig.useSsl) {
    System.setProperty("urlScheme","https");
    sslConfig.clientAuth=false;
    HttpClientUtil.setConfigurer(new HttpClientConfigurer(){
      @SuppressWarnings("deprecation") protected void configure(      DefaultHttpClient httpClient,      SolrParams config){
        super.configure(httpClient,config);
        SchemeRegistry registry=httpClient.getConnectionManager().getSchemeRegistry();
        registry.unregister("http");
        try {
          registry.register(new Scheme("https",443,new SSLSocketFactory(new TrustSelfSignedStrategy())));
        }
 catch (        KeyManagementException|UnrecoverableKeyException|NoSuchAlgorithmException|KeyStoreException ex) {
          throw new IllegalStateException("Unable to setup https scheme for HTTPClient to test SSL.",ex);
        }
      }
    }
);
  }
}
