{
  IndexWriterConfig iwc=newIndexWriterConfig(TEST_VERSION_CURRENT,new MockAnalyzer(random()));
  System.setProperty("useCompoundFile",String.valueOf(iwc.getUseCompoundFile()));
  System.setProperty("solr.tests.maxBufferedDocs",String.valueOf(iwc.getMaxBufferedDocs()));
  System.setProperty("solr.tests.ramBufferSizeMB",String.valueOf(iwc.getRAMBufferSizeMB()));
  System.setProperty("solr.tests.mergeScheduler",iwc.getMergeScheduler().getClass().getName());
  int maxIndexingThreads=rarely(random()) ? _TestUtil.nextInt(random(),5,20) : _TestUtil.nextInt(random(),1,4);
  System.setProperty("solr.tests.maxIndexingThreads",String.valueOf(maxIndexingThreads));
}
