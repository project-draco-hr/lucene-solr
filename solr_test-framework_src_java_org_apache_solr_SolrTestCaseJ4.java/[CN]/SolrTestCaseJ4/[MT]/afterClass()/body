{
  try {
    deleteCore();
    resetExceptionIgnores();
    if (suiteFailureMarker.wasSuccessful()) {
      endTrackingSearchers();
      String orr=ObjectReleaseTracker.clearObjectTrackerAndCheckEmpty();
      if (!RandomizedContext.current().getTargetClass().isAnnotationPresent(SuppressObjectReleaseTracker.class)) {
        assertNull(orr,orr);
      }
 else {
        if (orr != null) {
          log.warn("Some resources were not closed, shutdown, or released. This has been ignored due to the SuppressObjectReleaseTracker annotation.");
        }
      }
    }
    resetFactory();
    coreName=DEFAULT_TEST_CORENAME;
  }
  finally {
    initCoreDataDir=null;
    System.clearProperty("zookeeper.forceSync");
    System.clearProperty("jetty.testMode");
    System.clearProperty("tests.shardhandler.randomSeed");
    System.clearProperty("enable.update.log");
    System.clearProperty("useCompoundFile");
    System.clearProperty("urlScheme");
    if (isSSLMode()) {
      HttpClientUtil.setConfigurer(new HttpClientConfigurer());
    }
    sslConfig=null;
  }
  IpTables.unblockAllPorts();
}
