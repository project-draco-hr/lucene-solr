{
  if (RandomizedContext.current().getTargetClass().isAnnotationPresent(SuppressSSL.class)) {
    return new SSLTestConfig();
  }
  final boolean trySsl=random().nextInt(10) < 2;
  boolean trySslClientAuth=random().nextInt(10) < 2;
  if (Constants.MAC_OS_X) {
    trySslClientAuth=false;
  }
  log.info("Randomized ssl ({}) and clientAuth ({})",trySsl,trySslClientAuth);
  return new SSLTestConfig(trySsl,trySslClientAuth);
}
