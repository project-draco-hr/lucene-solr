{
  if (!changedFactory) {
    savedFactory=System.getProperty("solr.DirectoryFactory");
  }
  if (factory == null) {
    factory=random().nextInt(100) < 75 ? "solr.NRTCachingDirectoryFactory" : "solr.StandardDirectoryFactory";
  }
  System.setProperty("solr.directoryFactory",factory);
  changedFactory=true;
}
