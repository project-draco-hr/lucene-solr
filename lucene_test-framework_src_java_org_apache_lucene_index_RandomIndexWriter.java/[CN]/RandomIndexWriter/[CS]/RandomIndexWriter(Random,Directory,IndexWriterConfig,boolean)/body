{
  this.r=new Random(r.nextLong());
  w=mockIndexWriter(dir,c,r);
  flushAt=TestUtil.nextInt(r,10,1000);
  if (closeAnalyzer) {
    analyzer=w.getAnalyzer();
  }
 else {
    analyzer=null;
  }
  codec=w.getConfig().getCodec();
  if (LuceneTestCase.VERBOSE) {
    System.out.println("RIW dir=" + dir);
  }
  doRandomForceMerge=!(c.getMergePolicy() instanceof NoMergePolicy) && r.nextBoolean();
}
