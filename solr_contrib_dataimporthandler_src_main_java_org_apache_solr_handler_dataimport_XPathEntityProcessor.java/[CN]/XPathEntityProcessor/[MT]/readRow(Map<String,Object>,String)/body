{
  if (useSolrAddXml) {
    List<String> names=(List<String>)record.get("name");
    List<String> values=(List<String>)record.get("value");
    Map<String,Object> row=new HashMap<String,Object>();
    for (int i=0; i < names.size() && i < values.size(); i++) {
      if (row.containsKey(names.get(i))) {
        Object existing=row.get(names.get(i));
        if (existing instanceof List) {
          List list=(List)existing;
          list.add(values.get(i));
        }
 else {
          List list=new ArrayList();
          list.add(existing);
          list.add(values.get(i));
          row.put(names.get(i),list);
        }
      }
 else {
        row.put(names.get(i),values.get(i));
      }
    }
    return row;
  }
 else {
    record.put(XPATH_FIELD_NAME,xpath);
    return record;
  }
}
