{
  super.firstInit(context);
  try {
    String tikaConfigFile=context.getResolvedEntityAttribute("tikaConfig");
    if (tikaConfigFile == null) {
      ClassLoader classLoader=context.getSolrCore().getResourceLoader().getClassLoader();
      tikaConfig=new TikaConfig(classLoader);
    }
 else {
      File configFile=new File(tikaConfigFile);
      if (!configFile.isAbsolute()) {
        configFile=new File(context.getSolrCore().getResourceLoader().getConfigDir(),tikaConfigFile);
      }
      tikaConfig=new TikaConfig(configFile);
    }
  }
 catch (  Exception e) {
    wrapAndThrow(SEVERE,e,"Unable to load Tika Config");
  }
  format=context.getResolvedEntityAttribute("format");
  if (format == null)   format="text";
  if (!"html".equals(format) && !"xml".equals(format) && !"text".equals(format)&& !"none".equals(format))   throw new DataImportHandlerException(SEVERE,"'format' can be one of text|html|xml|none");
  htmlMapper=context.getResolvedEntityAttribute("htmlMapper");
  if (htmlMapper == null)   htmlMapper="default";
  if (!"default".equals(htmlMapper) && !"identity".equals(htmlMapper))   throw new DataImportHandlerException(SEVERE,"'htmlMapper', if present, must be 'default' or 'identity'");
  parser=context.getResolvedEntityAttribute("parser");
  if (parser == null) {
    parser=AUTO_PARSER;
  }
  done=false;
}
