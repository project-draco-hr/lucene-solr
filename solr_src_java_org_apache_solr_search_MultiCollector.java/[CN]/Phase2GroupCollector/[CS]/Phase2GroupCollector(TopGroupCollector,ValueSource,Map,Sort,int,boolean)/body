{
  boolean getSortFields=false;
  groupMap=new HashMap<MutableValue,SearchGroupDocs>(topGroups.groupMap.size());
  for (  SearchGroup group : topGroups.groupMap.values()) {
    SearchGroupDocs groupDocs=new SearchGroupDocs();
    groupDocs.groupValue=group.groupValue;
    groupDocs.collector=TopFieldCollector.create(sort,docsPerGroup,getSortFields,getScores,getScores,true);
    groupMap.put(groupDocs.groupValue,groupDocs);
  }
  this.vs=groupByVS;
  this.context=vsContext;
}
