{
  final Exception last=batchWriteException;
  batchWriteException=null;
  if (last == null) {
    return;
  }
  if (last instanceof SolrServerException) {
    throw (SolrServerException)last;
  }
  if (last instanceof IOException) {
    throw (IOException)last;
  }
  throw new IOException("Batch Write Failure",last);
}
