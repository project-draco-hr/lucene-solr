{
  CoreContainer cc=null;
  try {
    cc=CoreContainer.createAndLoad(home.getAbsolutePath(),new File(home,"solr.xml"));
    if (cc.getCoreInitFailures().size() > 0) {
      for (      CoreContainer.CoreLoadFailure ex : cc.getCoreInitFailures().values()) {
        log.error("Error when attempting to reload core: " + ex.exception.getMessage());
        rsp.setException(new SolrException(ErrorCode.BAD_REQUEST,"Error when attempting to reload core after writing config" + ex.exception.getMessage()));
      }
      return false;
    }
    return true;
  }
  finally {
    if (cc != null) {
      cc.shutdown();
    }
  }
}
