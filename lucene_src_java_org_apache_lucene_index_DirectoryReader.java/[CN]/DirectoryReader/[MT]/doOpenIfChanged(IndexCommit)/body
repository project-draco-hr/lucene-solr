{
  ensureOpen();
  if (writer != null) {
    return doOpenFromWriter(commit);
  }
 else {
    return doOpenNoWriter(commit);
  }
}
