{
  CoreContainer container=new CoreContainer(new SolrResourceLoader(SolrResourceLoader.locateSolrHome()));
  CoreDescriptor dcore=new CoreDescriptor(container,coreName,solrConfig.getResourceLoader().getInstanceDir());
  dcore.setConfigName(solrConfig.getResourceName());
  dcore.setSchemaName(indexSchema.getResourceName());
  SolrCore core=new SolrCore(null,dataDirectory,solrConfig,indexSchema,dcore);
  container.register(coreName,core,false);
  return container;
}
