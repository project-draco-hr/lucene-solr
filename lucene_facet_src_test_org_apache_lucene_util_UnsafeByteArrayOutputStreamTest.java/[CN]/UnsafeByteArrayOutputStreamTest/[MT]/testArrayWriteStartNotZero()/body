{
  int length=100;
  byte[] buffer=new byte[length];
  UnsafeByteArrayOutputStream ubaos=new UnsafeByteArrayOutputStream(buffer);
  for (int i=0; i < 100; i++) {
    ubaos.write((byte)i);
  }
  int length2=1000;
  byte[] buffer2=new byte[length2];
  for (int i=0; i < length2; i++) {
    buffer2[i]=(byte)(8 + i);
  }
  int length3=5;
  int start=2;
  ubaos.write(buffer2,start,length3);
  byte[] result=ubaos.toByteArray();
  assertEquals(length + length3,ubaos.length());
  for (int j=0; j < length; ++j) {
    assertEquals(result[j],j);
  }
  for (int j=0; j < length3; ++j) {
    assertEquals(result[j + length],buffer2[j + start]);
  }
}
