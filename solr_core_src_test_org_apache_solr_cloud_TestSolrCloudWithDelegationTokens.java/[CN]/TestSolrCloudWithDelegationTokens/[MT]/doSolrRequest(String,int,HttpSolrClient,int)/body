{
  int lastStatusCode=0;
  for (int i=0; i < trials; ++i) {
    lastStatusCode=getStatusCode(token,null,null,client);
    if (lastStatusCode == expectedStatusCode) {
      return;
    }
    Thread.sleep(1000);
  }
  assertEquals("Did not receieve excepted status code",expectedStatusCode,lastStatusCode);
}
