{
  for (  CommandOperation op : ops) {
switch (op.name) {
case SET_PROPERTY:
      overlay=applySetProp(op,overlay);
    break;
case UNSET_PROPERTY:
  overlay=applyUnset(op,overlay);
break;
case SET_USER_PROPERTY:
overlay=applySetUserProp(op,overlay);
break;
case UNSET_USER_PROPERTY:
overlay=applyUnsetUserProp(op,overlay);
break;
}
}
List errs=CommandOperation.captureErrors(ops);
if (!errs.isEmpty()) {
resp.add(CommandOperation.ERR_MSGS,errs);
return;
}
SolrResourceLoader loader=req.getCore().getResourceLoader();
if (loader instanceof ZkSolrResourceLoader) {
ZkController.persistConfigResourceToZooKeeper(loader,overlay.getZnodeVersion(),ConfigOverlay.RESOURCE_NAME,overlay.toByteArray(),true);
}
 else {
SolrResourceLoader.persistConfLocally(loader,ConfigOverlay.RESOURCE_NAME,overlay.toByteArray());
req.getCore().getCoreDescriptor().getCoreContainer().reload(req.getCore().getName());
}
}
