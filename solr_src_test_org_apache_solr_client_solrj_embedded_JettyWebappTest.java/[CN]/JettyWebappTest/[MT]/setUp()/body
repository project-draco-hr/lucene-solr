{
  super.setUp();
  System.setProperty("solr.solr.home","../../../example/solr");
  File dataDir=new File(SolrTestCaseJ4.TEMP_DIR,getClass().getName() + "-" + System.currentTimeMillis());
  dataDir.mkdirs();
  System.setProperty("solr.data.dir",dataDir.getCanonicalPath());
  String path="../../webapp/web";
  server=new Server(port);
  server.setSessionIdManager(new HashSessionIdManager(new Random()));
  new WebAppContext(server,path,context);
  SocketConnector connector=new SocketConnector();
  connector.setMaxIdleTime(1000 * 60 * 60);
  connector.setSoLingerTime(-1);
  connector.setPort(0);
  server.setConnectors(new Connector[]{connector});
  server.setStopAtShutdown(true);
  server.start();
  port=connector.getLocalPort();
}
