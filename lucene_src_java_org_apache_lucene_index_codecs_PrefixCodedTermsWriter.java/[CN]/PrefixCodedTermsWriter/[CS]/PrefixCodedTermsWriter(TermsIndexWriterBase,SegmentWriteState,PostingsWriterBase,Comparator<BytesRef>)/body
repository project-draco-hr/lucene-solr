{
  final String termsFileName=IndexFileNames.segmentFileName(state.segmentName,state.codecId,TERMS_EXTENSION);
  this.termsIndexWriter=termsIndexWriter;
  this.termComp=termComp;
  out=state.directory.createOutput(termsFileName);
  termsIndexWriter.setTermsOutput(out);
  state.flushedFiles.add(termsFileName);
  fieldInfos=state.fieldInfos;
  writeHeader(out);
  termWriter=new DeltaBytesWriter(out);
  currentField=null;
  this.postingsWriter=postingsWriter;
  postingsWriter.start(out);
}
