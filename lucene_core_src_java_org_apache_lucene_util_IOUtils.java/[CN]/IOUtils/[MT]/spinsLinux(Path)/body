{
  FileStore store=getFileStore(path);
  if ("tmpfs".equals(store.type())) {
    return false;
  }
  String devName=getBlockDevice(store);
  if (!devName.startsWith("/")) {
    return true;
  }
  devName=path.getRoot().resolve(devName).toRealPath().getFileName().toString();
  Path sysinfo=path.getRoot().resolve("sys/block");
  Path devinfo=sysinfo.resolve(devName);
  while (!Files.exists(devinfo)) {
    if (!devName.isEmpty() && Character.isDigit(devName.charAt(devName.length() - 1))) {
      devName=devName.substring(0,devName.length() - 1);
    }
 else {
      break;
    }
    devinfo=sysinfo.resolve(devName);
  }
  Path info=devinfo.resolve("queue/rotational");
  try (InputStream stream=Files.newInputStream(info)){
    return stream.read() == '1';
  }
 }
