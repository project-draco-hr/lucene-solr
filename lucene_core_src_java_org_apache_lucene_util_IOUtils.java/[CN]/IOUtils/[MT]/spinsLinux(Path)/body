{
  FileStore store=getFileStore(path);
  if ("tmpfs".equals(store.type())) {
    return false;
  }
  String devName=store.name();
  if (!devName.startsWith("/")) {
    return true;
  }
  devName=path.getRoot().resolve(devName).toRealPath().getFileName().toString();
  Path sysinfo=path.getRoot().resolve("sys").resolve("block");
  Path devsysinfo=null;
  int matchlen=0;
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(sysinfo)){
    for (    Path device : stream) {
      String name=device.getFileName().toString();
      if (name.length() > matchlen && devName.startsWith(name)) {
        devsysinfo=device;
        matchlen=name.length();
      }
    }
  }
   if (devsysinfo == null) {
    return true;
  }
  Path rotational=devsysinfo.resolve("queue").resolve("rotational");
  try (InputStream stream=Files.newInputStream(rotational)){
    return stream.read() == '1';
  }
 }
