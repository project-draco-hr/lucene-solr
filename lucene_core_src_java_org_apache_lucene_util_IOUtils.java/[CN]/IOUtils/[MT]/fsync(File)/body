{
  IOException exc=null;
  for (int retry=0; retry < 5; retry++) {
    try {
      try (FileChannel file=FileChannel.open(fileToSync.toPath(),StandardOpenOption.WRITE)){
        file.force(true);
        return;
      }
     }
 catch (    IOException ioe) {
      if (exc == null) {
        exc=ioe;
      }
      try {
        Thread.sleep(5);
      }
 catch (      InterruptedException ie) {
        ThreadInterruptedException ex=new ThreadInterruptedException(ie);
        ex.addSuppressed(exc);
        throw ex;
      }
    }
  }
  throw exc;
}
