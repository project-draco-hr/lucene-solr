{
  SolrInputDocument doc;
  ModifiableSolrParams parameters=new ModifiableSolrParams();
  parameters.add("langid.fl","text");
  parameters.add("langid.langField","language");
  parameters.add("langid.fallbackFields","noop,fb");
  parameters.add("langid.fallback","fbVal");
  parameters.add("langid.enforceSchema","false");
  liProcessor=createLangIdProcessor(parameters);
  doc=tooShortDoc();
  doc.addField("fb","fbField");
  assertEquals("fbField",liProcessor.process(doc).getFieldValue("language"));
  doc=tooShortDoc();
  assertEquals("fbVal",liProcessor.process(doc).getFieldValue("language"));
}
