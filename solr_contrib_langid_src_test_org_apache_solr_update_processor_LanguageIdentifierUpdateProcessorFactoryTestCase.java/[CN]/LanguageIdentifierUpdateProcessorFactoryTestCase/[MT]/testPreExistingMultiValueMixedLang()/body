{
  SolrInputDocument doc;
  ModifiableSolrParams parameters=new ModifiableSolrParams();
  parameters.add("langid.fl","text_multivalue");
  parameters.add("langid.langField","language");
  parameters.add("langid.langsField","languages");
  parameters.add("langid.enforceSchema","false");
  parameters.add("langid.map","true");
  liProcessor=createLangIdProcessor(parameters);
  doc=mixedEnglishRussianDoc();
  assertEquals("en",liProcessor.process(doc).getFieldValue("language"));
  assertEquals("en",liProcessor.process(doc).getFieldValue("languages"));
  doc=mixedEnglishRussianDoc();
  doc.setField("language","no");
  assertEquals("no",liProcessor.process(doc).getFieldValue("language"));
  assertEquals("no",liProcessor.process(doc).getFieldValue("languages"));
  assertNotNull(liProcessor.process(doc).getFieldValue("text_multivalue_no"));
}
