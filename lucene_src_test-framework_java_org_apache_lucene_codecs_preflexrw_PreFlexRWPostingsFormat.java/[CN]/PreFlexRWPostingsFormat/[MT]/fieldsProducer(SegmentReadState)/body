{
  return new Lucene3xFields(state.dir,state.fieldInfos,state.segmentInfo,state.context,state.termsIndexDivisor){
    @Override protected boolean sortTermsByUnicode(){
      boolean unicodeSortOrder=true;
      StackTraceElement[] trace=new Exception().getStackTrace();
      for (int i=0; i < trace.length; i++) {
        if ("merge".equals(trace[i].getMethodName())) {
          unicodeSortOrder=false;
          if (LuceneTestCase.VERBOSE) {
            System.out.println("NOTE: PreFlexRW codec: forcing legacy UTF16 term sort order");
          }
          break;
        }
      }
      return unicodeSortOrder;
    }
  }
;
}
