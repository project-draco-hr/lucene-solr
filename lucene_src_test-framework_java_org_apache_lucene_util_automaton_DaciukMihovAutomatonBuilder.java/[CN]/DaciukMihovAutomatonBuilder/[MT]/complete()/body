{
  if (this.register == null)   throw new IllegalStateException();
  if (root.hasChildren())   replaceOrRegister(root);
  register=null;
  return root;
}
