def parse(baseURL, html):
    global failures
    if (not reValidChar.match(html)):
        print (' WARNING: invalid characters detected in: %s' % baseURL)
        failures = True
        return ([], [])
    parser = FindHyperlinks(baseURL)
    try:
        parser.feed(html)
        parser.close()
    except:
        parser.printFile()
        print ('  WARNING: failed to parse %s:' % baseURL)
        traceback.print_exc(file=sys.stdout)
        failures = True
        return ([], [])
    return (parser.links, parser.anchors)
