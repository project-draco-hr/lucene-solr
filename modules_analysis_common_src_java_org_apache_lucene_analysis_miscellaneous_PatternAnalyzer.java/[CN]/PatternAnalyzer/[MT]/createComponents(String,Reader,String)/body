{
  if (text == null)   throw new IllegalArgumentException("text must not be null");
  if (pattern == NON_WORD_PATTERN) {
    return new TokenStreamComponents(new FastStringTokenizer(reader,text,true,toLowerCase,stopWords));
  }
 else   if (pattern == WHITESPACE_PATTERN) {
    return new TokenStreamComponents(new FastStringTokenizer(reader,text,false,toLowerCase,stopWords));
  }
  Tokenizer tokenizer=new PatternTokenizer(reader,text,pattern,toLowerCase);
  TokenStream result=(stopWords != null) ? new StopFilter(matchVersion,tokenizer,stopWords) : tokenizer;
  return new TokenStreamComponents(tokenizer,result);
}
