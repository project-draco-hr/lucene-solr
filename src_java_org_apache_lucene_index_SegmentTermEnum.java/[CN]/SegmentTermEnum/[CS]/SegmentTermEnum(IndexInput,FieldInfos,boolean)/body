{
  input=i;
  fieldInfos=fis;
  isIndex=isi;
  maxSkipLevels=1;
  int firstInt=input.readInt();
  if (firstInt >= 0) {
    format=0;
    size=firstInt;
    indexInterval=128;
    skipInterval=Integer.MAX_VALUE;
  }
 else {
    format=firstInt;
    if (format < TermInfosWriter.FORMAT_CURRENT)     throw new CorruptIndexException("Unknown format version:" + format + " expected "+ TermInfosWriter.FORMAT_CURRENT+ " or higher");
    size=input.readLong();
    if (format == -1) {
      if (!isIndex) {
        indexInterval=input.readInt();
        formatM1SkipInterval=input.readInt();
      }
      skipInterval=Integer.MAX_VALUE;
    }
 else {
      indexInterval=input.readInt();
      skipInterval=input.readInt();
      if (format <= TermInfosWriter.FORMAT) {
        maxSkipLevels=input.readInt();
      }
    }
  }
  if (format > TermInfosWriter.FORMAT_VERSION_UTF8_LENGTH_IN_BYTES) {
    termBuffer.setPreUTF8Strings();
    scanBuffer.setPreUTF8Strings();
    prevBuffer.setPreUTF8Strings();
  }
}
