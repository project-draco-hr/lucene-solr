{
  assertNotNull(output);
  assertTrue("has TermAttribute",ts.hasAttribute(TermAttribute.class));
  TermAttribute termAtt=ts.getAttribute(TermAttribute.class);
  OffsetAttribute offsetAtt=null;
  if (startOffsets != null || endOffsets != null) {
    assertTrue("has OffsetAttribute",ts.hasAttribute(OffsetAttribute.class));
    offsetAtt=ts.getAttribute(OffsetAttribute.class);
  }
  TypeAttribute typeAtt=null;
  if (types != null) {
    assertTrue("has TypeAttribute",ts.hasAttribute(TypeAttribute.class));
    typeAtt=ts.getAttribute(TypeAttribute.class);
  }
  PositionIncrementAttribute posIncrAtt=null;
  if (posIncrements != null) {
    assertTrue("has PositionIncrementAttribute",ts.hasAttribute(PositionIncrementAttribute.class));
    posIncrAtt=ts.getAttribute(PositionIncrementAttribute.class);
  }
  ts.reset();
  for (int i=0; i < output.length; i++) {
    ts.clearAttributes();
    termAtt.setTermBuffer("bogusTerm");
    if (offsetAtt != null)     offsetAtt.setOffset(14584724,24683243);
    if (typeAtt != null)     typeAtt.setType("bogusType");
    if (posIncrAtt != null)     posIncrAtt.setPositionIncrement(45987657);
    assertTrue("token " + i + " exists",ts.incrementToken());
    assertEquals("term " + i,output[i],termAtt.term());
    if (startOffsets != null)     assertEquals("startOffset " + i,startOffsets[i],offsetAtt.startOffset());
    if (endOffsets != null)     assertEquals("endOffset " + i,endOffsets[i],offsetAtt.endOffset());
    if (types != null)     assertEquals("type " + i,types[i],typeAtt.type());
    if (posIncrements != null)     assertEquals("posIncrement " + i,posIncrements[i],posIncrAtt.getPositionIncrement());
  }
  assertFalse("end of stream",ts.incrementToken());
  ts.end();
  ts.close();
}
