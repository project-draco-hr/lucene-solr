{
  boolean storedTermVector;
  boolean storePositionWithTermVector;
  boolean storeOffsetWithTermVector;
  if (tvSpec == Field.TermVector.NO) {
    storedTermVector=false;
    storePositionWithTermVector=false;
    storeOffsetWithTermVector=false;
  }
 else   if (tvSpec == Field.TermVector.YES) {
    storedTermVector=true;
    storePositionWithTermVector=false;
    storeOffsetWithTermVector=false;
  }
 else   if (tvSpec == Field.TermVector.WITH_POSITIONS) {
    storedTermVector=true;
    storePositionWithTermVector=true;
    storeOffsetWithTermVector=false;
  }
 else   if (tvSpec == Field.TermVector.WITH_OFFSETS) {
    storedTermVector=true;
    storePositionWithTermVector=false;
    storeOffsetWithTermVector=true;
  }
 else   if (tvSpec == Field.TermVector.WITH_POSITIONS_OFFSETS) {
    storedTermVector=true;
    storePositionWithTermVector=true;
    storeOffsetWithTermVector=true;
  }
 else {
    throw new IllegalArgumentException("unknown termVector parameter " + tvSpec);
  }
  Set fieldSet=new HashSet();
  for (int i=0; i < fieldInfos.size(); i++) {
    FieldInfo fi=fieldInfos.fieldInfo(i);
    if (fi.isIndexed && fi.storeTermVector == storedTermVector && fi.storePositionWithTermVector == storePositionWithTermVector && fi.storeOffsetWithTermVector == storeOffsetWithTermVector) {
      fieldSet.add(fi.name);
    }
  }
  return fieldSet;
}
