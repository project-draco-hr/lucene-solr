{
synchronized (directory()) {
    new Lock.With(directory().makeLock(IndexWriter.COMMIT_LOCK_NAME),IndexWriter.COMMIT_LOCK_TIMEOUT){
      public Object doBody() throws IOException {
        if (directory().fileExists(segment + ".del")) {
          directory().deleteFile(segment + ".del");
        }
        return null;
      }
    }
;
    deletedDocs=null;
    deletedDocsDirty=false;
  }
}
