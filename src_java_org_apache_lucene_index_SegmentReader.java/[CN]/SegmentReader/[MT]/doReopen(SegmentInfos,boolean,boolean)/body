{
  DirectoryIndexReader newReader;
  if (infos.size() == 1) {
    SegmentInfo si=infos.info(0);
    if (segment.equals(si.name) && si.getUseCompoundFile() == SegmentReader.this.si.getUseCompoundFile()) {
      newReader=reopenSegment(si,doClone,openReadOnly);
    }
 else {
      newReader=SegmentReader.get(openReadOnly,infos,infos.info(0),false);
    }
  }
 else {
    if (openReadOnly)     return new ReadOnlyMultiSegmentReader(directory,infos,closeDirectory,new SegmentReader[]{this},null,null,doClone);
 else     return new MultiSegmentReader(directory,infos,closeDirectory,new SegmentReader[]{this},null,null,false,doClone);
  }
  return newReader;
}
