{
  List<MBeanServer> servers=MBeanServerFactory.findMBeanServer(null);
  MBeanServer mbeanServer=servers.get(0);
  Set<ObjectInstance> objects=mbeanServer.queryMBeans(null,Query.match(Query.attr("numDocs"),Query.value("[0-9]")));
  assertFalse("No MBean for SolrIndexSearcher found in MBeanServer",objects.isEmpty());
  int oldNumDocs=Integer.valueOf((String)mbeanServer.getAttribute(objects.iterator().next().getObjectName(),"numDocs"));
  assertU(adoc("id","1"));
  assertU(commit());
  objects=mbeanServer.queryMBeans(null,Query.match(Query.attr("numDocs"),Query.value("[0-9]")));
  assertFalse("No MBean for SolrIndexSearcher found in MBeanServer",objects.isEmpty());
  int numDocs=Integer.valueOf((String)mbeanServer.getAttribute(objects.iterator().next().getObjectName(),"numDocs"));
  assertTrue("New numDocs is same as old numDocs as reported by JMX",numDocs > oldNumDocs);
}
