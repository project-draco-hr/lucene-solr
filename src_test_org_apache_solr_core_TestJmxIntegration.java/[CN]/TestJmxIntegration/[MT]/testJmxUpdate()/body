{
  List<MBeanServer> servers=MBeanServerFactory.findMBeanServer(null);
  System.err.println("Servers in testJmxUpdate: " + servers);
  System.err.println(h.getCore().getInfoRegistry());
  ObjectName searcher=getObjectName("searcher",h.getCore().getInfoRegistry().get("searcher"));
  MBeanServer mbeanServer=servers.get(0);
  System.err.println("Mbeans in server: " + mbeanServer.queryNames(null,null));
  assertFalse("No mbean found for SolrIndexSearcher",mbeanServer.queryMBeans(searcher,null).isEmpty());
  int oldNumDocs=Integer.valueOf((String)mbeanServer.getAttribute(searcher,"numDocs"));
  assertU(adoc("id","1"));
  assertU("commit",commit());
  int numDocs=Integer.valueOf((String)mbeanServer.getAttribute(searcher,"numDocs"));
  assertTrue("New numDocs is same as old numDocs as reported by JMX",numDocs > oldNumDocs);
}
