{
  final String idField="id";
  final String toField="productId_s";
  clearIndex();
  assertU(add(doc("t_description","random text","name","name1",idField,"1")));
  assertU(add(doc("price_s","10.0",idField,"2",toField,"1")));
  assertU(add(doc("price_s","20.0",idField,"3",toField,"1")));
  assertU(add(doc("t_description","more random text","name","name2",idField,"4")));
  assertU(add(doc("price_s","10.0",idField,"5",toField,"4")));
  assertU(add(doc("price_s","20.0",idField,"6",toField,"4")));
  assertU(commit());
  assertJQ(req("q","{!join from=" + idField + " to="+ toField+ " score=None}name:name2","fl","id"),"/response=={'numFound':2,'start':0,'docs':[{'id':'5'},{'id':'6'}]}");
  assertJQ(req("q","{!join from=" + idField + " to="+ toField+ " score=None}name:name1","fl","id"),"/response=={'numFound':2,'start':0,'docs':[{'id':'2'},{'id':'3'}]}");
  assertJQ(req("q","{!join from=" + toField + " to="+ idField+ " score=None}id:5","fl","id"),"/response=={'numFound':1,'start':0,'docs':[{'id':'4'}]}");
}
