{
  @SuppressWarnings("unchecked") Map<String,SavedStreams> map=(Map)getPreviousTokenStream();
  if (map == null) {
    map=new HashMap<String,SavedStreams>();
    setPreviousTokenStream(map);
  }
  SavedStreams saved=map.get(fieldName);
  if (saved == null) {
    saved=new SavedStreams();
    saved.tokenizer=new MockTokenizer(reader,runAutomaton,lowerCase);
    saved.filter=new MockTokenFilter(saved.tokenizer,filter,enablePositionIncrements);
    saved.filter=maybePayload(saved.filter,fieldName);
    map.put(fieldName,saved);
    return saved.filter;
  }
 else {
    saved.tokenizer.reset(reader);
    saved.filter.reset();
    return saved.filter;
  }
}
