{
  ClusterState clusterState=getCommonCloudSolrClient().getZkStateReader().getClusterState();
  if (clusterState.hasCollection(collectionName)) {
    Map<String,Slice> slices=clusterState.getSlicesMap(collectionName);
    Iterator<Entry<String,Slice>> it=slices.entrySet().iterator();
    while (it.hasNext()) {
      Entry<String,Slice> sliceEntry=it.next();
      Map<String,Replica> sliceShards=sliceEntry.getValue().getReplicasMap();
      Iterator<Entry<String,Replica>> shardIt=sliceShards.entrySet().iterator();
      while (shardIt.hasNext()) {
        Entry<String,Replica> shardEntry=shardIt.next();
        ZkCoreNodeProps coreProps=new ZkCoreNodeProps(shardEntry.getValue());
        HttpSolrClient server=new HttpSolrClient(coreProps.getBaseUrl());
        CoreAdminResponse mcr;
        try {
          mcr=CoreAdminRequest.getStatus(coreProps.getCoreName(),server);
        }
  finally {
          server.shutdown();
        }
        long before=mcr.getStartTime(coreProps.getCoreName()).getTime();
        urlToTime.put(coreProps.getCoreUrl(),before);
      }
    }
  }
 else {
    throw new IllegalArgumentException("Could not find collection in :" + clusterState.getCollections());
  }
}
