{
  final String baseUrl=getBaseUrl((HttpSolrClient)clients.get(0));
  String collectionName="corealreadyunloaded";
  try (SolrClient client=createNewSolrClient("",baseUrl)){
    createCollection(null,collectionName,2,1,2,client,null,"conf1");
  }
   waitForRecoveriesToFinish(collectionName,false);
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("action",CollectionAction.DELETE.toString());
  params.set("name",collectionName);
  QueryRequest request=new QueryRequest(params);
  request.setPath("/admin/collections");
  NamedList<Object> result=makeRequest(baseUrl,request);
  System.out.println("result:" + result);
  Object failure=result.get("failure");
  assertNull("We expect no failures",failure);
  assertCollectionNotExists(collectionName,45);
  params=new ModifiableSolrParams();
  params.set("action",CollectionAction.CREATE.toString());
  params.set("name",collectionName);
  params.set("numShards",2);
  request=new QueryRequest(params);
  request.setPath("/admin/collections");
  if (secondConfigSet) {
    params.set("collection.configName","conf1");
  }
  makeRequest(baseUrl,request);
  params=new ModifiableSolrParams();
  params.set("action",CollectionAction.DELETE.toString());
  params.set("name",collectionName);
  request=new QueryRequest(params);
  request.setPath("/admin/collections");
  makeRequest(baseUrl,request);
}
