{
  super.setUp();
  useJettyDataDir=false;
  if (secondConfigSet) {
    String zkHost=zkServer.getZkHost();
    String zkAddress=zkServer.getZkAddress();
    SolrZkClient zkClient=new SolrZkClient(zkHost,AbstractZkTestCase.TIMEOUT);
    zkClient.makePath("/solr",false,true);
    zkClient.close();
    zkClient=new SolrZkClient(zkAddress,AbstractZkTestCase.TIMEOUT);
    File solrhome=new File(TEST_HOME());
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,getCloudSolrConfig(),"solrconfig.xml");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"schema.xml","schema.xml");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"solrconfig.snippet.randomindexconfig.xml");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"stopwords.txt");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"protwords.txt");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"currency.xml");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"open-exchange-rates.json");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"mapping-ISOLatin1Accent.txt");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"old_synonyms.txt");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"synonyms.txt");
    AbstractZkTestCase.putConfig("conf2",zkClient,solrhome,"elevate.xml");
    zkClient.close();
  }
  System.setProperty("numShards",Integer.toString(sliceCount));
}
