{
  CoreContainer cores=((SolrDispatchFilter)jetty.getDispatchFilter().getFilter()).getCores();
  Collection<SolrCore> theCores=cores.getCores();
  for (  SolrCore core : theCores) {
    if (!oldStyleSolrXml) {
      assertTrue("Could not find expected core.properties file",new File((String)core.getStatistics().get("instanceDir"),"core.properties").exists());
    }
    try {
      assertEquals(new File(SolrResourceLoader.normalizeDir(jetty.getSolrHome() + File.separator + core.getName())).getCanonicalPath(),new File(SolrResourceLoader.normalizeDir((String)core.getStatistics().get("instanceDir"))).getCanonicalPath());
    }
 catch (    IOException e) {
      log.error("Failed to get canonical path",e);
      fail("Failed to get canonical path");
    }
  }
}
