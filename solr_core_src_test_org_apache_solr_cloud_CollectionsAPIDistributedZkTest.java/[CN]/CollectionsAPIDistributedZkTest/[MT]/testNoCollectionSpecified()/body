{
  assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
  Create createCmd=new Create();
  createCmd.setCoreName("corewithnocollection");
  createCmd.setCollection("");
  String dataDir=createTempDir().toFile().getAbsolutePath();
  createCmd.setDataDir(dataDir);
  createCmd.setNumShards(1);
  if (secondConfigSet) {
    createCmd.setCollectionConfigName("conf1");
  }
  makeRequest(getBaseUrl((HttpSolrClient)clients.get(1)),createCmd);
  createCmd.setCollection(null);
  createCmd.setCoreName("corewithnocollection2");
  makeRequest(getBaseUrl((HttpSolrClient)clients.get(1)),createCmd);
  cloudClient.getZkStateReader().forceUpdateCollection("corewithnocollection");
  cloudClient.getZkStateReader().forceUpdateCollection("corewithnocollection2");
  assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
}
