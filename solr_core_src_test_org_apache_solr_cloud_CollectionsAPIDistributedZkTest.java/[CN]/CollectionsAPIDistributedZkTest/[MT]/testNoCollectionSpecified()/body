{
  assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
  Create createCmd=new Create();
  createCmd.setCoreName("corewithnocollection");
  createCmd.setCollection("");
  String dataDir=createTempDir().toFile().getAbsolutePath();
  createCmd.setDataDir(dataDir);
  createCmd.setNumShards(1);
  createCmd.setCollectionConfigName("conf");
  cluster.getSolrClient().request(createCmd);
  createCmd.setCollection(null);
  createCmd.setCoreName("corewithnocollection2");
  cluster.getSolrClient().request(createCmd);
  cluster.getSolrClient().getZkStateReader().forceUpdateCollection("corewithnocollection");
  cluster.getSolrClient().getZkStateReader().forceUpdateCollection("corewithnocollection2");
  assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
}
