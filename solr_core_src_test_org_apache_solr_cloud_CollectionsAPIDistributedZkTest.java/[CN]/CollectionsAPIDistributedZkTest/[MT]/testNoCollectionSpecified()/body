{
  cloudClient.getZkStateReader().updateClusterState(true);
  assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
  Create createCmd=new Create();
  createCmd.setCoreName("corewithnocollection");
  createCmd.setCollection("");
  String dataDir=createTempDir().toFile().getAbsolutePath();
  createCmd.setDataDir(dataDir);
  createCmd.setNumShards(1);
  if (secondConfigSet) {
    createCmd.setCollectionConfigName("conf1");
  }
  createNewSolrServer("",getBaseUrl((HttpSolrServer)clients.get(1))).request(createCmd);
  createCmd.setCollection(null);
  createCmd.setCoreName("corewithnocollection2");
  createNewSolrServer("",getBaseUrl((HttpSolrServer)clients.get(1))).request(createCmd);
  cloudClient.getZkStateReader().updateClusterState(true);
  assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection"));
  assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection2"));
}
