{
  super.setUp();
  File home=new File(TEMP_DIR,"solrtest-TestBinaryField-" + System.currentTimeMillis());
  File homeDir=new File(home,"example");
  File dataDir=new File(homeDir,"data");
  File confDir=new File(homeDir,"conf");
  homeDir.mkdirs();
  dataDir.mkdirs();
  confDir.mkdirs();
  SolrResourceLoader loader=new SolrResourceLoader(null,null);
  File f=new File(confDir,"solrconfig.xml");
  String fname="solr/conf/solrconfig-slave1.xml";
  FileOutputStream out=new FileOutputStream(f);
  IOUtils.copy(loader.openResource(fname),out);
  out.close();
  f=new File(confDir,"schema.xml");
  fname="solr/conf/schema-binaryfield.xml";
  out=new FileOutputStream(f);
  IOUtils.copy(loader.openResource(fname),out);
  out.close();
  System.setProperty("solr.solr.home",homeDir.getAbsolutePath());
  System.setProperty("solr.data.dir",dataDir.getAbsolutePath());
  System.setProperty("solr.test.sys.prop1","propone");
  System.setProperty("solr.test.sys.prop2","proptwo");
  jetty=new JettySolrRunner(context,0);
  jetty.start();
  port=jetty.getLocalPort();
  String url="http://localhost:" + jetty.getLocalPort() + context;
  server=new CommonsHttpSolrServer(url);
}
