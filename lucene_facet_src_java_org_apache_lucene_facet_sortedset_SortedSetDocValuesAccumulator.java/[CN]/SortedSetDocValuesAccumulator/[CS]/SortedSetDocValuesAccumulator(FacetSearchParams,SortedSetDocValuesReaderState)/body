{
  super(fsp,null,null,new FacetArrays((int)state.getDocValues().getValueCount()));
  this.state=state;
  this.field=state.getField();
  dv=state.getDocValues();
  for (  FacetRequest request : fsp.facetRequests) {
    if (!(request instanceof CountFacetRequest)) {
      throw new IllegalArgumentException("this collector only supports CountFacetRequest; got " + request);
    }
    if (request.categoryPath.length != 1) {
      throw new IllegalArgumentException("this collector only supports depth 1 CategoryPath; got " + request.categoryPath);
    }
    if (request.getDepth() != 1) {
      throw new IllegalArgumentException("this collector only supports depth=1; got " + request.getDepth());
    }
    String dim=request.categoryPath.components[0];
    SortedSetDocValuesReaderState.OrdRange ordRange=state.getOrdRange(dim);
    if (ordRange == null) {
      throw new IllegalArgumentException("dim \"" + dim + "\" does not exist");
    }
  }
}
