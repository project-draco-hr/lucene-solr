{
  super(fsp);
  this.state=state;
  this.field=state.getField();
  this.facetArrays=arrays == null ? new FacetArrays(state.getSize()) : arrays;
  dv=state.getDocValues();
  for (  FacetRequest fr : fsp.facetRequests) {
    if (!(fr instanceof CountFacetRequest)) {
      throw new IllegalArgumentException("this accumulator only supports CountFacetRequest; got " + fr);
    }
    if (fr.categoryPath.length != 1) {
      throw new IllegalArgumentException("this accumulator only supports 1-level CategoryPath; got " + fr.categoryPath);
    }
    if (fr.getDepth() != 1) {
      throw new IllegalArgumentException("this accumulator only supports depth=1; got " + fr.getDepth());
    }
    String dim=fr.categoryPath.components[0];
    SortedSetDocValuesReaderState.OrdRange ordRange=state.getOrdRange(dim);
    if (ordRange == null) {
      throw new IllegalArgumentException("dim \"" + dim + "\" does not exist");
    }
  }
}
