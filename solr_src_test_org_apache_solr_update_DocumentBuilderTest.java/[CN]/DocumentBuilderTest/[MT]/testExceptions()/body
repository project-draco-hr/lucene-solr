{
  SolrCore core=h.getCore();
  SolrInputDocument doc=new SolrInputDocument();
  doc.addField("id","123",1.0f);
  doc.addField("unknown","something",1.0f);
  try {
    DocumentBuilder.toDocument(doc,core.getSchema());
    fail("added an unknown field");
  }
 catch (  Exception ex) {
    assertTrue("should have document ID",ex.getMessage().indexOf("doc=123") > 0);
  }
  doc.remove("unknown");
  doc.addField("weight","not a number",1.0f);
  try {
    DocumentBuilder.toDocument(doc,core.getSchema());
    fail("invalid 'float' field value");
  }
 catch (  Exception ex) {
    assertTrue("should have document ID",ex.getMessage().indexOf("doc=123") > 0);
    assertTrue("cause is number format",ex.getCause() instanceof NumberFormatException);
  }
  doc.setField("weight","1.34",1.0f);
  DocumentBuilder.toDocument(doc,core.getSchema());
}
