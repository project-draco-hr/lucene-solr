{
  int iters=atLeast(30);
  for (int i=0; i < iters; i++) {
    final CharacterRunAutomaton dfa=new CharacterRunAutomaton(AutomatonTestUtil.randomAutomaton(random()),Integer.MAX_VALUE);
    final boolean lowercase=random().nextBoolean();
    final int limit=TestUtil.nextInt(random(),0,500);
    Analyzer a=new Analyzer(){
      @Override protected TokenStreamComponents createComponents(      String fieldName){
        Tokenizer t=new MockTokenizer(dfa,lowercase,limit);
        return new TokenStreamComponents(t,t);
      }
    }
;
    checkRandomData(random(),a,100);
    a.close();
  }
}
