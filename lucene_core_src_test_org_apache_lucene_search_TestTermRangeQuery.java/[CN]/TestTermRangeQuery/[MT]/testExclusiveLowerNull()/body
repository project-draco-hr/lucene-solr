{
  Analyzer analyzer=new SingleCharAnalyzer();
  Query query=TermRangeQuery.newStringRange("content",null,"C",false,false);
  initializeIndex(new String[]{"A","B","","C","D"},analyzer);
  IndexReader reader=DirectoryReader.open(dir);
  IndexSearcher searcher=newSearcher(reader);
  int numHits=searcher.search(query,1000).totalHits;
  assertEquals("A,B,<empty string>,C,D => A, B & <empty string> are in range",3,numHits);
  reader.close();
  initializeIndex(new String[]{"A","B","","D"},analyzer);
  reader=DirectoryReader.open(dir);
  searcher=newSearcher(reader);
  numHits=searcher.search(query,1000).totalHits;
  assertEquals("A,B,<empty string>,D => A, B & <empty string> are in range",3,numHits);
  reader.close();
  addDoc("C");
  reader=DirectoryReader.open(dir);
  searcher=newSearcher(reader);
  numHits=searcher.search(query,1000).totalHits;
  assertEquals("C added, still A, B & <empty string> are in range",3,numHits);
  reader.close();
}
