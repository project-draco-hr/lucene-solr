{
  initializeIndex(new String[]{"A","B","C","D"});
  IndexReader reader=DirectoryReader.open(dir);
  IndexSearcher searcher=newSearcher(reader);
  TermRangeQuery query=new TermRangeQuery("content",null,null,true,true);
  Terms terms=MultiFields.getTerms(searcher.getIndexReader(),"content");
  assertFalse(query.getTermsEnum(terms) instanceof TermRangeTermsEnum);
  assertEquals(4,searcher.search(query,null,1000).scoreDocs.length);
  query=new TermRangeQuery("content",null,null,false,false);
  assertFalse(query.getTermsEnum(terms) instanceof TermRangeTermsEnum);
  assertEquals(4,searcher.search(query,null,1000).scoreDocs.length);
  query=TermRangeQuery.newStringRange("content","",null,true,false);
  assertFalse(query.getTermsEnum(terms) instanceof TermRangeTermsEnum);
  assertEquals(4,searcher.search(query,null,1000).scoreDocs.length);
  query=TermRangeQuery.newStringRange("content","B",null,true,false);
  assertTrue(query.getTermsEnum(terms) instanceof TermRangeTermsEnum);
  assertEquals(3,searcher.search(query,null,1000).scoreDocs.length);
  reader.close();
}
