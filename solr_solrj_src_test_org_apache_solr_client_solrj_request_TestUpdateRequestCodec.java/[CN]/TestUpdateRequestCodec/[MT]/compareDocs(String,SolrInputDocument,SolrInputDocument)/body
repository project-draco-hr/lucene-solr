{
  Assert.assertEquals(expectedDoc.getDocumentBoost(),actualDoc.getDocumentBoost());
  for (  String s : expectedDoc.getFieldNames()) {
    SolrInputField expectedField=expectedDoc.getField(s);
    SolrInputField actualField=actualDoc.getField(s);
    Assert.assertEquals(m + ": diff boosts for field: " + s,expectedField.getBoost(),actualField.getBoost());
    Object expectedVal=expectedField.getValue();
    Object actualVal=actualField.getValue();
    if (expectedVal instanceof Set && actualVal instanceof Collection) {
      actualVal=new HashSet((Collection)actualVal);
      m+=" (Set comparison)";
    }
    Assert.assertEquals(m + " diff values for field: " + s,expectedVal,actualVal);
  }
}
