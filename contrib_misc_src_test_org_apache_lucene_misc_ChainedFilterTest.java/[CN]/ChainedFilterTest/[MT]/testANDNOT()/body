{
  ChainedFilter chain=getChainedFilter(new Filter[]{dateFilter,sueFilter},new int[]{ChainedFilter.AND,ChainedFilter.ANDNOT});
  TopDocs hits=searcher.search(query,chain,1000);
  assertEquals("ANDNOT matches just bob",MAX / 2,hits.totalHits);
  assertEquals("bob",searcher.doc(hits.scoreDocs[0].doc).get("owner"));
  chain=getChainedFilter(new Filter[]{bobFilter,bobFilter},new int[]{ChainedFilter.ANDNOT,ChainedFilter.ANDNOT});
  hits=searcher.search(query,chain,1000);
  assertEquals("ANDNOT bob ANDNOT bob matches all sues",MAX / 2,hits.totalHits);
  assertEquals("sue",searcher.doc(hits.scoreDocs[0].doc).get("owner"));
}
