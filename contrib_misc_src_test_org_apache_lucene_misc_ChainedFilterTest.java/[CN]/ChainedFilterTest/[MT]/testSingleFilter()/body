{
  ChainedFilter chain=getChainedFilter(new Filter[]{dateFilter},null);
  int numHits=searcher.search(query,chain,1000).totalHits;
  assertEquals(MAX,numHits);
  chain=new ChainedFilter(new Filter[]{bobFilter});
  numHits=searcher.search(query,chain,1000).totalHits;
  assertEquals(MAX / 2,numHits);
  chain=getChainedFilter(new Filter[]{bobFilter},new int[]{ChainedFilter.AND});
  TopDocs hits=searcher.search(query,chain,1000);
  numHits=hits.totalHits;
  assertEquals(MAX / 2,numHits);
  assertEquals("bob",searcher.doc(hits.scoreDocs[0].doc).get("owner"));
  chain=getChainedFilter(new Filter[]{bobFilter},new int[]{ChainedFilter.ANDNOT});
  hits=searcher.search(query,chain,1000);
  numHits=hits.totalHits;
  assertEquals(MAX / 2,numHits);
  assertEquals("sue",searcher.doc(hits.scoreDocs[0].doc).get("owner"));
}
