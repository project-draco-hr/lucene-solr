{
  double currentDistance=0.0;
  for (  PathSegment segment : segments) {
    double distance=segment.pathDistance(planetModel,distanceStyle,x,y,z);
    if (distance != Double.POSITIVE_INFINITY)     return currentDistance + distance;
    currentDistance+=segment.fullPathDistance(distanceStyle);
  }
  int segmentIndex=0;
  currentDistance=0.0;
  for (  SegmentEndpoint endpoint : endPoints) {
    double distance=endpoint.pathDistance(distanceStyle,x,y,z);
    if (distance != Double.POSITIVE_INFINITY)     return currentDistance + distance;
    if (segmentIndex < segments.size())     currentDistance+=segments.get(segmentIndex++).fullPathDistance(distanceStyle);
  }
  return Double.POSITIVE_INFINITY;
}
