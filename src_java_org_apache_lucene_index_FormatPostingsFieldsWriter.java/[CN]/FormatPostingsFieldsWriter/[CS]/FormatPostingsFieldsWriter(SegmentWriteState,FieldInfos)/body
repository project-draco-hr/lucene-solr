{
  super();
  dir=state.directory;
  segment=state.segmentName;
  totalNumDocs=state.numDocs;
  this.fieldInfos=fieldInfos;
  termsOut=new TermInfosWriter(dir,segment,fieldInfos,state.termIndexInterval);
  skipListWriter=new DefaultSkipListWriter(termsOut.skipInterval,termsOut.maxSkipLevels,totalNumDocs,null,null);
  state.flushedFiles.add(state.segmentFileName(IndexFileNames.TERMS_EXTENSION));
  state.flushedFiles.add(state.segmentFileName(IndexFileNames.TERMS_INDEX_EXTENSION));
  termsWriter=new FormatPostingsTermsWriter(state,this);
}
