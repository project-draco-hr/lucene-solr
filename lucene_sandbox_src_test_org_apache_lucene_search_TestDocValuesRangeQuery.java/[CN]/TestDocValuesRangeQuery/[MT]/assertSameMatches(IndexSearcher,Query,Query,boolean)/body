{
  final int maxDoc=searcher.getIndexReader().maxDoc();
  final TopDocs td1=searcher.search(q1,maxDoc,scores ? Sort.RELEVANCE : Sort.INDEXORDER);
  final TopDocs td2=searcher.search(q2,maxDoc,scores ? Sort.RELEVANCE : Sort.INDEXORDER);
  assertEquals(td1.totalHits,td2.totalHits);
  for (int i=0; i < td1.scoreDocs.length; ++i) {
    assertEquals(td1.scoreDocs[i].doc,td2.scoreDocs[i].doc);
    if (scores) {
      assertEquals(td1.scoreDocs[i].score,td2.scoreDocs[i].score,10e-7);
    }
  }
}
