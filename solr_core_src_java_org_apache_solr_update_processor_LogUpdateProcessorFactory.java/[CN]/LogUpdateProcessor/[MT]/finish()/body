{
  if (logDebug) {
    log.debug("PRE_UPDATE finish()");
  }
  if (next != null)   next.finish();
  NamedList<Object> stdLog=rsp.getToLog();
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < stdLog.size(); i++) {
    String name=stdLog.getName(i);
    Object val=stdLog.getVal(i);
    if ("path" == name || "params" == name) {
      sb.append(val).append(' ');
    }
 else {
      sb.append(name).append('=').append(val).append(' ');
    }
  }
  stdLog.clear();
  if (adds != null && numAdds > maxNumToLog) {
    adds.add("... (" + numAdds + " adds)");
  }
  if (deletes != null && numDeletes > maxNumToLog) {
    deletes.add("... (" + numDeletes + " deletes)");
  }
  long elapsed=rsp.getEndTime() - req.getStartTime();
  sb.append(toLog).append(" 0 ").append(elapsed);
  log.info(sb.toString());
}
