{
  org.apache.lucene.demo.html.HTMLParser p=new org.apache.lucene.demo.html.HTMLParser(reader);
  String title=p.getTitle();
  Properties props=p.getMetaTags();
  Reader r=p.getReader();
  char c[]=new char[1024];
  StringBuffer bodyBuf=new StringBuffer();
  int n;
  while ((n=r.read(c)) >= 0) {
    if (n > 0) {
      bodyBuf.append(c,0,n);
    }
  }
  r.close();
  if (date == null && props.getProperty("date") != null) {
    try {
      date=dateFormat.parse(props.getProperty("date").trim());
    }
 catch (    ParseException e) {
      System.out.println("ignoring date parse exception (assigning 'now') for: " + props.getProperty("date"));
      date=new Date();
    }
  }
  return new DocData(name,bodyBuf.toString(),title,props,date);
}
