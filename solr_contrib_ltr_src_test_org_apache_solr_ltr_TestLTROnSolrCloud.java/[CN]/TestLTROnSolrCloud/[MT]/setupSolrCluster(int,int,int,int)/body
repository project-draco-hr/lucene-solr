{
  JettyConfig jc=buildJettyConfig("/solr");
  jc=JettyConfig.builder(jc).withServlets(extraServlets).build();
  solrCluster=new MiniSolrCloudCluster(numServers,tmpSolrHome.toPath(),jc);
  File configDir=tmpSolrHome.toPath().resolve("collection1/conf").toFile();
  solrCluster.uploadConfigSet(configDir.toPath(),"conf1");
  solrCluster.getSolrClient().setDefaultCollection(COLLECTION);
  createCollection(COLLECTION,"conf1",numShards,numReplicas,maxShardsPerNode);
  indexDocuments(COLLECTION);
  createJettyAndHarness(tmpSolrHome.getAbsolutePath(),solrconfig,schema,"/solr",true,extraServlets);
  loadModelsAndFeatures();
}
