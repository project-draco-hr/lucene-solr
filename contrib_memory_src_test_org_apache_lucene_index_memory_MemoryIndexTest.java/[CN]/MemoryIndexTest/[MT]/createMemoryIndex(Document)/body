{
  MemoryIndex index=new MemoryIndex();
  Iterator iter=doc.getFields().iterator();
  while (iter.hasNext()) {
    Field field=(Field)iter.next();
    index.addField(field.name(),field.stringValue(),analyzer);
  }
  return index;
}
