{
  if (buffers.isEmpty()) {
    addBuffer(additionalCapacity(numDocs));
    return;
  }
  Buffer current=buffers.get(buffers.size() - 1);
  if (current.array.length - current.length >= numDocs) {
    return;
  }
  if (current.length < current.array.length - (current.array.length >>> 3)) {
    growBuffer(current,additionalCapacity(numDocs));
  }
 else {
    addBuffer(additionalCapacity(numDocs));
  }
}
