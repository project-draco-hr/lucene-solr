{
  if (denseSet != null) {
    denseSet.or(it);
    return;
  }
  final long itCost=it.cost();
  costUpperBound+=itCost;
  if (costUpperBound >= threshold) {
    costUpperBound=(sparseSet == null ? 0 : sparseSet.approximateCardinality()) + itCost;
    if (costUpperBound >= threshold) {
      denseSet=new FixedBitSet(maxDoc);
      denseSet.or(it);
      if (sparseSet != null) {
        denseSet.or(sparseSet.iterator());
      }
      return;
    }
  }
  if (sparseSet == null) {
    sparseSet=new SparseFixedBitSet(maxDoc);
  }
  sparseSet.or(it);
}
