{
  InputStream affixStream=getClass().getResourceAsStream("broken.aff");
  InputStream dictStream=getClass().getResourceAsStream("simple.dic");
  Directory tempDir=getDirectory();
  try {
    new Dictionary(tempDir,"dictionary",affixStream,dictStream);
    fail("didn't get expected exception");
  }
 catch (  ParseException expected) {
    assertTrue(expected.getMessage().startsWith("The affix file contains a rule with less than four elements"));
    assertEquals(24,expected.getErrorOffset());
  }
  affixStream.close();
  dictStream.close();
  tempDir.close();
}
