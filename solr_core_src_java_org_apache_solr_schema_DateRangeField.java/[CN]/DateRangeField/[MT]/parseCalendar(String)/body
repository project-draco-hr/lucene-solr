{
  if (str.startsWith("NOW") || str.lastIndexOf('Z') >= 0) {
    Date date=trieDateField.parseMath(null,str);
    Calendar cal=tree.newCal();
    cal.setTime(date);
    return cal;
  }
 else {
    try {
      return tree.parseCalendar(str);
    }
 catch (    ParseException e) {
      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Couldn't parse date because: " + e.getMessage(),e);
    }
  }
}
