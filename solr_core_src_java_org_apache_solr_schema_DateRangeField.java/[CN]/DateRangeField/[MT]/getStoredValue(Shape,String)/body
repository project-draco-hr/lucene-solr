{
  if (shape instanceof UnitNRShape) {
    UnitNRShape unitShape=(UnitNRShape)shape;
    if (unitShape.getLevel() == tree.getMaxLevels()) {
      Date date=tree.toCalendar(unitShape).getTime();
      return DateFormatUtil.formatExternal(date);
    }
  }
  return (shapeStr == null ? shape.toString() : shapeStr);
}
