{
  if (feed == null)   throw new IllegalArgumentException("feed must not be null");
  if (profile == null)   throw new IllegalArgumentException("extension profil must not be null");
  DateTime time=feed.getUpdated();
  if (time != null)   setLastModifiedHeader(time.getValue());
  XmlWriter writer=createWriter();
  if (this.outputFormat.equals(OutputFormat.ATOM)) {
    this.response.setContentType(XMLMIME_ATOM);
    feed.generateAtom(writer,profile);
  }
 else {
    this.response.setContentType(XMLMIME_RSS);
    feed.generateRss(writer,profile);
  }
}
