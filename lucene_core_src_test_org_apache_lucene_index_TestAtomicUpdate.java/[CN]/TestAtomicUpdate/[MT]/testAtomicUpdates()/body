{
  Directory directory;
  directory=new MockDirectoryWrapper(random(),new RAMDirectory());
  runTest(directory);
  directory.close();
  Path dirPath=createTempDir("lucene.test.atomic");
  directory=newFSDirectory(dirPath);
  runTest(directory);
  directory.close();
  IOUtils.rm(dirPath);
}
