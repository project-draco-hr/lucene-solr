{
  int length=256;
  byte[] buffer=new byte[length];
  for (int i=0; i < length; ++i) {
    buffer[i]=(byte)i;
  }
  byte[] result=new byte[buffer.length];
  UnsafeByteArrayInputStream ubais=new UnsafeByteArrayInputStream(buffer);
  int index=0;
  int by=ubais.read();
  while (by >= 0) {
    result[index++]=(byte)(by);
    by=ubais.read();
  }
  assertEquals(length,index);
  assertTrue(Arrays.equals(buffer,result));
}
