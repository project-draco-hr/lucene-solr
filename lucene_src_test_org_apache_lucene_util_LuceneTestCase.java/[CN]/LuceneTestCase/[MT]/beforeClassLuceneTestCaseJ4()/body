{
  staticSeed="random".equals(TEST_SEED) ? seedRand.nextLong() : TwoLongs.fromString(TEST_SEED).l1;
  random.setSeed(staticSeed);
  stores=Collections.synchronizedMap(new IdentityHashMap<MockDirectoryWrapper,StackTraceElement[]>());
  codec=installTestCodecs();
  savedLocale=Locale.getDefault();
  locale=TEST_LOCALE.equals("random") ? randomLocale(random) : localeForName(TEST_LOCALE);
  Locale.setDefault(locale);
  savedTimeZone=TimeZone.getDefault();
  timeZone=TEST_TIMEZONE.equals("random") ? randomTimeZone(random) : TimeZone.getTimeZone(TEST_TIMEZONE);
  TimeZone.setDefault(timeZone);
  testsFailed=false;
  randomCodecProvider=new RandomCodecProvider(random);
}
