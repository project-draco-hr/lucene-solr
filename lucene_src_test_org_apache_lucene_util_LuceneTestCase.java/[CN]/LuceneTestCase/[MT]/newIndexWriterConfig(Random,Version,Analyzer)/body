{
  IndexWriterConfig c=new IndexWriterConfig(v,a);
  if (r.nextBoolean()) {
    c.setMergePolicy(new LogDocMergePolicy());
  }
  if (r.nextBoolean()) {
    c.setMergeScheduler(new SerialMergeScheduler());
  }
  if (r.nextBoolean()) {
    if (r.nextInt(20) == 17) {
      c.setMaxBufferedDocs(2);
    }
 else {
      c.setMaxBufferedDocs(_TestUtil.nextInt(r,2,1000));
    }
  }
  if (r.nextBoolean()) {
    c.setTermIndexInterval(_TestUtil.nextInt(r,1,1000));
  }
  if (r.nextBoolean()) {
    c.setMaxThreadStates(_TestUtil.nextInt(r,1,20));
  }
  if (c.getMergePolicy() instanceof LogMergePolicy) {
    LogMergePolicy logmp=(LogMergePolicy)c.getMergePolicy();
    logmp.setUseCompoundDocStore(r.nextBoolean());
    logmp.setUseCompoundFile(r.nextBoolean());
    logmp.setCalibrateSizeByDeletes(r.nextBoolean());
    if (r.nextInt(3) == 2) {
      logmp.setMergeFactor(2);
    }
 else {
      logmp.setMergeFactor(_TestUtil.nextInt(r,2,20));
    }
  }
  c.setReaderPooling(r.nextBoolean());
  c.setReaderTermsIndexDivisor(_TestUtil.nextInt(r,1,4));
  return c;
}
