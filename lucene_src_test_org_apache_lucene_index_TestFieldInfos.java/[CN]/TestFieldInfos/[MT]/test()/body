{
  assertTrue(testDoc != null);
  FieldInfos fieldInfos=new FieldInfos();
  fieldInfos.add(testDoc);
  assertTrue(fieldInfos.size() == DocHelper.all.size());
  Directory dir=newDirectory();
  String name="testFile";
  IndexOutput output=dir.createOutput(name);
  assertTrue(output != null);
  fieldInfos.write(output);
  output.close();
  assertTrue(dir.fileLength(name) > 0);
  FieldInfos readIn=new FieldInfos(dir,name);
  assertTrue(fieldInfos.size() == readIn.size());
  FieldInfo info=readIn.fieldInfo("textField1");
  assertTrue(info != null);
  assertTrue(info.storeTermVector == false);
  assertTrue(info.omitNorms == false);
  info=readIn.fieldInfo("textField2");
  assertTrue(info != null);
  assertTrue(info.storeTermVector == true);
  assertTrue(info.omitNorms == false);
  info=readIn.fieldInfo("textField3");
  assertTrue(info != null);
  assertTrue(info.storeTermVector == false);
  assertTrue(info.omitNorms == true);
  info=readIn.fieldInfo("omitNorms");
  assertTrue(info != null);
  assertTrue(info.storeTermVector == false);
  assertTrue(info.omitNorms == true);
  dir.close();
}
