{
  FieldCache cache=FieldCache.DEFAULT;
  cache.purgeAllCaches();
  cache.getTerms(SlowCompositeReaderWrapper.wrap(readerA),"theString");
  cache.getTerms(SlowCompositeReaderWrapper.wrap(readerB),"theString");
  cache.getTerms(SlowCompositeReaderWrapper.wrap(readerX),"theString");
  cache.getBytes(SlowCompositeReaderWrapper.wrap(readerX),"theByte",false);
  Insanity[] insanity=FieldCacheSanityChecker.checkSanity(cache.getCacheEntries());
  assertEquals("wrong number of cache errors",1,insanity.length);
  assertEquals("wrong type of cache error",InsanityType.SUBREADER,insanity[0].getType());
  assertEquals("wrong number of entries in cache error",3,insanity[0].getCacheEntries().length);
  cache.purgeAllCaches();
}
