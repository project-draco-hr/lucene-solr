{
  TimeOut timeout=new TimeOut(timeoutMs,TimeUnit.MILLISECONDS);
  while (!timeout.hasTimedOut()) {
    if (checkAppearOnce() && checkElectionZero() && checkZkLeadersAgree()) {
      return;
    }
    Thread.sleep(1000);
  }
  fail("Checking the rebalance leader command failed");
}
