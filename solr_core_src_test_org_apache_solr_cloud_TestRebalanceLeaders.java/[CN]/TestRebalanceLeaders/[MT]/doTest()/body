{
  CloudSolrClient client=createCloudClient(null);
  reps=random().nextInt(9) + 1;
  try {
    int shards=random().nextInt(7);
    if (shards < 2)     shards=2;
    int rFactor=random().nextInt(4);
    if (rFactor < 2)     rFactor=2;
    createCollection(null,COLLECTION_NAME,shards,rFactor,shards * rFactor + 1,client,null,"conf1");
  }
  finally {
    client.shutdown();
  }
  waitForCollection(cloudClient.getZkStateReader(),COLLECTION_NAME,2);
  waitForRecoveriesToFinish(COLLECTION_NAME,false);
  listCollection();
  rebalanceLeaderTest();
}
