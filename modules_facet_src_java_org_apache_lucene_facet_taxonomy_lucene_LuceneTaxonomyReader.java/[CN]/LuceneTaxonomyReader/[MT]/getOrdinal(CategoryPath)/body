{
  if (categoryPath.length() == 0) {
    return ROOT_ORDINAL;
  }
  String path=categoryPath.toString(delimiter);
synchronized (getOrdinalCache) {
    Integer res=getOrdinalCache.get(path);
    if (res != null) {
      return res.intValue();
    }
  }
  int ret=TaxonomyReader.INVALID_ORDINAL;
  try {
    indexReaderLock.readLock().lock();
    Bits liveDocs=MultiFields.getLiveDocs(indexReader);
    DocsEnum docs=MultiFields.getTermDocsEnum(indexReader,liveDocs,Consts.FULL,new BytesRef(path));
    if (docs != null && docs.nextDoc() != DocIdSetIterator.NO_MORE_DOCS) {
      ret=docs.docID();
    }
  }
  finally {
    indexReaderLock.readLock().unlock();
  }
synchronized (getOrdinalCache) {
    getOrdinalCache.put(path,Integer.valueOf(ret));
  }
  return ret;
}
