{
synchronized (childrenArraysRebuild) {
    int num=getSize();
    int first;
    if (childrenArrays == null) {
      first=0;
    }
 else {
      first=childrenArrays.getYoungestChildArray().length;
    }
    if (first == num) {
      return childrenArrays;
    }
    int[] newYoungestChildArray=new int[num];
    int[] newOlderSiblingArray=new int[num];
    if (childrenArrays != null) {
      System.arraycopy(childrenArrays.getYoungestChildArray(),0,newYoungestChildArray,0,childrenArrays.getYoungestChildArray().length);
      System.arraycopy(childrenArrays.getOlderSiblingArray(),0,newOlderSiblingArray,0,childrenArrays.getOlderSiblingArray().length);
    }
    int[] parents=getParentArray();
    for (int i=first; i < num; i++) {
      newYoungestChildArray[i]=INVALID_ORDINAL;
    }
    if (first == 0) {
      first=1;
      newOlderSiblingArray[0]=INVALID_ORDINAL;
    }
    for (int i=first; i < num; i++) {
      newOlderSiblingArray[i]=newYoungestChildArray[parents[i]];
      newYoungestChildArray[parents[i]]=i;
    }
    childrenArrays=new ChildrenArraysImpl(newYoungestChildArray,newOlderSiblingArray);
    return childrenArrays;
  }
}
