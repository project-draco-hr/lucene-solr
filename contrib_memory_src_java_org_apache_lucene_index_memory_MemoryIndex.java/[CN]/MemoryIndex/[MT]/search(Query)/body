{
  if (query == null)   throw new IllegalArgumentException("query must not be null");
  if (fields.size() == 0)   return 0.0f;
  Searcher searcher=createSearcher();
  try {
    final float[] scores=new float[1];
    searcher.search(query,new HitCollector(){
      public void collect(      int doc,      float score){
        scores[0]=score;
      }
    }
);
    float score=scores[0];
    return score;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
  }
}
