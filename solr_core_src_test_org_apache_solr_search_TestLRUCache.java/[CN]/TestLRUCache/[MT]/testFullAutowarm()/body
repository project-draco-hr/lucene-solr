{
  LRUCache<Object,Object> lruCache=new LRUCache<Object,Object>();
  Map<String,String> params=new HashMap<String,String>();
  params.put("size","100");
  params.put("initialSize","10");
  params.put("autowarmCount","100%");
  CacheRegenerator cr=createCodeRegenerator();
  Object o=lruCache.init(params,null,cr);
  lruCache.setState(SolrCache.State.LIVE);
  for (int i=0; i < 101; i++) {
    lruCache.put(i + 1,"" + (i + 1));
  }
  assertEquals("25",lruCache.get(25));
  assertEquals(null,lruCache.get(110));
  assertEquals(null,lruCache.get(1));
  LRUCache<Object,Object> lruCacheNew=new LRUCache<Object,Object>();
  lruCacheNew.init(params,o,cr);
  lruCacheNew.warm(null,lruCache);
  lruCacheNew.setState(SolrCache.State.LIVE);
  lruCache.close();
  lruCacheNew.put(103,"103");
  assertEquals("90",lruCacheNew.get(90));
  assertEquals("50",lruCacheNew.get(50));
  lruCacheNew.close();
}
