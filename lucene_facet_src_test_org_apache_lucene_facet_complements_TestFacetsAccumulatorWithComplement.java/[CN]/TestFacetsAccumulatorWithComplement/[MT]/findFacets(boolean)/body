{
  FacetSearchParams fsp=new FacetSearchParams(fip,new CountFacetRequest(new FacetLabel("root","a"),10));
  OldFacetsAccumulator sfa=new OldFacetsAccumulator(fsp,indexReader,taxoReader);
  sfa.setComplementThreshold(withComplement ? OldFacetsAccumulator.FORCE_COMPLEMENT : OldFacetsAccumulator.DISABLE_COMPLEMENT);
  FacetsCollector fc=FacetsCollector.create(sfa);
  searcher.search(new MatchAllDocsQuery(),fc);
  List<FacetResult> res=fc.getFacetResults();
  int i=0;
  if (VERBOSE) {
    for (    FacetResult facetResult : res) {
      System.out.println("Res " + (i++) + ": "+ facetResult);
    }
  }
  assertEquals(withComplement,sfa.isUsingComplements());
  return res;
}
