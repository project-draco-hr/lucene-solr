{
  testSaveFeed();
  Entry e=new Entry();
  e.setTitle(new PlainTextConstruct("hello world"));
  ServerBaseEntry entry=new ServerBaseEntry(e);
  entry.setFeedId(feedId);
  entry.setId("testme");
  entry.setServiceConfig(this.configurator);
  StorageEntryWrapper entryWrapper=new StorageEntryWrapper(entry,StorageOperation.INSERT);
  this.modifier.insertEntry(entryWrapper);
  this.modifier.forceWrite();
  this.modifier.deleteFeed(feedId);
  IndexSearcher searcher=new IndexSearcher(this.dir);
  Query q=new TermQuery(new Term(StorageFeedWrapper.FIELD_FEED_ID,feedId));
  Query q1=new TermQuery(new Term(StorageEntryWrapper.FIELD_FEED_REFERENCE,feedId));
  BooleanQuery boolQuery=new BooleanQuery();
  boolQuery.add(q,BooleanClause.Occur.SHOULD);
  boolQuery.add(q1,BooleanClause.Occur.SHOULD);
  Hits h=searcher.search(boolQuery);
  assertEquals("length == 0",0,h.length());
  searcher.close();
}
