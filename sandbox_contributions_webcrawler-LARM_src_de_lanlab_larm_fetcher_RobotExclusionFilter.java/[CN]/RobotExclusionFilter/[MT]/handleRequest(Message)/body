{
  try {
    URLMessage urlMsg=((URLMessage)message);
    URL url=urlMsg.getUrl();
    HostInfo h=hostManager.getHostInfo(url.getHost());
    if (!h.isRobotTxtChecked() && !h.isLoadingRobotsTxt()) {
      log.logThreadSafe("handleRequest: starting to get robots.txt");
      rePool.doTask(new RobotExclusionTask(h),new Integer(h.id));
      h.setLoadingRobotsTxt(true);
    }
synchronized (h) {
      if (h.isLoadingRobotsTxt()) {
        h.queuedRequests.insert(message);
        log.logThreadSafe("handleRequest: queued file " + url);
        return null;
      }
    }
    String path=url.getPath();
    if (path == null || path.equals("")) {
      path="/";
    }
    if (h.isAllowed(path)) {
      return message;
    }
    log.logThreadSafe("handleRequest: file " + urlMsg.getURLString() + " filtered");
    this.filtered++;
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return null;
}
