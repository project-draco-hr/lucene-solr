{
  NamedList<Object> details=getDetails(client1);
  ArrayList<NamedList<Object>> commits=(ArrayList<NamedList<Object>>)details.get("commits");
  Long maxVersionClient1=getVersion(client1);
  Long maxVersionClient2=getVersion(client2);
  if (maxVersionClient1 > 0 && maxVersionClient2 > 0) {
    assertEquals(maxVersionClient1,maxVersionClient2);
  }
  ModifiableSolrParams params=new ModifiableSolrParams();
  params.set("qt","/replication");
  params.set("_trace","assertVersions");
  params.set("command","indexversion");
  QueryRequest req=new QueryRequest(params);
  NamedList<Object> resp=client1.request(req);
  Long version=(Long)resp.get("indexversion");
  assertEquals(maxVersionClient1,version);
  resp=client2.request(req);
  version=(Long)resp.get("indexversion");
  assertEquals(maxVersionClient2,version);
}
