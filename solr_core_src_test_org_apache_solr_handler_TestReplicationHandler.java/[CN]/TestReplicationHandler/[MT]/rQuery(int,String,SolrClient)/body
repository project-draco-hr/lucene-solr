{
  int timeSlept=0;
  NamedList res=query(query,client);
  while (expectedDocCount != numFound(res) && timeSlept < 30000) {
    log.info("Waiting for " + expectedDocCount + " docs");
    timeSlept+=100;
    Thread.sleep(100);
    res=query(query,client);
  }
  log.info("Waited for {}ms and found {} docs",timeSlept,numFound(res));
  return res;
}
