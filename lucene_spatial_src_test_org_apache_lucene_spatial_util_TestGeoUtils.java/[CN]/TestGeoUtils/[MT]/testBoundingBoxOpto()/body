{
  for (int i=0; i < 1000; i++) {
    double lat=-90 + 180.0 * random().nextDouble();
    double lon=-180 + 360.0 * random().nextDouble();
    double radius=50000000 * random().nextDouble();
    GeoRect box=GeoUtils.circleToBBox(lat,lon,radius);
    final GeoRect box1;
    final GeoRect box2;
    if (box.crossesDateline()) {
      box1=new GeoRect(box.minLat,box.maxLat,-180,box.maxLon);
      box2=new GeoRect(box.minLat,box.maxLat,box.minLon,180);
    }
 else {
      box1=box;
      box2=null;
    }
    for (int j=0; j < 10000; j++) {
      double lat2=-90 + 180.0 * random().nextDouble();
      double lon2=-180 + 360.0 * random().nextDouble();
      if (SloppyMath.haversinMeters(lat,lon,lat2,lon2) <= radius) {
        assertTrue(lat >= box.minLat && lat <= box.maxLat);
        assertTrue(lon >= box1.minLon && lon <= box1.maxLon || (box2 != null && lon >= box2.minLon && lon <= box2.maxLon));
      }
    }
  }
}
