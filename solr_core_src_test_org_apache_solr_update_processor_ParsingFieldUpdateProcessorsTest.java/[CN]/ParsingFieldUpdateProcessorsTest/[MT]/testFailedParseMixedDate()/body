{
  IndexSchema schema=h.getCore().getLatestSchema();
  assertNull(schema.getFieldOrNull("not_in_schema"));
  DateTimeFormatter dateTimeFormatter=ISODateTimeFormat.dateOptionalTimeParser().withZoneUTC();
  Map<Object,Object> mixed=new HashMap<Object,Object>();
  String[] dateStrings={"2020-05-13T18:47","1989-12-14","1682-07-22T18:33:00.000Z"};
  for (  String dateString : dateStrings) {
    mixed.put(dateTimeFormatter.parseDateTime(dateString).toDate(),dateString);
  }
  Double extraDouble=29.554d;
  mixed.put(extraDouble,extraDouble);
  SolrInputDocument d=processAdd("parse-date-no-run-processor",doc(f("id","7201"),f("not_in_schema",mixed.values())));
  assertNotNull(d);
  boolean foundDouble=false;
  for (  Object o : d.getFieldValues("not_in_schema")) {
    if (extraDouble == o) {
      foundDouble=true;
    }
 else {
      assertTrue(o instanceof String);
    }
    mixed.values().remove(o);
  }
  assertTrue(foundDouble);
  assertTrue(mixed.isEmpty());
}
