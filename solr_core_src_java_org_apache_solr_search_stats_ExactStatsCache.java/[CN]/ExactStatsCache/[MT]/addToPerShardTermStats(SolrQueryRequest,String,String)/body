{
  Map<String,TermStats> termStats=StatsUtil.termStatsMapFromString(termStatsString);
  if (termStats != null) {
    Map<String,Map<String,TermStats>> perShardTermStats=(Map<String,Map<String,TermStats>>)req.getContext().get(PER_SHARD_TERM_STATS);
    if (perShardTermStats == null) {
      perShardTermStats=new HashMap<String,Map<String,TermStats>>();
      req.getContext().put(PER_SHARD_TERM_STATS,perShardTermStats);
    }
    perShardTermStats.put(shard,termStats);
  }
}
