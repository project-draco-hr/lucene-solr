{
  try {
    if (coreName == null)     coreName=CoreContainer.DEFAULT_DEFAULT_CORE_NAME;
    this.coreName=coreName;
    SolrResourceLoader loader=new SolrResourceLoader(SolrResourceLoader.locateSolrHome());
    ConfigSolr config=getTestHarnessConfig(coreName,dataDir,solrConfig,indexSchema);
    container=new CoreContainer(loader,config);
    container.load();
    updater=new UpdateRequestHandler();
    updater.init(null);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
