{
  CoreContainer container=new CoreContainer(new SolrResourceLoader(SolrResourceLoader.locateSolrHome())){
{
      hostPort=System.getProperty("hostPort");
      hostContext="solr";
      defaultCoreName="collection1";
      initZooKeeper(System.getProperty("zkHost"),10000);
    }
  }
;
  CoreDescriptor dcore=new CoreDescriptor(container,coreName,solrConfig.getResourceLoader().getInstanceDir());
  dcore.setConfigName(solrConfig.getResourceName());
  dcore.setSchemaName(indexSchema.getResourceName());
  SolrCore core=new SolrCore(coreName,dataDirectory,solrConfig,indexSchema,dcore);
  container.register(coreName,core,false);
  return container;
}
