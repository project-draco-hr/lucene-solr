{
  int maxDoc=reader.maxDoc();
  final int[] values;
  NumericDocValues valuesIn=reader.getNumericDocValues(key.field);
  if (valuesIn != null) {
    values=new int[maxDoc];
    for (int docID=0; docID < maxDoc; docID++) {
      values[docID]=(int)valuesIn.get(docID);
    }
  }
 else {
    final IntParser parser=(IntParser)key.custom;
    if (parser == null) {
      try {
        return wrapper.getInts(reader,key.field,DEFAULT_INT_PARSER,setDocsWithField);
      }
 catch (      NumberFormatException ne) {
        return wrapper.getInts(reader,key.field,NUMERIC_UTILS_INT_PARSER,setDocsWithField);
      }
    }
    values=new int[reader.maxDoc()];
    Uninvert u=new Uninvert(){
      private int currentValue;
      @Override public void visitTerm(      BytesRef term){
        currentValue=parser.parseInt(term);
      }
      @Override public void visitDoc(      int docID){
        values[docID]=currentValue;
      }
    }
;
    u.uninvert(reader,key.field,setDocsWithField);
    if (setDocsWithField) {
      wrapper.setDocsWithField(reader,key.field,u.docsWithField);
    }
  }
  return new IntsFromArray(values);
}
