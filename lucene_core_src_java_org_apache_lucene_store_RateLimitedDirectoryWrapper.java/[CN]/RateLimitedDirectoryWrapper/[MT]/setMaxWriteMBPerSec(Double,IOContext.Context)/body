{
  ensureOpen();
  if (context == null) {
    throw new IllegalArgumentException("Context must not be null");
  }
  final int ord=context.ordinal();
  final RateLimiter limiter=contextRateLimiters[ord];
  if (mbPerSec == null) {
    if (limiter != null) {
      limiter.setMbPerSec(Double.MAX_VALUE);
      contextRateLimiters[ord]=null;
    }
  }
 else   if (limiter != null) {
    limiter.setMbPerSec(mbPerSec);
    contextRateLimiters[ord]=limiter;
  }
 else {
    contextRateLimiters[ord]=new RateLimiter.SimpleRateLimiter(mbPerSec);
  }
}
