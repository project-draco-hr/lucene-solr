{
  String v="a b c d e a b c f g h i j k l m l k j z z z";
  assertU(adoc("id","1","text",v,"text_np",v,"name",v));
  v="abc abxy cde efg ef e  ";
  assertU(adoc("id","2","text",v,"text_np",v));
  v="1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 1001 1002 1003 1004 1005 1006 1007 1008 1009";
  assertU(adoc("id","3","text",v,"text_np",v));
  assertU(commit());
  String localP="{!surround df=text}";
  String t1;
  t1=localP + "1 N 2";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='1']");
  t1=localP + "2 W 1";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='0']");
  t1=localP + "3n(a,e)";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='1']");
  t1=localP + "100* w 20";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='0']");
  t1=localP + "100* n 20";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='1']");
  t1=localP + "(1003 2n 1001) 3N 1006";
  assertQ(req("q",t1,"indent","true"),"//*[@numFound='1']");
  assertQ(req("q","{!surround df=name}k w l","hl","true","hl.fl","name","hl.usePhraseHighlighter","true"),"//*[@numFound='1']","//lst[@name='highlighting']/lst[@name='1']","//lst[@name='1']/arr[@name='name']/str[.='a b c d e a b c f g h i j <em>k</em> <em>l</em> m l k j z z z']");
  assertQ(req("q","{!surround df=name}k w l","hl","true","hl.fl","name","hl.usePhraseHighlighter","false"),"//*[@numFound='1']","//lst[@name='highlighting']/lst[@name='1']","//lst[@name='1']/arr[@name='name']/str[.='a b c d e a b c f g h i j <em>k</em> <em>l</em> m <em>l</em> <em>k</em> j z z z']");
}
