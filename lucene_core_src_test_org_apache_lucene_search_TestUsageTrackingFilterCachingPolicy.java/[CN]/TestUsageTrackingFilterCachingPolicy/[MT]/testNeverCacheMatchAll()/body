{
  Query q=new MatchAllDocsQuery();
  UsageTrackingQueryCachingPolicy policy=new UsageTrackingQueryCachingPolicy();
  for (int i=0; i < 1000; ++i) {
    policy.onUse(q);
  }
  Directory dir=newDirectory();
  IndexWriter w=new IndexWriter(dir,new IndexWriterConfig(null));
  w.addDocument(new Document());
  IndexReader r=DirectoryReader.open(w);
  assertFalse(policy.shouldCache(q,getOnlyLeafReader(r).getContext()));
  r.close();
  w.close();
  dir.close();
}
