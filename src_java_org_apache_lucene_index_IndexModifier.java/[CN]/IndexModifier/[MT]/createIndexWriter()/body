{
  if (indexWriter == null) {
    if (indexReader != null) {
      indexReader.close();
      indexReader=null;
    }
    indexWriter=new IndexWriter(directory,analyzer,false,IndexWriter.MaxFieldLength.LIMITED);
    indexWriter.setMergeScheduler(new SerialMergeScheduler());
    indexWriter.setInfoStream(infoStream);
    indexWriter.setUseCompoundFile(useCompoundFile);
    if (maxBufferedDocs != IndexWriter.DISABLE_AUTO_FLUSH)     indexWriter.setMaxBufferedDocs(maxBufferedDocs);
    indexWriter.setMaxFieldLength(maxFieldLength);
    indexWriter.setMergeFactor(mergeFactor);
  }
}
