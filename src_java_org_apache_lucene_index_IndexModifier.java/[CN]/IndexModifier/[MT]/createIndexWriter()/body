{
  if (indexWriter == null) {
    if (indexReader != null) {
      indexReader.close();
      indexReader=null;
    }
    indexWriter=new IndexWriter(directory,analyzer,false,new IndexWriter.MaxFieldLength(maxFieldLength));
    indexWriter.setMergeScheduler(new SerialMergeScheduler());
    indexWriter.setInfoStream(infoStream);
    indexWriter.setUseCompoundFile(useCompoundFile);
    if (maxBufferedDocs != IndexWriter.DISABLE_AUTO_FLUSH)     indexWriter.setMaxBufferedDocs(maxBufferedDocs);
    indexWriter.setMergeFactor(mergeFactor);
  }
}
