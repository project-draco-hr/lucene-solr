{
  Map<String,String> stopConfig1=new HashMap<>();
  stopConfig1.put("ignoreCase","true");
  stopConfig1.put("words","org/apache/lucene/analysis/custom/teststop.txt");
  stopConfig1.put("format","wordset");
  Map<String,String> stopConfig2=Collections.unmodifiableMap(new HashMap<>(stopConfig1));
  CustomAnalyzer a=CustomAnalyzer.builder().withTokenizer("whitespace").addTokenFilter("stop",stopConfig1).build();
  assertTrue(stopConfig1.isEmpty());
  assertAnalyzesTo(a,"foo Foo Bar",new String[0]);
  try {
    CustomAnalyzer.builder().withTokenizer("whitespace").addTokenFilter("stop",stopConfig2).build();
    fail();
  }
 catch (  IllegalArgumentException|UnsupportedOperationException e) {
  }
  a.close();
}
