{
  final Iterable<Number> docToValueCount=LegacyDocValuesIterables.sortedNumericToDocCount(valuesProducer,field,maxDoc);
  final Iterable<Number> values=LegacyDocValuesIterables.sortedNumericToValues(valuesProducer,field);
  meta.writeVInt(field.number);
  if (isSingleValued(docToValueCount)) {
    meta.writeByte(SORTED_NUMERIC_SINGLETON);
    addNumericFieldValues(field,singletonView(docToValueCount,values,null));
  }
 else {
    meta.writeByte(SORTED_NUMERIC);
    addNumericFieldValues(field,countToAddressIterator(docToValueCount));
    addNumericFieldValues(field,values);
  }
}
