{
  AttributeSource state=new AttributeSource();
  Iterator it=getAttributesIterator();
  while (it.hasNext()) {
    Attribute att=(Attribute)it.next();
    if (acceptor.accept(att.getClass())) {
      Attribute clone=(Attribute)att.clone();
      state.attributes.put(att.getClass(),clone);
    }
  }
  return state;
}
