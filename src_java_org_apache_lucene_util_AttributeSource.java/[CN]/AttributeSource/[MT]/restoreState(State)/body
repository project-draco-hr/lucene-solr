{
  if (state == null)   return;
  do {
    AttributeImpl targetImpl=(AttributeImpl)attributeImpls.get(state.attribute.getClass());
    if (targetImpl == null)     throw new IllegalArgumentException("State contains an AttributeImpl that is not in this AttributeSource");
    state.attribute.copyTo(targetImpl);
    state=state.next;
  }
 while (state != null);
}
