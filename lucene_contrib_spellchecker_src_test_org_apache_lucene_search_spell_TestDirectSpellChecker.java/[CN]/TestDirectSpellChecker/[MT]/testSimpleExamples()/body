{
  DirectSpellChecker spellChecker=new DirectSpellChecker();
  spellChecker.setMinQueryLength(0);
  Directory dir=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random,dir,new MockAnalyzer(MockTokenizer.SIMPLE,true));
  for (int i=0; i < 20; i++) {
    Document doc=new Document();
    doc.add(newField("numbers",English.intToEnglish(i),Field.Store.NO,Field.Index.ANALYZED));
    writer.addDocument(doc);
  }
  IndexReader ir=writer.getReader();
  SuggestWord[] similar=spellChecker.suggestSimilar(new Term("numbers","fvie"),2,ir,false);
  assertTrue(similar.length > 0);
  assertEquals("five",similar[0].string);
  similar=spellChecker.suggestSimilar(new Term("numbers","five"),2,ir,false);
  if (similar.length > 0) {
    assertFalse(similar[0].string.equals("five"));
  }
  similar=spellChecker.suggestSimilar(new Term("numbers","fvie"),2,ir,false);
  assertTrue(similar.length > 0);
  assertEquals("five",similar[0].string);
  similar=spellChecker.suggestSimilar(new Term("numbers","fiv"),2,ir,false);
  assertTrue(similar.length > 0);
  assertEquals("five",similar[0].string);
  similar=spellChecker.suggestSimilar(new Term("numbers","fives"),2,ir,false);
  assertTrue(similar.length > 0);
  assertEquals("five",similar[0].string);
  assertTrue(similar.length > 0);
  similar=spellChecker.suggestSimilar(new Term("numbers","fie"),2,ir,false);
  assertEquals("five",similar[0].string);
  for (int i=1000; i < 1100; i++) {
    Document doc=new Document();
    doc.add(newField("numbers",English.intToEnglish(i),Field.Store.NO,Field.Index.ANALYZED));
    writer.addDocument(doc);
  }
  ir.close();
  ir=writer.getReader();
  similar=spellChecker.suggestSimilar(new Term("numbers","tousand"),10,ir,false);
  assertTrue(similar.length > 0);
  assertEquals("thousand",similar[0].string);
  ir.close();
  writer.close();
  dir.close();
}
