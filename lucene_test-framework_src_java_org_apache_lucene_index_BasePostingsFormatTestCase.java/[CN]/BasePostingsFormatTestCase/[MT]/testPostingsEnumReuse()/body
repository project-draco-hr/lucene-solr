{
  Path path=createTempDir("testPostingsEnumReuse");
  Directory dir=newFSDirectory(path);
  FieldsProducer fieldsProducer=buildIndex(dir,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,random().nextBoolean(),true);
  Collections.shuffle(allTerms,random());
  FieldAndTerm fieldAndTerm=allTerms.get(0);
  Terms terms=fieldsProducer.terms(fieldAndTerm.field);
  TermsEnum te=terms.iterator(null);
  te.seekExact(fieldAndTerm.term);
  checkReuse(te,PostingsEnum.FLAG_FREQS,PostingsEnum.FLAG_ALL,false);
  if (isPostingsEnumReuseImplemented())   checkReuse(te,PostingsEnum.FLAG_ALL,PostingsEnum.FLAG_ALL,true);
  fieldsProducer.close();
  dir.close();
  IOUtils.rm(path);
}
