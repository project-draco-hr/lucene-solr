{
  int iters=5;
  for (int iter=0; iter < iters; iter++) {
    File path=_TestUtil.getTempDir("testPostingsFormat");
    Directory dir=newFSDirectory(path);
    boolean indexPayloads=random().nextBoolean();
    FieldsProducer fieldsProducer=buildIndex(dir,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,indexPayloads,false);
    testFields(fieldsProducer);
    testTerms(fieldsProducer,EnumSet.allOf(Option.class),IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS,false);
    fieldsProducer.close();
    fieldsProducer=null;
    dir.close();
    _TestUtil.rmDir(path);
  }
}
