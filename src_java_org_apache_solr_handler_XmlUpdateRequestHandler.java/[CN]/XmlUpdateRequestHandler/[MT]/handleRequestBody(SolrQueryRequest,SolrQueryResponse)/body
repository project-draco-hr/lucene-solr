{
  Iterable<ContentStream> streams=req.getContentStreams();
  if (streams == null) {
    throw new SolrException(400,"missing content stream");
  }
  for (  ContentStream stream : req.getContentStreams()) {
    String charset=getCharsetFromContentType(stream.getContentType());
    Reader reader=null;
    if (charset == null) {
      reader=new InputStreamReader(stream.getStream());
    }
 else {
      reader=new InputStreamReader(stream.getStream(),charset);
    }
    rsp.add("update",this.update(reader));
    try {
      reader.close();
    }
 catch (    Exception ex) {
    }
  }
}
