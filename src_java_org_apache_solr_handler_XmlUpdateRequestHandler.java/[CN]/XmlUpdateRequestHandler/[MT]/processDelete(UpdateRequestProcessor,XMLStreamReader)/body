{
  DeleteUpdateCommand deleteCmd=new DeleteUpdateCommand();
  deleteCmd.fromPending=true;
  deleteCmd.fromCommitted=true;
  for (int i=0; i < parser.getAttributeCount(); i++) {
    String attrName=parser.getAttributeLocalName(i);
    String attrVal=parser.getAttributeValue(i);
    if ("fromPending".equals(attrName)) {
      deleteCmd.fromPending=StrUtils.parseBoolean(attrVal);
    }
 else     if ("fromCommitted".equals(attrName)) {
      deleteCmd.fromCommitted=StrUtils.parseBoolean(attrVal);
    }
 else {
      log.warning("unexpected attribute delete/@" + attrName);
    }
  }
  String val=null;
  String mode=null;
  while (true) {
    int event=parser.next();
switch (event) {
case XMLStreamConstants.START_ELEMENT:
      mode=parser.getLocalName();
    if (!("id".equals(mode) || "query".equals(mode))) {
      log.warning("unexpected XML tag /delete/" + mode);
      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unexpected XML tag /delete/" + mode);
    }
  break;
case XMLStreamConstants.END_ELEMENT:
String currTag=parser.getLocalName();
if ("id".equals(currTag)) {
deleteCmd.id=val;
}
 else if ("query".equals(currTag)) {
deleteCmd.query=val;
}
 else {
log.warning("unexpected XML tag /delete/" + currTag);
throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"unexpected XML tag /delete/" + currTag);
}
processor.processDelete(deleteCmd);
return;
case XMLStreamConstants.CHARACTERS:
val=parser.getText();
break;
}
}
}
