{
  int[] tokCount={100,500,1000,2000,5000,10000};
  int[] modCounts={1,2,5,10,20,50,100,200,500};
  for (int k=0; k < tokCount.length; k++) {
    StringBuffer buffer=new StringBuffer();
    System.out.println("-----Tokens: " + tokCount[k] + "-----");
    for (int i=0; i < tokCount[k]; i++) {
      buffer.append(English.intToEnglish(i).toUpperCase()).append(' ');
    }
    ModuloSinkTokenizer sink=new ModuloSinkTokenizer(tokCount[k],100);
    Token next=new Token();
    TokenStream result=new TeeTokenFilter(new StandardFilter(new StandardTokenizer(new StringReader(buffer.toString()))),sink);
    while ((next=result.next(next)) != null) {
    }
    result=new ModuloTokenFilter(new StandardFilter(new StandardTokenizer(new StringReader(buffer.toString()))),100);
    next=new Token();
    List tmp=new ArrayList();
    while ((next=result.next(next)) != null) {
      tmp.add(next.clone());
    }
    List sinkList=sink.getTokens();
    assertTrue("tmp Size: " + tmp.size() + " is not: "+ sinkList.size(),tmp.size() == sinkList.size());
    for (int i=0; i < tmp.size(); i++) {
      Token tfTok=(Token)tmp.get(i);
      Token sinkTok=(Token)sinkList.get(i);
      assertTrue(tfTok.termText() + " is not equal to " + sinkTok.termText()+ " at token: "+ i,tfTok.termText().equals(sinkTok.termText()) == true);
    }
    for (int j=0; j < modCounts.length; j++) {
      int tfPos=0;
      long start=System.currentTimeMillis();
      for (int i=0; i < 20; i++) {
        next=new Token();
        result=new StandardFilter(new StandardTokenizer(new StringReader(buffer.toString())));
        while ((next=result.next(next)) != null) {
          tfPos+=next.getPositionIncrement();
        }
        next=new Token();
        result=new ModuloTokenFilter(new StandardFilter(new StandardTokenizer(new StringReader(buffer.toString()))),modCounts[j]);
        while ((next=result.next(next)) != null) {
          tfPos+=next.getPositionIncrement();
        }
      }
      long finish=System.currentTimeMillis();
      System.out.println("ModCount: " + modCounts[j] + " Two fields took "+ (finish - start)+ " ms");
      int sinkPos=0;
      start=System.currentTimeMillis();
      for (int i=0; i < 20; i++) {
        sink=new ModuloSinkTokenizer(tokCount[k],modCounts[j]);
        next=new Token();
        result=new TeeTokenFilter(new StandardFilter(new StandardTokenizer(new StringReader(buffer.toString()))),sink);
        while ((next=result.next(next)) != null) {
          sinkPos+=next.getPositionIncrement();
        }
        result=sink;
        while ((next=result.next(next)) != null) {
          sinkPos+=next.getPositionIncrement();
        }
      }
      finish=System.currentTimeMillis();
      System.out.println("ModCount: " + modCounts[j] + " Tee fields took "+ (finish - start)+ " ms");
      assertTrue(sinkPos + " does not equal: " + tfPos,sinkPos == tfPos);
    }
    System.out.println("- End Tokens: " + tokCount[k] + "-----");
  }
}
