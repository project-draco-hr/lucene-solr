{
  SinkTokenizer theDetector=new SinkTokenizer(null){
    public void add(    Token t){
      if (t != null && t.termText().equalsIgnoreCase("The")) {
        super.add(t);
      }
    }
  }
;
  SinkTokenizer dogDetector=new SinkTokenizer(null){
    public void add(    Token t){
      if (t != null && t.termText().equalsIgnoreCase("Dogs")) {
        super.add(t);
      }
    }
  }
;
  TokenStream source1=new CachingTokenFilter(new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(new StringReader(buffer1.toString())),theDetector),dogDetector));
  TokenStream source2=new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(new StringReader(buffer2.toString())),theDetector),dogDetector);
  Token token=null;
  int i=0;
  while ((token=source1.next()) != null) {
    assertTrue(token.termText() + " is not equal to " + tokens1[i],token.termText().equals(tokens1[i]) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens1.length,i == tokens1.length);
  assertTrue("theDetector Size: " + theDetector.getTokens().size() + " is not: "+ 2,theDetector.getTokens().size() == 2);
  assertTrue("dogDetector Size: " + dogDetector.getTokens().size() + " is not: "+ 1,dogDetector.getTokens().size() == 1);
  i=0;
  while ((token=source2.next()) != null) {
    assertTrue(token.termText() + " is not equal to " + tokens2[i],token.termText().equals(tokens2[i]) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens2.length,i == tokens2.length);
  assertTrue("theDetector Size: " + theDetector.getTokens().size() + " is not: "+ 4,theDetector.getTokens().size() == 4);
  assertTrue("dogDetector Size: " + dogDetector.getTokens().size() + " is not: "+ 2,dogDetector.getTokens().size() == 2);
  i=0;
  while ((token=theDetector.next()) != null) {
    assertTrue(token.termText() + " is not equal to " + "The",token.termText().equalsIgnoreCase("The") == true);
    i++;
  }
  assertTrue(i + " does not equal: " + theDetector.getTokens().size(),i == theDetector.getTokens().size());
  i=0;
  while ((token=dogDetector.next()) != null) {
    assertTrue(token.termText() + " is not equal to " + "Dogs",token.termText().equalsIgnoreCase("Dogs") == true);
    i++;
  }
  assertTrue(i + " does not equal: " + dogDetector.getTokens().size(),i == dogDetector.getTokens().size());
  source1.reset();
  TokenStream lowerCasing=new LowerCaseFilter(source1);
  i=0;
  while ((token=lowerCasing.next()) != null) {
    assertTrue(token.termText() + " is not equal to " + tokens1[i].toLowerCase(),token.termText().equals(tokens1[i].toLowerCase()) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens1.length,i == tokens1.length);
}
