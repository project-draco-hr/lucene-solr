{
  SinkTokenizer theDetector=new SinkTokenizer(null){
    public void add(    AttributeSource a) throws IOException {
      TermAttribute termAtt=null;
      if (a.hasAttribute(TermAttribute.class)) {
        termAtt=(TermAttribute)a.getAttribute(TermAttribute.class);
      }
      if (termAtt != null && termAtt.term().equalsIgnoreCase("The")) {
        super.add(a);
      }
    }
  }
;
  SinkTokenizer dogDetector=new SinkTokenizer(null){
    public void add(    AttributeSource a) throws IOException {
      TermAttribute termAtt=null;
      if (a.hasAttribute(TermAttribute.class)) {
        termAtt=(TermAttribute)a.getAttribute(TermAttribute.class);
      }
      if (termAtt != null && termAtt.term().equalsIgnoreCase("Dogs")) {
        super.add(a);
      }
    }
  }
;
  TokenStream source1=new CachingTokenFilter(new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(new StringReader(buffer1.toString())),theDetector),dogDetector));
  TokenStream source2=new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(new StringReader(buffer2.toString())),theDetector),dogDetector);
  int i=0;
  TermAttribute termAtt=(TermAttribute)source1.getAttribute(TermAttribute.class);
  while (source1.incrementToken()) {
    assertTrue(termAtt.term() + " is not equal to " + tokens1[i],termAtt.term().equals(tokens1[i]) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens1.length,i == tokens1.length);
  assertTrue("theDetector Size: " + theDetector.getTokens().size() + " is not: "+ 2,theDetector.getTokens().size() == 2);
  assertTrue("dogDetector Size: " + dogDetector.getTokens().size() + " is not: "+ 1,dogDetector.getTokens().size() == 1);
  i=0;
  termAtt=(TermAttribute)source2.getAttribute(TermAttribute.class);
  while (source2.incrementToken()) {
    assertTrue(termAtt.term() + " is not equal to " + tokens2[i],termAtt.term().equals(tokens2[i]) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens2.length,i == tokens2.length);
  assertTrue("theDetector Size: " + theDetector.getTokens().size() + " is not: "+ 4,theDetector.getTokens().size() == 4);
  assertTrue("dogDetector Size: " + dogDetector.getTokens().size() + " is not: "+ 2,dogDetector.getTokens().size() == 2);
  i=0;
  termAtt=(TermAttribute)theDetector.getAttribute(TermAttribute.class);
  while (theDetector.incrementToken()) {
    assertTrue(termAtt.term() + " is not equal to " + "The",termAtt.term().equalsIgnoreCase("The") == true);
    i++;
  }
  assertTrue(i + " does not equal: " + theDetector.getTokens().size(),i == theDetector.getTokens().size());
  i=0;
  termAtt=(TermAttribute)dogDetector.getAttribute(TermAttribute.class);
  while (dogDetector.incrementToken()) {
    assertTrue(termAtt.term() + " is not equal to " + "Dogs",termAtt.term().equalsIgnoreCase("Dogs") == true);
    i++;
  }
  assertTrue(i + " does not equal: " + dogDetector.getTokens().size(),i == dogDetector.getTokens().size());
  source1.reset();
  TokenStream lowerCasing=new LowerCaseFilter(source1);
  i=0;
  termAtt=(TermAttribute)lowerCasing.getAttribute(TermAttribute.class);
  while (lowerCasing.incrementToken()) {
    assertTrue(termAtt.term() + " is not equal to " + tokens1[i].toLowerCase(),termAtt.term().equals(tokens1[i].toLowerCase()) == true);
    i++;
  }
  assertTrue(i + " does not equal: " + tokens1.length,i == tokens1.length);
}
