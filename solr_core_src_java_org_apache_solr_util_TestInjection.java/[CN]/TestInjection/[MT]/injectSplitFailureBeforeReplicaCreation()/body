{
  if (splitFailureBeforeReplicaCreation != null) {
    Random rand=random();
    if (null == rand)     return true;
    Pair<Boolean,Integer> pair=parseValue(splitFailureBeforeReplicaCreation);
    boolean enabled=pair.first();
    int chanceIn100=pair.second();
    if (enabled && rand.nextInt(100) >= (100 - chanceIn100)) {
      log.info("Injecting failure in creating replica for sub-shard");
      throw new SolrException(ErrorCode.SERVER_ERROR,"Unable to create replica");
    }
  }
  return true;
}
