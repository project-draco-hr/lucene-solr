{
  String html="<div class=\"foo\">this is some text</div> here is a <a href=\"#bar\">link</a> and " + "another <a href=\"http://lucene.apache.org/\">link</a>. " + "This is an entity: &amp; plus a &lt;.  Here is an &. <!-- is a comment -->";
  String gold=" this is some text  here is a  link  and " + "another  link . " + "This is an entity: & plus a <.  Here is an &.  ";
  HTMLStripCharFilter reader=new HTMLStripCharFilter(CharReader.get(new StringReader(html)));
  StringBuilder builder=new StringBuilder();
  int ch=-1;
  char[] goldArray=gold.toCharArray();
  int position=0;
  while ((ch=reader.read()) != -1) {
    char theChar=(char)ch;
    builder.append(theChar);
    assertTrue("\"" + theChar + "\""+ " at position: "+ position+ " does not equal: "+ goldArray[position]+ " Buffer so far: "+ builder+ "<EOB>",theChar == goldArray[position]);
    position++;
  }
  assertTrue(gold + " is not equal to " + builder.toString(),gold.equals(builder.toString()) == true);
}
