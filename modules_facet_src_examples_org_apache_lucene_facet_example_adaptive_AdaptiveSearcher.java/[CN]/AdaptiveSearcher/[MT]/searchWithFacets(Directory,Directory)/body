{
  TaxonomyReader taxo=new LuceneTaxonomyReader(taxoDir);
  IndexReader indexReader=IndexReader.open(indexDir);
  IndexSearcher searcher=new IndexSearcher(indexReader);
  Query q=new TermQuery(new Term(SimpleUtils.TEXT,"white"));
  ExampleUtils.log("Query: " + q);
  TopScoreDocCollector topDocsCollector=TopScoreDocCollector.create(10,true);
  ScoredDocIdCollector docIdsCollecor=ScoredDocIdCollector.create(indexReader.maxDoc(),false);
  FacetSearchParams facetSearchParams=new FacetSearchParams();
  facetSearchParams.addFacetRequest(new CountFacetRequest(new CategoryPath("root","a"),10));
  searcher.search(q,MultiCollector.wrap(topDocsCollector,docIdsCollecor));
  AdaptiveFacetsAccumulator accumulator=new AdaptiveFacetsAccumulator(facetSearchParams,indexReader,taxo);
  List<FacetResult> res=accumulator.accumulate(docIdsCollecor.getScoredDocIDs());
  int i=0;
  for (  FacetResult facetResult : res) {
    ExampleUtils.log("Res " + (i++) + ": "+ facetResult);
  }
  indexReader.close();
  taxo.close();
  return res;
}
