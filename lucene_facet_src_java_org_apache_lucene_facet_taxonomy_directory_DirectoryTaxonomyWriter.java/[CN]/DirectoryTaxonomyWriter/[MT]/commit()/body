{
  ensureOpen();
  String epochStr=indexWriter.getCommitData().get(INDEX_EPOCH);
  if (epochStr == null || Long.parseLong(epochStr,16) != indexEpoch) {
    indexWriter.setCommitData(combinedCommitData(indexWriter.getCommitData()));
  }
  return indexWriter.commit();
}
