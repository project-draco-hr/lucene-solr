{
  if (context.ord == 0) {
    policy.onUse(in);
  }
  DocIdSet set=get(in,context);
  if (set == null) {
    set=in.getDocIdSet(context,null);
    if (policy.shouldCache(in,context,set)) {
      set=docIdSetToCache(set,context.reader());
      if (set == null) {
        set=DocIdSet.EMPTY;
      }
      putIfAbsent(in,context,set);
    }
  }
  return set == DocIdSet.EMPTY ? null : BitsFilteredDocIdSet.wrap(set,acceptDocs);
}
