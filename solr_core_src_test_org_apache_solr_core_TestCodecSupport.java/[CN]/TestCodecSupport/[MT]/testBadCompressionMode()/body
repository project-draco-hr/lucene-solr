{
  try {
    doTestCompressionMode("something_that_doesnt_exist","something_that_doesnt_exist");
    fail("Expecting exception");
  }
 catch (  SolrException e) {
    assertEquals(SolrException.ErrorCode.SERVER_ERROR.code,e.code());
    assertTrue("Unexpected Exception message: " + e.getMessage(),e.getMessage().contains("Unable to reload core"));
  }
  SchemaCodecFactory factory=new SchemaCodecFactory();
  NamedList<String> nl=new NamedList<>();
  nl.add(SchemaCodecFactory.COMPRESSION_MODE,"something_that_doesnt_exist");
  try {
    factory.init(nl);
    fail("Expecting exception");
  }
 catch (  SolrException e) {
    assertEquals(SolrException.ErrorCode.SERVER_ERROR.code,e.code());
    assertTrue("Unexpected Exception message: " + e.getMessage(),e.getMessage().contains("Invalid compressionMode: 'something_that_doesnt_exist'"));
  }
  factory=new SchemaCodecFactory();
  nl=new NamedList<>();
  nl.add(SchemaCodecFactory.COMPRESSION_MODE,"");
  try {
    factory.init(nl);
    fail("Expecting exception");
  }
 catch (  SolrException e) {
    assertEquals(SolrException.ErrorCode.SERVER_ERROR.code,e.code());
    assertTrue("Unexpected Exception message: " + e.getMessage(),e.getMessage().contains("Invalid compressionMode: ''"));
  }
}
