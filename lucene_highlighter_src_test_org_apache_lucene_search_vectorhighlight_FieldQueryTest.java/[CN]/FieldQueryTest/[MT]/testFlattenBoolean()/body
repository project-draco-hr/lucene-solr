{
  initBoost();
  BooleanQuery booleanQuery=new BooleanQuery();
  booleanQuery.setBoost(boost);
  booleanQuery.add(tq("A"),Occur.MUST);
  booleanQuery.add(tq("B"),Occur.MUST);
  booleanQuery.add(tq("C"),Occur.SHOULD);
  BooleanQuery innerQuery=new BooleanQuery();
  innerQuery.add(tq("D"),Occur.MUST);
  innerQuery.add(tq("E"),Occur.MUST);
  booleanQuery.add(innerQuery,Occur.MUST_NOT);
  FieldQuery fq=new FieldQuery(booleanQuery,true,true);
  Set<Query> flatQueries=new HashSet<>();
  fq.flatten(booleanQuery,reader,flatQueries);
  assertCollectionQueries(flatQueries,tq(boost,"A"),tq(boost,"B"),tq(boost,"C"));
}
