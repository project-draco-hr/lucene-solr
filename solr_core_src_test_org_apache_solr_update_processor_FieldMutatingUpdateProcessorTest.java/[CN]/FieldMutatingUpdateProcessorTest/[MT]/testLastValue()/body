{
  SolrInputDocument d=null;
  d=processAdd("last-value",doc(f("id","1111"),f("foo_s","string1","string222"),f("bar_s","string3"),f("yak_t","string4","string5")));
  assertNotNull(d);
  assertEquals(Arrays.asList("string222"),d.getFieldValues("foo_s"));
  assertEquals(Arrays.asList("string3"),d.getFieldValues("bar_s"));
  assertEquals(Arrays.asList("string4","string5"),d.getFieldValues("yak_t"));
  SolrInputField special=null;
  special=new SolrInputField("foo_s");
  special.setValue(new TreeSet<String>(Arrays.asList("ggg","first","last","hhh")),1.2F);
  d=processAdd("last-value",doc(f("id","1111"),special));
  assertNotNull(d);
  assertEquals("last",d.getFieldValue("foo_s"));
  special=new SolrInputField("foo_s");
  special.setValue(Arrays.asList("first","ggg","hhh","last"),1.2F);
  d=processAdd("last-value",doc(f("id","1111"),special));
  assertNotNull(d);
  assertEquals("last",d.getFieldValue("foo_s"));
  special=new SolrInputField("foo_s");
  special.setValue(new LinkedHashSet<String>(Arrays.asList("first","ggg","hhh","last")),1.2F);
  d=processAdd("last-value",doc(f("id","1111"),special));
  assertNotNull(d);
  assertEquals("last",d.getFieldValue("foo_s"));
}
