{
  try {
    TermVectorsWriter writer=new TermVectorsWriter(dir,seg,fieldInfos);
    writeDocument(writer,testFields.length);
    writer.close();
    assertTrue(writer.isDocumentOpen() == false);
    assertTrue(dir.fileExists(seg + TermVectorsWriter.TVD_EXTENSION));
    assertTrue(dir.fileExists(seg + TermVectorsWriter.TVX_EXTENSION));
    TermVectorsReader reader=new TermVectorsReader(dir,seg,fieldInfos);
    assertTrue(reader != null);
    for (int j=0; j < testFields.length; j++) {
      checkTermVector(reader,0,testFields[j]);
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
    assertTrue(false);
  }
}
