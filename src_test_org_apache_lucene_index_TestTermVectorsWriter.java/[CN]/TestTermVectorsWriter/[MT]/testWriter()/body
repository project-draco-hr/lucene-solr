{
  try {
    TermVectorsWriter writer=new TermVectorsWriter(dir,seg,fieldInfos);
    writer.openDocument();
    assertTrue(writer.isDocumentOpen() == true);
    writeField(writer,testFields[0]);
    writer.closeDocument();
    writer.close();
    assertTrue(writer.isDocumentOpen() == false);
    assertTrue(dir.fileExists(seg + TermVectorsWriter.TVD_EXTENSION));
    assertTrue(dir.fileExists(seg + TermVectorsWriter.TVX_EXTENSION));
    TermVectorsReader reader=new TermVectorsReader(dir,seg,fieldInfos);
    assertTrue(reader != null);
    checkTermVector(reader,0,testFields[0]);
  }
 catch (  IOException e) {
    e.printStackTrace();
    assertTrue(false);
  }
}
