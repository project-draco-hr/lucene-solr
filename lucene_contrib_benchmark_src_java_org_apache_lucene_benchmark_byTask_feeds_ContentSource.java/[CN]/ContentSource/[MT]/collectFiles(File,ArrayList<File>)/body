{
  if (!dir.canRead()) {
    return;
  }
  File[] dirFiles=dir.listFiles();
  Arrays.sort(dirFiles);
  for (int i=0; i < dirFiles.length; i++) {
    File file=dirFiles[i];
    if (file.isDirectory()) {
      collectFiles(file,files);
    }
 else     if (file.canRead()) {
      files.add(file);
    }
  }
}
