{
  try (BaseDirectoryWrapper dirCopy=newDirectory()){
    dirCopy.setCheckIndexOnClose(false);
    for (    String name : dir1.listAll()) {
      if (name.equals(victim) == false) {
        dirCopy.copyFrom(dir1,name,name,IOContext.DEFAULT);
      }
 else {
        dirCopy.copyFrom(dir2,name,name,IOContext.DEFAULT);
      }
      dirCopy.sync(Collections.singleton(name));
    }
    try {
      DirectoryReader.open(dirCopy).close();
      fail("wrong file " + victim + " not detected");
    }
 catch (    CorruptIndexException|EOFException|IndexFormatTooOldException e) {
    }
    try {
      TestUtil.checkIndex(dirCopy,true,true);
      fail("wrong file " + victim + " not detected");
    }
 catch (    CorruptIndexException|EOFException|IndexFormatTooOldException e) {
    }
  }
 }
