{
  if (!LuceneTestCase.OLD_FORMAT_IMPERSONATION_IS_ACTIVE) {
    return super.normsConsumer(state);
  }
 else {
    String filename=IndexFileNames.segmentFileName(state.segmentInfo.name,"nrm",IndexFileNames.COMPOUND_FILE_EXTENSION);
    return new Lucene40DocValuesWriter(state,filename,Lucene40FieldInfosReader.LEGACY_NORM_TYPE_KEY);
  }
}
