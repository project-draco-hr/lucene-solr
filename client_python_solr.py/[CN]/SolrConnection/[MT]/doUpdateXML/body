def doUpdateXML(self, request):
    try:
        rsp = self.doPost((self.solrBase + '/update'), request, self.xmlheaders)
        data = rsp.read()
    finally:
        if (not self.persistent):
            self.conn.close()
    if (data.startswith('<result status="') and (not data.startswith('<result status="0"'))):
        data = self.decoder(data)[0]
        parsed = parseString(data)
        status = parsed.documentElement.getAttribute('status')
        if (status != 0):
            reason = parsed.documentElement.firstChild.nodeValue
            raise SolrException(rsp.status, reason)
    return data
