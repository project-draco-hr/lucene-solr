{
  String jaas="SolrClient {\n" + "  com.sun.security.auth.module.Krb5LoginModule required\n" + "  useKeyTab=true\n"+ "  keyTab=\"/opt/keytabs/solr.keytab\"\n"+ "  storeKey=true\n"+ " doNotPrompt=true\n"+ "  useTicketCache=false\n"+ "  debug=true\n"+ "  principal=\"HTTP/127.0.0.1\";\n"+ "};\n";
  String tmpDir=createTempDir().toString();
  FileUtils.write(new File(tmpDir + File.separator + "jaas.conf"),jaas);
  Configuration conf=new KerberosTestUtil.JaasConfiguration("solr",new File("/opt/keytabs/solr.keytab"),"SolrClient");
  Configuration.setConfiguration(conf);
  System.setProperty("java.security.auth.login.config",tmpDir + File.separator + "jaas.conf");
  System.setProperty("solr.kerberos.jaas.appname","SolrClient");
  System.setProperty("solr.kerberos.cookie.domain","127.0.0.1");
  System.setProperty("solr.kerberos.principal","HTTP/127.0.0.1@EXAMPLE.COM");
  System.setProperty("solr.kerberos.keytab","/opt/keytabs/solr.keytab");
  System.setProperty("authenticationPlugin","org.apache.solr.security.KerberosPlugin");
}
