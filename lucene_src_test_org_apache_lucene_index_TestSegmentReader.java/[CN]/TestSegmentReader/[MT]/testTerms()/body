{
  FieldsEnum fields=MultiFields.getFields(reader).iterator();
  String field;
  while ((field=fields.next()) != null) {
    Terms terms=fields.terms();
    assertNotNull(terms);
    TermsEnum termsEnum=terms.iterator(null);
    while (termsEnum.next() != null) {
      BytesRef term=termsEnum.term();
      assertTrue(term != null);
      String fieldValue=(String)DocHelper.nameValues.get(field);
      assertTrue(fieldValue.indexOf(term.utf8ToString()) != -1);
    }
  }
  DocsEnum termDocs=_TestUtil.docs(random,reader,DocHelper.TEXT_FIELD_1_KEY,new BytesRef("field"),MultiFields.getLiveDocs(reader),null,false);
  assertTrue(termDocs.nextDoc() != DocsEnum.NO_MORE_DOCS);
  termDocs=_TestUtil.docs(random,reader,DocHelper.NO_NORMS_KEY,new BytesRef(DocHelper.NO_NORMS_TEXT),MultiFields.getLiveDocs(reader),null,false);
  assertTrue(termDocs.nextDoc() != DocsEnum.NO_MORE_DOCS);
  DocsAndPositionsEnum positions=MultiFields.getTermPositionsEnum(reader,MultiFields.getLiveDocs(reader),DocHelper.TEXT_FIELD_1_KEY,new BytesRef("field"));
  assertTrue(positions.nextDoc() != DocsEnum.NO_MORE_DOCS);
  assertTrue(positions.docID() == 0);
  assertTrue(positions.nextPosition() >= 0);
}
