{
  Random random=newRandom();
  File dir=_TestUtil.getTempDir(INDEX_PATH);
  try {
    Directory fsDir=FSDirectory.open(dir);
    runTest(random,fsDir);
    fsDir.close();
  }
  finally {
    _TestUtil.rmDir(dir);
  }
  MockRAMDirectory dir2=new MockRAMDirectory();
  runTest(random,dir2);
  dir2.close();
}
