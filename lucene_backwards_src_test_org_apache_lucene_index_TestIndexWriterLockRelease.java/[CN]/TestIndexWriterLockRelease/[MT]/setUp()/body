{
  super.setUp();
  if (this.__test_dir == null) {
    String tempDir=System.getProperty("tempDir",System.getProperty("java.io.tmpdir"));
    if (tempDir == null)     throw new IOException("System property tempDir undefined, cannot run test");
    this.__test_dir=new File(tempDir,"testIndexWriter");
    if (this.__test_dir.exists()) {
      throw new IOException("test directory \"" + this.__test_dir.getPath() + "\" already exists (please remove by hand)");
    }
    if (!this.__test_dir.mkdirs() && !this.__test_dir.isDirectory()) {
      throw new IOException("unable to create test directory \"" + this.__test_dir.getPath() + "\"");
    }
  }
}
