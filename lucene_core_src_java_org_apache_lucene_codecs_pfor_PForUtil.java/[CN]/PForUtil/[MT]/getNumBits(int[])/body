{
  if (isAllEqual(data)) {
    return 0;
  }
  int optBits=1;
  int optSize=estimateCompressedSize(data,optBits);
  for (int i=2; i <= 32; ++i) {
    int curSize=estimateCompressedSize(data,i);
    if (curSize < optSize) {
      optSize=curSize;
      optBits=i;
    }
  }
  return optBits;
}
