{
  boolean foundFiles=false;
  final Path examplesDir=Paths.get(ConfLoader.class.getResource(".").toURI());
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(examplesDir,"*.alg")){
    for (    Path path : stream) {
      Config config=new Config(Files.newBufferedReader(path,StandardCharsets.UTF_8));
      String contentSource=config.get("content.source",null);
      if (contentSource != null) {
        Class.forName(contentSource);
      }
      config.set("work.dir",createTempDir(LuceneTestCase.getTestClass().getSimpleName()).toAbsolutePath().toString());
      config.set("content.source",MockContentSource.class.getName());
      String dir=config.get("content.source",null);
      if (dir != null) {
        Class.forName(dir);
      }
      config.set("directory",RAMDirectory.class.getName());
      if (config.get("line.file.out",null) != null) {
        config.set("line.file.out",createTempFile("linefile",".txt").toAbsolutePath().toString());
      }
      if (config.get("query.maker",null) != null) {
        Class.forName(config.get("query.maker",null));
        config.set("query.maker",MockQueryMaker.class.getName());
      }
      PerfRunData data=new PerfRunData(config);
      new Algorithm(data);
      foundFiles=true;
    }
  }
   if (!foundFiles) {
    fail("could not find any .alg files!");
  }
}
