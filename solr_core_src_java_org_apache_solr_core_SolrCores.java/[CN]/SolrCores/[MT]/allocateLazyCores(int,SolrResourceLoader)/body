{
  if (cacheSize != Integer.MAX_VALUE) {
    CoreContainer.log.info("Allocating transient cache for {} transient cores",cacheSize);
    transientCores=new LinkedHashMap<String,SolrCore>(cacheSize,0.75f,true){
      @Override protected boolean removeEldestEntry(      Map.Entry<String,SolrCore> eldest){
        if (size() > cacheSize) {
synchronized (modifyLock) {
            SolrCore coreToClose=eldest.getValue();
            log.info("Closing transient core [{}]",coreToClose.getName());
            pendingCloses.add(coreToClose);
            modifyLock.notifyAll();
          }
          return true;
        }
        return false;
      }
    }
;
  }
}
