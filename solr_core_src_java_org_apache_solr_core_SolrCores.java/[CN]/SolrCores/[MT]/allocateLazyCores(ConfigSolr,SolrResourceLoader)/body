{
  final int transientCacheSize=cfg.getInt(ConfigSolr.CfgProp.SOLR_TRANSIENTCACHESIZE,Integer.MAX_VALUE);
  if (transientCacheSize != Integer.MAX_VALUE) {
    CoreContainer.log.info("Allocating transient cache for {} transient cores",transientCacheSize);
    transientCores=new LinkedHashMap<String,SolrCore>(transientCacheSize,0.75f,true){
      @Override protected boolean removeEldestEntry(      Map.Entry<String,SolrCore> eldest){
        if (size() > transientCacheSize) {
synchronized (modifyLock) {
            SolrCore coreToClose=eldest.getValue();
            logger.info("Closing transient core [{}]",coreToClose.getName());
            pendingCloses.add(coreToClose);
            modifyLock.notifyAll();
          }
          return true;
        }
        return false;
      }
    }
;
  }
}
