{
  long time=System.nanoTime();
  long timeout=time + TimeUnit.NANOSECONDS.convert(timeoutMs,TimeUnit.MILLISECONDS);
synchronized (modifyLock) {
    while (isCoreLoading(core)) {
      try {
        modifyLock.wait(500);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
      }
      if (System.nanoTime() >= timeout) {
        log.warn("Timed out waiting for SolrCore, {},  to finish loading.",core);
        break;
      }
    }
  }
}
