{
  Document d=new Document();
  FieldType customType1=new FieldType(TextField.TYPE_STORED);
  customType1.setTokenized(false);
  customType1.setOmitNorms(true);
  ArrayList<Field> fields=new ArrayList<Field>();
  String idString=getIdString();
  Field idField=newField("id",idString,customType1);
  fields.add(idField);
  int nFields=nextInt(maxFields);
  for (int i=0; i < nFields; i++) {
    FieldType customType=new FieldType();
switch (nextInt(4)) {
case 0:
      break;
case 1:
    customType.setStoreTermVectors(true);
  break;
case 2:
customType.setStoreTermVectors(true);
customType.setStoreTermVectorPositions(true);
break;
case 3:
customType.setStoreTermVectors(true);
customType.setStoreTermVectorOffsets(true);
break;
}
switch (nextInt(4)) {
case 0:
customType.setStored(true);
customType.setOmitNorms(true);
customType.setIndexed(true);
fields.add(newField("f" + nextInt(100),getString(1),customType));
break;
case 1:
customType.setIndexed(true);
customType.setTokenized(true);
fields.add(newField("f" + nextInt(100),getString(0),customType));
break;
case 2:
customType.setStored(true);
customType.setStoreTermVectors(false);
customType.setStoreTermVectorOffsets(false);
customType.setStoreTermVectorPositions(false);
fields.add(newField("f" + nextInt(100),getString(0),customType));
break;
case 3:
customType.setStored(true);
customType.setIndexed(true);
customType.setTokenized(true);
fields.add(newField("f" + nextInt(100),getString(bigFieldSize),customType));
break;
}
}
if (sameFieldOrder) {
Collections.sort(fields,fieldNameComparator);
}
 else {
Collections.swap(fields,nextInt(fields.size()),0);
}
for (int i=0; i < fields.size(); i++) {
d.add(fields.get(i));
}
if (VERBOSE) {
System.out.println(Thread.currentThread().getName() + ": indexing id:" + idString);
}
w.updateDocument(new Term("id",idString),d);
docs.put(idString,d);
}
