{
  createTempDir();
  tmpSolrHome=new File(TEMP_DIR + File.separator + TestManagedSchemaFieldResource.class.getSimpleName()+ System.currentTimeMillis());
  tmpConfDir=new File(tmpSolrHome,confDir);
  FileUtils.copyDirectory(new File(TEST_HOME()),tmpSolrHome.getAbsoluteFile());
  final SortedMap<ServletHolder,String> extraServlets=new TreeMap<ServletHolder,String>();
  final ServletHolder solrRestApi=new ServletHolder("SolrRestApi",ServerServlet.class);
  solrRestApi.setInitParameter("org.restlet.application","org.apache.solr.rest.SolrRestApi");
  extraServlets.put(solrRestApi,"/schema/*");
  System.setProperty("managed.schema.mutable","true");
  System.setProperty("enable.update.log","false");
  createJettyAndHarness(tmpSolrHome.getAbsolutePath(),"solrconfig-managed-schema.xml","schema-rest.xml","/solr",true,extraServlets);
}
