{
  TokenStream source;
  try {
    source=analyzer.reusableTokenStream(field,new StringReader(part));
    source.reset();
  }
 catch (  IOException e) {
    source=analyzer.tokenStream(field,new StringReader(part));
  }
  BytesRef result=new BytesRef();
  TermToBytesRefAttribute termAtt=source.getAttribute(TermToBytesRefAttribute.class);
  try {
    if (!source.incrementToken())     throw new IllegalArgumentException("analyzer returned no terms for range part: " + part);
    termAtt.toBytesRef(result);
    if (source.incrementToken())     throw new IllegalArgumentException("analyzer returned too many terms for range part: " + part);
  }
 catch (  IOException e) {
    throw new RuntimeException("error analyzing range part: " + part,e);
  }
  try {
    source.close();
  }
 catch (  IOException ignored) {
  }
  return result;
}
