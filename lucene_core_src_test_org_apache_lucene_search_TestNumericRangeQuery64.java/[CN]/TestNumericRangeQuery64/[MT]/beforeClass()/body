{
  noDocs=atLeast(4096);
  distance=(1L << 60) / noDocs;
  directory=newDirectory();
  RandomIndexWriter writer=new RandomIndexWriter(random(),directory,newIndexWriterConfig(new MockAnalyzer(random())).setMaxBufferedDocs(TestUtil.nextInt(random(),100,1000)).setMergePolicy(newLogMergePolicy()));
  final FieldType storedLong=new FieldType(LongField.TYPE_NOT_STORED);
  storedLong.setStored(true);
  storedLong.freeze();
  final FieldType storedLong8=new FieldType(storedLong);
  storedLong8.setNumericPrecisionStep(8);
  final FieldType storedLong4=new FieldType(storedLong);
  storedLong4.setNumericPrecisionStep(4);
  final FieldType storedLong6=new FieldType(storedLong);
  storedLong6.setNumericPrecisionStep(6);
  final FieldType storedLong2=new FieldType(storedLong);
  storedLong2.setNumericPrecisionStep(2);
  final FieldType storedLongNone=new FieldType(storedLong);
  storedLongNone.setNumericPrecisionStep(Integer.MAX_VALUE);
  final FieldType unstoredLong=LongField.TYPE_NOT_STORED;
  final FieldType unstoredLong8=new FieldType(unstoredLong);
  unstoredLong8.setNumericPrecisionStep(8);
  final FieldType unstoredLong6=new FieldType(unstoredLong);
  unstoredLong6.setNumericPrecisionStep(6);
  final FieldType unstoredLong4=new FieldType(unstoredLong);
  unstoredLong4.setNumericPrecisionStep(4);
  final FieldType unstoredLong2=new FieldType(unstoredLong);
  unstoredLong2.setNumericPrecisionStep(2);
  LongField field8=new LongField("field8",0L,storedLong8), field6=new LongField("field6",0L,storedLong6), field4=new LongField("field4",0L,storedLong4), field2=new LongField("field2",0L,storedLong2), fieldNoTrie=new LongField("field" + Integer.MAX_VALUE,0L,storedLongNone), ascfield8=new LongField("ascfield8",0L,unstoredLong8), ascfield6=new LongField("ascfield6",0L,unstoredLong6), ascfield4=new LongField("ascfield4",0L,unstoredLong4), ascfield2=new LongField("ascfield2",0L,unstoredLong2);
  Document doc=new Document();
  doc.add(field8);
  doc.add(field6);
  doc.add(field4);
  doc.add(field2);
  doc.add(fieldNoTrie);
  doc.add(ascfield8);
  doc.add(ascfield6);
  doc.add(ascfield4);
  doc.add(ascfield2);
  for (int l=0; l < noDocs; l++) {
    long val=distance * l + startOffset;
    field8.setLongValue(val);
    field6.setLongValue(val);
    field4.setLongValue(val);
    field2.setLongValue(val);
    fieldNoTrie.setLongValue(val);
    val=l - (noDocs / 2);
    ascfield8.setLongValue(val);
    ascfield6.setLongValue(val);
    ascfield4.setLongValue(val);
    ascfield2.setLongValue(val);
    writer.addDocument(doc);
  }
  reader=writer.getReader();
  searcher=newSearcher(reader);
  writer.close();
}
