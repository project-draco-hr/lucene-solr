{
  if (hitcount < 0 || offset < 0)   throw new IllegalArgumentException("hit count and offset must not be less than 0");
  if (this.isClosed.get())   throw new IllegalStateException("Searcher is closed");
  if (query == null)   throw new RuntimeException("query is null can not apply search");
  if (feedId == null)   throw new IllegalArgumentException("feed id must not be null");
  QueryFilter filter=null;
synchronized (queryFilterCache) {
    filter=queryFilterCache.get(feedId);
  }
  if (filter == null)   filter=new QueryFilter(new TermQuery(new Term(IndexDocument.FIELD_FEED_ID,feedId)));
  IndexSearcher indexSearcher=this.searcher.get();
  Hits hits=indexSearcher.search(query,filter);
synchronized (queryFilterCache) {
    queryFilterCache.put(feedId,filter);
  }
  return collectHits(hits,hitcount,offset);
}
