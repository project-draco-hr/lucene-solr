{
  final ThreadState perThread=perThreadPool.getAndLock(Thread.currentThread(),documentsWriter);
  if (perThread.isActive() && perThread.perThread.deleteQueue != documentsWriter.deleteQueue) {
    addFlushableState(perThread);
  }
  return perThread;
}
