{
  super.setUp();
  dir=newDirectory();
  indexWriter=new RandomIndexWriter(random(),dir);
  FieldType ft=new FieldType(TextField.TYPE_STORED);
  ft.setStoreTermVectors(true);
  ft.setStoreTermVectorOffsets(true);
  ft.setStoreTermVectorPositions(true);
  Document doc;
  Random rnd=random();
  for (int i=0; i < 1000; i++) {
    doc=new Document();
    doc.add(new Field(idFieldName,"id" + Integer.toString(i),ft));
    doc.add(new Field(textFieldName,TestUtil.randomUnicodeString(rnd,1024),ft));
    doc.add(new Field(classFieldName,Integer.toString(rnd.nextInt(10)),ft));
    indexWriter.addDocument(doc);
  }
  indexWriter.commit();
  indexWriter.forceMerge(1);
  originalIndex=getOnlyLeafReader(indexWriter.getReader());
}
