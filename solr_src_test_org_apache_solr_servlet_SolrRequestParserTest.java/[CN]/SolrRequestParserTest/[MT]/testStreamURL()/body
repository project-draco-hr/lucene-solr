{
  boolean ok=false;
  String url="http://www.apache.org/dist/lucene/solr/";
  String txt=null;
  try {
    URLConnection connection=new URL(url).openConnection();
    connection.setConnectTimeout(5000);
    connection.setReadTimeout(5000);
    connection.connect();
    txt=IOUtils.toString(connection.getInputStream());
  }
 catch (  Exception ex) {
    System.out.println("this test only works if you have a network connection.");
    Assume.assumeNoException(ex);
    return;
  }
  SolrCore core=h.getCore();
  Map<String,String[]> args=new HashMap<String,String[]>();
  args.put(CommonParams.STREAM_URL,new String[]{url});
  List<ContentStream> streams=new ArrayList<ContentStream>();
  parser.buildRequestFrom(core,new MultiMapSolrParams(args),streams);
  assertEquals(1,streams.size());
  assertEquals(txt,IOUtils.toString(streams.get(0).getStream()));
}
