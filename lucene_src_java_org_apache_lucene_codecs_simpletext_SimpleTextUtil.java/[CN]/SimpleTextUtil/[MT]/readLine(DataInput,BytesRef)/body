{
  int upto=0;
  while (true) {
    byte b=in.readByte();
    if (scratch.bytes.length == upto) {
      scratch.grow(1 + upto);
    }
    if (b == ESCAPE) {
      scratch.bytes[upto++]=in.readByte();
    }
 else {
      if (b == NEWLINE) {
        break;
      }
 else {
        scratch.bytes[upto++]=b;
      }
    }
  }
  scratch.offset=0;
  scratch.length=upto;
}
