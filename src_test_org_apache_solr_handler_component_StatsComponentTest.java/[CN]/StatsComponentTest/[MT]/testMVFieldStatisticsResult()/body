{
  SolrCore core=h.getCore();
  assertU(adoc("id","1","stats_ii","-10","stats_ii","-100","active_s","true"));
  assertU(adoc("id","2","stats_ii","-20","stats_ii","200","active_s","true"));
  assertU(adoc("id","3","stats_ii","-30","stats_ii","-1","active_s","false"));
  assertU(adoc("id","4","stats_ii","-40","stats_ii","10","active_s","false"));
  assertU(adoc("id","5","active_s","false"));
  assertU(commit());
  Map<String,String> args=new HashMap<String,String>();
  args.put(CommonParams.Q,"*:*");
  args.put(StatsParams.STATS,"true");
  args.put(StatsParams.STATS_FIELD,"stats_ii");
  args.put("indent","true");
  SolrQueryRequest req=new LocalSolrQueryRequest(core,new MapSolrParams(args));
  assertQ("test statistics values",req,"//double[@name='min'][.='-100.0']","//double[@name='max'][.='200.0']","//double[@name='sum'][.='9.0']","//long[@name='count'][.='8']","//long[@name='missing'][.='1']","//double[@name='sumOfSquares'][.='53101.0']","//double[@name='mean'][.='1.125']","//double[@name='stddev'][.='87.08852228787508']");
  args.put(StatsParams.STATS_FACET,"active_s");
  req=new LocalSolrQueryRequest(core,new MapSolrParams(args));
  assertQ("test statistics values",req,"//double[@name='min'][.='-100.0']","//double[@name='max'][.='200.0']","//double[@name='sum'][.='9.0']","//long[@name='count'][.='8']","//long[@name='missing'][.='1']","//double[@name='sumOfSquares'][.='53101.0']","//double[@name='mean'][.='1.125']","//double[@name='stddev'][.='87.08852228787508']");
  assertQ("test value for active_s=true",req,"//lst[@name='true']/double[@name='min'][.='-100.0']","//lst[@name='true']/double[@name='max'][.='200.0']","//lst[@name='true']/double[@name='sum'][.='70.0']","//lst[@name='true']/long[@name='count'][.='4']","//lst[@name='true']/long[@name='missing'][.='0']","//lst[@name='true']/double[@name='sumOfSquares'][.='50500.0']","//lst[@name='true']/double[@name='mean'][.='17.5']","//lst[@name='true']/double[@name='stddev'][.='128.16005617976296']");
}
