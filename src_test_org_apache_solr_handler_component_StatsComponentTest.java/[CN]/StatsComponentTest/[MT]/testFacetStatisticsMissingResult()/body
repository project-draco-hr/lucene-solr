{
  SolrCore core=h.getCore();
  assertU(adoc("id","1","stats_i","10","active_s","true"));
  assertU(adoc("id","2","stats_i","20","active_s","true"));
  assertU(adoc("id","3","active_s","false"));
  assertU(adoc("id","4","stats_i","40","active_s","false"));
  assertU(commit());
  Map<String,String> args=new HashMap<String,String>();
  args.put(CommonParams.Q,"*:*");
  args.put(StatsParams.STATS,"true");
  args.put(StatsParams.STATS_FIELD,"stats_i");
  args.put(StatsParams.STATS_FACET,"active_s");
  args.put("indent","true");
  SolrQueryRequest req=new LocalSolrQueryRequest(core,new MapSolrParams(args));
  assertQ("test value for active_s=true",req,"//lst[@name='true']/double[@name='min'][.='10.0']","//lst[@name='true']/double[@name='max'][.='20.0']","//lst[@name='true']/double[@name='sum'][.='30.0']","//lst[@name='true']/long[@name='count'][.='2']","//lst[@name='true']/long[@name='missing'][.='0']","//lst[@name='true']/double[@name='sumOfSquares'][.='500.0']","//lst[@name='true']/double[@name='mean'][.='15.0']","//lst[@name='true']/double[@name='stddev'][.='7.0710678118654755']");
  assertQ("test value for active_s=false",req,"//lst[@name='false']/double[@name='min'][.='40.0']","//lst[@name='false']/double[@name='max'][.='40.0']","//lst[@name='false']/double[@name='sum'][.='40.0']","//lst[@name='false']/long[@name='count'][.='1']","//lst[@name='false']/long[@name='missing'][.='1']","//lst[@name='false']/double[@name='sumOfSquares'][.='1600.0']","//lst[@name='false']/double[@name='mean'][.='40.0']","//lst[@name='false']/double[@name='stddev'][.='0.0']");
}
