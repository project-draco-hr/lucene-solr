{
  String chroot="/foo/bar";
  System.setProperty("bootstrap_conf","true");
  System.setProperty("zkHost",zkServer.getZkHost() + chroot);
  SolrZkClient zkClient=null;
  SolrZkClient zkClient2=null;
  try {
    cores=new CoreContainer(home,new File(home,"solr.xml"));
    zkClient=cores.getZkController().getZkClient();
    assertTrue(zkClient.exists("/clusterstate.json",true));
    assertFalse(zkClient.exists(chroot + "/clusterstate.json",true));
    zkClient2=new SolrZkClient(zkServer.getZkHost(),AbstractZkTestCase.TIMEOUT);
    assertTrue(zkClient2.exists(chroot + "/clusterstate.json",true));
    assertFalse(zkClient2.exists("/clusterstate.json",true));
  }
  finally {
    if (cores != null)     cores.shutdown();
    if (zkClient != null)     zkClient.close();
    if (zkClient2 != null)     zkClient2.close();
  }
}
