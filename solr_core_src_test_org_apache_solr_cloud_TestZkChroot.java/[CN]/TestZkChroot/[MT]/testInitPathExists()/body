{
  String chroot="/foo/bar4";
  System.setProperty("bootstrap_conf","true");
  System.setProperty("zkHost",zkServer.getZkHost() + chroot);
  SolrZkClient zkClient=null;
  try {
    zkClient=new SolrZkClient(zkServer.getZkHost(),AbstractZkTestCase.TIMEOUT);
    zkClient.makePath("/foo/bar4",true);
    assertTrue(zkClient.exists(chroot,true));
    assertFalse(zkClient.exists(chroot + "/clusterstate.json",true));
    cores=CoreContainer.createAndLoad(home,new File(home,"solr.xml"));
    assertTrue(zkClient.exists(chroot + "/clusterstate.json",true));
  }
  finally {
    if (cores != null)     cores.shutdown();
    if (zkClient != null)     zkClient.close();
  }
}
