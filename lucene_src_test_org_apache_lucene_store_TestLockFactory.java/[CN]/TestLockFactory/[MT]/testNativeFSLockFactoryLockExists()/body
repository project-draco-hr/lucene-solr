{
  File lockFile=new File(TEMP_DIR,"test.lock");
  lockFile.createNewFile();
  Lock l=new NativeFSLockFactory(TEMP_DIR).makeLock("test.lock");
  assertTrue("failed to obtain lock",l.obtain());
  l.release();
  assertFalse("failed to release lock",l.isLocked());
  if (lockFile.exists()) {
    lockFile.delete();
  }
}
