{
  if (resolver == null)   resolver=new VariableResolverImpl();
  final Context delegate=new ContextImpl(parentEntity,resolver,parentDataSource,currProcess,new HashMap<String,Object>(),null,null);
  return new Context(){
    public String getEntityAttribute(    String name){
      return entityAttrs == null ? delegate.getEntityAttribute(name) : entityAttrs.get(name);
    }
    public List<Map<String,String>> getAllEntityFields(){
      return entityFields == null ? delegate.getAllEntityFields() : entityFields;
    }
    public VariableResolver getVariableResolver(){
      return delegate.getVariableResolver();
    }
    public DataSource getDataSource(){
      return delegate.getDataSource();
    }
    public boolean isRootEntity(){
      return false;
    }
    public int currentProcess(){
      return delegate.currentProcess();
    }
    public Map<String,Object> getRequestParameters(){
      return delegate.getRequestParameters();
    }
    public EntityProcessor getEntityProcessor(){
      return null;
    }
    public void setSessionAttribute(    String name,    Object val,    String scope){
      delegate.setSessionAttribute(name,val,scope);
    }
    public Object getSessionAttribute(    String name,    String scope){
      return delegate.getSessionAttribute(name,scope);
    }
    public Context getParentContext(){
      return delegate.getParentContext();
    }
    public DataSource getDataSource(    String name){
      return delegate.getDataSource(name);
    }
    public SolrCore getSolrCore(){
      return delegate.getSolrCore();
    }
    public Map<String,Object> getStats(){
      return delegate.getStats();
    }
  }
;
}
