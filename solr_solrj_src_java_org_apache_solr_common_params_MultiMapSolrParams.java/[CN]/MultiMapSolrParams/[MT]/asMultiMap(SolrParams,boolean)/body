{
  if (params instanceof MultiMapSolrParams) {
    Map<String,String[]> map=((MultiMapSolrParams)params).getMap();
    if (newCopy) {
      return new HashMap<>(map);
    }
    return map;
  }
 else   if (params instanceof ModifiableSolrParams) {
    Map<String,String[]> map=((ModifiableSolrParams)params).getMap();
    if (newCopy) {
      return new HashMap<>(map);
    }
    return map;
  }
 else {
    Map<String,String[]> map=new HashMap<>();
    Iterator<String> iterator=params.getParameterNamesIterator();
    while (iterator.hasNext()) {
      String name=iterator.next();
      map.put(name,params.getParams(name));
    }
    return map;
  }
}
