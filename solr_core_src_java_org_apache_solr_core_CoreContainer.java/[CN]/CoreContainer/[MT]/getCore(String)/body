{
  name=checkDefault(name);
  SolrCore core=solrCores.getCoreFromAnyList(name,true);
  if (core != null) {
    return core;
  }
  CoreDescriptor desc=solrCores.getDynamicDescriptor(name);
  if (desc == null) {
    Exception e=getCoreInitFailures().get(name);
    if (null != e) {
      throw new SolrException(ErrorCode.SERVER_ERROR,"SolrCore '" + name + "' is not available due to init failure: "+ e.getMessage(),e);
    }
    return null;
  }
  core=solrCores.waitAddPendingCoreOps(name);
  if (isShutDown)   return null;
  try {
    if (core == null) {
      if (zkSys.getZkController() != null) {
        preRegisterInZk(desc);
      }
      core=create(desc);
      core.open();
      registerCore(desc.isTransient(),name,core,false);
    }
 else {
      core.open();
    }
  }
 catch (  Exception ex) {
    throw recordAndThrow(name,"Unable to create core: " + name,ex);
  }
 finally {
    solrCores.removeFromPendingOps(name);
  }
  return core;
}
