{
  try {
    name=checkDefault(name);
    SolrCore core=solrCores.getCoreFromAnyList(name,false);
    if (core == null)     throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"No such core: " + name);
    try {
      solrCores.waitAddPendingCoreOps(name);
      CoreDescriptor cd=core.getCoreDescriptor();
      File instanceDir=new File(cd.getInstanceDir());
      log.info("Reloading SolrCore '{}' using instanceDir: {}",cd.getName(),instanceDir.getAbsolutePath());
      SolrResourceLoader solrLoader;
      if (zkSys.getZkController() == null) {
        solrLoader=new SolrResourceLoader(instanceDir.getAbsolutePath(),loader.getClassLoader(),cd.getSubstitutableProperties());
      }
 else {
        try {
          String collection=cd.getCloudDescriptor().getCollectionName();
          zkSys.getZkController().createCollectionZkNode(cd.getCloudDescriptor());
          String zkConfigName=zkSys.getZkController().getZkStateReader().readConfigName(collection);
          if (zkConfigName == null) {
            log.error("Could not find config name for collection:" + collection);
            throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"Could not find config name for collection:" + collection);
          }
          solrLoader=new ZkSolrResourceLoader(instanceDir.getAbsolutePath(),zkConfigName,loader.getClassLoader(),cd.getSubstitutableProperties(),zkSys.getZkController());
        }
 catch (        KeeperException e) {
          log.error("",e);
          throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
        }
catch (        InterruptedException e) {
          Thread.currentThread().interrupt();
          log.error("",e);
          throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,"",e);
        }
      }
      SolrCore newCore=core.reload(solrLoader,core);
      solrCores.removeCoreToOrigName(newCore,core);
      registerCore(false,name,newCore,false,false);
    }
  finally {
      solrCores.removeFromPendingOps(name);
    }
  }
 catch (  Exception ex) {
    throw recordAndThrow(name,"Unable to reload core: " + name,ex);
  }
}
