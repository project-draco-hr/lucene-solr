{
  final String name=dcore.getName();
  try {
    File idir=new File(dcore.getInstanceDir());
    String instanceDir=idir.getPath();
    log.info("Creating SolrCore '{}' using instanceDir: {}",dcore.getName(),instanceDir);
    if (zkController != null) {
      return createFromZk(instanceDir,dcore);
    }
 else {
      return createFromLocal(instanceDir,dcore);
    }
  }
 catch (  Exception ex) {
    throw recordAndThrow(name,"Unable to create core: " + name,ex);
  }
}
