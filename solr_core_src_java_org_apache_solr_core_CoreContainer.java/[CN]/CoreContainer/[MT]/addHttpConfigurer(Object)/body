{
  log.info("addHttpConfigurer()");
  if (authcPlugin instanceof HttpClientInterceptorPlugin) {
    HttpClientConfigurer configurer=((HttpClientInterceptorPlugin)authcPlugin).getClientConfigurer();
    HttpClientUtil.setConfigurer(configurer);
    log.info("Reconfiguring the shard handler factory and update shard handler.");
    if (getShardHandlerFactory() instanceof HttpShardHandlerFactory) {
      ((HttpShardHandlerFactory)getShardHandlerFactory()).reconfigureHttpClient(configurer);
    }
    getUpdateShardHandler().reconfigureHttpClient(configurer);
  }
 else {
    if (pkiAuthenticationPlugin != null) {
      log.info("PKIAuthenticationPlugin is managing internode requests");
      addHttpConfigurer(pkiAuthenticationPlugin);
    }
  }
}
