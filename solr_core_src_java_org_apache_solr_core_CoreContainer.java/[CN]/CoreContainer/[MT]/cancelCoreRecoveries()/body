{
  ArrayList<SolrCoreState> coreStates=null;
synchronized (cores) {
    for (    SolrCore core : cores.values()) {
      try {
        coreStates=new ArrayList<SolrCoreState>(cores.size());
        coreStates.add(core.getUpdateHandler().getSolrCoreState());
      }
 catch (      Throwable t) {
        SolrException.log(log,"Error canceling recovery for core",t);
      }
    }
  }
  if (coreStates != null) {
    for (    SolrCoreState coreState : coreStates) {
      coreState.cancelRecovery();
    }
  }
}
