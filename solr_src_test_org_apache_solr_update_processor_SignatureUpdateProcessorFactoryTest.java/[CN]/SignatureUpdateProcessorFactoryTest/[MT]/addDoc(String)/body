{
  Map<String,String[]> params=new HashMap<String,String[]>();
  MultiMapSolrParams mmparams=new MultiMapSolrParams(params);
  params.put(UpdateParams.UPDATE_PROCESSOR,new String[]{processor});
  SolrQueryRequestBase req=new SolrQueryRequestBase(h.getCore(),(SolrParams)mmparams){
  }
;
  XmlUpdateRequestHandler handler=new XmlUpdateRequestHandler();
  handler.init(null);
  ArrayList<ContentStream> streams=new ArrayList<ContentStream>(2);
  streams.add(new ContentStreamBase.StringStream(doc));
  req.setContentStreams(streams);
  handler.handleRequestBody(req,new SolrQueryResponse());
  req.close();
}
