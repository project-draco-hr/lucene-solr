{
  String startDate=getLocalizedDate(2002,1,1,false);
  String endDate=getLocalizedDate(2002,1,4,false);
  Calendar endDateExpected=new GregorianCalendar(TimeZone.getDefault(),Locale.getDefault());
  endDateExpected.set(2002,1,4,23,59,59);
  endDateExpected.set(Calendar.MILLISECOND,999);
  final String defaultField="default";
  final String monthField="month";
  final String hourField="hour";
  PrecedenceQueryParser qp=new PrecedenceQueryParser(new MockAnalyzer(random()));
  Map<CharSequence,DateTools.Resolution> fieldMap=new HashMap<>();
  fieldMap.put(monthField,DateTools.Resolution.MONTH);
  qp.setDateResolutionMap(fieldMap);
  qp.setDateResolution(DateTools.Resolution.MILLISECOND);
  fieldMap.put(hourField,DateTools.Resolution.HOUR);
  qp.setDateResolutionMap(fieldMap);
  assertDateRangeQueryEquals(qp,defaultField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MILLISECOND);
  assertDateRangeQueryEquals(qp,monthField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.MONTH);
  assertDateRangeQueryEquals(qp,hourField,startDate,endDate,endDateExpected.getTime(),DateTools.Resolution.HOUR);
}
