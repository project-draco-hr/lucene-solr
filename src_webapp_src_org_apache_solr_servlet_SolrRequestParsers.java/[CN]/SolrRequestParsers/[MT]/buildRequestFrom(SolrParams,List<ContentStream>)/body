{
  String[] strs=params.getParams(SolrParams.STREAM_URL);
  if (strs != null) {
    if (!enableRemoteStreams) {
      throw new SolrException(400,"Remote Streaming is disabled.");
    }
    for (    final String url : strs) {
      final URLConnection conn=new URL(url).openConnection();
      streams.add(new ContentStream(){
        public String getContentType(){
          return conn.getContentType();
        }
        public String getName(){
          return url;
        }
        public Long getSize(){
          return new Long(conn.getContentLength());
        }
        public String getSourceInfo(){
          return SolrParams.STREAM_URL;
        }
        public InputStream getStream() throws IOException {
          return conn.getInputStream();
        }
      }
);
    }
  }
  strs=params.getParams(SolrParams.STREAM_BODY);
  if (strs != null) {
    for (    final String body : strs) {
      streams.add(new ContentStream(){
        public String getContentType(){
          return null;
        }
        public String getName(){
          return null;
        }
        public Long getSize(){
          return null;
        }
        public String getSourceInfo(){
          return SolrParams.STREAM_BODY;
        }
        public InputStream getStream() throws IOException {
          return new ByteArrayInputStream(body.getBytes());
        }
      }
);
    }
  }
  SolrQueryRequestBase q=new SolrQueryRequestBase(core,params){
  }
;
  if (streams != null && streams.size() > 0) {
    q.setContentStreams(streams);
  }
  return q;
}
