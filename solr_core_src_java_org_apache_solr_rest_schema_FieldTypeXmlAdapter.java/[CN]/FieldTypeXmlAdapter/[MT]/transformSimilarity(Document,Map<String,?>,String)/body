{
  Object jsonField=json.get(jsonFieldName);
  if (jsonField == null)   return null;
  if (!(jsonField instanceof Map))   throw new SolrException(ErrorCode.BAD_REQUEST,"Invalid fieldType definition! Expected JSON object for " + jsonFieldName + " not a "+ jsonField.getClass().getName());
  Element similarity=doc.createElement("similarity");
  appendAttrs(similarity,(Map<String,?>)jsonField);
  return similarity;
}
