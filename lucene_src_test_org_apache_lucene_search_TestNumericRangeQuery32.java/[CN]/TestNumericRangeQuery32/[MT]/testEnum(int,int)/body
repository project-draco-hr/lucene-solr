{
  NumericRangeQuery<Integer> q=NumericRangeQuery.newIntRange("field4",4,lower,upper,true,true);
  Terms terms=MultiFields.getTerms(searcher.getIndexReader(),"field4");
  TermsEnum termEnum=q.getTermsEnum(terms);
  int count=0;
  while (termEnum.next() != null) {
    final BytesRef t=termEnum.term();
    if (t != null) {
      final int val=NumericUtils.prefixCodedToInt(t);
      assertTrue("value not in bounds " + val + " >= "+ lower+ " && "+ val+ " <= "+ upper,val >= lower && val <= upper);
      count++;
    }
 else     break;
  }
  assertNull(termEnum.next());
  if (VERBOSE)   System.out.println("TermEnum on 'field4' for range [" + lower + ","+ upper+ "] contained "+ count+ " terms.");
}
