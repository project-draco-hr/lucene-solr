{
  NumericRangeQuery<Integer> q=NumericRangeQuery.newIntRange("field4",4,lower,upper,true,true);
  FilteredTermEnum termEnum=q.getEnum(searcher.getIndexReader());
  try {
    int count=0;
    do {
      final Term t=termEnum.term();
      if (t != null) {
        final int val=NumericUtils.prefixCodedToInt(t.text());
        assertTrue("value not in bounds",val >= lower && val <= upper);
        count++;
      }
 else       break;
    }
 while (termEnum.next());
    assertFalse(termEnum.next());
    if (VERBOSE)     System.out.println("TermEnum on 'field4' for range [" + lower + ","+ upper+ "] contained "+ count+ " terms.");
  }
  finally {
    termEnum.close();
  }
}
