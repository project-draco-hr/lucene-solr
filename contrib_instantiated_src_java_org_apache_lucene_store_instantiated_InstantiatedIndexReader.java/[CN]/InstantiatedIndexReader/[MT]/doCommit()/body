{
  boolean updated=false;
  if (updatedNormsByFieldNameAndDocumentNumber != null) {
    for (    Map.Entry<String,List<NormUpdate>> e : updatedNormsByFieldNameAndDocumentNumber.entrySet()) {
      byte[] norms=getIndex().getNormsByFieldNameAndDocumentNumber().get(e.getKey());
      for (      NormUpdate normUpdate : e.getValue()) {
        norms[normUpdate.doc]=normUpdate.value;
      }
    }
    updatedNormsByFieldNameAndDocumentNumber=null;
    updated=true;
  }
  if (deletedDocumentNumbers.size() > 0) {
    for (    Integer doc : deletedDocumentNumbers) {
      getIndex().getDeletedDocuments().add(doc);
    }
    deletedDocumentNumbers.clear();
    deletedDocuments.clear();
    updated=true;
  }
}
