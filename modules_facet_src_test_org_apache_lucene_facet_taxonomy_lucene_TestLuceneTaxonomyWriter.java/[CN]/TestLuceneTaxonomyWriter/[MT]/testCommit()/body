{
  Directory dir=new RAMDirectory();
  LuceneTaxonomyWriter ltw=new LuceneTaxonomyWriter(dir,OpenMode.CREATE_OR_APPEND,new NoOpCache());
  assertFalse(IndexReader.indexExists(dir));
  ltw.commit();
  ltw.addCategory(new CategoryPath("a"));
  IndexReader r=IndexReader.open(dir);
  assertEquals("No categories should have been committed to the underlying directory",1,r.numDocs());
  r.close();
  ltw.close();
  dir.close();
}
