{
  if (loader == null) {
    loader=Thread.currentThread().getContextClassLoader();
  }
  if (f.canRead() && f.isDirectory()) {
    File[] jarFiles=f.listFiles();
    URL[] jars=new URL[jarFiles.length];
    try {
      for (int j=0; j < jarFiles.length; j++) {
        jars[j]=jarFiles[j].toURI().toURL();
        log.info("Adding '" + jars[j].toString() + "' to Solr classloader");
      }
      return URLClassLoader.newInstance(jars,loader);
    }
 catch (    MalformedURLException e) {
      SolrException.log(log,"Can't construct solr lib class loader",e);
    }
  }
  log.info("Reusing parent classloader");
  return loader;
}
