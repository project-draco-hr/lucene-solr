{
  vals.numDocs=vals.numTerms=0;
  Terms terms=MultiFields.getTerms(reader,field);
  if (terms != null) {
    final TermsEnum termsEnum=terms.iterator();
    OpenBitSet validBits=new OpenBitSet(reader.maxDoc());
    DocsEnum docs=null;
    while (true) {
      final BytesRef term=termsEnum.next();
      if (term == null) {
        break;
      }
      docs=termsEnum.docs(null,docs);
      while (true) {
        final int docID=docs.nextDoc();
        if (docID == DocIdSetIterator.NO_MORE_DOCS) {
          break;
        }
        validBits.set(docID);
        vals.numDocs++;
      }
      vals.numTerms++;
    }
    vals.valid=checkMatchAllBits(validBits,vals.numDocs,reader.maxDoc());
  }
  if (vals.numDocs < 1) {
    vals.valid=new Bits.MatchNoBits(reader.maxDoc());
  }
}
