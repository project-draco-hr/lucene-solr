{
  if (multiValued) {
    boolean exists=false;
    if (setValues != null) {
      if (doc > setValues.docID()) {
        setValues.advance(doc);
      }
      if (doc == setValues.docID()) {
        int term;
        while ((term=(int)setValues.nextOrd()) != SortedSetDocValues.NO_MORE_ORDS) {
          exists=true;
          final BytesRef value=setValues.lookupOrd(term);
          parent.collectField(doc,name,parser.parse(value));
        }
      }
    }
    if (!exists) {
      parent.collectField(doc,name,FacetingAccumulator.MISSING_VALUE);
    }
  }
 else {
    if (numField) {
      if (numValues != null) {
        int valuesDocID=numValues.docID();
        if (valuesDocID < doc) {
          valuesDocID=numValues.advance(doc);
        }
        if (valuesDocID == doc) {
          parent.collectField(doc,name,((NumericParser)parser).parseNum(numValues.longValue()));
        }
 else {
          parent.collectField(doc,name,FacetingAccumulator.MISSING_VALUE);
        }
      }
 else {
        parent.collectField(doc,name,FacetingAccumulator.MISSING_VALUE);
      }
    }
 else {
      if (sortValues != null) {
        if (doc > sortValues.docID()) {
          sortValues.advance(doc);
        }
        if (doc == sortValues.docID()) {
          parent.collectField(doc,name,parser.parse(sortValues.lookupOrd(sortValues.ordValue())));
        }
 else {
          parent.collectField(doc,name,FacetingAccumulator.MISSING_VALUE);
        }
      }
 else {
        parent.collectField(doc,name,FacetingAccumulator.MISSING_VALUE);
      }
    }
  }
}
