{
  int newBufferIndex=(int)(pos / BUFFER_SIZE);
  if (newBufferIndex != currentBufferIndex) {
    currentBufferIndex=newBufferIndex;
    setCurrentBuffer();
  }
  bufferPosition=(int)(pos % BUFFER_SIZE);
  if (getFilePointer() > length()) {
    throw new EOFException("read past EOF: pos=" + getFilePointer() + " vs length="+ length()+ ": "+ this);
  }
}
