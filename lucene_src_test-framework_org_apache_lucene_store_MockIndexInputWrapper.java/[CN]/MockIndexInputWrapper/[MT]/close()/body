{
  delegate.close();
  if (!isClone) {
synchronized (dir) {
      Integer v=dir.openFiles.get(name);
      if (v != null) {
        if (v.intValue() == 1) {
          dir.openFiles.remove(name);
          dir.openFilesDeleted.remove(name);
        }
 else {
          v=Integer.valueOf(v.intValue() - 1);
          dir.openFiles.put(name,v);
        }
      }
      dir.openFileHandles.remove(this);
    }
  }
}
