{
  for (  CloudJettyRunner replicaToShutDown : replicasToShutDown) {
    chaosMonkey.killJetty(replicaToShutDown);
    waitForNoShardInconsistency();
  }
  int totalDown=0;
  Set<CloudJettyRunner> jetties=new HashSet<>();
  jetties.addAll(shardToJetty.get("shard1"));
  if (replicasToShutDown != null) {
    jetties.removeAll(replicasToShutDown);
    totalDown+=replicasToShutDown.size();
  }
  jetties.removeAll(nodesDown);
  totalDown+=nodesDown.size();
  assertEquals(getShardCount() - totalDown,jetties.size());
  nodesDown.addAll(replicasToShutDown);
}
