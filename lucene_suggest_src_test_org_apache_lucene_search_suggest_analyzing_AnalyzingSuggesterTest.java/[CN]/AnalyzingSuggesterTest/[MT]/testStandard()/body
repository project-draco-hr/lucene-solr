{
  Input keys[]=new Input[]{new Input("the ghost of christmas past",50)};
  Directory tempDir=getDirectory();
  Analyzer standard=new MockAnalyzer(random(),MockTokenizer.WHITESPACE,true,MockTokenFilter.ENGLISH_STOPSET);
  AnalyzingSuggester suggester=new AnalyzingSuggester(tempDir,"suggest",standard,standard,AnalyzingSuggester.EXACT_FIRST | AnalyzingSuggester.PRESERVE_SEP,256,-1,false);
  suggester.build(new InputArrayIterator(keys));
  List<LookupResult> results=suggester.lookup(TestUtil.stringToCharSequence("the ghost of chris",random()),false,1);
  assertEquals(1,results.size());
  assertEquals("the ghost of christmas past",results.get(0).key.toString());
  assertEquals(50,results.get(0).value,0.01F);
  results=suggester.lookup(TestUtil.stringToCharSequence("ghost of chris",random()),false,1);
  assertEquals(1,results.size());
  assertEquals("the ghost of christmas past",results.get(0).key.toString());
  assertEquals(50,results.get(0).value,0.01F);
  results=suggester.lookup(TestUtil.stringToCharSequence("ghost chris",random()),false,1);
  assertEquals(1,results.size());
  assertEquals("the ghost of christmas past",results.get(0).key.toString());
  assertEquals(50,results.get(0).value,0.01F);
  IOUtils.close(standard,tempDir);
}
