{
  QueryTemplateManager qtm=new QueryTemplateManager();
  qtm.addQueryTemplate("albumBooleanQuery",getClass().getResourceAsStream("albumBooleanQuery.xsl"));
  qtm.addQueryTemplate("albumFilteredQuery",getClass().getResourceAsStream("albumFilteredQuery.xsl"));
  qtm.addQueryTemplate("albumLuceneClassicQuery",getClass().getResourceAsStream("albumLuceneClassicQuery.xsl"));
  for (int i=0; i < queryForms.length; i++) {
    Properties queryFormProperties=getPropsFromString(queryForms[i]);
    Document doc=qtm.getQueryAsDOM(queryFormProperties,queryFormProperties.getProperty("template"));
    Query q=builder.getQuery(doc.getDocumentElement());
    int h=searcher.search(q,null,1000).totalHits;
    int expectedHits=Integer.parseInt(queryFormProperties.getProperty("expectedMatches"));
    assertEquals("Number of results should match for query " + queryForms[i],expectedHits,h);
  }
}
