{
  doVectors=false;
  doVectorPositions=false;
  doVectorOffsets=false;
  for (int i=0; i < count; i++) {
    IndexableField field=fields[i];
    if (field.fieldType().storeTermVectors()) {
      doVectors=true;
      doVectorPositions|=field.fieldType().storeTermVectorPositions();
      doVectorOffsets|=field.fieldType().storeTermVectorOffsets();
    }
  }
  if (doVectors) {
    termsWriter.hasVectors=true;
    if (termsHashPerField.bytesHash.size() != 0) {
      termsHashPerField.reset();
    }
  }
  return doVectors;
}
