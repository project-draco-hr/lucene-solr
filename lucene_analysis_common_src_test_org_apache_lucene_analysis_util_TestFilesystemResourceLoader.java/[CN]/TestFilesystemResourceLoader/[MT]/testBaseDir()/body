{
  final File base=createTempDir("fsResourceLoaderBase").getAbsoluteFile();
  try {
    base.mkdirs();
    Writer os=new OutputStreamWriter(new FileOutputStream(new File(base,"template.txt")),StandardCharsets.UTF_8);
    try {
      os.write("foobar\n");
    }
  finally {
      IOUtils.closeWhileHandlingException(os);
    }
    ResourceLoader rl=new FilesystemResourceLoader(base);
    assertEquals("foobar",WordlistLoader.getLines(rl.openResource("template.txt"),StandardCharsets.UTF_8).get(0));
    String fullPath=new File(base,"template.txt").toString();
    assertEquals("foobar",WordlistLoader.getLines(rl.openResource(fullPath),StandardCharsets.UTF_8).get(0));
    assertClasspathDelegation(rl);
    assertNotFound(rl);
    rl=new FilesystemResourceLoader();
    assertEquals("foobar",WordlistLoader.getLines(rl.openResource(new File(base,"template.txt").toString()),StandardCharsets.UTF_8).get(0));
    assertClasspathDelegation(rl);
    assertNotFound(rl);
  }
  finally {
    TestUtil.rm(base);
  }
}
