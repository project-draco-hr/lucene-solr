{
  if (size == Integer.MAX_VALUE) {
    throw new IllegalStateException("cannot support more than Integer.MAX_VALUE doc/value entries");
  }
  Long val=(Long)value;
  if (val == null) {
    val=NumericDocValuesUpdate.MISSING;
  }
  if (docs.size() == size) {
    docs=docs.grow(size + 1);
    values=values.grow(size + 1);
    docsWithField=FixedBitSet.ensureCapacity(docsWithField,(int)docs.size());
  }
  if (val != NumericDocValuesUpdate.MISSING) {
    docsWithField.set(size);
  }
  docs.set(size,doc);
  values.set(size,val.longValue());
  ++size;
}
