{
  for (  CoreDescriptor cd : coreDescriptors) {
    File propFile=new File(new File(cd.getInstanceDir()),PROPERTIES_FILENAME);
    if (propFile.exists())     throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,"Could not create a new core in " + cd.getInstanceDir() + "as another core is already defined there");
    try {
      Properties p=buildCoreProperties(cd);
      Writer writer=new OutputStreamWriter(new FileOutputStream(propFile),Charsets.UTF_8);
      p.store(writer,"Written by CorePropertiesLocator on " + new Date());
    }
 catch (    IOException e) {
      logger.error("Couldn't persist core properties to {}: {}",propFile.getAbsolutePath(),e);
    }
  }
}
