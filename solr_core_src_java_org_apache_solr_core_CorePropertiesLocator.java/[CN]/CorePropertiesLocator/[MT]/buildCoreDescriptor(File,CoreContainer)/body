{
  FileInputStream fis=null;
  try {
    File instanceDir=propertiesFile.getParentFile();
    Properties coreProperties=new Properties();
    fis=new FileInputStream(propertiesFile);
    coreProperties.load(new InputStreamReader(fis,Charsets.UTF_8));
    String name=createName(coreProperties,instanceDir);
    return new CoreDescriptor(cc,name,instanceDir.getAbsolutePath(),coreProperties);
  }
 catch (  IOException e) {
    logger.error("Couldn't load core descriptor from {}:{}",propertiesFile.getAbsolutePath(),e.toString());
    return null;
  }
 finally {
    IOUtils.closeQuietly(fis);
  }
}
