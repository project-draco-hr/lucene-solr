{
  final String input=_TestUtil.randomSimpleString(random(),1024 * 5);
  final int minGram=_TestUtil.nextInt(random(),1,1024);
  final int maxGram=_TestUtil.nextInt(random(),minGram,5 * 1024);
  EdgeNGramTokenizer tk=new EdgeNGramTokenizer(TEST_VERSION_CURRENT,new StringReader(input),minGram,maxGram);
  final CharTermAttribute charTermAtt=tk.addAttribute(CharTermAttribute.class);
  final OffsetAttribute offsetAtt=tk.addAttribute(OffsetAttribute.class);
  final PositionIncrementAttribute posIncAtt=tk.addAttribute(PositionIncrementAttribute.class);
  tk.reset();
  for (int i=minGram; i <= maxGram && i <= input.length(); ++i) {
    assertTrue(tk.incrementToken());
    assertEquals(0,offsetAtt.startOffset());
    assertEquals(i,offsetAtt.endOffset());
    assertEquals(1,posIncAtt.getPositionIncrement());
    assertEquals(input.substring(0,i),charTermAtt.toString());
  }
  assertFalse(tk.incrementToken());
  tk.end();
  assertEquals(input.length(),offsetAtt.startOffset());
}
