{
  if (random().nextInt(4) > 0) {
    this.ctx=SpatialContext.GEO;
  }
 else {
    SpatialContextFactory factory=new SpatialContextFactory();
    factory.geo=false;
    factory.worldBounds=new RectangleImpl(-300,300,-100,100,null);
    this.ctx=factory.newSpatialContext();
  }
  if (random().nextBoolean()) {
    this.strategy=BBoxStrategy.newInstance(ctx,"bbox");
  }
 else {
    this.strategy=BBoxStrategy.newLegacyInstance(ctx,"bbox");
  }
  if (random().nextBoolean()) {
    FieldType fieldType=((BBoxStrategy)strategy).getFieldType();
    if (fieldType instanceof LegacyFieldType) {
      fieldType=new LegacyFieldType((LegacyFieldType)fieldType);
    }
 else {
      fieldType=new FieldType(fieldType);
    }
    fieldType.setDocValuesType(DocValuesType.NONE);
    strategy=new BBoxStrategy(ctx,strategy.getFieldName(),fieldType);
  }
  for (  SpatialOperation operation : SpatialOperation.values()) {
    if (operation == SpatialOperation.Overlaps)     continue;
    testOperationRandomShapes(operation);
    deleteAll();
    commit();
  }
}
