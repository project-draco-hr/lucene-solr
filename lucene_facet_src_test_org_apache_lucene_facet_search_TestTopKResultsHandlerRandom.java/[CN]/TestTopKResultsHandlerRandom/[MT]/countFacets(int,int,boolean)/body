{
  Query q=new MatchAllDocsQuery();
  FacetSearchParams facetSearchParams=searchParamsWithRequests(numResults,partitionSize);
  FacetsCollector fc=new FacetsCollector(facetSearchParams,indexReader,taxoReader){
    @Override protected FacetsAccumulator initFacetsAccumulator(    FacetSearchParams facetSearchParams,    IndexReader indexReader,    TaxonomyReader taxonomyReader){
      FacetsAccumulator accumulator=new StandardFacetsAccumulator(facetSearchParams,indexReader,taxonomyReader);
      double complement=doComplement ? FacetsAccumulator.FORCE_COMPLEMENT : FacetsAccumulator.DISABLE_COMPLEMENT;
      accumulator.setComplementThreshold(complement);
      return accumulator;
    }
  }
;
  searcher.search(q,fc);
  List<FacetResult> facetResults=fc.getFacetResults();
  return facetResults;
}
