{
  SepTermState state=(SepTermState)_state;
  if (absolute) {
    lastSkipFP=0;
    lastPayloadFP=0;
    lastState=state;
  }
  lastState.docIndex.copyFrom(state.docIndex,false);
  lastState.docIndex.write(out,absolute);
  if (indexOptions != IndexOptions.DOCS_ONLY) {
    lastState.freqIndex.copyFrom(state.freqIndex,false);
    lastState.freqIndex.write(out,absolute);
    if (indexOptions == IndexOptions.DOCS_AND_FREQS_AND_POSITIONS) {
      lastState.posIndex.copyFrom(state.posIndex,false);
      lastState.posIndex.write(out,absolute);
      if (writePayloads) {
        if (absolute) {
          out.writeVLong(state.payloadFP);
        }
 else {
          out.writeVLong(state.payloadFP - lastPayloadFP);
        }
        lastPayloadFP=state.payloadFP;
      }
    }
  }
  if (state.skipFP != -1) {
    if (absolute) {
      out.writeVLong(state.skipFP);
    }
 else {
      out.writeVLong(state.skipFP - lastSkipFP);
    }
    lastSkipFP=state.skipFP;
  }
}
