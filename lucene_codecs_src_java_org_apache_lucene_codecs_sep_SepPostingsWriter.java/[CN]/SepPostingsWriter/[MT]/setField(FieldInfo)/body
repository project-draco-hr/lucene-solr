{
  this.fieldInfo=fieldInfo;
  this.indexOptions=fieldInfo.getIndexOptions();
  if (indexOptions.compareTo(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS) >= 0) {
    throw new UnsupportedOperationException("this codec cannot index offsets");
  }
  skipListWriter.setIndexOptions(indexOptions);
  storePayloads=indexOptions == IndexOptions.DOCS_AND_FREQS_AND_POSITIONS && fieldInfo.hasPayloads();
  lastPayloadFP=0;
  lastSkipFP=0;
  lastState=setEmptyState();
  return 0;
}
