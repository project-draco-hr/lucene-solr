{
  FileChannel channel=new FilterFileChannel(super.newFileChannel(path,options,attrs)){
    @Override protected void implCloseChannel() throws IOException {
      onClose(path,this);
      super.implCloseChannel();
    }
    @Override public String toString(){
      return "FileChannel(" + path.toString() + ")";
    }
    @Override public int hashCode(){
      return System.identityHashCode(this);
    }
    @Override public boolean equals(    Object obj){
      return this == obj;
    }
  }
;
  onOpen(path,channel);
  return channel;
}
