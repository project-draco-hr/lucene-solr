{
  Token t=input.next();
  if (null == t || null == t.termText())   return t;
  if (updateOffsets) {
    String txt=t.termText();
    int start=0;
    int end=txt.length();
    int endOff=0;
    while ((start < end) && (txt.charAt(start) <= ' ')) {
      start++;
    }
    while ((start < end) && (txt.charAt(end - 1) <= ' ')) {
      end--;
      endOff++;
    }
    if (start > 0 || end < txt.length()) {
      int incr=t.getPositionIncrement();
      t=new Token(t.termText().substring(start,end),t.startOffset() + start,t.endOffset() - endOff,t.type());
      t.setPositionIncrement(incr);
    }
  }
 else {
    t.setTermText(t.termText().trim());
  }
  return t;
}
