{
  ResponseBuilder builder=SearchHandler.getResponseBuilder(req);
  if (builder.isDebug()) {
    builder.setDebugInfo(SolrPluginUtils.doStandardDebug(req,builder.getQueryString(),builder.getQuery(),builder.getResults().docList));
    if (builder.getQparser() != null) {
      builder.getQparser().addDebugInfo(builder.getDebugInfo());
    }
    if (null != builder.getDebugInfo()) {
      if (null != builder.getFilters()) {
        builder.getDebugInfo().add("filter_queries",req.getParams().getParams(FQ));
        List<String> fqs=new ArrayList<String>(builder.getFilters().size());
        for (        Query fq : builder.getFilters()) {
          fqs.add(QueryParsing.toString(fq,req.getSchema()));
        }
        builder.getDebugInfo().add("parsed_filter_queries",fqs);
      }
      rsp.add("debug",builder.getDebugInfo());
    }
  }
}
