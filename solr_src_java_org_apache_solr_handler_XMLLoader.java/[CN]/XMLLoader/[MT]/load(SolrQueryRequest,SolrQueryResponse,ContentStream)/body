{
  errHeader="XMLLoader: " + stream.getSourceInfo();
  Reader reader=null;
  try {
    reader=stream.getReader();
    if (XmlUpdateRequestHandler.log.isTraceEnabled()) {
      String body=IOUtils.toString(reader);
      XmlUpdateRequestHandler.log.trace("body",body);
      reader=new StringReader(body);
    }
    XMLStreamReader parser=inputFactory.createXMLStreamReader(reader);
    this.processUpdate(req,processor,parser);
  }
 catch (  XMLStreamException e) {
    throw new SolrException(SolrException.ErrorCode.BAD_REQUEST,e.getMessage(),e);
  }
 finally {
    IOUtils.closeQuietly(reader);
  }
}
