{
  clientConnectionManager=new PoolingHttpClientConnectionManager(HttpClientUtil.getSchemaRegisteryProvider().getSchemaRegistry());
  if (cfg != null) {
    clientConnectionManager.setMaxTotal(cfg.getMaxUpdateConnections());
    clientConnectionManager.setDefaultMaxPerRoute(cfg.getMaxUpdateConnectionsPerHost());
  }
  ModifiableSolrParams clientParams=new ModifiableSolrParams();
  log.info("Creating UpdateShardHandler HTTP client with params: {}",clientParams);
  client=HttpClientUtil.createClient(clientParams,clientConnectionManager);
}
