{
  EntityProcessor sep=new EntityProcessorWrapper(new SqlEntityProcessor(),null,null);
  List<Map<String,Object>> rows=getRows(2);
  VariableResolverImpl vr=new VariableResolverImpl();
  HashMap<String,String> ea=new HashMap<String,String>();
  ea.put("query","SELECT * FROM A");
  ea.put("transformer",T3.class.getName());
  sep.init(getContext(null,vr,getDs(rows),Context.FULL_DUMP,null,ea));
  List<Map<String,Object>> rs=new ArrayList<Map<String,Object>>();
  Map<String,Object> r=null;
  while (true) {
    r=sep.nextRow();
    if (r == null)     break;
    rs.add(r);
  }
  assertEquals(2,rs.size());
  assertNotNull(rs.get(0).get("T3"));
}
