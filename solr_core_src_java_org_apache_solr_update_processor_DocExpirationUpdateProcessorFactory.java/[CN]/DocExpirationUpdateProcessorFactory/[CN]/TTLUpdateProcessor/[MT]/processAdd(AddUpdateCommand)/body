{
  final SolrInputDocument doc=cmd.getSolrInputDocument();
  final String math=doc.containsKey(ttlField) ? doc.getFieldValue(ttlField).toString() : defaultTtl;
  if (null != math) {
    try {
      final DateMathParser dmp=new DateMathParser();
      doc.addField(expireField,dmp.parseMath(math));
    }
 catch (    ParseException pe) {
      throw new SolrException(BAD_REQUEST,"Can't parse ttl as date math: " + math,pe);
    }
  }
  super.processAdd(cmd);
}
