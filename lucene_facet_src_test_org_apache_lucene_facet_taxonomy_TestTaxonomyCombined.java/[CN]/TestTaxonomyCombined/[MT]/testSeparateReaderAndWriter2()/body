{
  Directory indexDir=newDirectory();
  TaxonomyWriter tw=new DirectoryTaxonomyWriter(indexDir);
  tw.commit();
  TaxonomyReader tr=new DirectoryTaxonomyReader(indexDir);
  FacetLabel author=new FacetLabel("Author");
  assertEquals(1,tr.getSize());
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  tw.addCategory(author);
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  assertNull(TaxonomyReader.openIfChanged(tr));
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  tw.commit();
  assertEquals(TaxonomyReader.INVALID_ORDINAL,tr.getOrdinal(author));
  assertEquals(1,tr.getSize());
  TaxonomyReader newTaxoReader=TaxonomyReader.openIfChanged(tr);
  assertNotNull(newTaxoReader);
  tr.close();
  tr=newTaxoReader;
  assertEquals(1,tr.getOrdinal(author));
  assertEquals(2,tr.getSize());
  tw.close();
  tr.close();
  indexDir.close();
}
