{
  File solrXml=new File(SolrTestCaseJ4.TEST_HOME(),"solr-no-core.xml");
  Builder jettyConfig=JettyConfig.builder();
  jettyConfig.waitForLoadingCoresToFinish(null);
  if (multipleBaseDirs) {
    final File baseDirs[]=new File[NUM_SERVERS];
    for (int ii=0; ii < NUM_SERVERS; ++ii) {
      baseDirs[ii]=createTempDir().toFile();
    }
    return new MiniSolrCloudCluster(baseDirs,solrXml,jettyConfig.build(),null);
  }
 else {
    return new MiniSolrCloudCluster(NUM_SERVERS,createTempDir().toFile(),solrXml,jettyConfig.build());
  }
}
