{
  System.setProperty("solr.tests.maxBufferedDocs","100000");
  System.setProperty("solr.tests.maxIndexingThreads","-1");
  System.setProperty("solr.tests.ramBufferSizeMB","100");
  System.setProperty("solr.tests.mergeScheduler","org.apache.lucene.index.ConcurrentMergeScheduler");
  System.setProperty("solr.directoryFactory","solr.RAMDirectoryFactory");
  SolrZkClient zkClient=null;
  try {
    zkClient=new SolrZkClient(miniCluster.getZkServer().getZkAddress(),AbstractZkTestCase.TIMEOUT,45000,null);
    uploadConfigFileToZk(zkClient,configName,"solrconfig.xml",new File(configDir,"solrconfig-tlog.xml"));
    uploadConfigFileToZk(zkClient,configName,"schema.xml",new File(configDir,"schema.xml"));
    uploadConfigFileToZk(zkClient,configName,"solrconfig.snippet.randomindexconfig.xml",new File(configDir,"solrconfig.snippet.randomindexconfig.xml"));
    uploadConfigFileToZk(zkClient,configName,"currency.xml",new File(configDir,"currency.xml"));
    uploadConfigFileToZk(zkClient,configName,"mapping-ISOLatin1Accent.txt",new File(configDir,"mapping-ISOLatin1Accent.txt"));
    uploadConfigFileToZk(zkClient,configName,"old_synonyms.txt",new File(configDir,"old_synonyms.txt"));
    uploadConfigFileToZk(zkClient,configName,"open-exchange-rates.json",new File(configDir,"open-exchange-rates.json"));
    uploadConfigFileToZk(zkClient,configName,"protwords.txt",new File(configDir,"protwords.txt"));
    uploadConfigFileToZk(zkClient,configName,"stopwords.txt",new File(configDir,"stopwords.txt"));
    uploadConfigFileToZk(zkClient,configName,"synonyms.txt",new File(configDir,"synonyms.txt"));
  }
  finally {
    if (zkClient != null)     zkClient.close();
  }
}
